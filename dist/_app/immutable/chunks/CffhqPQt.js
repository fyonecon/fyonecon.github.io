import{x as ge,ad as Ht,ae as Ne,a0 as Gt}from"./CRCNoOQn.js";import{g as Ei}from"./d0rcpz8l.js";import{p as On}from"./XGvdSu4F.js";var Jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ji(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _r={exports:{}},wr={exports:{}},ki;function Zo(){return ki||(ki=1,(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(a,u){return a<<u|a>>>32-u},rotr:function(a,u){return a<<32-u|a>>>u},endian:function(a){if(a.constructor==Number)return i.rotl(a,8)&16711935|i.rotl(a,24)&4278255360;for(var u=0;u<a.length;u++)a[u]=i.endian(a[u]);return a},randomBytes:function(a){for(var u=[];a>0;a--)u.push(Math.floor(Math.random()*256));return u},bytesToWords:function(a){for(var u=[],l=0,p=0;l<a.length;l++,p+=8)u[p>>>5]|=a[l]<<24-p%32;return u},wordsToBytes:function(a){for(var u=[],l=0;l<a.length*32;l+=8)u.push(a[l>>>5]>>>24-l%32&255);return u},bytesToHex:function(a){for(var u=[],l=0;l<a.length;l++)u.push((a[l]>>>4).toString(16)),u.push((a[l]&15).toString(16));return u.join("")},hexToBytes:function(a){for(var u=[],l=0;l<a.length;l+=2)u.push(parseInt(a.substr(l,2),16));return u},bytesToBase64:function(a){for(var u=[],l=0;l<a.length;l+=3)for(var p=a[l]<<16|a[l+1]<<8|a[l+2],S=0;S<4;S++)l*8+S*6<=a.length*8?u.push(t.charAt(p>>>6*(3-S)&63)):u.push("=");return u.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var u=[],l=0,p=0;l<a.length;p=++l%4)p!=0&&u.push((t.indexOf(a.charAt(l-1))&Math.pow(2,-2*p+8)-1)<<p*2|t.indexOf(a.charAt(l))>>>6-p*2);return u}};wr.exports=i})()),wr.exports}var xr,Oi;function Ti(){if(Oi)return xr;Oi=1;var t={utf8:{stringToBytes:function(i){return t.bin.stringToBytes(unescape(encodeURIComponent(i)))},bytesToString:function(i){return decodeURIComponent(escape(t.bin.bytesToString(i)))}},bin:{stringToBytes:function(i){for(var a=[],u=0;u<i.length;u++)a.push(i.charCodeAt(u)&255);return a},bytesToString:function(i){for(var a=[],u=0;u<i.length;u++)a.push(String.fromCharCode(i[u]));return a.join("")}}};return xr=t,xr}var Er,Si;function ea(){if(Si)return Er;Si=1,Er=function(a){return a!=null&&(t(a)||i(a)||!!a._isBuffer)};function t(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function i(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&t(a.slice(0,0))}return Er}var Pi;function ta(){return Pi||(Pi=1,(function(){var t=Zo(),i=Ti().utf8,a=ea(),u=Ti().bin,l=function(p,S){p.constructor==String?S&&S.encoding==="binary"?p=u.stringToBytes(p):p=i.stringToBytes(p):a(p)?p=Array.prototype.slice.call(p,0):!Array.isArray(p)&&p.constructor!==Uint8Array&&(p=p.toString());for(var m=t.bytesToWords(p),B=p.length*8,P=1732584193,b=-271733879,O=-1732584194,A=271733878,D=0;D<m.length;D++)m[D]=(m[D]<<8|m[D]>>>24)&16711935|(m[D]<<24|m[D]>>>8)&4278255360;m[B>>>5]|=128<<B%32,m[(B+64>>>9<<4)+14]=B;for(var H=l._ff,$=l._gg,J=l._hh,ie=l._ii,D=0;D<m.length;D+=16){var de=P,ne=b,Z=O,he=A;P=H(P,b,O,A,m[D+0],7,-680876936),A=H(A,P,b,O,m[D+1],12,-389564586),O=H(O,A,P,b,m[D+2],17,606105819),b=H(b,O,A,P,m[D+3],22,-1044525330),P=H(P,b,O,A,m[D+4],7,-176418897),A=H(A,P,b,O,m[D+5],12,1200080426),O=H(O,A,P,b,m[D+6],17,-1473231341),b=H(b,O,A,P,m[D+7],22,-45705983),P=H(P,b,O,A,m[D+8],7,1770035416),A=H(A,P,b,O,m[D+9],12,-1958414417),O=H(O,A,P,b,m[D+10],17,-42063),b=H(b,O,A,P,m[D+11],22,-1990404162),P=H(P,b,O,A,m[D+12],7,1804603682),A=H(A,P,b,O,m[D+13],12,-40341101),O=H(O,A,P,b,m[D+14],17,-1502002290),b=H(b,O,A,P,m[D+15],22,1236535329),P=$(P,b,O,A,m[D+1],5,-165796510),A=$(A,P,b,O,m[D+6],9,-1069501632),O=$(O,A,P,b,m[D+11],14,643717713),b=$(b,O,A,P,m[D+0],20,-373897302),P=$(P,b,O,A,m[D+5],5,-701558691),A=$(A,P,b,O,m[D+10],9,38016083),O=$(O,A,P,b,m[D+15],14,-660478335),b=$(b,O,A,P,m[D+4],20,-405537848),P=$(P,b,O,A,m[D+9],5,568446438),A=$(A,P,b,O,m[D+14],9,-1019803690),O=$(O,A,P,b,m[D+3],14,-187363961),b=$(b,O,A,P,m[D+8],20,1163531501),P=$(P,b,O,A,m[D+13],5,-1444681467),A=$(A,P,b,O,m[D+2],9,-51403784),O=$(O,A,P,b,m[D+7],14,1735328473),b=$(b,O,A,P,m[D+12],20,-1926607734),P=J(P,b,O,A,m[D+5],4,-378558),A=J(A,P,b,O,m[D+8],11,-2022574463),O=J(O,A,P,b,m[D+11],16,1839030562),b=J(b,O,A,P,m[D+14],23,-35309556),P=J(P,b,O,A,m[D+1],4,-1530992060),A=J(A,P,b,O,m[D+4],11,1272893353),O=J(O,A,P,b,m[D+7],16,-155497632),b=J(b,O,A,P,m[D+10],23,-1094730640),P=J(P,b,O,A,m[D+13],4,681279174),A=J(A,P,b,O,m[D+0],11,-358537222),O=J(O,A,P,b,m[D+3],16,-722521979),b=J(b,O,A,P,m[D+6],23,76029189),P=J(P,b,O,A,m[D+9],4,-640364487),A=J(A,P,b,O,m[D+12],11,-421815835),O=J(O,A,P,b,m[D+15],16,530742520),b=J(b,O,A,P,m[D+2],23,-995338651),P=ie(P,b,O,A,m[D+0],6,-198630844),A=ie(A,P,b,O,m[D+7],10,1126891415),O=ie(O,A,P,b,m[D+14],15,-1416354905),b=ie(b,O,A,P,m[D+5],21,-57434055),P=ie(P,b,O,A,m[D+12],6,1700485571),A=ie(A,P,b,O,m[D+3],10,-1894986606),O=ie(O,A,P,b,m[D+10],15,-1051523),b=ie(b,O,A,P,m[D+1],21,-2054922799),P=ie(P,b,O,A,m[D+8],6,1873313359),A=ie(A,P,b,O,m[D+15],10,-30611744),O=ie(O,A,P,b,m[D+6],15,-1560198380),b=ie(b,O,A,P,m[D+13],21,1309151649),P=ie(P,b,O,A,m[D+4],6,-145523070),A=ie(A,P,b,O,m[D+11],10,-1120210379),O=ie(O,A,P,b,m[D+2],15,718787259),b=ie(b,O,A,P,m[D+9],21,-343485551),P=P+de>>>0,b=b+ne>>>0,O=O+Z>>>0,A=A+he>>>0}return t.endian([P,b,O,A])};l._ff=function(p,S,m,B,P,b,O){var A=p+(S&m|~S&B)+(P>>>0)+O;return(A<<b|A>>>32-b)+S},l._gg=function(p,S,m,B,P,b,O){var A=p+(S&B|m&~B)+(P>>>0)+O;return(A<<b|A>>>32-b)+S},l._hh=function(p,S,m,B,P,b,O){var A=p+(S^m^B)+(P>>>0)+O;return(A<<b|A>>>32-b)+S},l._ii=function(p,S,m,B,P,b,O){var A=p+(m^(S|~B))+(P>>>0)+O;return(A<<b|A>>>32-b)+S},l._blocksize=16,l._digestsize=16,_r.exports=function(p,S){if(p==null)throw new Error("Illegal argument "+p);var m=t.wordsToBytes(l(p,S));return S&&S.asBytes?m:S&&S.asString?u.bytesToString(m):t.bytesToHex(m)}})()),_r.exports}var na=ta();const ra=Ji(na),$t={debug:!1,app:{app_name:"Ginthon",app_class:"ginthon_sv_",app_version:"1.6.5"},sys:{backend:"py",base_route:"/dist",home_route:"/home"},api:{js_call_py_url:"https://127.0.0.1:9750/api/js_call_py",api_host:"https://127.0.0.1:9750"}},Fe={test:{zh:"ÊµãËØï",en:"Test",jp:"",fr:"",de:"",ru:"",es:"",ko:"",vi:""},_null:{zh:" -Á©∫- ",en:" -Empty- ",jp:" -Null- ",fr:" -Null- ",de:" -Null- ",ru:" -Null- ",es:" -Null- ",ko:" -Null- ",vi:" -Null- "},show_window:{zh:"ÊòæÁ§∫ËßÜÁ™ó",en:"Show Window"},exit_app:{zh:"ÈÄÄÂá∫Á®ãÂ∫è",en:"Exit App"},about_app:{zh:"ÂÖ≥‰∫éÁ®ãÂ∫è",en:"About App"},_404:{zh:"404 È°µÈù¢‰∏çÂ≠òÂú®",en:"404 Not Found"},Example:{zh:"‰æãÂ≠ê",en:"Example"},Home:{zh:"‰∏ªÈ°µ",en:"Home"},Settings:{zh:"ËÆæÁΩÆ",en:"Settings"},About:{zh:"ÂÖ≥‰∫é",en:"About"},User:{zh:"ÊàëÁöÑ",en:"Me"},user_tips:{zh:"ËÆæÁΩÆ",en:"Settings"},user_need_login:{zh:"ËØ∑ÁôªÂΩï...",en:"Please login..."},ThemeModel:{zh:"‰∏ªÈ¢ò",en:"Themes"},ITHome:{zh:"Áà¨IT‰πãÂÆ∂",en:"Spider ITHome"},PlayAudio:{zh:"Êí≠ÊîæÈü≥È¢ë",en:"Play Audio"},reload_window:{zh:"ÈáçËΩΩÈ°µÈù¢",en:"Reload Page"},reload_window_btn:{zh:"Èáç ËΩΩ",en:"Reload"},btn_cancel:{zh:"ÂèñÊ∂à",en:"Cancel"},btn_save:{zh:"‰øùÂ≠ò",en:"Save"},btn_ok:{zh:"ÊòØÁöÑ",en:"OK"},btn_update:{zh:"Êõ¥Êñ∞",en:"Update"},a_click_tip_see_detail:{zh:"ÁÇπÂáªÊü•ÁúãËØ¶ÊÉÖ",en:"See Details"},a_click_tip_back_home:{zh:"ËøîÂõû‰∏ªÈ°µ",en:"Back Home"},confirm_change_language_tip:{zh:"ÂàáÊç¢ËØ≠Ë®Ä ÔºüÔºàÈ°µÈù¢Â∞Ü‰ºöÂà∑Êñ∞.Ôºâ",en:"Change language ÔºüÔºàThe page will refresh.Ôºâ",jp:"Ë®ÄË™û„ÇíÂàá„ÇäÊõø„Åà„Åæ„Åô„ÅãÔºüÔºà„Éö„Éº„Ç∏„ÅåÊõ¥Êñ∞„Åï„Çå„Åæ„Åô.Ôºâ",fr:"Changer de langue? (la page sera actualis√©e.)",de:"Sprache wechseln?  (Die Seite wird aktualisiert.)",ru:"–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —è–∑—ã–∫? (–°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∞.)",es:"¬øCambiar de idioma? (la p√°gina se actualizar√°).",ko:"Ïñ∏Ïñ¥ Ï†ÑÌôò?ÌéòÏù¥ÏßÄÍ∞Ä ÏÉàÎ°ú Í≥†Ï≥êÏßëÎãàÎã§.",vi:"ƒê·ªïi ng√¥n ng·ªØ? (Trang s·∫Ω ƒë∆∞·ª£c l√†m m·ªõi.)"},sys_default:{zh:"Ë∑üÈöèÁ≥ªÁªü",en:"Same system"},app_info:{zh:"ËΩØ‰ª∂‰ø°ÊÅØ",en:"App Information"},theme_model_light:{zh:"‰∫Æ",en:"Light"},theme_model_dark:{zh:"Êöó",en:"Dark"},playing:{zh:"Ê≠£Âú®Êí≠Êîæ",en:"Playing"},play_paused:{zh:"Â∑≤ÊöÇÂÅú„ÄÇ",en:"Paused."},play_add_new_fir:{zh:"Ê∑ªÂä†Êú¨Âú∞Êñá‰ª∂Â§π",en:"Add a new local folder"},play_update_play_list:{zh:"Êõ¥Êñ∞Êí≠ÊîæÂàóË°®",en:"Update play list"},updated:{zh:"Â∑≤Êõ¥Êñ∞",en:"Updated"},saved:{zh:"Â∑≤‰øùÂ≠ò",en:"Saved"},added:{zh:"Â∑≤Ê∑ªÂä†",en:"Added"},input_null:{zh:"ËæìÂÖ•‰∏∫Á©∫",en:"Input is empty"},null_content:{zh:"Á©∫ÂÜÖÂÆπ",en:"Content is empty"},error:{zh:"Âá∫Èîô",en:"Error"},find_btn:{zh:"Êü• Êâæ",en:"Find"},search_btn:{zh:"Êêú Á¥¢",en:"Search"},input_placeholder_find:{zh:"ËæìÂÖ•Êü•Êâæ",en:"Find..."},input_placeholder_search:{zh:"ËæìÂÖ•ÂÖ≥ÈîÆËØç",en:"Search keyword..."},remove:{zh:"ÁßªÈô§",en:"Remove"},remove_help_1:{zh:"ÁßªÈô§ËØ•Êñá‰ª∂Â§πÔºà‰∏ç‰ºö‰ªéÊú¨Êú∫Âà†Èô§ËØ•Êñá‰ª∂Â§πÔºâ",en:"Remove the folder (The folder will not be deleted from the local machine)"},del:{zh:"Âà†Èô§",en:"Del"},edit:{zh:"ÁºñËæë",en:"Edit"},share:{zh:"ÂàÜ‰∫´",en:"Share"},qr:{zh:"‰∫åÁª¥Á†Å",en:"QRCode"},input_placeholder_add_dir:{zh:"ËæìÂÖ•Êñá‰ª∂Â§πË∑ØÂæÑ",en:"Enter folder path"},runtime_error_alert:{zh:"‚ö†Ô∏è Á≥ªÁªüËøêË°åÊù°‰ª∂‰∏çÁ¨¶ÂêàÔºåÂ∑≤ÁªèÈòªÊ≠¢ËÆøÈóÆÂÜÖÂÆπ.",en:"‚ö†Ô∏è The system operating conditions do not meet the requirements, and access to the content has been blocked."},runtime_cn_chat_alert:{zh:"üòä ËØ∑‰∏çË¶ÅÂú®„ÄåÂæÆ‰ø°„ÄÅQQ„ÄÅÈíâÈíâ„ÄÅÈ£û‰π¶„ÄÅ‰ºÅ‰∏öÂæÆ‰ø°„Äç‰∏≠ÊâìÂºÄÊú¨ÁΩëÁ´ôÔºåËØ∑‰ΩøÁî®Â§ñÈÉ®ÊµèËßàÂô®„ÄÇ",en:'üòä Please do not open this website within "WeChat, QQ, DingTalk, Feishu(Lark), or Enterprise WeChat." Please use an external browser instead.'}},ia=function(t,i={},a=10){let u=0,l="",p={};const S=new URLSearchParams(i);return S.toString()&&(t=t+"?"+S.toString()),new Promise(async m=>{const B=new AbortController,P=(a<=0?10:a)*1e3,b=setTimeout(()=>{B.abort()},P);try{const O=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"},mode:"no-cors",cache:"no-cache",signal:B.signal});if(clearTimeout(b),!O.ok)console.warn("response.ok=",O,O.ok),u=0,l="GET Status Error.",p={api_url:t,status:O.status,statusText:O.statusText,error:"GETÊé•Âè£ËÆøÈóÆÊàêÂäüÔºå‰ΩÜÊé•Âè£ËøîÂõûÁä∂ÊÄÅÈîôËØØ"},m({state:u,msg:l,content:p});else{const A=O.headers.get("content-type");let D;A&&A.includes("application/json")?D=await O.json():A&&A.includes("text/")?D=await O.text():A&&A.includes("form-data")?D=await O.formData():A&&A.includes("blob")?D=await O.blob():D=await O.text(),m(D)}}catch(O){clearTimeout(b),O.name==="AbortError"?(u=404,l="GET Timeout Error.",p={api_url:t,error:`ËØ∑Ê±ÇË∂ÖÊó∂Ôºà${a}ÁßíÔºâ`,error_type:"AbortError"}):(u=404,l="GET Broken.",p={api_url:t,error:O.message||O,error_type:O.name||"NetworkError"}),m({state:u,msg:l,content:p})}})};var Cn={exports:{}},oa=Cn.exports,Ai;function aa(){return Ai||(Ai=1,(function(t,i){(function(a,u){t.exports=u()})(oa,function(){var a=function(e,n){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])})(e,n)},u=function(){return(u=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++)for(var s in n=arguments[r])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e}).apply(this,arguments)};function l(e,n,r){for(var o,s=0,c=n.length;s<c;s++)!o&&s in n||((o=o||Array.prototype.slice.call(n,0,s))[s]=n[s]);return e.concat(o||Array.prototype.slice.call(n))}var p=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Jo,S=Object.keys,m=Array.isArray;function B(e,n){return typeof n!="object"||S(n).forEach(function(r){e[r]=n[r]}),e}typeof Promise>"u"||p.Promise||(p.Promise=Promise);var P=Object.getPrototypeOf,b={}.hasOwnProperty;function O(e,n){return b.call(e,n)}function A(e,n){typeof n=="function"&&(n=n(P(e))),(typeof Reflect>"u"?S:Reflect.ownKeys)(n).forEach(function(r){H(e,r,n[r])})}var D=Object.defineProperty;function H(e,n,r,o){D(e,n,B(r&&O(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},o))}function $(e){return{from:function(n){return e.prototype=Object.create(n.prototype),H(e.prototype,"constructor",e),{extend:A.bind(null,e.prototype)}}}}var J=Object.getOwnPropertyDescriptor,ie=[].slice;function de(e,n,r){return ie.call(e,n,r)}function ne(e,n){return n(e)}function Z(e){if(!e)throw new Error("Assertion Failed")}function he(e){p.setImmediate?setImmediate(e):setTimeout(e,0)}function pe(e,n){if(typeof n=="string"&&O(e,n))return e[n];if(!n)return e;if(typeof n!="string"){for(var r=[],o=0,s=n.length;o<s;++o){var c=pe(e,n[o]);r.push(c)}return r}var f=n.indexOf(".");if(f!==-1){var d=e[n.substr(0,f)];return d==null?void 0:pe(d,n.substr(f+1))}}function se(e,n,r){if(e&&n!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof n!="string"&&"length"in n){Z(typeof r!="string"&&"length"in r);for(var o=0,s=n.length;o<s;++o)se(e,n[o],r[o])}else{var c,f,d=n.indexOf(".");d!==-1?(c=n.substr(0,d),(f=n.substr(d+1))===""?r===void 0?m(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=r:se(d=!(d=e[c])||!O(e,c)?e[c]={}:d,f,r)):r===void 0?m(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=r}}function lt(e){var n,r={};for(n in e)O(e,n)&&(r[n]=e[n]);return r}var Ge=[].concat;function Pt(e){return Ge.apply([],e)}var Je="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Pt([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(n){return n+e+"Array"})}))).filter(function(e){return p[e]}),Fn=new Set(Je.map(function(e){return p[e]})),W=null;function V(e){return W=new WeakMap,e=(function n(r){if(!r||typeof r!="object")return r;var o=W.get(r);if(o)return o;if(m(r)){o=[],W.set(r,o);for(var s=0,c=r.length;s<c;++s)o.push(n(r[s]))}else if(Fn.has(r.constructor))o=r;else{var f,d=P(r);for(f in o=d===Object.prototype?{}:Object.create(d),W.set(r,o),r)O(r,f)&&(o[f]=n(r[f]))}return o})(e),W=null,e}var Ie={}.toString;function xe(e){return Ie.call(e).slice(8,-1)}var Me=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ye=typeof Me=="symbol"?function(e){var n;return e!=null&&(n=e[Me])&&n.apply(e)}:function(){return null};function Be(e,n){return n=e.indexOf(n),0<=n&&e.splice(n,1),0<=n}var Xe={};function fe(e){var n,r,o,s;if(arguments.length===1){if(m(e))return e.slice();if(this===Xe&&typeof e=="string")return[e];if(s=Ye(e)){for(r=[];!(o=s.next()).done;)r.push(o.value);return r}if(e==null)return[e];if(typeof(n=e.length)!="number")return[e];for(r=new Array(n);n--;)r[n]=e[n];return r}for(n=arguments.length,r=new Array(n);n--;)r[n]=arguments[n];return r}var Se=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ct=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Pe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ct),_o={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ft(e,n){this.name=e,this.message=n}function qr(e,n){return e+". Errors: "+Object.keys(n).map(function(r){return n[r].toString()}).filter(function(r,o,s){return s.indexOf(r)===o}).join(`
`)}function Xt(e,n,r,o){this.failures=n,this.failedKeys=o,this.successCount=r,this.message=qr(e,n)}function dt(e,n){this.name="BulkError",this.failures=Object.keys(n).map(function(r){return n[r]}),this.failuresByPos=n,this.message=qr(e,this.failures)}$(ft).from(Error).extend({toString:function(){return this.name+": "+this.message}}),$(Xt).from(ft),$(dt).from(ft);var Nn=Pe.reduce(function(e,n){return e[n]=n+"Error",e},{}),wo=ft,G=Pe.reduce(function(e,n){var r=n+"Error";function o(s,c){this.name=r,s?typeof s=="string"?(this.message="".concat(s).concat(c?`
 `+c:""),this.inner=c||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=_o[n]||r,this.inner=null)}return $(o).from(wo),e[n]=o,e},{});G.Syntax=SyntaxError,G.Type=TypeError,G.Range=RangeError;var Lr=Ct.reduce(function(e,n){return e[n+"Error"]=G[n],e},{}),Qt=Pe.reduce(function(e,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(e[n+"Error"]=G[n]),e},{});function oe(){}function At(e){return e}function xo(e,n){return e==null||e===At?n:function(r){return n(e(r))}}function Qe(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function Eo(e,n){return e===oe?n:function(){var r=e.apply(this,arguments);r!==void 0&&(arguments[0]=r);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var c=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Qe(o,this.onsuccess):o),s&&(this.onerror=this.onerror?Qe(s,this.onerror):s),c!==void 0?c:r}}function ko(e,n){return e===oe?n:function(){e.apply(this,arguments);var r=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?Qe(r,this.onsuccess):r),o&&(this.onerror=this.onerror?Qe(o,this.onerror):o)}}function Oo(e,n){return e===oe?n:function(r){var o=e.apply(this,arguments);B(r,o);var s=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,r=n.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?Qe(s,this.onsuccess):s),c&&(this.onerror=this.onerror?Qe(c,this.onerror):c),o===void 0?r===void 0?void 0:r:B(o,r)}}function To(e,n){return e===oe?n:function(){return n.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Mn(e,n){return e===oe?n:function(){var r=e.apply(this,arguments);if(r&&typeof r.then=="function"){for(var o=this,s=arguments.length,c=new Array(s);s--;)c[s]=arguments[s];return r.then(function(){return n.apply(o,c)})}return n.apply(this,arguments)}}Qt.ModifyError=Xt,Qt.DexieError=ft,Qt.BulkError=dt;var Ce=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function zr(e){Ce=e}var It={},$r=100,Je=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,P(e),e];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,P(n),e]})(),Ct=Je[0],Pe=Je[1],Je=Je[2],Pe=Pe&&Pe.then,Ze=Ct&&Ct.constructor,qn=!!Je,Dt=function(e,n){Rt.push([e,n]),Jt&&(queueMicrotask(Po),Jt=!1)},Ln=!0,Jt=!0,et=[],Zt=[],zn=At,qe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:oe,pgp:!1,env:{},finalize:oe},U=qe,Rt=[],tt=0,en=[];function L(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=U;if(typeof e!="function"){if(e!==It)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Wn(this,this._value))}this._state=null,this._value=null,++n.ref,(function r(o,s){try{s(function(c){if(o._state===null){if(c===o)throw new TypeError("A promise cannot be resolved with itself.");var f=o._lib&&ht();c&&typeof c.then=="function"?r(o,function(d,y){c instanceof L?c._then(d,y):c.then(d,y)}):(o._state=!0,o._value=c,Ur(o)),f&&pt()}},Wn.bind(null,o))}catch(c){Wn(o,c)}})(this,e)}var $n={get:function(){var e=U,n=on;function r(o,s){var c=this,f=!e.global&&(e!==U||n!==on),d=f&&!ze(),y=new L(function(g,x){Un(c,new Wr(Hr(o,e,f,d),Hr(s,e,f,d),g,x,e))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return r.prototype=It,r},set:function(e){H(this,"then",e&&e.prototype===It?$n:{get:function(){return e},set:$n.set})}};function Wr(e,n,r,o,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof n=="function"?n:null,this.resolve=r,this.reject=o,this.psd=s}function Wn(e,n){var r,o;Zt.push(n),e._state===null&&(r=e._lib&&ht(),n=zn(n),e._state=!1,e._value=n,o=e,et.some(function(s){return s._value===o._value})||et.push(o),Ur(e),r&&pt())}function Ur(e){var n=e._listeners;e._listeners=[];for(var r=0,o=n.length;r<o;++r)Un(e,n[r]);var s=e._PSD;--s.ref||s.finalize(),tt===0&&(++tt,Dt(function(){--tt==0&&Vn()},[]))}function Un(e,n){if(e._state!==null){var r=e._state?n.onFulfilled:n.onRejected;if(r===null)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++tt,Dt(So,[r,e,n])}else e._listeners.push(n)}function So(e,n,r){try{var o,s=n._value;!n._state&&Zt.length&&(Zt=[]),o=Ce&&n._consoleTask?n._consoleTask.run(function(){return e(s)}):e(s),n._state||Zt.indexOf(s)!==-1||(function(c){for(var f=et.length;f;)if(et[--f]._value===c._value)return et.splice(f,1)})(n),r.resolve(o)}catch(c){r.reject(c)}finally{--tt==0&&Vn(),--r.psd.ref||r.psd.finalize()}}function Po(){nt(qe,function(){ht()&&pt()})}function ht(){var e=Ln;return Jt=Ln=!1,e}function pt(){var e,n,r;do for(;0<Rt.length;)for(e=Rt,Rt=[],r=e.length,n=0;n<r;++n){var o=e[n];o[0].apply(null,o[1])}while(0<Rt.length);Jt=Ln=!0}function Vn(){var e=et;et=[],e.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=en.slice(0),r=n.length;r;)n[--r]()}function tn(e){return new L(It,!1,e)}function ue(e,n){var r=U;return function(){var o=ht(),s=U;try{return $e(r,!0),e.apply(this,arguments)}catch(c){n&&n(c)}finally{$e(s,!1),o&&pt()}}}A(L.prototype,{then:$n,_then:function(e,n){Un(this,new Wr(null,null,e,n,U))},catch:function(e){if(arguments.length===1)return this.then(null,e);var n=e,r=arguments[1];return typeof n=="function"?this.then(null,function(o){return(o instanceof n?r:tn)(o)}):this.then(null,function(o){return(o&&o.name===n?r:tn)(o)})},finally:function(e){return this.then(function(n){return L.resolve(e()).then(function(){return n})},function(n){return L.resolve(e()).then(function(){return tn(n)})})},timeout:function(e,n){var r=this;return e<1/0?new L(function(o,s){var c=setTimeout(function(){return s(new G.Timeout(n))},e);r.then(o,s).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&H(L.prototype,Symbol.toStringTag,"Dexie.Promise"),qe.env=Vr(),A(L,{all:function(){var e=fe.apply(null,arguments).map(an);return new L(function(n,r){e.length===0&&n([]);var o=e.length;e.forEach(function(s,c){return L.resolve(s).then(function(f){e[c]=f,--o||n(e)},r)})})},resolve:function(e){return e instanceof L?e:e&&typeof e.then=="function"?new L(function(n,r){e.then(n,r)}):new L(It,!0,e)},reject:tn,race:function(){var e=fe.apply(null,arguments).map(an);return new L(function(n,r){e.map(function(o){return L.resolve(o).then(n,r)})})},PSD:{get:function(){return U},set:function(e){return U=e}},totalEchoes:{get:function(){return on}},newPSD:Le,usePSD:nt,scheduler:{get:function(){return Dt},set:function(e){Dt=e}},rejectionMapper:{get:function(){return zn},set:function(e){zn=e}},follow:function(e,n){return new L(function(r,o){return Le(function(s,c){var f=U;f.unhandleds=[],f.onunhandled=c,f.finalize=Qe(function(){var d,y=this;d=function(){y.unhandleds.length===0?s():c(y.unhandleds[0])},en.push(function g(){d(),en.splice(en.indexOf(g),1)}),++tt,Dt(function(){--tt==0&&Vn()},[])},f.finalize),e()},n,r,o)})}}),Ze&&(Ze.allSettled&&H(L,"allSettled",function(){var e=fe.apply(null,arguments).map(an);return new L(function(n){e.length===0&&n([]);var r=e.length,o=new Array(r);e.forEach(function(s,c){return L.resolve(s).then(function(f){return o[c]={status:"fulfilled",value:f}},function(f){return o[c]={status:"rejected",reason:f}}).then(function(){return--r||n(o)})})})}),Ze.any&&typeof AggregateError<"u"&&H(L,"any",function(){var e=fe.apply(null,arguments).map(an);return new L(function(n,r){e.length===0&&r(new AggregateError([]));var o=e.length,s=new Array(o);e.forEach(function(c,f){return L.resolve(c).then(function(d){return n(d)},function(d){s[f]=d,--o||r(new AggregateError(s))})})})}),Ze.withResolvers&&(L.withResolvers=Ze.withResolvers));var ye={awaits:0,echoes:0,id:0},Ao=0,nn=[],rn=0,on=0,Io=0;function Le(e,n,r,o){var s=U,c=Object.create(s);return c.parent=s,c.ref=0,c.global=!1,c.id=++Io,qe.env,c.env=qn?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject}:{},n&&B(c,n),++s.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},o=nt(c,e,r,o),c.ref===0&&c.finalize(),o}function yt(){return ye.id||(ye.id=++Ao),++ye.awaits,ye.echoes+=$r,ye.id}function ze(){return!!ye.awaits&&(--ye.awaits==0&&(ye.id=0),ye.echoes=ye.awaits*$r,!0)}function an(e){return ye.echoes&&e&&e.constructor===Ze?(yt(),e.then(function(n){return ze(),n},function(n){return ze(),ce(n)})):e}function Co(){var e=nn[nn.length-1];nn.pop(),$e(e,!1)}function $e(e,n){var r,o=U;(n?!ye.echoes||rn++&&e===U:!rn||--rn&&e===U)||queueMicrotask(n?(function(s){++on,ye.echoes&&--ye.echoes!=0||(ye.echoes=ye.awaits=ye.id=0),nn.push(U),$e(s,!0)}).bind(null,e):Co),e!==U&&(U=e,o===qe&&(qe.env=Vr()),qn&&(r=qe.env.Promise,n=e.env,(o.global||e.global)&&(Object.defineProperty(p,"Promise",n.PromiseProp),r.all=n.all,r.race=n.race,r.resolve=n.resolve,r.reject=n.reject,n.allSettled&&(r.allSettled=n.allSettled),n.any&&(r.any=n.any))))}function Vr(){var e=p.Promise;return qn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(p,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function nt(e,n,r,o,s){var c=U;try{return $e(e,!0),n(r,o,s)}finally{$e(c,!1)}}function Hr(e,n,r,o){return typeof e!="function"?e:function(){var s=U;r&&yt(),$e(n,!0);try{return e.apply(this,arguments)}finally{$e(s,!1),o&&queueMicrotask(ze)}}}function Hn(e){Promise===Ze&&ye.echoes===0?rn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Pe).indexOf("[native code]")===-1&&(yt=ze=oe);var ce=L.reject,rt="Ôøø",je="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Gr="String expected.",mt=[],sn="__dbnames",Gn="readonly",Yn="readwrite";function it(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}var Yr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function un(e){return typeof e!="string"||/\./.test(e)?function(n){return n}:function(n){return n[e]===void 0&&e in n&&delete(n=V(n))[e],n}}function Xr(){throw G.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function te(e,n){try{var r=Qr(e),o=Qr(n);if(r!==o)return r==="Array"?1:o==="Array"?-1:r==="binary"?1:o==="binary"?-1:r==="string"?1:o==="string"?-1:r==="Date"?1:o!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return n<e?1:e<n?-1:0;case"binary":return(function(s,c){for(var f=s.length,d=c.length,y=f<d?f:d,g=0;g<y;++g)if(s[g]!==c[g])return s[g]<c[g]?-1:1;return f===d?0:f<d?-1:1})(Jr(e),Jr(n));case"Array":return(function(s,c){for(var f=s.length,d=c.length,y=f<d?f:d,g=0;g<y;++g){var x=te(s[g],c[g]);if(x!==0)return x}return f===d?0:f<d?-1:1})(e,n)}}catch{}return NaN}function Qr(e){var n=typeof e;return n!="object"?n:ArrayBuffer.isView(e)?"binary":(e=xe(e),e==="ArrayBuffer"?"binary":e)}function Jr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function cn(e,n,r){var o=e.schema.yProps;return o?(n&&0<r.numFailures&&(n=n.filter(function(s,c){return!r.failures[c]})),Promise.all(o.map(function(s){return s=s.updatesTable,n?e.db.table(s).where("k").anyOf(n).delete():e.db.table(s).clear()})).then(function(){return r})):r}var Bt=(Zr.prototype.execute=function(e){var n=this["@@propmod"];if(n.add!==void 0){var r=n.add;if(m(r))return l(l([],m(e)?e:[],!0),r).sort();if(typeof r=="number")return(Number(e)||0)+r;if(typeof r=="bigint")try{return BigInt(e)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(n.remove!==void 0){var o=n.remove;if(m(o))return m(e)?e.filter(function(s){return!o.includes(s)}).sort():[];if(typeof o=="number")return Number(e)-o;if(typeof o=="bigint")try{return BigInt(e)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return r=(r=n.replacePrefix)===null||r===void 0?void 0:r[0],r&&typeof e=="string"&&e.startsWith(r)?n.replacePrefix[1]+e.substring(r.length):e},Zr);function Zr(e){this["@@propmod"]=e}function ei(e,n){for(var r=S(n),o=r.length,s=!1,c=0;c<o;++c){var f=r[c],d=n[f],y=pe(e,f);d instanceof Bt?(se(e,f,d.execute(y)),s=!0):y!==d&&(se(e,f,d),s=!0)}return s}var ti=(ae.prototype._trans=function(e,n,r){var o=this._tx||U.trans,s=this.name,c=Ce&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function f(g,x,h){if(!h.schema[s])throw new G.NotFound("Table "+s+" not part of transaction");return n(h.idbtrans,h)}var d=ht();try{var y=o&&o.db._novip===this.db._novip?o===U.trans?o._promise(e,f,r):Le(function(){return o._promise(e,f,r)},{trans:o,transless:U.transless||U}):(function g(x,h,k,v){if(x.idbdb&&(x._state.openComplete||U.letThrough||x._vip)){var _=x._createTransaction(h,k,x._dbSchema);try{_.create(),x._state.PR1398_maxLoop=3}catch(w){return w.name===Nn.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return g(x,h,k,v)})):ce(w)}return _._promise(h,function(w,E){return Le(function(){return U.trans=_,v(w,E,_)})}).then(function(w){if(h==="readwrite")try{_.idbtrans.commit()}catch{}return h==="readonly"?w:_._completion.then(function(){return w})})}if(x._state.openComplete)return ce(new G.DatabaseClosed(x._state.dbOpenError));if(!x._state.isBeingOpened){if(!x._state.autoOpen)return ce(new G.DatabaseClosed);x.open().catch(oe)}return x._state.dbReadyPromise.then(function(){return g(x,h,k,v)})})(this.db,e,[this.name],f);return c&&(y._consoleTask=c,y=y.catch(function(g){return console.trace(g),ce(g)})),y}finally{d&&pt()}},ae.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):e==null?ce(new G.Type("Invalid argument to Table.get()")):this._trans("readonly",function(o){return r.core.get({trans:o,key:e}).then(function(s){return r.hook.reading.fire(s)})}).then(n)},ae.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(m(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var n=S(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(d){if(d.compound&&n.every(function(g){return 0<=d.keyPath.indexOf(g)})){for(var y=0;y<n.length;++y)if(n.indexOf(d.keyPath[y])===-1)return!1;return!0}return!1}).sort(function(d,y){return d.keyPath.length-y.keyPath.length})[0];if(r&&this.db._maxKey!==rt){var c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(function(y){return e[y]}))}!r&&Ce&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var o=this.schema.idxByName;function s(d,y){return te(d,y)===0}var f=n.reduce(function(h,y){var g=h[0],x=h[1],h=o[y],k=e[y];return[g||h,g||!h?it(x,h&&h.multi?function(v){return v=pe(v,y),m(v)&&v.some(function(_){return s(k,_)})}:function(v){return s(k,pe(v,y))}):x]},[null,null]),c=f[0],f=f[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(f):r?this.filter(f):this.where(n).equals("")},ae.prototype.filter=function(e){return this.toCollection().and(e)},ae.prototype.count=function(e){return this.toCollection().count(e)},ae.prototype.offset=function(e){return this.toCollection().offset(e)},ae.prototype.limit=function(e){return this.toCollection().limit(e)},ae.prototype.each=function(e){return this.toCollection().each(e)},ae.prototype.toArray=function(e){return this.toCollection().toArray(e)},ae.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ae.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,m(e)?"[".concat(e.join("+"),"]"):e))},ae.prototype.reverse=function(){return this.toCollection().reverse()},ae.prototype.mapToClass=function(e){var n,r=this.db,o=this.name;function s(){return n!==null&&n.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Xr&&((function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function x(){this.constructor=y}a(y,g),y.prototype=g===null?Object.create(g):(x.prototype=g.prototype,new x)})(s,n=e),Object.defineProperty(s.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),s.prototype.table=function(){return o},e=s);for(var c=new Set,f=e.prototype;f;f=P(f))Object.getOwnPropertyNames(f).forEach(function(y){return c.add(y)});function d(y){if(!y)return y;var g,x=Object.create(e.prototype);for(g in y)if(!c.has(g))try{x[g]=y[g]}catch{}return x}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=d,this.hook("reading",d),e},ae.prototype.defineClass=function(){return this.mapToClass(function(e){B(this,e)})},ae.prototype.add=function(e,n){var r=this,o=this.schema.primKey,s=o.auto,c=o.keyPath,f=e;return c&&s&&(f=un(c)(e)),this._trans("readwrite",function(d){return r.core.mutate({trans:d,type:"add",keys:n!=null?[n]:null,values:[f]})}).then(function(d){return d.numFailures?L.reject(d.failures[0]):d.lastResult}).then(function(d){if(c)try{se(e,c,d)}catch{}return d})},ae.prototype.upsert=function(e,n){var r=this,o=this.schema.primKey.keyPath;return this._trans("readwrite",function(s){return r.core.get({trans:s,key:e}).then(function(c){var f=c??{};return ei(f,n),o&&se(f,o,e),r.core.mutate({trans:s,type:"put",values:[f],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[n]}}).then(function(d){return d.numFailures?L.reject(d.failures[0]):!!c})})})},ae.prototype.update=function(e,n){return typeof e!="object"||m(e)?this.where(":id").equals(e).modify(n):(e=pe(e,this.schema.primKey.keyPath),e===void 0?ce(new G.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(n))},ae.prototype.put=function(e,n){var r=this,o=this.schema.primKey,s=o.auto,c=o.keyPath,f=e;return c&&s&&(f=un(c)(e)),this._trans("readwrite",function(d){return r.core.mutate({trans:d,type:"put",values:[f],keys:n!=null?[n]:null})}).then(function(d){return d.numFailures?L.reject(d.failures[0]):d.lastResult}).then(function(d){if(c)try{se(e,c,d)}catch{}return d})},ae.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(o){return cn(n,[e],o)}).then(function(o){return o.numFailures?L.reject(o.failures[0]):void 0})})},ae.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:Yr}).then(function(r){return cn(e,null,r)})}).then(function(n){return n.numFailures?L.reject(n.failures[0]):void 0})},ae.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(o){return o.map(function(s){return n.hook.reading.fire(s)})})})},ae.prototype.bulkAdd=function(e,n,r){var o=this,s=Array.isArray(n)?n:void 0,c=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",function(f){var g=o.schema.primKey,d=g.auto,g=g.keyPath;if(g&&s)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,g=g&&d?e.map(un(g)):e;return o.core.mutate({trans:f,type:"add",keys:s,values:g,wantResults:c}).then(function(_){var h=_.numFailures,k=_.results,v=_.lastResult,_=_.failures;if(h===0)return c?k:v;throw new dt("".concat(o.name,".bulkAdd(): ").concat(h," of ").concat(y," operations failed"),_)})})},ae.prototype.bulkPut=function(e,n,r){var o=this,s=Array.isArray(n)?n:void 0,c=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",function(f){var g=o.schema.primKey,d=g.auto,g=g.keyPath;if(g&&s)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,g=g&&d?e.map(un(g)):e;return o.core.mutate({trans:f,type:"put",keys:s,values:g,wantResults:c}).then(function(_){var h=_.numFailures,k=_.results,v=_.lastResult,_=_.failures;if(h===0)return c?k:v;throw new dt("".concat(o.name,".bulkPut(): ").concat(h," of ").concat(y," operations failed"),_)})})},ae.prototype.bulkUpdate=function(e){var n=this,r=this.core,o=e.map(function(f){return f.key}),s=e.map(function(f){return f.changes}),c=[];return this._trans("readwrite",function(f){return r.getMany({trans:f,keys:o,cache:"clone"}).then(function(d){var y=[],g=[];e.forEach(function(h,k){var v=h.key,_=h.changes,w=d[k];if(w){for(var E=0,T=Object.keys(_);E<T.length;E++){var I=T[E],C=_[I];if(I===n.schema.primKey.keyPath){if(te(C,v)!==0)throw new G.Constraint("Cannot update primary key in bulkUpdate()")}else se(w,I,C)}c.push(k),y.push(v),g.push(w)}});var x=y.length;return r.mutate({trans:f,type:"put",keys:y,values:g,updates:{keys:o,changeSpecs:s}}).then(function(h){var k=h.numFailures,v=h.failures;if(k===0)return x;for(var _=0,w=Object.keys(v);_<w.length;_++){var E,T=w[_],I=c[Number(T)];I!=null&&(E=v[T],delete v[T],v[I]=E)}throw new dt("".concat(n.name,".bulkUpdate(): ").concat(k," of ").concat(x," operations failed"),v)})})})},ae.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(o){return n.core.mutate({trans:o,type:"delete",keys:e}).then(function(s){return cn(n,e,s)})}).then(function(f){var s=f.numFailures,c=f.lastResult,f=f.failures;if(s===0)return c;throw new dt("".concat(n.name,".bulkDelete(): ").concat(s," of ").concat(r," operations failed"),f)})},ae);function ae(){}function jt(e){function n(f,d){if(d){for(var y=arguments.length,g=new Array(y-1);--y;)g[y-1]=arguments[y];return r[f].subscribe.apply(null,g),e}if(typeof f=="string")return r[f]}var r={};n.addEventType=c;for(var o=1,s=arguments.length;o<s;++o)c(arguments[o]);return n;function c(f,d,y){if(typeof f!="object"){var g;d=d||To;var x={subscribers:[],fire:y=y||oe,subscribe:function(h){x.subscribers.indexOf(h)===-1&&(x.subscribers.push(h),x.fire=d(x.fire,h))},unsubscribe:function(h){x.subscribers=x.subscribers.filter(function(k){return k!==h}),x.fire=x.subscribers.reduce(d,y)}};return r[f]=n[f]=x}S(g=f).forEach(function(h){var k=g[h];if(m(k))c(h,g[h][0],g[h][1]);else{if(k!=="asap")throw new G.InvalidArgument("Invalid event config");var v=c(h,At,function(){for(var _=arguments.length,w=new Array(_);_--;)w[_]=arguments[_];v.subscribers.forEach(function(E){he(function(){E.apply(null,w)})})})}})}}function Kt(e,n){return $(n).from({prototype:e}),n}function gt(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function Xn(e,n){e.filter=it(e.filter,n)}function Qn(e,n,r){var o=e.replayFilter;e.replayFilter=o?function(){return it(o(),n())}:n,e.justLimit=r&&!o}function ln(e,n){if(e.isPrimKey)return n.primaryKey;var r=n.getIndexByKeyPath(e.index);if(!r)throw new G.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return r}function ni(e,n,r){var o=ln(e,n.schema);return n.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:o,range:e.range}})}function fn(e,n,r,o){var s=e.replayFilter?it(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},f=function(d,y,g){var x,h;s&&!s(y,g,function(k){return y.stop(k)},function(k){return y.fail(k)})||((h=""+(x=y.primaryKey))=="[object ArrayBuffer]"&&(h=""+new Uint8Array(x)),O(c,h)||(c[h]=!0,n(d,y,g)))};return Promise.all([e.or._iterate(f,r),ri(ni(e,o,r),e.algorithm,f,!e.keysOnly&&e.valueMapper)])}return ri(ni(e,o,r),it(e.algorithm,s),n,!e.keysOnly&&e.valueMapper)}function ri(e,n,r,o){var s=ue(o?function(c,f,d){return r(o(c),f,d)}:r);return e.then(function(c){if(c)return c.start(function(){var f=function(){return c.continue()};n&&!n(c,function(d){return f=d},function(d){c.stop(d),f=oe},function(d){c.fail(d),f=oe})||s(c.value,c,function(d){return f=d}),f()})})}var Do=(re.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,ce.bind(null,r.error)):r.table._trans("readonly",e).then(n)},re.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,ce.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},re.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=it(n.algorithm,e)},re.prototype._iterate=function(e,n){return fn(this._ctx,e,n,this._ctx.table.core)},re.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&B(r,e),n._ctx=r,n},re.prototype.raw=function(){return this._ctx.valueMapper=null,this},re.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return fn(n,e,r,n.table.core)})},re.prototype.count=function(e){var n=this;return this._read(function(r){var o=n._ctx,s=o.table.core;if(gt(o,!0))return s.count({trans:r,query:{index:ln(o,s.schema),range:o.range}}).then(function(f){return Math.min(f,o.limit)});var c=0;return fn(o,function(){return++c,!1},r,s).then(function(){return c})}).then(e)},re.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),o=r[0],s=r.length-1;function c(y,g){return g?c(y[r[g]],g-1):y[o]}var f=this._ctx.dir==="next"?1:-1;function d(y,g){return te(c(y,s),c(g,s))*f}return this.toArray(function(y){return y.sort(d)}).then(n)},re.prototype.toArray=function(e){var n=this;return this._read(function(r){var o=n._ctx;if(o.dir==="next"&&gt(o,!0)&&0<o.limit){var s=o.valueMapper,c=ln(o,o.table.core.schema);return o.table.core.query({trans:r,limit:o.limit,values:!0,query:{index:c,range:o.range}}).then(function(d){return d=d.result,s?d.map(s):d})}var f=[];return fn(o,function(d){return f.push(d)},r,o.table.core).then(function(){return f})},e)},re.prototype.offset=function(e){var n=this._ctx;return e<=0||(n.offset+=e,gt(n)?Qn(n,function(){var r=e;return function(o,s){return r===0||(r===1?--r:s(function(){o.advance(r),r=0}),!1)}}):Qn(n,function(){var r=e;return function(){return--r<0}})),this},re.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Qn(this._ctx,function(){var n=e;return function(r,o,s){return--n<=0&&o(s),0<=n}},!0),this},re.prototype.until=function(e,n){return Xn(this._ctx,function(r,o,s){return!e(r.value)||(o(s),n)}),this},re.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},re.prototype.last=function(e){return this.reverse().first(e)},re.prototype.filter=function(e){var n;return Xn(this._ctx,function(r){return e(r.value)}),(n=this._ctx).isMatch=it(n.isMatch,e),this},re.prototype.and=function(e){return this.filter(e)},re.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},re.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},re.prototype.desc=function(){return this.reverse()},re.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.key,o)})},re.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},re.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.primaryKey,o)})},re.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,s){r.push(s.key)}).then(function(){return r}).then(e)},re.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&gt(n,!0)&&0<n.limit)return this._read(function(o){var s=ln(n,n.table.core.schema);return n.table.core.query({trans:o,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(function(o){return o.result}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)},re.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},re.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},re.prototype.lastKey=function(e){return this.reverse().firstKey(e)},re.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var n={};return Xn(this._ctx,function(s){var o=s.primaryKey.toString(),s=O(n,o);return n[o]=!0,!s}),this},re.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(o){var s=typeof e=="function"?e:function(w){return ei(w,e)},c=r.table.core,g=c.schema.primaryKey,f=g.outbound,d=g.extractKey,y=200,g=n.db._options.modifyChunkSize;g&&(y=typeof g=="object"?g[c.name]||g["*"]||200:g);function x(w,I){var T=I.failures,I=I.numFailures;k+=w-I;for(var C=0,R=S(T);C<R.length;C++){var K=R[C];h.push(T[K])}}var h=[],k=0,v=[],_=e===ii;return n.clone().primaryKeys().then(function(w){function E(I){var C=Math.min(y,w.length-I),R=w.slice(I,I+C);return(_?Promise.resolve([]):c.getMany({trans:o,keys:R,cache:"immutable"})).then(function(K){var M=[],j=[],F=f?[]:null,q=_?R:[];if(!_)for(var N=0;N<C;++N){var z=K[N],X={value:V(z),primKey:w[I+N]};s.call(X,X.value,X)!==!1&&(X.value==null?q.push(w[I+N]):f||te(d(z),d(X.value))===0?(j.push(X.value),f&&F.push(w[I+N])):(q.push(w[I+N]),M.push(X.value)))}return Promise.resolve(0<M.length&&c.mutate({trans:o,type:"add",values:M}).then(function(Q){for(var ee in Q.failures)q.splice(parseInt(ee),1);x(M.length,Q)})).then(function(){return(0<j.length||T&&typeof e=="object")&&c.mutate({trans:o,type:"put",keys:F,values:j,criteria:T,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<I}).then(function(Q){return x(j.length,Q)})}).then(function(){return(0<q.length||T&&_)&&c.mutate({trans:o,type:"delete",keys:q,criteria:T,isAdditionalChunk:0<I}).then(function(Q){return cn(r.table,q,Q)}).then(function(Q){return x(q.length,Q)})}).then(function(){return w.length>I+C&&E(I+y)})})}var T=gt(r)&&r.limit===1/0&&(typeof e!="function"||_)&&{index:r.index,range:r.range};return E(0).then(function(){if(0<h.length)throw new Xt("Error modifying one or more objects",h,k,v);return w.length})})})},re.prototype.delete=function(){var e=this._ctx,n=e.range;return!gt(e)||e.table.schema.yProps||!e.isPrimKey&&n.type!==3?this.modify(ii):this._write(function(r){var o=e.table.core.schema.primaryKey,s=n;return e.table.core.count({trans:r,query:{index:o,range:s}}).then(function(c){return e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(function(y){var d=y.failures,y=y.numFailures;if(y)throw new Xt("Could not delete some values",Object.keys(d).map(function(g){return d[g]}),c-y);return c-y})})})},re);function re(){}var ii=function(e,n){return n.value=null};function Ro(e,n){return e<n?-1:e===n?0:1}function Bo(e,n){return n<e?-1:e===n?0:1}function Oe(e,n,r){return e=e instanceof ai?new e.Collection(e):e,e._ctx.error=new(r||TypeError)(n),e}function vt(e){return new e.Collection(e,function(){return oi("")}).limit(0)}function dn(e,n,r,o){var s,c,f,d,y,g,x,h=r.length;if(!r.every(function(_){return typeof _=="string"}))return Oe(e,Gr);function k(_){s=_==="next"?function(E){return E.toUpperCase()}:function(E){return E.toLowerCase()},c=_==="next"?function(E){return E.toLowerCase()}:function(E){return E.toUpperCase()},f=_==="next"?Ro:Bo;var w=r.map(function(E){return{lower:c(E),upper:s(E)}}).sort(function(E,T){return f(E.lower,T.lower)});d=w.map(function(E){return E.upper}),y=w.map(function(E){return E.lower}),x=(g=_)==="next"?"":o}k("next"),e=new e.Collection(e,function(){return We(d[0],y[h-1]+o)}),e._ondirectionchange=function(_){k(_)};var v=0;return e._addAlgorithm(function(_,w,E){var T=_.key;if(typeof T!="string")return!1;var I=c(T);if(n(I,y,v))return!0;for(var C=null,R=v;R<h;++R){var K=(function(M,j,F,q,N,z){for(var X=Math.min(M.length,q.length),Q=-1,ee=0;ee<X;++ee){var Te=j[ee];if(Te!==q[ee])return N(M[ee],F[ee])<0?M.substr(0,ee)+F[ee]+F.substr(ee+1):N(M[ee],q[ee])<0?M.substr(0,ee)+q[ee]+F.substr(ee+1):0<=Q?M.substr(0,Q)+j[Q]+F.substr(Q+1):null;N(M[ee],Te)<0&&(Q=ee)}return X<q.length&&z==="next"?M+F.substr(M.length):X<M.length&&z==="prev"?M.substr(0,F.length):Q<0?null:M.substr(0,Q)+q[Q]+F.substr(Q+1)})(T,I,d[R],y[R],f,g);K===null&&C===null?v=R+1:(C===null||0<f(C,K))&&(C=K)}return w(C!==null?function(){_.continue(C+x)}:E),!1}),e}function We(e,n,r,o){return{type:2,lower:e,upper:n,lowerOpen:r,upperOpen:o}}function oi(e){return{type:1,lower:e,upper:e}}var ai=(Object.defineProperty(me.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),me.prototype.between=function(e,n,r,o){r=r!==!1,o=o===!0;try{return 0<this._cmp(e,n)||this._cmp(e,n)===0&&(r||o)&&(!r||!o)?vt(this):new this.Collection(this,function(){return We(e,n,!r,!o)})}catch{return Oe(this,je)}},me.prototype.equals=function(e){return e==null?Oe(this,je):new this.Collection(this,function(){return oi(e)})},me.prototype.above=function(e){return e==null?Oe(this,je):new this.Collection(this,function(){return We(e,void 0,!0)})},me.prototype.aboveOrEqual=function(e){return e==null?Oe(this,je):new this.Collection(this,function(){return We(e,void 0,!1)})},me.prototype.below=function(e){return e==null?Oe(this,je):new this.Collection(this,function(){return We(void 0,e,!1,!0)})},me.prototype.belowOrEqual=function(e){return e==null?Oe(this,je):new this.Collection(this,function(){return We(void 0,e)})},me.prototype.startsWith=function(e){return typeof e!="string"?Oe(this,Gr):this.between(e,e+rt,!0,!0)},me.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):dn(this,function(n,r){return n.indexOf(r[0])===0},[e],rt)},me.prototype.equalsIgnoreCase=function(e){return dn(this,function(n,r){return n===r[0]},[e],"")},me.prototype.anyOfIgnoreCase=function(){var e=fe.apply(Xe,arguments);return e.length===0?vt(this):dn(this,function(n,r){return r.indexOf(n)!==-1},e,"")},me.prototype.startsWithAnyOfIgnoreCase=function(){var e=fe.apply(Xe,arguments);return e.length===0?vt(this):dn(this,function(n,r){return r.some(function(o){return n.indexOf(o)===0})},e,rt)},me.prototype.anyOf=function(){var e=this,n=fe.apply(Xe,arguments),r=this._cmp;try{n.sort(r)}catch{return Oe(this,je)}if(n.length===0)return vt(this);var o=new this.Collection(this,function(){return We(n[0],n[n.length-1])});o._ondirectionchange=function(c){r=c==="next"?e._ascending:e._descending,n.sort(r)};var s=0;return o._addAlgorithm(function(c,f,d){for(var y=c.key;0<r(y,n[s]);)if(++s===n.length)return f(d),!1;return r(y,n[s])===0||(f(function(){c.continue(n[s])}),!1)}),o},me.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},me.prototype.noneOf=function(){var e=fe.apply(Xe,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Oe(this,je)}var n=e.reduce(function(r,o){return r?r.concat([[r[r.length-1][1],o]]):[[-1/0,o]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},me.prototype.inAnyRange=function(T,n){var r=this,o=this._cmp,s=this._ascending,c=this._descending,f=this._min,d=this._max;if(T.length===0)return vt(this);if(!T.every(function(I){return I[0]!==void 0&&I[1]!==void 0&&s(I[0],I[1])<=0}))return Oe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);var y=!n||n.includeLowers!==!1,g=n&&n.includeUppers===!0,x,h=s;function k(I,C){return h(I[0],C[0])}try{(x=T.reduce(function(I,C){for(var R=0,K=I.length;R<K;++R){var M=I[R];if(o(C[0],M[1])<0&&0<o(C[1],M[0])){M[0]=f(M[0],C[0]),M[1]=d(M[1],C[1]);break}}return R===K&&I.push(C),I},[])).sort(k)}catch{return Oe(this,je)}var v=0,_=g?function(I){return 0<s(I,x[v][1])}:function(I){return 0<=s(I,x[v][1])},w=y?function(I){return 0<c(I,x[v][0])}:function(I){return 0<=c(I,x[v][0])},E=_,T=new this.Collection(this,function(){return We(x[0][0],x[x.length-1][1],!y,!g)});return T._ondirectionchange=function(I){h=I==="next"?(E=_,s):(E=w,c),x.sort(k)},T._addAlgorithm(function(I,C,R){for(var K,M=I.key;E(M);)if(++v===x.length)return C(R),!1;return!_(K=M)&&!w(K)||(r._cmp(M,x[v][1])===0||r._cmp(M,x[v][0])===0||C(function(){h===s?I.continue(x[v][0]):I.continue(x[v][1])}),!1)}),T},me.prototype.startsWithAnyOf=function(){var e=fe.apply(Xe,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?vt(this):this.inAnyRange(e.map(function(n){return[n,n+rt]})):Oe(this,"startsWithAnyOf() only works with strings")},me);function me(){}function De(e){return ue(function(n){return Ft(n),e(n.target.error),!1})}function Ft(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Nt="storagemutated",Jn="x-storagemutated-1",Ue=jt(null,Nt),jo=(Re.prototype._lock=function(){return Z(!U.global),++this._reculock,this._reculock!==1||U.global||(U.lockOwnerFor=this),this},Re.prototype._unlock=function(){if(Z(!U.global),--this._reculock==0)for(U.global||(U.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{nt(e[1],e[0])}catch{}}return this},Re.prototype._locked=function(){return this._reculock&&U.lockOwnerFor!==this},Re.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,o=this.db._state.dbOpenError;if(Z(!this.idbtrans),!e&&!r)switch(o&&o.name){case"DatabaseClosedError":throw new G.DatabaseClosed(o);case"MissingAPIError":throw new G.MissingAPI(o.message,o);default:throw new G.OpenFailed(o)}if(!this.active)throw new G.TransactionInactive;return Z(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ue(function(s){Ft(s),n._reject(e.error)}),e.onabort=ue(function(s){Ft(s),n.active&&n._reject(new G.Abort(e.error)),n.active=!1,n.on("abort").fire(s)}),e.oncomplete=ue(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&Ue.storagemutated.fire(e.mutatedParts)}),this},Re.prototype._promise=function(e,n,r){var o=this;if(e==="readwrite"&&this.mode!=="readwrite")return ce(new G.ReadOnly("Transaction is readonly"));if(!this.active)return ce(new G.TransactionInactive);if(this._locked())return new L(function(c,f){o._blockedFuncs.push([function(){o._promise(e,n,r).then(c,f)},U])});if(r)return Le(function(){var c=new L(function(f,d){o._lock();var y=n(f,d,o);y&&y.then&&y.then(f,d)});return c.finally(function(){return o._unlock()}),c._lib=!0,c});var s=new L(function(c,f){var d=n(c,f,o);d&&d.then&&d.then(c,f)});return s._lib=!0,s},Re.prototype._root=function(){return this.parent?this.parent._root():this},Re.prototype.waitFor=function(e){var n,r=this._root(),o=L.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return o}):(r._waitingFor=o,r._waitingQueue=[],n=r.idbtrans.objectStore(r.storeNames[0]),(function c(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(n.get(-1/0).onsuccess=c)})());var s=r._waitingFor;return new L(function(c,f){o.then(function(d){return r._waitingQueue.push(ue(c.bind(null,d)))},function(d){return r._waitingQueue.push(ue(f.bind(null,d)))}).finally(function(){r._waitingFor===s&&(r._waitingFor=null)})})},Re.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new G.Abort))},Re.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(O(n,e))return n[e];var r=this.schema[e];if(!r)throw new G.NotFound("Table "+e+" not part of transaction");return r=new this.db.Table(e,r,this),r.core=this.db.core.table(e),n[e]=r},Re);function Re(){}function Zn(e,n,r,o,s,c,f,d){return{name:e,keyPath:n,unique:r,multi:o,auto:s,compound:c,src:(r&&!f?"&":"")+(o?"*":"")+(s?"++":"")+si(n),type:d}}function si(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function er(e,n,r){return{name:e,primKey:n,indexes:r,mappedClass:null,idxByName:(o=function(s){return[s.name,s]},r.reduce(function(s,c,f){return f=o(c,f),f&&(s[f[0]]=f[1]),s},{}))};var o}var Mt=function(e){try{return e.only([[]]),Mt=function(){return[[]]},[[]]}catch{return Mt=function(){return rt},rt}};function tr(e){return e==null?function(){}:typeof e=="string"?(n=e).split(".").length===1?function(r){return r[n]}:function(r){return pe(r,n)}:function(r){return pe(r,e)};var n}function ui(e){return[].slice.call(e)}var Ko=0;function qt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Fo(e,n,y){function o(E){if(E.type===3)return null;if(E.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var v=E.lower,_=E.upper,w=E.lowerOpen,E=E.upperOpen;return v===void 0?_===void 0?null:n.upperBound(_,!!E):_===void 0?n.lowerBound(v,!!w):n.bound(v,_,!!w,!!E)}function s(k){var v,_=k.name;return{name:_,schema:k,mutate:function(w){var E=w.trans,T=w.type,I=w.keys,C=w.values,R=w.range;return new Promise(function(K,M){K=ue(K);var j=E.objectStore(_),F=j.keyPath==null,q=T==="put"||T==="add";if(!q&&T!=="delete"&&T!=="deleteRange")throw new Error("Invalid operation type: "+T);var N,z=(I||C||{length:1}).length;if(I&&C&&I.length!==C.length)throw new Error("Given keys array must have same length as given values array.");if(z===0)return K({numFailures:0,failures:{},results:[],lastResult:void 0});function X(Ee){++Te,Ft(Ee)}var Q=[],ee=[],Te=0;if(T==="deleteRange"){if(R.type===4)return K({numFailures:Te,failures:ee,results:[],lastResult:void 0});R.type===3?Q.push(N=j.clear()):Q.push(N=j.delete(o(R)))}else{var F=q?F?[C,I]:[C,null]:[I,null],Y=F[0],be=F[1];if(q)for(var _e=0;_e<z;++_e)Q.push(N=be&&be[_e]!==void 0?j[T](Y[_e],be[_e]):j[T](Y[_e])),N.onerror=X;else for(_e=0;_e<z;++_e)Q.push(N=j[T](Y[_e])),N.onerror=X}function kn(Ee){Ee=Ee.target.result,Q.forEach(function(st,br){return st.error!=null&&(ee[br]=st.error)}),K({numFailures:Te,failures:ee,results:T==="delete"?I:Q.map(function(st){return st.result}),lastResult:Ee})}N.onerror=function(Ee){X(Ee),kn(Ee)},N.onsuccess=kn})},getMany:function(w){var E=w.trans,T=w.keys;return new Promise(function(I,C){I=ue(I);for(var R,K=E.objectStore(_),M=T.length,j=new Array(M),F=0,q=0,N=function(Q){Q=Q.target,j[Q._pos]=Q.result,++q===F&&I(j)},z=De(C),X=0;X<M;++X)T[X]!=null&&((R=K.get(T[X]))._pos=X,R.onsuccess=N,R.onerror=z,++F);F===0&&I(j)})},get:function(w){var E=w.trans,T=w.key;return new Promise(function(I,C){I=ue(I);var R=E.objectStore(_).get(T);R.onsuccess=function(K){return I(K.target.result)},R.onerror=De(C)})},query:(v=g,function(w){return new Promise(function(E,T){E=ue(E);var I,C,R,F=w.trans,K=w.values,M=w.limit,N=w.query,j=M===1/0?void 0:M,q=N.index,N=N.range,F=F.objectStore(_),q=q.isPrimaryKey?F:F.index(q.name),N=o(N);if(M===0)return E({result:[]});v?((j=K?q.getAll(N,j):q.getAllKeys(N,j)).onsuccess=function(z){return E({result:z.target.result})},j.onerror=De(T)):(I=0,C=!K&&"openKeyCursor"in q?q.openKeyCursor(N):q.openCursor(N),R=[],C.onsuccess=function(z){var X=C.result;return X?(R.push(K?X.value:X.primaryKey),++I===M?E({result:R}):void X.continue()):E({result:R})},C.onerror=De(T))})}),openCursor:function(w){var E=w.trans,T=w.values,I=w.query,C=w.reverse,R=w.unique;return new Promise(function(K,M){K=ue(K);var q=I.index,j=I.range,F=E.objectStore(_),F=q.isPrimaryKey?F:F.index(q.name),q=C?R?"prevunique":"prev":R?"nextunique":"next",N=!T&&"openKeyCursor"in F?F.openKeyCursor(o(j),q):F.openCursor(o(j),q);N.onerror=De(M),N.onsuccess=ue(function(z){var X,Q,ee,Te,Y=N.result;Y?(Y.___id=++Ko,Y.done=!1,X=Y.continue.bind(Y),Q=(Q=Y.continuePrimaryKey)&&Q.bind(Y),ee=Y.advance.bind(Y),Te=function(){throw new Error("Cursor not stopped")},Y.trans=E,Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=function(){throw new Error("Cursor not started")},Y.fail=ue(M),Y.next=function(){var be=this,_e=1;return this.start(function(){return _e--?be.continue():be.stop()}).then(function(){return be})},Y.start=function(be){function _e(){if(N.result)try{be()}catch(Ee){Y.fail(Ee)}else Y.done=!0,Y.start=function(){throw new Error("Cursor behind last entry")},Y.stop()}var kn=new Promise(function(Ee,st){Ee=ue(Ee),N.onerror=De(st),Y.fail=st,Y.stop=function(br){Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=Te,Ee(br)}});return N.onsuccess=ue(function(Ee){N.onsuccess=_e,_e()}),Y.continue=X,Y.continuePrimaryKey=Q,Y.advance=ee,_e(),kn},K(Y)):K(null)},M)})},count:function(w){var E=w.query,T=w.trans,I=E.index,C=E.range;return new Promise(function(R,K){var M=T.objectStore(_),j=I.isPrimaryKey?M:M.index(I.name),M=o(C),j=M?j.count(M):j.count();j.onsuccess=ue(function(F){return R(F.target.result)}),j.onerror=De(K)})}}}var c,f,d,x=(f=y,d=ui((c=e).objectStoreNames),{schema:{name:c.name,tables:d.map(function(k){return f.objectStore(k)}).map(function(k){var v=k.keyPath,E=k.autoIncrement,_=m(v),w={},E={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v==null,compound:_,keyPath:v,autoIncrement:E,unique:!0,extractKey:tr(v)},indexes:ui(k.indexNames).map(function(T){return k.index(T)}).map(function(R){var I=R.name,C=R.unique,K=R.multiEntry,R=R.keyPath,K={name:I,compound:m(R),keyPath:R,unique:C,multiEntry:K,extractKey:tr(R)};return w[qt(R)]=K}),getIndexByKeyPath:function(T){return w[qt(T)]}};return w[":id"]=E.primaryKey,v!=null&&(w[qt(v)]=E.primaryKey),E})},hasGetAll:0<d.length&&"getAll"in f.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),y=x.schema,g=x.hasGetAll,x=y.tables.map(s),h={};return x.forEach(function(k){return h[k.name]=k}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(k){if(!h[k])throw new Error("Table '".concat(k,"' not found"));return h[k]},MIN_KEY:-1/0,MAX_KEY:Mt(n),schema:y}}function No(e,n,r,o){var s=r.IDBKeyRange;return r.indexedDB,{dbcore:(o=Fo(n,s,o),e.dbcore.reduce(function(c,f){return f=f.create,u(u({},c),f(c))},o))}}function hn(e,o){var r=o.db,o=No(e._middlewares,r,e._deps,o);e.core=o.dbcore,e.tables.forEach(function(s){var c=s.name;e.core.schema.tables.some(function(f){return f.name===c})&&(s.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=s.core))})}function pn(e,n,r,o){r.forEach(function(s){var c=o[s];n.forEach(function(f){var d=(function y(g,x){return J(g,x)||(g=P(g))&&y(g,x)})(f,s);(!d||"value"in d&&d.value===void 0)&&(f===e.Transaction.prototype||f instanceof e.Transaction?H(f,s,{get:function(){return this.table(s)},set:function(y){D(this,s,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):f[s]=new e.Table(s,c))})})}function nr(e,n){n.forEach(function(r){for(var o in r)r[o]instanceof e.Table&&delete r[o]})}function Mo(e,n){return e._cfg.version-n._cfg.version}function qo(e,n,r,o){var s=e._dbSchema;r.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=er("$meta",li("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,s);c.create(r),c._completion.catch(o);var f=c._reject.bind(c),d=U.transless||U;Le(function(){return U.trans=c,U.transless=d,n!==0?(hn(e,r),g=n,((y=c).storeNames.includes("$meta")?y.table("$meta").get("version").then(function(x){return x??g}):L.resolve(g)).then(function(x){return k=x,v=c,_=r,w=[],x=(h=e)._versions,E=h._dbSchema=mn(0,h.idbdb,_),(x=x.filter(function(T){return T._cfg.version>=k})).length!==0?(x.forEach(function(T){w.push(function(){var I=E,C=T._cfg.dbschema;gn(h,I,_),gn(h,C,_),E=h._dbSchema=C;var R=rr(I,C);R.add.forEach(function(q){ir(_,q[0],q[1].primKey,q[1].indexes)}),R.change.forEach(function(q){if(q.recreate)throw new G.Upgrade("Not yet support for changing primary key");var N=_.objectStore(q.name);q.add.forEach(function(z){return yn(N,z)}),q.change.forEach(function(z){N.deleteIndex(z.name),yn(N,z)}),q.del.forEach(function(z){return N.deleteIndex(z)})});var K=T._cfg.contentUpgrade;if(K&&T._cfg.version>k){hn(h,_),v._memoizedTables={};var M=lt(C);R.del.forEach(function(q){M[q]=I[q]}),nr(h,[h.Transaction.prototype]),pn(h,[h.Transaction.prototype],S(M),M),v.schema=M;var j,F=Se(K);return F&&yt(),R=L.follow(function(){var q;(j=K(v))&&F&&(q=ze.bind(null,null),j.then(q,q))}),j&&typeof j.then=="function"?L.resolve(j):R.then(function(){return j})}}),w.push(function(I){var C,R,K=T._cfg.dbschema;C=K,R=I,[].slice.call(R.db.objectStoreNames).forEach(function(M){return C[M]==null&&R.db.deleteObjectStore(M)}),nr(h,[h.Transaction.prototype]),pn(h,[h.Transaction.prototype],h._storeNames,h._dbSchema),v.schema=h._dbSchema}),w.push(function(I){h.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(h.idbdb.version/10)===T._cfg.version?(h.idbdb.deleteObjectStore("$meta"),delete h._dbSchema.$meta,h._storeNames=h._storeNames.filter(function(C){return C!=="$meta"})):I.objectStore("$meta").put(T._cfg.version,"version"))})}),(function T(){return w.length?L.resolve(w.shift()(v.idbtrans)).then(T):L.resolve()})().then(function(){ci(E,_)})):L.resolve();var h,k,v,_,w,E}).catch(f)):(S(s).forEach(function(x){ir(r,x,s[x].primKey,s[x].indexes)}),hn(e,r),void L.follow(function(){return e.on.populate.fire(c)}).catch(f));var y,g})}function Lo(e,n){ci(e._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains("$meta")||n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var r=mn(0,e.idbdb,n);gn(e,e._dbSchema,n);for(var o=0,s=rr(r,e._dbSchema).change;o<s.length;o++){var c=(function(f){if(f.change.length||f.recreate)return console.warn("Unable to patch indexes of table ".concat(f.name," because it has changes on the type of index or primary key.")),{value:void 0};var d=n.objectStore(f.name);f.add.forEach(function(y){Ce&&console.debug("Dexie upgrade patch: Creating missing index ".concat(f.name,".").concat(y.src)),yn(d,y)})})(s[o]);if(typeof c=="object")return c.value}}function rr(e,n){var r,o={del:[],add:[],change:[]};for(r in e)n[r]||o.del.push(r);for(r in n){var s=e[r],c=n[r];if(s){var f={name:r,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||s.primKey.auto!==c.primKey.auto)f.recreate=!0,o.change.push(f);else{var d=s.idxByName,y=c.idxByName,g=void 0;for(g in d)y[g]||f.del.push(g);for(g in y){var x=d[g],h=y[g];x?x.src!==h.src&&f.change.push(h):f.add.push(h)}(0<f.del.length||0<f.add.length||0<f.change.length)&&o.change.push(f)}}else o.add.push([r,c])}return o}function ir(e,n,r,o){var s=e.db.createObjectStore(n,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return o.forEach(function(c){return yn(s,c)}),s}function ci(e,n){S(e).forEach(function(r){n.db.objectStoreNames.contains(r)||(Ce&&console.debug("Dexie: Creating missing table",r),ir(n,r,e[r].primKey,e[r].indexes))})}function yn(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function mn(e,n,r){var o={};return de(n.objectStoreNames,0).forEach(function(s){for(var c=r.objectStore(s),f=Zn(si(g=c.keyPath),g||"",!0,!1,!!c.autoIncrement,g&&typeof g!="string",!0),d=[],y=0;y<c.indexNames.length;++y){var x=c.index(c.indexNames[y]),g=x.keyPath,x=Zn(x.name,g,!!x.unique,!!x.multiEntry,!1,g&&typeof g!="string",!1);d.push(x)}o[s]=er(s,f,d)}),o}function gn(e,n,r){for(var o=r.db.objectStoreNames,s=0;s<o.length;++s){var c=o[s],f=r.objectStore(c);e._hasGetAll="getAll"in f;for(var d=0;d<f.indexNames.length;++d){var y=f.indexNames[d],g=f.index(y).keyPath,x=typeof g=="string"?g:"["+de(g).join("+")+"]";!n[c]||(g=n[c].idxByName[x])&&(g.name=y,delete n[c].idxByName[x],n[c].idxByName[y]=g)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&p.WorkerGlobalScope&&p instanceof p.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function li(e){return e.split(",").map(function(n,r){var c=n.split(":"),o=(s=c[1])===null||s===void 0?void 0:s.trim(),s=(n=c[0].trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return Zn(s,c||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),m(c),r===0,o)})}var zo=(bt.prototype._createTableSchema=er,bt.prototype._parseIndexSyntax=li,bt.prototype._parseStoresSpec=function(e,n){var r=this;S(e).forEach(function(o){if(e[o]!==null){var s=r._parseIndexSyntax(e[o]),c=s.shift();if(!c)throw new G.Schema("Invalid schema for table "+o+": "+e[o]);if(c.unique=!0,c.multi)throw new G.Schema("Primary key cannot be multiEntry*");s.forEach(function(f){if(f.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!f.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string")}),s=r._createTableSchema(o,c,s),n[o]=s}})},bt.prototype.stores=function(r){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?B(this._cfg.storesSource,r):r;var r=n._versions,o={},s={};return r.forEach(function(c){B(o,c._cfg.storesSource),s=c._cfg.dbschema={},c._parseStoresSpec(o,s)}),n._dbSchema=s,nr(n,[n._allTables,n,n.Transaction.prototype]),pn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],S(s),s),n._storeNames=S(s),this},bt.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Mn(this._cfg.contentUpgrade||oe,e),this},bt);function bt(){}function or(e,n){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Ke(sn,{addons:[],indexedDB:e,IDBKeyRange:n})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function ar(e){return e&&typeof e.databases=="function"}function sr(e){return Le(function(){return U.letThrough=!0,e()})}function ur(e){return!("from"in e)}var ve=function(e,n){if(!this){var r=new ve;return e&&"d"in e&&B(r,e),r}B(this,arguments.length?{d:1,from:e,to:1<arguments.length?n:e}:{d:0})};function Lt(e,n,r){var o=te(n,r);if(!isNaN(o)){if(0<o)throw RangeError();if(ur(e))return B(e,{from:n,to:r,d:1});var s=e.l,o=e.r;if(te(r,e.from)<0)return s?Lt(s,n,r):e.l={from:n,to:r,d:1,l:null,r:null},di(e);if(0<te(n,e.to))return o?Lt(o,n,r):e.r={from:n,to:r,d:1,l:null,r:null},di(e);te(n,e.from)<0&&(e.from=n,e.l=null,e.d=o?o.d+1:1),0<te(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,s&&!e.l&&zt(e,s),o&&r&&zt(e,o)}}function zt(e,n){ur(n)||(function r(o,y){var c=y.from,f=y.to,d=y.l,y=y.r;Lt(o,c,f),d&&r(o,d),y&&r(o,y)})(e,n)}function fi(e,n){var r=vn(n),o=r.next();if(o.done)return!1;for(var s=o.value,c=vn(e),f=c.next(s.from),d=f.value;!o.done&&!f.done;){if(te(d.from,s.to)<=0&&0<=te(d.to,s.from))return!0;te(s.from,d.from)<0?s=(o=r.next(d.from)).value:d=(f=c.next(s.from)).value}return!1}function vn(e){var n=ur(e)?null:{s:0,n:e};return{next:function(r){for(var o=0<arguments.length;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&te(r,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||te(r,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function di(e){var n,r,o=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0),s=1<o?"r":o<-1?"l":"";s&&(n=s=="r"?"l":"r",r=u({},e),o=e[s],e.from=o.from,e.to=o.to,e[s]=o[s],r[s]=o[n],(e[n]=r).d=hi(r)),e.d=hi(e)}function hi(r){var n=r.r,r=r.l;return(n?r?Math.max(n.d,r.d):n.d:r?r.d:0)+1}function bn(e,n){return S(n).forEach(function(r){e[r]?zt(e[r],n[r]):e[r]=(function o(s){var c,f,d={};for(c in s)O(s,c)&&(f=s[c],d[c]=!f||typeof f!="object"||Fn.has(f.constructor)?f:o(f));return d})(n[r])}),e}function cr(e,n){return e.all||n.all||Object.keys(e).some(function(r){return n[r]&&fi(n[r],e[r])})}A(ve.prototype,((Pe={add:function(e){return zt(this,e),this},addKey:function(e){return Lt(this,e,e),this},addKeys:function(e){var n=this;return e.forEach(function(r){return Lt(n,r,r)}),this},hasKey:function(e){var n=vn(this).next(e).value;return n&&te(n.from,e)<=0&&0<=te(n.to,e)}})[Me]=function(){return vn(this)},Pe));var ot={},lr={},fr=!1;function _n(e){bn(lr,e),fr||(fr=!0,setTimeout(function(){fr=!1,dr(lr,!(lr={}))},0))}function dr(e,n){n===void 0&&(n=!1);var r=new Set;if(e.all)for(var o=0,s=Object.values(ot);o<s.length;o++)pi(f=s[o],e,r,n);else for(var c in e){var f,d=/^idb\:\/\/(.*)\/(.*)\//.exec(c);d&&(c=d[1],d=d[2],(f=ot["idb://".concat(c,"/").concat(d)])&&pi(f,e,r,n))}r.forEach(function(y){return y()})}function pi(e,n,r,o){for(var s=[],c=0,f=Object.entries(e.queries.query);c<f.length;c++){for(var d=f[c],y=d[0],g=[],x=0,h=d[1];x<h.length;x++){var k=h[x];cr(n,k.obsSet)?k.subscribers.forEach(function(E){return r.add(E)}):o&&g.push(k)}o&&s.push([y,g])}if(o)for(var v=0,_=s;v<_.length;v++){var w=_[v],y=w[0],g=w[1];e.queries.query[y]=g}}function $o(e){var n=e._state,r=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?ce(n.dbOpenError):e});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,s=Math.round(10*e.verno),c=!1;function f(){if(n.openCanceller!==o)throw new G.DatabaseClosed("db.open() was cancelled")}function d(){return new L(function(k,v){if(f(),!r)throw new G.MissingAPI;var _=e.name,w=n.autoSchema||!s?r.open(_):r.open(_,s);if(!w)throw new G.MissingAPI;w.onerror=De(v),w.onblocked=ue(e._fireOnBlocked),w.onupgradeneeded=ue(function(E){var T;x=w.transaction,n.autoSchema&&!e._options.allowEmptyDB?(w.onerror=Ft,x.abort(),w.result.close(),(T=r.deleteDatabase(_)).onsuccess=T.onerror=ue(function(){v(new G.NoSuchDatabase("Database ".concat(_," doesnt exist")))})):(x.onerror=De(v),E=E.oldVersion>Math.pow(2,62)?0:E.oldVersion,h=E<1,e.idbdb=w.result,c&&Lo(e,x),qo(e,E/10,x,v))},v),w.onsuccess=ue(function(){x=null;var E,T,I,C,R,K=e.idbdb=w.result,M=de(K.objectStoreNames);if(0<M.length)try{var j=K.transaction((C=M).length===1?C[0]:C,"readonly");if(n.autoSchema)T=K,I=j,(E=e).verno=T.version/10,I=E._dbSchema=mn(0,T,I),E._storeNames=de(T.objectStoreNames,0),pn(E,[E._allTables],S(I),I);else if(gn(e,e._dbSchema,j),((R=rr(mn(0,(R=e).idbdb,j),R._dbSchema)).add.length||R.change.some(function(F){return F.add.length||F.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),K.close(),s=K.version+1,c=!0,k(d());hn(e,j)}catch{}mt.push(e),K.onversionchange=ue(function(F){n.vcFired=!0,e.on("versionchange").fire(F)}),K.onclose=ue(function(){e.close({disableAutoOpen:!1})}),h&&(R=e._deps,j=_,K=R.indexedDB,R=R.IDBKeyRange,ar(K)||j===sn||or(K,R).put({name:j}).catch(oe)),k()},v)}).catch(function(k){switch(k?.name){case"UnknownError":if(0<n.PR1398_maxLoop)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(0<s)return s=0,d()}return L.reject(k)})}var y,g=n.dbReadyResolve,x=null,h=!1;return L.race([o,(typeof navigator>"u"?L.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(k){function v(){return indexedDB.databases().finally(k)}y=setInterval(v,100),v()}).finally(function(){return clearInterval(y)}):Promise.resolve()).then(d)]).then(function(){return f(),n.onReadyBeingFired=[],L.resolve(sr(function(){return e.on.ready.fire(e.vip)})).then(function k(){if(0<n.onReadyBeingFired.length){var v=n.onReadyBeingFired.reduce(Mn,oe);return n.onReadyBeingFired=[],L.resolve(sr(function(){return v(e.vip)})).then(k)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(k){n.dbOpenError=k;try{x&&x.abort()}catch{}return o===n.openCanceller&&e._close(),ce(k)}).finally(function(){n.openComplete=!0,g()}).then(function(){var k;return h&&(k={},e.tables.forEach(function(v){v.schema.indexes.forEach(function(_){_.name&&(k["idb://".concat(e.name,"/").concat(v.name,"/").concat(_.name)]=new ve(-1/0,[[[]]]))}),k["idb://".concat(e.name,"/").concat(v.name,"/")]=k["idb://".concat(e.name,"/").concat(v.name,"/:dels")]=new ve(-1/0,[[[]]])}),Ue(Nt).fire(k),dr(k,!0)),e})}function hr(e){function n(c){return e.next(c)}var r=s(n),o=s(function(c){return e.throw(c)});function s(c){return function(y){var d=c(y),y=d.value;return d.done?y:y&&typeof y.then=="function"?y.then(r,o):m(y)?Promise.all(y).then(r,o):r(y)}}return s(n)()}function wn(e,n,r){for(var o=m(e)?e.slice():[e],s=0;s<r;++s)o.push(n);return o}var Wo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return u(u({},e),{table:function(n){var r=e.table(n),o=r.schema,s={},c=[];function f(h,k,v){var _=qt(h),w=s[_]=s[_]||[],E=h==null?0:typeof h=="string"?1:h.length,T=0<k,T=u(u({},v),{name:T?"".concat(_,"(virtual-from:").concat(v.name,")"):v.name,lowLevelIndex:v,isVirtual:T,keyTail:k,keyLength:E,extractKey:tr(h),unique:!T&&v.unique});return w.push(T),T.isPrimaryKey||c.push(T),1<E&&f(E===2?h[0]:h.slice(0,E-1),k+1,v),w.sort(function(I,C){return I.keyTail-C.keyTail}),T}n=f(o.primaryKey.keyPath,0,o.primaryKey),s[":id"]=[n];for(var d=0,y=o.indexes;d<y.length;d++){var g=y[d];f(g.keyPath,0,g)}function x(h){var k,v=h.query.index;return v.isVirtual?u(u({},h),{query:{index:v.lowLevelIndex,range:(k=h.query.range,v=v.keyTail,{type:k.type===1?2:k.type,lower:wn(k.lower,k.lowerOpen?e.MAX_KEY:e.MIN_KEY,v),lowerOpen:!0,upper:wn(k.upper,k.upperOpen?e.MIN_KEY:e.MAX_KEY,v),upperOpen:!0})}}):h}return u(u({},r),{schema:u(u({},o),{primaryKey:n,indexes:c,getIndexByKeyPath:function(h){return(h=s[qt(h)])&&h[0]}}),count:function(h){return r.count(x(h))},query:function(h){return r.query(x(h))},openCursor:function(h){var k=h.query.index,v=k.keyTail,_=k.isVirtual,w=k.keyLength;return _?r.openCursor(x(h)).then(function(T){return T&&E(T)}):r.openCursor(h);function E(T){return Object.create(T,{continue:{value:function(I){I!=null?T.continue(wn(I,h.reverse?e.MAX_KEY:e.MIN_KEY,v)):h.unique?T.continue(T.key.slice(0,w).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,v)):T.continue()}},continuePrimaryKey:{value:function(I,C){T.continuePrimaryKey(wn(I,e.MAX_KEY,v),C)}},primaryKey:{get:function(){return T.primaryKey}},key:{get:function(){var I=T.key;return w===1?I[0]:I.slice(0,w)}},value:{get:function(){return T.value}}})}}})}})}};function pr(e,n,r,o){return r=r||{},o=o||"",S(e).forEach(function(s){var c,f,d;O(n,s)?(c=e[s],f=n[s],typeof c=="object"&&typeof f=="object"&&c&&f?(d=xe(c))!==xe(f)?r[o+s]=n[s]:d==="Object"?pr(c,f,r,o+s+"."):c!==f&&(r[o+s]=n[s]):c!==f&&(r[o+s]=n[s])):r[o+s]=void 0}),S(n).forEach(function(s){O(e,s)||(r[o+s]=n[s])}),r}function yr(e,n){return n.type==="delete"?n.keys:n.keys||n.values.map(e.extractKey)}var Uo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return u(u({},e),{table:function(n){var r=e.table(n),o=r.schema.primaryKey;return u(u({},r),{mutate:function(s){var c=U.trans,f=c.table(n).hook,d=f.deleting,y=f.creating,g=f.updating;switch(s.type){case"add":if(y.fire===oe)break;return c._promise("readwrite",function(){return x(s)},!0);case"put":if(y.fire===oe&&g.fire===oe)break;return c._promise("readwrite",function(){return x(s)},!0);case"delete":if(d.fire===oe)break;return c._promise("readwrite",function(){return x(s)},!0);case"deleteRange":if(d.fire===oe)break;return c._promise("readwrite",function(){return(function h(k,v,_){return r.query({trans:k,values:!1,query:{index:o,range:v},limit:_}).then(function(w){var E=w.result;return x({type:"delete",keys:E,trans:k}).then(function(T){return 0<T.numFailures?Promise.reject(T.failures[0]):E.length<_?{failures:[],numFailures:0,lastResult:void 0}:h(k,u(u({},v),{lower:E[E.length-1],lowerOpen:!0}),_)})})})(s.trans,s.range,1e4)},!0)}return r.mutate(s);function x(h){var k,v,_,w=U.trans,E=h.keys||yr(o,h);if(!E)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?u(u({},h),{keys:E}):u({},h)).type!=="delete"&&(h.values=l([],h.values)),h.keys&&(h.keys=l([],h.keys)),k=r,_=E,((v=h).type==="add"?Promise.resolve([]):k.getMany({trans:v.trans,keys:_,cache:"immutable"})).then(function(T){var I=E.map(function(C,R){var K,M,j,F=T[R],q={onerror:null,onsuccess:null};return h.type==="delete"?d.fire.call(q,C,F,w):h.type==="add"||F===void 0?(K=y.fire.call(q,C,h.values[R],w),C==null&&K!=null&&(h.keys[R]=C=K,o.outbound||se(h.values[R],o.keyPath,C))):(K=pr(F,h.values[R]),(M=g.fire.call(q,K,C,F,w))&&(j=h.values[R],Object.keys(M).forEach(function(N){O(j,N)?j[N]=M[N]:se(j,N,M[N])}))),q});return r.mutate(h).then(function(C){for(var R=C.failures,K=C.results,M=C.numFailures,C=C.lastResult,j=0;j<E.length;++j){var F=(K||E)[j],q=I[j];F==null?q.onerror&&q.onerror(R[j]):q.onsuccess&&q.onsuccess(h.type==="put"&&T[j]?h.values[j]:F)}return{failures:R,results:K,numFailures:M,lastResult:C}}).catch(function(C){return I.forEach(function(R){return R.onerror&&R.onerror(C)}),Promise.reject(C)})})}}})}})}};function yi(e,n,r){try{if(!n||n.keys.length<e.length)return null;for(var o=[],s=0,c=0;s<n.keys.length&&c<e.length;++s)te(n.keys[s],e[c])===0&&(o.push(r?V(n.values[s]):n.values[s]),++c);return o.length===e.length?o:null}catch{return null}}var Vo={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return u(u({},r),{getMany:function(o){if(!o.cache)return r.getMany(o);var s=yi(o.keys,o.trans._cache,o.cache==="clone");return s?L.resolve(s):r.getMany(o).then(function(c){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?V(c):c},c})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),r.mutate(o)}})}}}};function mi(e,n){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function gi(e,n){switch(e){case"query":return n.values&&!n.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ho={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new ve(e.MIN_KEY,e.MAX_KEY);return u(u({},e),{transaction:function(o,s,c){if(U.subscr&&s!=="readonly")throw new G.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(U.querier));return e.transaction(o,s,c)},table:function(o){var s=e.table(o),c=s.schema,f=c.primaryKey,h=c.indexes,d=f.extractKey,y=f.outbound,g=f.autoIncrement&&h.filter(function(v){return v.compound&&v.keyPath.includes(f.keyPath)}),x=u(u({},s),{mutate:function(v){function _(N){return N="idb://".concat(n,"/").concat(o,"/").concat(N),C[N]||(C[N]=new ve)}var w,E,T,I=v.trans,C=v.mutatedParts||(v.mutatedParts={}),R=_(""),K=_(":dels"),M=v.type,q=v.type==="deleteRange"?[v.range]:v.type==="delete"?[v.keys]:v.values.length<50?[yr(f,v).filter(function(N){return N}),v.values]:[],j=q[0],F=q[1],q=v.trans._cache;return m(j)?(R.addKeys(j),(q=M==="delete"||j.length===F.length?yi(j,q):null)||K.addKeys(j),(q||F)&&(w=_,E=q,T=F,c.indexes.forEach(function(N){var z=w(N.name||"");function X(ee){return ee!=null?N.extractKey(ee):null}function Q(ee){return N.multiEntry&&m(ee)?ee.forEach(function(Te){return z.addKey(Te)}):z.addKey(ee)}(E||T).forEach(function(ee,be){var Y=E&&X(E[be]),be=T&&X(T[be]);te(Y,be)!==0&&(Y!=null&&Q(Y),be!=null&&Q(be))})}))):j?(F={from:(F=j.lower)!==null&&F!==void 0?F:e.MIN_KEY,to:(F=j.upper)!==null&&F!==void 0?F:e.MAX_KEY},K.add(F),R.add(F)):(R.add(r),K.add(r),c.indexes.forEach(function(N){return _(N.name).add(r)})),s.mutate(v).then(function(N){return!j||v.type!=="add"&&v.type!=="put"||(R.addKeys(N.results),g&&g.forEach(function(z){for(var X=v.values.map(function(Y){return z.extractKey(Y)}),Q=z.keyPath.findIndex(function(Y){return Y===f.keyPath}),ee=0,Te=N.results.length;ee<Te;++ee)X[ee][Q]=N.results[ee];_(z.name).addKeys(X)})),I.mutatedParts=bn(I.mutatedParts||{},C),N})}}),h=function(_){var w=_.query,_=w.index,w=w.range;return[_,new ve((_=w.lower)!==null&&_!==void 0?_:e.MIN_KEY,(w=w.upper)!==null&&w!==void 0?w:e.MAX_KEY)]},k={get:function(v){return[f,new ve(v.key)]},getMany:function(v){return[f,new ve().addKeys(v.keys)]},count:h,query:h,openCursor:h};return S(k).forEach(function(v){x[v]=function(_){var w=U.subscr,E=!!w,T=mi(U,s)&&gi(v,_)?_.obsSet={}:w;if(E){var I=function(F){return F="idb://".concat(n,"/").concat(o,"/").concat(F),T[F]||(T[F]=new ve)},C=I(""),R=I(":dels"),w=k[v](_),E=w[0],w=w[1];if((v==="query"&&E.isPrimaryKey&&!_.values?R:I(E.name||"")).add(w),!E.isPrimaryKey){if(v!=="count"){var K=v==="query"&&y&&_.values&&s.query(u(u({},_),{values:!1}));return s[v].apply(this,arguments).then(function(F){if(v==="query"){if(y&&_.values)return K.then(function(X){return X=X.result,C.addKeys(X),F});var q=_.values?F.result.map(d):F.result;(_.values?C:R).addKeys(q)}else if(v==="openCursor"){var N=F,z=_.values;return N&&Object.create(N,{key:{get:function(){return R.addKey(N.primaryKey),N.key}},primaryKey:{get:function(){var X=N.primaryKey;return R.addKey(X),X}},value:{get:function(){return z&&C.addKey(N.primaryKey),N.value}}})}return F})}R.add(r)}}return s[v].apply(this,arguments)}}),x}})}};function vi(e,n,r){if(r.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===o?null:(n=u({},n),m(n.keys)&&(n.keys=n.keys.filter(function(s,c){return!(c in r.failures)})),"values"in n&&m(n.values)&&(n.values=n.values.filter(function(s,c){return!(c in r.failures)})),n)}function mr(e,n){return r=e,((o=n).lower===void 0||(o.lowerOpen?0<te(r,o.lower):0<=te(r,o.lower)))&&(e=e,(n=n).upper===void 0||(n.upperOpen?te(e,n.upper)<0:te(e,n.upper)<=0));var r,o}function bi(e,n,k,o,s,c){if(!k||k.length===0)return e;var f=n.query.index,d=f.multiEntry,y=n.query.range,g=o.schema.primaryKey.extractKey,x=f.extractKey,h=(f.lowLevelIndex||f).extractKey,k=k.reduce(function(v,_){var w=v,E=[];if(_.type==="add"||_.type==="put")for(var T=new ve,I=_.values.length-1;0<=I;--I){var C,R=_.values[I],K=g(R);T.hasKey(K)||(C=x(R),(d&&m(C)?C.some(function(N){return mr(N,y)}):mr(C,y))&&(T.addKey(K),E.push(R)))}switch(_.type){case"add":var M=new ve().addKeys(n.values?v.map(function(z){return g(z)}):v),w=v.concat(n.values?E.filter(function(z){return z=g(z),!M.hasKey(z)&&(M.addKey(z),!0)}):E.map(function(z){return g(z)}).filter(function(z){return!M.hasKey(z)&&(M.addKey(z),!0)}));break;case"put":var j=new ve().addKeys(_.values.map(function(z){return g(z)}));w=v.filter(function(z){return!j.hasKey(n.values?g(z):z)}).concat(n.values?E:E.map(function(z){return g(z)}));break;case"delete":var F=new ve().addKeys(_.keys);w=v.filter(function(z){return!F.hasKey(n.values?g(z):z)});break;case"deleteRange":var q=_.range;w=v.filter(function(z){return!mr(g(z),q)})}return w},e);return k===e?e:(k.sort(function(v,_){return te(h(v),h(_))||te(g(v),g(_))}),n.limit&&n.limit<1/0&&(k.length>n.limit?k.length=n.limit:e.length===n.limit&&k.length<n.limit&&(s.dirty=!0)),c?Object.freeze(k):k)}function _i(e,n){return te(e.lower,n.lower)===0&&te(e.upper,n.upper)===0&&!!e.lowerOpen==!!n.lowerOpen&&!!e.upperOpen==!!n.upperOpen}function Go(e,n){return(function(r,o,s,c){if(r===void 0)return o!==void 0?-1:0;if(o===void 0)return 1;if((o=te(r,o))===0){if(s&&c)return 0;if(s)return 1;if(c)return-1}return o})(e.lower,n.lower,e.lowerOpen,n.lowerOpen)<=0&&0<=(function(r,o,s,c){if(r===void 0)return o!==void 0?1:0;if(o===void 0)return-1;if((o=te(r,o))===0){if(s&&c)return 0;if(s)return-1;if(c)return 1}return o})(e.upper,n.upper,e.upperOpen,n.upperOpen)}function Yo(e,n,r,o){e.subscribers.add(r),o.addEventListener("abort",function(){var s,c;e.subscribers.delete(r),e.subscribers.size===0&&(s=e,c=n,setTimeout(function(){s.subscribers.size===0&&Be(c,s)},3e3))})}var Xo={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return u(u({},e),{transaction:function(r,o,s){var c,f,d=e.transaction(r,o,s);return o==="readwrite"&&(f=(c=new AbortController).signal,s=function(y){return function(){if(c.abort(),o==="readwrite"){for(var g=new Set,x=0,h=r;x<h.length;x++){var k=h[x],v=ot["idb://".concat(n,"/").concat(k)];if(v){var _=e.table(k),w=v.optimisticOps.filter(function(z){return z.trans===d});if(d._explicit&&y&&d.mutatedParts)for(var E=0,T=Object.values(v.queries.query);E<T.length;E++)for(var I=0,C=(M=T[E]).slice();I<C.length;I++)cr((j=C[I]).obsSet,d.mutatedParts)&&(Be(M,j),j.subscribers.forEach(function(z){return g.add(z)}));else if(0<w.length){v.optimisticOps=v.optimisticOps.filter(function(z){return z.trans!==d});for(var R=0,K=Object.values(v.queries.query);R<K.length;R++)for(var M,j,F,q=0,N=(M=K[R]).slice();q<N.length;q++)(j=N[q]).res!=null&&d.mutatedParts&&(y&&!j.dirty?(F=Object.isFrozen(j.res),F=bi(j.res,j.req,w,_,j,F),j.dirty?(Be(M,j),j.subscribers.forEach(function(z){return g.add(z)})):F!==j.res&&(j.res=F,j.promise=L.resolve({result:F}))):(j.dirty&&Be(M,j),j.subscribers.forEach(function(z){return g.add(z)})))}}}g.forEach(function(z){return z()})}}},d.addEventListener("abort",s(!1),{signal:f}),d.addEventListener("error",s(!1),{signal:f}),d.addEventListener("complete",s(!0),{signal:f})),d},table:function(r){var o=e.table(r),s=o.schema.primaryKey;return u(u({},o),{mutate:function(c){var f=U.trans;if(s.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return o.mutate(c);var d=ot["idb://".concat(n,"/").concat(r)];return d?(f=o.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||yr(s,c).some(function(y){return y==null}))?(d.optimisticOps.push(c),c.mutatedParts&&_n(c.mutatedParts),f.then(function(y){0<y.numFailures&&(Be(d.optimisticOps,c),(y=vi(0,c,y))&&d.optimisticOps.push(y),c.mutatedParts&&_n(c.mutatedParts))}),f.catch(function(){Be(d.optimisticOps,c),c.mutatedParts&&_n(c.mutatedParts)})):f.then(function(y){var g=vi(0,u(u({},c),{values:c.values.map(function(x,h){var k;return y.failures[h]?x:(x=(k=s.keyPath)!==null&&k!==void 0&&k.includes(".")?V(x):u({},x),se(x,s.keyPath,y.results[h]),x)})}),y);d.optimisticOps.push(g),queueMicrotask(function(){return c.mutatedParts&&_n(c.mutatedParts)})}),f):o.mutate(c)},query:function(c){if(!mi(U,o)||!gi("query",c))return o.query(c);var f=((g=U.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",h=U,d=h.requery,y=h.signal,g=(function(_,w,E,T){var I=ot["idb://".concat(_,"/").concat(w)];if(!I)return[];if(!(w=I.queries[E]))return[null,!1,I,null];var C=w[(T.query?T.query.index.name:null)||""];if(!C)return[null,!1,I,null];switch(E){case"query":var R=C.find(function(K){return K.req.limit===T.limit&&K.req.values===T.values&&_i(K.req.query.range,T.query.range)});return R?[R,!0,I,C]:[C.find(function(K){return("limit"in K.req?K.req.limit:1/0)>=T.limit&&(!T.values||K.req.values)&&Go(K.req.query.range,T.query.range)}),!1,I,C];case"count":return R=C.find(function(K){return _i(K.req.query.range,T.query.range)}),[R,!!R,I,C]}})(n,r,"query",c),x=g[0],h=g[1],k=g[2],v=g[3];return x&&h?x.obsSet=c.obsSet:(h=o.query(c).then(function(_){var w=_.result;if(x&&(x.res=w),f){for(var E=0,T=w.length;E<T;++E)Object.freeze(w[E]);Object.freeze(w)}else _.result=V(w);return _}).catch(function(_){return v&&x&&Be(v,x),Promise.reject(_)}),x={obsSet:c.obsSet,promise:h,subscribers:new Set,type:"query",req:c,dirty:!1},v?v.push(x):(v=[x],(k=k||(ot["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=v)),Yo(x,v,d,y),x.promise.then(function(_){return{result:bi(_.result,c,k?.optimisticOps,o,x,f)}})}})}})}};function xn(e,n){return new Proxy(e,{get:function(r,o,s){return o==="db"?n:Reflect.get(r,o,s)}})}var Ke=(le.prototype.version=function(e){if(isNaN(e)||e<.1)throw new G.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(o){return o._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(Mo),r.stores({}),this._state.autoSchema=!1,r)},le.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||U.letThrough||this._vip)?e():new L(function(r,o){if(n._state.openComplete)return o(new G.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void o(new G.DatabaseClosed);n.open().catch(oe)}n._state.dbReadyPromise.then(r,o)}).then(e)},le.prototype.use=function(e){var n=e.stack,r=e.create,o=e.level,s=e.name;return s&&this.unuse({stack:n,name:s}),e=this._middlewares[n]||(this._middlewares[n]=[]),e.push({stack:n,create:r,level:o??10,name:s}),e.sort(function(c,f){return c.level-f.level}),this},le.prototype.unuse=function(e){var n=e.stack,r=e.name,o=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(s){return o?s.create!==o:!!r&&s.name!==r})),this},le.prototype.open=function(){var e=this;return nt(qe,function(){return $o(e)})},le.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,n=mt.indexOf(this);if(0<=n&&mt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new L(function(r){e.dbReadyResolve=r}),e.openCanceller=new L(function(r,o){e.cancelOpen=o}))},le.prototype.close=function(r){var n=(r===void 0?{disableAutoOpen:!0}:r).disableAutoOpen,r=this._state;n?(r.isBeingOpened&&r.cancelOpen(new G.DatabaseClosed),this._close(),r.autoOpen=!1,r.dbOpenError=new G.DatabaseClosed):(this._close(),r.autoOpen=this._options.autoOpen||r.isBeingOpened,r.openComplete=!1,r.dbOpenError=null)},le.prototype.delete=function(e){var n=this;e===void 0&&(e={disableAutoOpen:!0});var r=0<arguments.length&&typeof arguments[0]!="object",o=this._state;return new L(function(s,c){function f(){n.close(e);var d=n._deps.indexedDB.deleteDatabase(n.name);d.onsuccess=ue(function(){var y,g,x;y=n._deps,g=n.name,x=y.indexedDB,y=y.IDBKeyRange,ar(x)||g===sn||or(x,y).delete(g).catch(oe),s()}),d.onerror=De(c),d.onblocked=n._fireOnBlocked}if(r)throw new G.InvalidArgument("Invalid closeOptions argument to db.delete()");o.isBeingOpened?o.dbReadyPromise.then(f):f()})},le.prototype.backendDB=function(){return this.idbdb},le.prototype.isOpen=function(){return this.idbdb!==null},le.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},le.prototype.hasFailed=function(){return this._state.dbOpenError!==null},le.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(le.prototype,"tables",{get:function(){var e=this;return S(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),le.prototype.transaction=function(){var e=(function(n,r,o){var s=arguments.length;if(s<2)throw new G.InvalidArgument("Too few arguments");for(var c=new Array(s-1);--s;)c[s-1]=arguments[s];return o=c.pop(),[n,Pt(c),o]}).apply(this,arguments);return this._transaction.apply(this,e)},le.prototype._transaction=function(e,n,r){var o=this,s=U.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);var c,f,d=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(f=n.map(function(g){if(g=g instanceof o.Table?g.name:g,typeof g!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),e=="r"||e===Gn)c=Gn;else{if(e!="rw"&&e!=Yn)throw new G.InvalidArgument("Invalid transaction mode: "+e);c=Yn}if(s){if(s.mode===Gn&&c===Yn){if(!d)throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&f.forEach(function(g){if(s&&s.storeNames.indexOf(g)===-1){if(!d)throw new G.SubTransaction("Table "+g+" not included in parent transaction.");s=null}}),d&&s&&!s.active&&(s=null)}}catch(g){return s?s._promise(null,function(x,h){h(g)}):ce(g)}var y=(function g(x,h,k,v,_){return L.resolve().then(function(){var w=U.transless||U,E=x._createTransaction(h,k,x._dbSchema,v);if(E.explicit=!0,w={trans:E,transless:w},v)E.idbtrans=v.idbtrans;else try{E.create(),E.idbtrans._explicit=!0,x._state.PR1398_maxLoop=3}catch(C){return C.name===Nn.InvalidState&&x.isOpen()&&0<--x._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),x.close({disableAutoOpen:!1}),x.open().then(function(){return g(x,h,k,null,_)})):ce(C)}var T,I=Se(_);return I&&yt(),w=L.follow(function(){var C;(T=_.call(E,E))&&(I?(C=ze.bind(null,null),T.then(C,C)):typeof T.next=="function"&&typeof T.throw=="function"&&(T=hr(T)))},w),(T&&typeof T.then=="function"?L.resolve(T).then(function(C){return E.active?C:ce(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):w.then(function(){return T})).then(function(C){return v&&E._resolve(),E._completion.then(function(){return C})}).catch(function(C){return E._reject(C),ce(C)})})}).bind(null,this,c,f,s,r);return s?s._promise(c,y,"lock"):U.trans?nt(U.transless,function(){return o._whenReady(y)}):this._whenReady(y)},le.prototype.table=function(e){if(!O(this._allTables,e))throw new G.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},le);function le(e,n){var r=this;this._middlewares={},this.verno=0;var o=le.dependencies;this._options=n=u({addons:le.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},o=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,c,f,d,y,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:oe,dbReadyPromise:null,cancelOpen:oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};g.dbReadyPromise=new L(function(h){g.dbReadyResolve=h}),g.openCanceller=new L(function(h,k){g.cancelOpen=k}),this._state=g,this.name=e,this.on=jt(this,"populate","blocked","versionchange","close",{ready:[Mn,oe]}),this.once=function(h,k){var v=function(){for(var _=[],w=0;w<arguments.length;w++)_[w]=arguments[w];r.on(h).unsubscribe(v),k.apply(r,_)};return r.on(h,v)},this.on.ready.subscribe=ne(this.on.ready.subscribe,function(h){return function(k,v){le.vip(function(){var _,w=r._state;w.openComplete?(w.dbOpenError||L.resolve().then(k),v&&h(k)):w.onReadyBeingFired?(w.onReadyBeingFired.push(k),v&&h(k)):(h(k),_=r,v||h(function E(){_.on.ready.unsubscribe(k),_.on.ready.unsubscribe(E)}))})}}),this.Collection=(s=this,Kt(Do.prototype,function(T,E){this.db=s;var v=Yr,_=null;if(E)try{v=E()}catch(I){_=I}var w=T._ctx,E=w.table,T=E.hook.reading.fire;this._ctx={table:E,index:w.index,isPrimKey:!w.index||E.schema.primKey.keyPath&&w.index===E.schema.primKey.name,range:v,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:w.or,valueMapper:T!==At?T:null}})),this.Table=(c=this,Kt(ti.prototype,function(h,k,v){this.db=c,this._tx=v,this.name=h,this.schema=k,this.hook=c._allTables[h]?c._allTables[h].hook:jt(null,{creating:[Eo,oe],reading:[xo,At],updating:[Oo,oe],deleting:[ko,oe]})})),this.Transaction=(f=this,Kt(jo.prototype,function(h,k,v,_,w){var E=this;h!=="readonly"&&k.forEach(function(T){T=(T=v[T])===null||T===void 0?void 0:T.yProps,T&&(k=k.concat(T.map(function(I){return I.updatesTable})))}),this.db=f,this.mode=h,this.storeNames=k,this.schema=v,this.chromeTransactionDurability=_,this.idbtrans=null,this.on=jt(this,"complete","error","abort"),this.parent=w||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new L(function(T,I){E._resolve=T,E._reject=I}),this._completion.then(function(){E.active=!1,E.on.complete.fire()},function(T){var I=E.active;return E.active=!1,E.on.error.fire(T),E.parent?E.parent._reject(T):I&&E.idbtrans&&E.idbtrans.abort(),ce(T)})})),this.Version=(d=this,Kt(zo.prototype,function(h){this.db=d,this._cfg={version:h,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(y=this,Kt(ai.prototype,function(h,k,v){if(this.db=y,this._ctx={table:h,index:k===":id"?null:k,or:v},this._cmp=this._ascending=te,this._descending=function(_,w){return te(w,_)},this._max=function(_,w){return 0<te(_,w)?_:w},this._min=function(_,w){return te(_,w)<0?_:w},this._IDBKeyRange=y._deps.IDBKeyRange,!this._IDBKeyRange)throw new G.MissingAPI})),this.on("versionchange",function(h){0<h.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(h){!h.newVersion||h.newVersion<h.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(h.oldVersion/10))}),this._maxKey=Mt(n.IDBKeyRange),this._createTransaction=function(h,k,v,_){return new r.Transaction(h,k,v,r._options.chromeTransactionDurability,_)},this._fireOnBlocked=function(h){r.on("blocked").fire(h),mt.filter(function(k){return k.name===r.name&&k!==r&&!k._state.vcFired}).map(function(k){return k.on("versionchange").fire(h)})},this.use(Vo),this.use(Xo),this.use(Ho),this.use(Wo),this.use(Uo);var x=new Proxy(this,{get:function(h,k,v){if(k==="_vip")return!0;if(k==="table")return function(w){return xn(r.table(w),x)};var _=Reflect.get(h,k,v);return _ instanceof ti?xn(_,x):k==="tables"?_.map(function(w){return xn(w,x)}):k==="_createTransaction"?function(){return xn(_.apply(this,arguments),x)}:_}});this.vip=x,o.forEach(function(h){return h(r)})}var En,Pe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Qo=(gr.prototype.subscribe=function(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})},gr.prototype[Pe]=function(){return this},gr);function gr(e){this._subscribe=e}try{En={indexedDB:p.indexedDB||p.mozIndexedDB||p.webkitIndexedDB||p.msIndexedDB,IDBKeyRange:p.IDBKeyRange||p.webkitIDBKeyRange}}catch{En={indexedDB:null,IDBKeyRange:null}}function wi(e){var n,r=!1,o=new Qo(function(s){var c=Se(e),f,d=!1,y={},g={},x={get closed(){return d},unsubscribe:function(){d||(d=!0,f&&f.abort(),h&&Ue.storagemutated.unsubscribe(v))}};s.start&&s.start(x);var h=!1,k=function(){return Hn(_)},v=function(w){bn(y,w),cr(g,y)&&k()},_=function(){var w,E,T;!d&&En.indexedDB&&(y={},w={},f&&f.abort(),f=new AbortController,T=(function(I){var C=ht();try{c&&yt();var R=Le(e,I);return R=c?R.finally(ze):R}finally{C&&pt()}})(E={subscr:w,signal:f.signal,requery:k,querier:e,trans:null}),Promise.resolve(T).then(function(I){r=!0,n=I,d||E.signal.aborted||(y={},(function(C){for(var R in C)if(O(C,R))return;return 1})(g=w)||h||(Ue(Nt,v),h=!0),Hn(function(){return!d&&s.next&&s.next(I)}))},function(I){r=!1,["DatabaseClosedError","AbortError"].includes(I?.name)||d||Hn(function(){d||s.error&&s.error(I)})}))};return setTimeout(k,0),x});return o.hasValue=function(){return r},o.getValue=function(){return n},o}var at=Ke;function vr(e){var n=Ve;try{Ve=!0,Ue.storagemutated.fire(e),dr(e,!0)}finally{Ve=n}}A(at,u(u({},Qt),{delete:function(e){return new at(e,{addons:[]}).delete()},exists:function(e){return new at(e,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=at.dependencies,r=n.indexedDB,n=n.IDBKeyRange,(ar(r)?Promise.resolve(r.databases()).then(function(o){return o.map(function(s){return s.name}).filter(function(s){return s!==sn})}):or(r,n).toCollection().primaryKeys()).then(e)}catch{return ce(new G.MissingAPI)}var n,r},defineClass:function(){return function(e){B(this,e)}},ignoreTransaction:function(e){return U.trans?nt(U.transless,e):e()},vip:sr,async:function(e){return function(){try{var n=hr(e.apply(this,arguments));return n&&typeof n.then=="function"?n:L.resolve(n)}catch(r){return ce(r)}}},spawn:function(e,n,r){try{var o=hr(e.apply(r,n||[]));return o&&typeof o.then=="function"?o:L.resolve(o)}catch(s){return ce(s)}},currentTransaction:{get:function(){return U.trans||null}},waitFor:function(e,n){return n=L.resolve(typeof e=="function"?at.ignoreTransaction(e):e).timeout(n||6e4),U.trans?U.trans.waitFor(n):n},Promise:L,debug:{get:function(){return Ce},set:function(e){zr(e)}},derive:$,extend:B,props:A,override:ne,Events:jt,on:Ue,liveQuery:wi,extendObservabilitySet:bn,getByKeyPath:pe,setByKeyPath:se,delByKeyPath:function(e,n){typeof n=="string"?se(e,n,void 0):"length"in n&&[].map.call(n,function(r){se(e,r,void 0)})},shallowClone:lt,deepClone:V,getObjectDiff:pr,cmp:te,asap:he,minKey:-1/0,addons:[],connections:mt,errnames:Nn,dependencies:En,cache:ot,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,n,r){return e+n/Math.pow(10,2*r)})})),at.maxKey=Mt(at.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ue(Nt,function(e){Ve||(e=new CustomEvent(Jn,{detail:e}),Ve=!0,dispatchEvent(e),Ve=!1)}),addEventListener(Jn,function(e){e=e.detail,Ve||vr(e)}));var _t,Ve=!1,xi=function(){};return typeof BroadcastChannel<"u"&&((xi=function(){(_t=new BroadcastChannel(Jn)).onmessage=function(e){return e.data&&vr(e.data)}})(),typeof _t.unref=="function"&&_t.unref(),Ue(Nt,function(e){Ve||_t.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ke.disableBfCache&&e.persisted){Ce&&console.debug("Dexie: handling persisted pagehide"),_t?.close();for(var n=0,r=mt;n<r.length;n++)r[n].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ke.disableBfCache&&e.persisted&&(Ce&&console.debug("Dexie: handling persisted pageshow"),xi(),vr({all:new ve(-1/0,[[]])}))})),L.rejectionMapper=function(e,n){return!e||e instanceof ft||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Lr[e.name]?e:(n=new Lr[e.name](n||e.message,e),"stack"in e&&H(n,"stack",{get:function(){return this.inner.stack}}),n)},zr(Ce),u(Ke,Object.freeze({__proto__:null,Dexie:Ke,liveQuery:wi,Entity:Xr,cmp:te,PropModification:Bt,replacePrefix:function(e,n){return new Bt({replacePrefix:[e,n]})},add:function(e){return new Bt({add:e})},remove:function(e){return new Bt({remove:e})},default:Ke,RangeSet:ve,mergeRanges:zt,rangesOverlap:fi}),{default:Ke}),Ke})})(Cn)),Cn.exports}var sa=aa();const Dr=Ji(sa),Ii=Symbol.for("Dexie"),Rn=globalThis[Ii]||(globalThis[Ii]=Dr);if(Dr.semVer!==Rn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Dr.semVer} and ${Rn.semVer}`);const{liveQuery:Qs,mergeRanges:Js,rangesOverlap:Zs,RangeSet:eu,cmp:tu,Entity:nu,PropModification:ru,replacePrefix:iu,add:ou,remove:au,DexieYProvider:su}=Rn,ua="dexie_kv_db";let Ae=Ht(void 0),Wt=Ht(!1);const kr={async init_db(){if(ge(Ae)&&ge(Wt))return ge(Ae);try{return Ne(Ae,new Rn(ua),!0),ge(Ae).version(1).stores({items:"++id, &only_key, any_type_value, update_time, remark"}),await ge(Ae).open(),Ne(Wt,!0),ge(Ae)}catch(t){throw console.error("Êï∞ÊçÆÂ∫ìÂàùÂßãÂåñÂ§±Ë¥•:",t),t}},async ensureDB(){return!ge(Ae)||!ge(Wt)?await this.init_db():ge(Ae)},get_time_s_date(t,i=""){let a;i?a=new Date(typeof i=="number"?i:parseInt(i,10)):a=new Date,isNaN(a.getTime())&&(a=new Date);let u=a.getSeconds(),l=a.getMinutes(),p=a.getHours(),S=a.getDate(),m=a.getMonth()+1,B=a.getFullYear(),P=["Âë®Êó•","Âë®‰∏Ä","Âë®‰∫å","Âë®‰∏â","Âë®Âõõ","Âë®‰∫î","Âë®ÂÖ≠"][a.getDay()];u=u<10?"0"+u:u,l=l<10?"0"+l:l,p=p<10?"0"+p:p,S=S<10?"0"+S:S,m=m<10?"0"+m:m;let b=t;return b=b.replaceAll("Y",B),b=b.replaceAll("m",m),b=b.replaceAll("d",S),b=b.replaceAll("H",p),b=b.replaceAll("i",l),b=b.replaceAll("s",u),b=b.replaceAll("W",P),b*1},async test_db(){let t=this;try{let i=[{only_key:"test",any_type_value:{test:2025},update_time:t.get_time_s_date("YmdHis"),remark:"ÊµãËØï"}];const a=await this.update_db_data(i);return console.log("ÊµãËØïÊï∞ÊçÆÊèíÂÖ•ÊàêÂäü, IDs:",a),a}catch(i){return console.error("ÊµãËØïÂ§±Ë¥•:",i),[]}},async update_db_data(t=[]){let i=this;if(!Array.isArray(t)||t.length===0)return console.warn("Ë¶ÅÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÊ†ºÂºè‰∏çÊ≠£Á°ÆÊàñ‰∏∫Á©∫"),[];try{const a=await this.ensureDB(),u=[];return await a.transaction("rw",a.items,async()=>{for(const l of t){if(!l.only_key||l.only_key.indexOf("%")!==-1||l.only_key.indexOf("&")!==-1||l.only_key.indexOf("^")!==-1||l.only_key.indexOf("$")!==-1||l.only_key.indexOf("!")!==-1){console.warn("only_keyÁº∫Â§±ÊàñÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶, Ë∑≥Ëøá:",l);continue}const p=await a.items.where("only_key").equals(l.only_key).first(),S=i.get_time_s_date("YmdHis");if(p)await a.items.update(p.id,{any_type_value:l.any_type_value,update_time:S,remark:l.remark!==void 0?l.remark:p.remark}),u.push(p.id);else{const m={only_key:l.only_key,any_type_value:l.any_type_value,update_time:l.update_time||S,remark:l.remark||""},B=await a.items.add(m);u.push(B)}}}),u}catch(a){return console.error("Êõ¥Êñ∞Êï∞ÊçÆÂ§±Ë¥•:",a),[]}},async get_db_data(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",t),null;try{const a=await(await this.ensureDB()).items.where("only_key").equals(t).toArray();return a.length>0?a[0]:null}catch(i){return console.error("Êü•ËØ¢Êï∞ÊçÆÂ§±Ë¥•:",i),null}},async get_has_prefix_key_db_datas(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",t),[];try{return await(await this.ensureDB()).items.where("only_key").startsWith(t).toArray()}catch(i){return console.error("Êü•ËØ¢ÂâçÁºÄÊï∞ÊçÆÂ§±Ë¥•:",i),[]}},async get_contains_key_db_datas(t=""){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",t),[];try{return(await(await this.ensureDB()).items.toArray()).filter(u=>u.only_key&&u.only_key.includes(t))}catch(i){return console.error("Êü•ËØ¢ÂåÖÂê´Â≠óÁ¨¶ÁöÑÊï∞ÊçÆÂ§±Ë¥•:",i),[]}},async del_db_data(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",t),!1;try{return await(await this.ensureDB()).items.where("only_key").equals(t).delete()>0}catch(i){return console.error("Âà†Èô§Êï∞ÊçÆÂ§±Ë¥•:",i),!1}},async del_timeout_db_datas(t,i){if(!t||!i)return console.warn("ËØ∑Êèê‰æõÊúâÊïàÁöÑÊó∂Èó¥ËåÉÂõ¥"),0;try{const a=await this.ensureDB(),u=Number(t),l=Number(i);return isNaN(u)||isNaN(l)?(console.warn("Êó∂Èó¥ÂèÇÊï∞Êó†Êïà"),0):await a.items.where("update_time").between(u,l).delete()}catch(a){return console.error("Âà†Èô§Êó∂Èó¥ÊÆµÊï∞ÊçÆÂ§±Ë¥•:",a),0}},async del_has_prefix_key_db_datas(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",t),0;try{return await(await this.ensureDB()).items.where("only_key").startsWith(t).delete()}catch(i){return console.error("Âà†Èô§ÂâçÁºÄÊï∞ÊçÆÂ§±Ë¥•:",i),0}},async get_all_db_data(){try{return await(await this.ensureDB()).items.toArray()}catch(t){return console.error("Ëé∑ÂèñÊâÄÊúâÊï∞ÊçÆÂ§±Ë¥•:",t),[]}},async get_db_data_count(){try{return await(await this.ensureDB()).items.count()}catch(t){return console.error("ÁªüËÆ°Êï∞ÊçÆÊï∞ÈáèÂ§±Ë¥•:",t),0}},async del_many_db_data(t=[]){try{const i=await this.ensureDB();let a=0;return await i.transaction("rw",i.items,async()=>{for(const u of t){if(u.indexOf("%")!==-1||u.indexOf("&")!==-1||u.indexOf("^")!==-1||u.indexOf("$")!==-1||u.indexOf("!")!==-1){console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",u);continue}const l=await i.items.where("only_key").equals(u).delete();a+=l}}),a}catch(i){return console.error("ÊâπÈáèÂà†Èô§Êï∞ÊçÆÂ§±Ë¥•:",i),0}},async close_db(){if(ge(Ae)&&ge(Wt))try{await ge(Ae).close(),Ne(Ae,null),Ne(Wt,!1)}catch(t){console.error("ÂÖ≥Èó≠Êï∞ÊçÆÂ∫ìÂ§±Ë¥•:",t)}}},Tn=Gt({alert_show:"hide",alert_msg:""}),Sn=Gt({loading_show:"hide",loading_msg:""});var ca=Object.defineProperty,Zi=t=>{throw TypeError(t)},la=(t,i,a)=>i in t?ca(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,He=(t,i,a)=>la(t,typeof i!="symbol"?i+"":i,a),fa=(t,i,a)=>i.has(t)||Zi("Cannot "+a),Ci=(t,i,a)=>(fa(t,i,"read from private field"),i.get(t)),da=(t,i,a)=>i.has(t)?Zi("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(t):i.set(t,a);function uu(t){return t==null?[]:Array.isArray(t)?t:[t]}var Di=t=>t?.constructor.name==="Array",ha=(t,i)=>{if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(!eo(t[a],i[a]))return!1;return!0},eo=(t,i)=>{if(Object.is(t,i))return!0;if(t==null&&i!=null||t!=null&&i==null)return!1;if(typeof t?.isEqual=="function"&&typeof i?.isEqual=="function")return t.isEqual(i);if(typeof t=="function"&&typeof i=="function")return t.toString()===i.toString();if(Di(t)&&Di(i))return ha(Array.from(t),Array.from(i));if(typeof t!="object"||typeof i!="object")return!1;const a=Object.keys(i??Object.create(null)),u=a.length;for(let l=0;l<u;l++)if(!Reflect.has(t,a[l]))return!1;for(let l=0;l<u;l++){const p=a[l];if(!eo(t[p],i[p]))return!1}return!0},pa=t=>t!=null&&typeof t=="object",Or=t=>typeof t=="string",to=t=>typeof t=="function",ya=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),ma=t=>Object.prototype.toString.call(t),no=Function.prototype.toString,ga=no.call(Object),va=t=>{if(!pa(t)||ma(t)!="[object Object]"||wa(t))return!1;const i=Object.getPrototypeOf(t);if(i===null)return!0;const a=ya(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&no.call(a)==ga},ba=t=>typeof t=="object"&&t!==null&&"$$typeof"in t&&"props"in t,_a=t=>typeof t=="object"&&t!==null&&"__v_isVNode"in t,wa=t=>ba(t)||_a(t),Pn=(t,...i)=>(typeof t=="function"?t(...i):t)??void 0,cu=t=>t(),Rr=(...t)=>(...i)=>{t.forEach(function(a){a?.(...i)})},ro=(()=>{let t=0;return()=>(t++,t.toString(36))})();function io(t){if(!va(t)||t===void 0)return t;const i=Reflect.ownKeys(t).filter(u=>typeof u=="string"),a={};for(const u of i){const l=t[u];l!==void 0&&(a[u]=io(l))}return a}function xa(t,i){const a={},u={},l=new Set(i),p=Reflect.ownKeys(t);for(const S of p)l.has(S)?u[S]=t[S]:a[S]=t[S];return[u,a]}var lu=t=>function(a){return xa(a,t)},An=()=>performance.now(),Dn,Ea=class{constructor(t){this.onTick=t,He(this,"frameId",null),He(this,"pausedAtMs",null),He(this,"context"),He(this,"cancelFrame",()=>{this.frameId!==null&&(cancelAnimationFrame(this.frameId),this.frameId=null)}),He(this,"setStartMs",i=>{this.context.startMs=i}),He(this,"start",()=>{if(this.frameId!==null)return;const i=An();this.pausedAtMs!==null?(this.context.startMs+=i-this.pausedAtMs,this.pausedAtMs=null):this.context.startMs=i,this.frameId=requestAnimationFrame(Ci(this,Dn))}),He(this,"pause",()=>{this.frameId!==null&&(this.cancelFrame(),this.pausedAtMs=An())}),He(this,"stop",()=>{this.frameId!==null&&(this.cancelFrame(),this.pausedAtMs=null)}),da(this,Dn,i=>{if(this.context.now=i,this.context.deltaMs=i-this.context.startMs,this.onTick(this.context)===!1){this.stop();return}this.frameId=requestAnimationFrame(Ci(this,Dn))}),this.context={now:0,startMs:An(),deltaMs:0}}get elapsedMs(){return this.pausedAtMs!==null?this.pausedAtMs-this.context.startMs:An()-this.context.startMs}};Dn=new WeakMap;function Tr(t,i){const a=new Ea(({deltaMs:u})=>{if(u>=i)return t(),!1});return a.start(),()=>a.stop()}function jr(...t){t.length===1?t[0]:t[1],t.length===2&&t[0]}function fu(t,i){if(t==null)throw new Error(i())}function ka(t,i,a){let u=[];for(const l of i)t[l]==null&&u.push(l);if(u.length>0)throw new Error(`[zag-js${` > ${a}`}] missing required props: ${u.join(", ")}`)}var Oa=Object.defineProperty,Ta=(t,i,a)=>i in t?Oa(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,Sr=(t,i,a)=>Ta(t,typeof i!="symbol"?i+"":i,a),oo=()=>{},jn=t=>typeof t=="object"&&t!==null,Sa=2147483647,wt=t=>t?"":void 0,Pa=1,Aa=9,Ia=11,we=t=>jn(t)&&t.nodeType===Pa&&typeof t.nodeName=="string",Kr=t=>jn(t)&&t.nodeType===Aa,Ca=t=>jn(t)&&t===t.window,ao=t=>we(t)?t.localName||"":"#document";function Da(t){return["html","body","#document"].includes(ao(t))}var Ra=t=>jn(t)&&t.nodeType!==void 0,St=t=>Ra(t)&&t.nodeType===Ia&&"host"in t,Ba=t=>we(t)&&t.localName==="input",ja=t=>we(t)?t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0:!1;function Ka(t){if(!t)return!1;const i=t.getRootNode();return so(i)===t}var Fa=/(textarea|select)/;function Na(t){if(t==null||!we(t))return!1;try{return Ba(t)&&t.selectionStart!=null||Fa.test(t.localName)||t.isContentEditable||t.getAttribute("contenteditable")==="true"||t.getAttribute("contenteditable")===""}catch{return!1}}function Vt(t,i){if(!t||!i||!we(t)||!we(i))return!1;const a=i.getRootNode?.();if(t===i||t.contains(i))return!0;if(a&&St(a)){let u=i;for(;u;){if(t===u)return!0;u=u.parentNode||u.host}}return!1}function ct(t){return Kr(t)?t:Ca(t)?t.document:t?.ownerDocument??document}function Ma(t){return ct(t).documentElement}function Yt(t){return St(t)?Yt(t.host):Kr(t)?t.defaultView??window:we(t)?t.ownerDocument?.defaultView??window:window}function so(t){let i=t.activeElement;for(;i?.shadowRoot;){const a=i.shadowRoot.activeElement;if(!a||a===i)break;i=a}return i}function qa(t){if(ao(t)==="html")return t;const i=t.assignedSlot||t.parentNode||St(t)&&t.host||Ma(t);return St(i)?i.host:i}function Fr(t){let i;try{if(i=t.getRootNode({composed:!0}),Kr(i)||St(i))return i}catch{}return t.ownerDocument??document}var Pr=new WeakMap;function du(t){return Pr.has(t)||Pr.set(t,Yt(t).getComputedStyle(t)),Pr.get(t)}var Nr=new Set(["menu","listbox","dialog","grid","tree","region"]),La=t=>Nr.has(t),uo=t=>t.getAttribute("aria-controls")?.split(" ")||[];function za(t,i){const a=new Set,u=Fr(t),l=p=>{const S=p.querySelectorAll("[aria-controls]");for(const m of S){if(m.getAttribute("aria-expanded")!=="true")continue;const B=uo(m);for(const P of B){if(!P||a.has(P))continue;a.add(P);const b=u.getElementById(P);if(b){const O=b.getAttribute("role"),A=b.getAttribute("aria-modal")==="true";if(O&&La(O)&&!A&&(b===i||b.contains(i)||l(b)))return!0}}}return!1};return l(t)}function $a(t,i){const a=Fr(t),u=new Set,l=p=>{const S=p.querySelectorAll("[aria-controls]");for(const m of S){if(m.getAttribute("aria-expanded")!=="true")continue;const B=uo(m);for(const P of B){if(!P||u.has(P))continue;u.add(P);const b=a.getElementById(P);if(b){const O=b.getAttribute("role"),A=b.getAttribute("aria-modal")==="true";O&&Nr.has(O)&&!A&&(i(b),l(b))}}}};l(t)}function hu(t){const i=new Set;return $a(t,a=>{t.contains(a)||i.add(a)}),Array.from(i)}function Wa(t){const i=t.getAttribute("role");return!!(i&&Nr.has(i))}function Ua(t){return t.hasAttribute("aria-controls")&&t.getAttribute("aria-expanded")==="true"}function pu(t){return Ua(t)?!0:!!t.querySelector?.('[aria-controls][aria-expanded="true"]')}function yu(t){if(!t.id)return!1;const i=Fr(t),a=CSS.escape(t.id),u=`[aria-controls~="${a}"][aria-expanded="true"], [aria-controls="${a}"][aria-expanded="true"]`;return!!(i.querySelector(u)&&Wa(t))}var co=()=>typeof document<"u";function Va(){return navigator.userAgentData?.platform??navigator.platform}var Mr=t=>co()&&t.test(Va()),Ri=()=>co()&&!!navigator.maxTouchPoints,Ha=()=>Mr(/^iPhone/i),Ga=()=>Mr(/^iPad/i)||lo()&&navigator.maxTouchPoints>1,mu=()=>Ha()||Ga(),lo=()=>Mr(/^Mac/i);function Ya(t){return t.composedPath?.()??t.nativeEvent?.composedPath?.()}function Bn(t){return Ya(t)?.[0]??t.target}var Xa=t=>t.button===2||lo()&&t.ctrlKey&&t.button===0,Ot=(t,i,a,u)=>{const l=typeof t=="function"?t():t;return l?.addEventListener(i,a,u),()=>{l?.removeEventListener(i,a,u)}},fo=t=>we(t)&&t.tagName==="IFRAME",Qa=/^(audio|video|details)$/;function ho(t){const i=t.getAttribute("tabindex");return i?parseInt(i,10):NaN}var Ja=t=>!Number.isNaN(ho(t)),Za=t=>ho(t)<0;function es(t,i){if(!i)return null;if(i===!0)return t.shadowRoot||null;const a=i(t);return(a===!0?t.shadowRoot:a)||null}function po(t,i,a){const u=[...t],l=[...t],p=new Set,S=new Map;t.forEach((B,P)=>S.set(B,P));let m=0;for(;m<l.length;){const B=l[m++];if(!B||p.has(B))continue;p.add(B);const P=es(B,i);if(P){const b=Array.from(P.querySelectorAll(Kn)).filter(a),O=S.get(B);if(O!==void 0){const A=O+1;u.splice(A,0,...b),b.forEach((D,H)=>{S.set(D,A+H)});for(let D=A+b.length;D<u.length;D++)S.set(u[D],D)}else{const A=u.length;u.push(...b),b.forEach((D,H)=>{S.set(D,A+H)})}l.push(...b)}}return u}var Kn="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",ts=(t,i={})=>{if(!t)return[];const{includeContainer:a=!1,getShadowRoot:u}=i,l=Array.from(t.querySelectorAll(Kn));(a==!0||a=="if-empty"&&l.length===0)&&we(t)&&Tt(t)&&l.unshift(t);const S=[];for(const m of l)if(Tt(m)){if(fo(m)&&m.contentDocument){const B=m.contentDocument.body;S.push(...ts(B,{getShadowRoot:u}));continue}S.push(m)}return u?po(S,u,Tt):S};function Tt(t){return!we(t)||t.closest("[inert]")?!1:t.matches(Kn)&&ja(t)}function ns(t,i={}){if(!t)return[];const{includeContainer:a,getShadowRoot:u}=i,l=Array.from(t.querySelectorAll(Kn));a&&Ar(t)&&l.unshift(t);const p=[];for(const S of l)if(Ar(S)){if(fo(S)&&S.contentDocument){const m=S.contentDocument.body;p.push(...ns(m,{getShadowRoot:u}));continue}p.push(S)}if(u){const S=po(p,u,Ar);return!S.length&&a?l:S}return!p.length&&a?l:p}function Ar(t){return we(t)&&t.tabIndex>0?!0:Tt(t)&&!Za(t)}function gu(t){return t.tabIndex<0&&(Qa.test(t.localName)||Na(t))&&!Ja(t)?0:t.tabIndex}var yo=class mo{constructor(){Sr(this,"id",null),Sr(this,"fn_cleanup"),Sr(this,"cleanup",()=>{this.cancel()})}static create(){return new mo}request(i){this.cancel(),this.id=globalThis.requestAnimationFrame(()=>{this.id=null,this.fn_cleanup=i?.()})}cancel(){this.id!==null&&(globalThis.cancelAnimationFrame(this.id),this.id=null),this.fn_cleanup?.(),this.fn_cleanup=void 0}isActive(){return this.id!==null}};function ut(t){const i=yo.create();return i.request(t),i.cleanup}function Br(t){const i=qa(t);return Da(i)?ct(i).body:we(i)&&os(i)?i:Br(i)}var rs=/auto|scroll|overlay|hidden|clip/,is=new Set(["inline","contents"]);function os(t){const i=Yt(t),{overflow:a,overflowX:u,overflowY:l,display:p}=i.getComputedStyle(t);return rs.test(a+l+u)&&!is.has(p)}function as(t,i){if(!t)return oo;const a=Object.keys(i).reduce((u,l)=>(u[l]=t.style.getPropertyValue(l),u),{});return Object.assign(t.style,i),()=>{Object.assign(t.style,a),t.style.length===0&&t.removeAttribute("style")}}function vu(t,i,a){if(!t)return oo;const u=t.style.getPropertyValue(i);return t.style.setProperty(i,a),()=>{t.style.setProperty(i,u),t.style.length===0&&t.removeAttribute("style")}}function ss(t,i,a){const{signal:u}=i;return[new Promise((S,m)=>{const B=setTimeout(()=>{m(new Error(`Timeout of ${a}ms exceeded`))},a);u.addEventListener("abort",()=>{clearTimeout(B),m(new Error("Promise aborted"))}),t.then(P=>{u.aborted||(clearTimeout(B),S(P))}).catch(P=>{u.aborted||(clearTimeout(B),m(P))})}),()=>i.abort()]}function us(t,i){const{timeout:a,rootNode:u}=i,l=Yt(u),p=ct(u),S=new l.AbortController;return ss(new Promise(m=>{const B=t();if(B){m(B);return}const P=new l.MutationObserver(()=>{const b=t();b&&b.isConnected&&(P.disconnect(),m(b))});P.observe(p.body,{childList:!0,subtree:!0})}),S,a)}var cs=(...t)=>t.map(i=>i?.trim?.()).filter(Boolean).join(" "),ls=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,Bi=t=>{const i={};let a;for(;a=ls.exec(t);)i[a[1]]=a[2];return i},fs=(t,i)=>{if(Or(t)){if(Or(i))return`${t};${i}`;t=Bi(t)}else Or(i)&&(i=Bi(i));return Object.assign({},t??{},i??{})};function bu(...t){let i={};for(let a of t){if(!a)continue;for(let l in i){if(l.startsWith("on")&&typeof i[l]=="function"&&typeof a[l]=="function"){i[l]=Rr(a[l],i[l]);continue}if(l==="className"||l==="class"){i[l]=cs(i[l],a[l]);continue}if(l==="style"){i[l]=fs(i[l],a[l]);continue}i[l]=a[l]!==void 0?a[l]:i[l]}for(let l in a)i[l]===void 0&&(i[l]=a[l]);const u=Object.getOwnPropertySymbols(a);for(let l of u)i[l]=a[l]}return i}function go(){return{and:(...t)=>function(a){return t.every(u=>a.guard(u))},or:(...t)=>function(a){return t.some(u=>a.guard(u))},not:t=>function(a){return!a.guard(t)}}}function _u(t){return t}function ds(){return{guards:go(),createMachine:t=>t,choose:t=>function({choose:a}){return a(t)?.actions}}}var hs=(t=>(t.NotStarted="Not Started",t.Started="Started",t.Stopped="Stopped",t))(hs||{}),wu="__init__";function xu(t){const i=()=>t.getRootNode?.()??document,a=()=>ct(i());return{...t,getRootNode:i,getDoc:a,getWin:()=>a().defaultView??window,getActiveElement:()=>so(i()),isActiveElement:Ka,getById:S=>i().getElementById(S)}}var Ut=(t,i=[])=>({parts:(...a)=>{if(ps(i))return Ut(t,a);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...a)=>Ut(t,[...i,...a]),omit:(...a)=>Ut(t,i.filter(u=>!a.includes(u))),rename:a=>Ut(a,i),keys:()=>i,build:()=>[...new Set(i)].reduce((a,u)=>Object.assign(a,{[u]:{selector:[`&[data-scope="${xt(t)}"][data-part="${xt(u)}"]`,`& [data-scope="${xt(t)}"][data-part="${xt(u)}"]`].join(", "),attrs:{"data-scope":xt(t),"data-part":xt(u)}}}),{})}),xt=t=>t.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),ps=t=>t.length===0;function ys(t){const i={each(a){for(let u=0;u<t.frames?.length;u+=1){const l=t.frames[u];l&&a(l)}},addEventListener(a,u,l){return i.each(p=>{try{p.document.addEventListener(a,u,l)}catch{}}),()=>{try{i.removeEventListener(a,u,l)}catch{}}},removeEventListener(a,u,l){i.each(p=>{try{p.document.removeEventListener(a,u,l)}catch{}})}};return i}function ms(t){const i=t.frameElement!=null?t.parent:null;return{addEventListener:(a,u,l)=>{try{i?.addEventListener(a,u,l)}catch{}return()=>{try{i?.removeEventListener(a,u,l)}catch{}}},removeEventListener:(a,u,l)=>{try{i?.removeEventListener(a,u,l)}catch{}}}}var ji="pointerdown.outside",Ki="focus.outside";function gs(t){for(const i of t)if(we(i)&&Tt(i))return!0;return!1}var vo=t=>"clientY"in t;function vs(t,i){if(!vo(i)||!t)return!1;const a=t.getBoundingClientRect();return a.width===0||a.height===0?!1:a.top<=i.clientY&&i.clientY<=a.top+a.height&&a.left<=i.clientX&&i.clientX<=a.left+a.width}function bs(t,i){return t.y<=i.y&&i.y<=t.y+t.height&&t.x<=i.x&&i.x<=t.x+t.width}function Fi(t,i){if(!i||!vo(t))return!1;const a=i.scrollHeight>i.clientHeight,u=a&&t.clientX>i.offsetLeft+i.clientWidth,l=i.scrollWidth>i.clientWidth,p=l&&t.clientY>i.offsetTop+i.clientHeight,S={x:i.offsetLeft,y:i.offsetTop,width:i.clientWidth+(a?16:0),height:i.clientHeight+(l?16:0)},m={x:t.clientX,y:t.clientY};return bs(S,m)?u||p:!1}function _s(t,i){const{exclude:a,onFocusOutside:u,onPointerDownOutside:l,onInteractOutside:p,defer:S,followControlledElements:m=!0}=i;if(!t)return;const B=ct(t),P=Yt(t),b=ys(P),O=ms(P);function A(ne,Z){if(!we(Z)||!Z.isConnected||Vt(t,Z)||vs(t,ne)||m&&za(t,Z))return!1;const he=B.querySelector(`[aria-controls="${t.id}"]`);if(he){const se=Br(he);if(Fi(ne,se))return!1}const pe=Br(t);return Fi(ne,pe)?!1:!a?.(Z)}const D=new Set,H=St(t?.getRootNode());function $(ne){function Z(he){const pe=S&&!Ri()?ut:Ge=>Ge(),se=he??ne,lt=se?.composedPath?.()??[se?.target];pe(()=>{const Ge=H?lt[0]:Bn(ne);if(!(!t||!A(ne,Ge))){if(l||p){const Pt=Rr(l,p);t.addEventListener(ji,Pt,{once:!0})}Ni(t,ji,{bubbles:!1,cancelable:!0,detail:{originalEvent:se,contextmenu:Xa(se),focusable:gs(lt),target:Ge}})}})}ne.pointerType==="touch"?(D.forEach(he=>he()),D.add(Ot(B,"click",Z,{once:!0})),D.add(O.addEventListener("click",Z,{once:!0})),D.add(b.addEventListener("click",Z,{once:!0}))):Z()}const J=new Set,ie=setTimeout(()=>{J.add(Ot(B,"pointerdown",$,!0)),J.add(O.addEventListener("pointerdown",$,!0)),J.add(b.addEventListener("pointerdown",$,!0))},0);function de(ne){(S?ut:he=>he())(()=>{const he=ne?.composedPath?.()??[ne?.target],pe=H?he[0]:Bn(ne);if(!(!t||!A(ne,pe))){if(u||p){const se=Rr(u,p);t.addEventListener(Ki,se,{once:!0})}Ni(t,Ki,{bubbles:!1,cancelable:!0,detail:{originalEvent:ne,contextmenu:!1,focusable:Tt(pe),target:pe}})}})}return Ri()||(J.add(Ot(B,"focusin",de,!0)),J.add(O.addEventListener("focusin",de,!0)),J.add(b.addEventListener("focusin",de,!0))),()=>{clearTimeout(ie),D.forEach(ne=>ne()),J.forEach(ne=>ne())}}function ws(t,i){const{defer:a}=i,u=a?ut:p=>p(),l=[];return l.push(u(()=>{const p=typeof t=="function"?t():t;l.push(_s(p,i))})),()=>{l.forEach(p=>p?.())}}function Ni(t,i,a){const u=t.ownerDocument.defaultView||window,l=new u.CustomEvent(i,a);return t.dispatchEvent(l)}function xs(t,i){const a=u=>{u.key==="Escape"&&(u.isComposing||i?.(u))};return Ot(ct(t),"keydown",a,{capture:!0})}var Mi="layer:request-dismiss",ke={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(t=>t.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(t){const i=this.indexOf(t),a=this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1;return i<a},isTopMost(t){return this.layers[this.count()-1]?.node===t},getNestedLayers(t){return Array.from(this.layers).slice(this.indexOf(t)+1)},getLayersByType(t){return this.layers.filter(i=>i.type===t)},getNestedLayersByType(t,i){const a=this.indexOf(t);return a===-1?[]:this.layers.slice(a+1).filter(u=>u.type===i)},getParentLayerOfType(t,i){const a=this.indexOf(t);if(!(a<=0))return this.layers.slice(0,a).reverse().find(u=>u.type===i)},countNestedLayersOfType(t,i){return this.getNestedLayersByType(t,i).length},isInNestedLayer(t,i){return this.getNestedLayers(t).some(a=>Vt(a.node,i))},isInBranch(t){return Array.from(this.branches).some(i=>Vt(i,t))},add(t){this.layers.push(t),this.syncLayers()},addBranch(t){this.branches.push(t)},remove(t){const i=this.indexOf(t);i<0||(i<this.count()-1&&this.getNestedLayers(t).forEach(u=>ke.dismiss(u.node,t)),this.layers.splice(i,1),this.syncLayers())},removeBranch(t){const i=this.branches.indexOf(t);i>=0&&this.branches.splice(i,1)},syncLayers(){this.layers.forEach((t,i)=>{t.node.style.setProperty("--layer-index",`${i}`),t.node.removeAttribute("data-nested"),t.node.removeAttribute("data-has-nested"),this.getParentLayerOfType(t.node,t.type)&&t.node.setAttribute("data-nested",t.type);const u=this.countNestedLayersOfType(t.node,t.type);u>0&&t.node.setAttribute("data-has-nested",t.type),t.node.style.setProperty("--nested-layer-count",`${u}`)})},indexOf(t){return this.layers.findIndex(i=>i.node===t)},dismiss(t,i){const a=this.indexOf(t);if(a===-1)return;const u=this.layers[a];ks(t,Mi,l=>{u.requestDismiss?.(l),l.defaultPrevented||u?.dismiss()}),Es(t,Mi,{originalLayer:t,targetLayer:i,originalIndex:a,targetIndex:i?this.indexOf(i):-1}),this.syncLayers()},clear(){this.remove(this.layers[0].node)}};function Es(t,i,a){const u=t.ownerDocument.defaultView||window,l=new u.CustomEvent(i,{cancelable:!0,bubbles:!0,detail:a});return t.dispatchEvent(l)}function ks(t,i,a){t.addEventListener(i,a,{once:!0})}var qi;function Li(){ke.layers.forEach(({node:t})=>{t.style.pointerEvents=ke.isBelowPointerBlockingLayer(t)?"none":"auto"})}function Os(t){t.style.pointerEvents=""}function Ts(t,i){const a=ct(t),u=[];return ke.hasPointerBlockingLayer()&&!a.body.hasAttribute("data-inert")&&(qi=document.body.style.pointerEvents,queueMicrotask(()=>{a.body.style.pointerEvents="none",a.body.setAttribute("data-inert","")})),i?.forEach(l=>{const[p,S]=us(()=>{const m=l();return we(m)?m:null},{timeout:1e3});p.then(m=>u.push(as(m,{pointerEvents:"auto"}))),u.push(S)}),()=>{ke.hasPointerBlockingLayer()||(queueMicrotask(()=>{a.body.style.pointerEvents=qi,a.body.removeAttribute("data-inert"),a.body.style.length===0&&a.body.removeAttribute("style")}),u.forEach(l=>l()))}}function Ss(t,i){const{warnOnMissingNode:a=!0}=i;if(a&&!t){jr("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!t)return;const{onDismiss:u,onRequestDismiss:l,pointerBlocking:p,exclude:S,debug:m,type:B="dialog"}=i,P={dismiss:u,node:t,type:B,pointerBlocking:p,requestDismiss:l};ke.add(P),Li();function b($){const J=Bn($.detail.originalEvent);ke.isBelowPointerBlockingLayer(t)||ke.isInBranch(J)||(i.onPointerDownOutside?.($),i.onInteractOutside?.($),!$.defaultPrevented&&(m&&console.log("onPointerDownOutside:",$.detail.originalEvent),u?.()))}function O($){const J=Bn($.detail.originalEvent);ke.isInBranch(J)||(i.onFocusOutside?.($),i.onInteractOutside?.($),!$.defaultPrevented&&(m&&console.log("onFocusOutside:",$.detail.originalEvent),u?.()))}function A($){ke.isTopMost(t)&&(i.onEscapeKeyDown?.($),!$.defaultPrevented&&u&&($.preventDefault(),u()))}function D($){if(!t)return!1;const J=typeof S=="function"?S():S,ie=Array.isArray(J)?J:[J],de=i.persistentElements?.map(ne=>ne()).filter(we);return de&&ie.push(...de),ie.some(ne=>Vt(ne,$))||ke.isInNestedLayer(t,$)}const H=[p?Ts(t,i.persistentElements):void 0,xs(t,A),ws(t,{exclude:D,onFocusOutside:O,onPointerDownOutside:b,defer:i.defer})];return()=>{ke.remove(t),Li(),Os(t),H.forEach($=>$?.())}}function Eu(t,i){const{defer:a}=i,u=a?ut:p=>p(),l=[];return l.push(u(()=>{const p=to(t)?t():t;l.push(Ss(p,i))})),()=>{l.forEach(p=>p?.())}}function Ps(t,i={}){const{defer:a}=i,u=a?ut:p=>p(),l=[];return l.push(u(()=>{const p=to(t)?t():t;if(!p){jr("[@zag-js/dismissable] branch node is `null` or `undefined`");return}ke.addBranch(p),l.push(()=>{ke.removeBranch(p)})})),()=>{l.forEach(p=>p?.())}}var As=Ut("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),kt=As.build(),Is=t=>`toast-group:${t}`,zi=(t,i)=>t.getById(`toast-group:${i}`),bo=t=>`toast:${t.id}`,$i=t=>t.getById(bo(t)),Wi=t=>`toast:${t.id}:title`,Ui=t=>`toast:${t.id}:description`,Cs=t=>`toast${t.id}:close`,Vi={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function Ir(t,i){return t??Vi[i]??Vi.DEFAULT}var Ds=t=>typeof t=="string"?{left:t,right:t,bottom:t,top:t}:t;function Rs(t,i){const{prop:a,computed:u,context:l}=t,{offsets:p,gap:S}=a("store").attrs,m=l.get("heights"),B=Ds(p),P=a("dir")==="rtl",b=i.replace("-start",P?"-right":"-left").replace("-end",P?"-left":"-right"),O=b.includes("right"),A=b.includes("left"),D={position:"fixed",pointerEvents:u("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${S}px`,"--first-height":`${m[0]?.height||0}px`,"--viewport-offset-left":B.left,"--viewport-offset-right":B.right,"--viewport-offset-top":B.top,"--viewport-offset-bottom":B.bottom,zIndex:Sa};let H="center";if(O&&(H="flex-end"),A&&(H="flex-start"),D.alignItems=H,b.includes("top")){const $=B.top;D.top=`max(env(safe-area-inset-top, 0px), ${$})`}if(b.includes("bottom")){const $=B.bottom;D.bottom=`max(env(safe-area-inset-bottom, 0px), ${$})`}if(!b.includes("left")){const $=B.right;D.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${$})`}if(!b.includes("right")){const $=B.left;D.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${$})`}return D}function Bs(t,i){const{prop:a,context:u,computed:l}=t,p=a("parent"),S=p.computed("placement"),{gap:m}=p.prop("store").attrs,[B]=S.split("-"),P=u.get("mounted"),b=u.get("remainingTime"),O=l("height"),A=l("frontmost"),D=!A,H=!a("stacked"),$=a("stacked"),ie=a("type")==="loading"?Number.MAX_SAFE_INTEGER:b,de=l("heightIndex")*m+l("heightBefore"),ne={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${a("removeDelay")}ms`,"--duration":`${ie}ms`,"--initial-height":`${O}px`,"--offset":`${de}px`,"--index":a("index"),"--z-index":l("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},Z=he=>Object.assign(ne,he);return B==="top"?Z({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):B==="bottom"&&Z({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),P&&(Z({"--y":"0","--opacity":"1"}),$&&Z({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),i||Z({"--opacity":"0",pointerEvents:"none"}),D&&H&&(Z({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),i||Z({"--y":"calc(var(--sign) * 40%)"})),D&&$&&!i&&Z({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),A&&!i&&Z({"--y":"calc(var(--lift) * -100%)"}),ne}function js(t,i){const{computed:a}=t,u={position:"absolute",inset:"0",scale:"1 2",pointerEvents:i?"none":"auto"},l=p=>Object.assign(u,p);return a("frontmost")&&!i&&l({height:"calc(var(--initial-height) + 80%)"}),u}function Ks(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function Fs(t,i){const{context:a,prop:u,send:l,refs:p,computed:S}=t;return{getCount(){return a.get("toasts").length},getToasts(){return a.get("toasts")},getGroupProps(m={}){const{label:B="Notifications"}=m,{hotkey:P}=u("store").attrs,b=P.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=S("placement"),[A,D="center"]=O.split("-");return i.element({...kt.group.attrs,dir:u("dir"),tabIndex:-1,"aria-label":`${O} ${B} ${b}`,id:Is(O),"data-placement":O,"data-side":A,"data-align":D,"aria-live":"polite",role:"region",style:Rs(t,O),onMouseEnter(){p.get("ignoreMouseTimer").isActive()||l({type:"REGION.POINTER_ENTER",placement:O})},onMouseMove(){p.get("ignoreMouseTimer").isActive()||l({type:"REGION.POINTER_ENTER",placement:O})},onMouseLeave(){p.get("ignoreMouseTimer").isActive()||l({type:"REGION.POINTER_LEAVE",placement:O})},onFocus(H){l({type:"REGION.FOCUS",target:H.relatedTarget})},onBlur(H){p.get("isFocusWithin")&&!Vt(H.currentTarget,H.relatedTarget)&&queueMicrotask(()=>l({type:"REGION.BLUR"}))}})},subscribe(m){return u("store").subscribe(()=>m(a.get("toasts")))}}}var{guards:Ns,createMachine:Ms}=ds(),{and:qs}=Ns,Ls=Ms({props({props:t}){return{dir:"ltr",id:ro(),...t,store:t.store}},initialState({prop:t}){return t("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,isPointerWithin:!1,ignoreMouseTimer:yo.create(),dismissableCleanup:void 0}},context({bindable:t}){return{toasts:t(()=>({defaultValue:[],sync:!0,hash:i=>i.map(a=>a.id).join(",")})),heights:t(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:t})=>t.get("toasts").length,overlap:({prop:t})=>t("store").attrs.overlap,placement:({prop:t})=>t("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:t,context:i,action:a}){t([()=>i.hash("toasts")],()=>{queueMicrotask(()=>{a(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl","clearMouseEventTimer"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:qs("isOverlapping","isPointerOut"),target:"overlap",actions:["collapseToasts","resumeToasts","restoreFocusIfPointerOut"]},{guard:"isPointerOut",target:"stack",actions:["resumeToasts","restoreFocusIfPointerOut"]},{actions:["clearFocusWithin"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight","ignoreMouseEventsTemporarily"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["clearPointerWithin","resumeToasts","collapseToasts"]},{actions:["clearPointerWithin","resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["setPointerWithin","pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["setPointerWithin","pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:t})=>t("overlap"),isPointerOut:({refs:t})=>!t.get("isPointerWithin")},effects:{subscribeToStore({context:t,prop:i}){return i("store").subscribe(a=>{if(a.dismiss){t.set("toasts",u=>u.filter(l=>l.id!==a.id));return}t.set("toasts",u=>{const l=u.findIndex(p=>p.id===a.id);return l!==-1?[...u.slice(0,l),{...u[l],...a},...u.slice(l+1)]:[a,...u]})})},trackHotKeyPress({prop:t,send:i}){return Ot(document,"keydown",u=>{const{hotkey:l}=t("store").attrs;l.every(S=>u[S]||u.code===S)&&i({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:t,send:i,scope:a}){const{pauseOnPageIdle:u}=t("store").attrs;if(!u)return;const l=a.getDoc();return Ot(l,"visibilitychange",()=>{const p=l.visibilityState==="hidden";i({type:p?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:t,context:i,computed:a,scope:u}){const l=i.get("toasts"),p=a("placement"),S=l.length>0;if(!S){t.get("dismissableCleanup")?.();return}if(S&&t.get("dismissableCleanup"))return;const B=Ps(()=>zi(u,p),{defer:!0});t.set("dismissableCleanup",B)},clearDismissableBranch({refs:t}){t.get("dismissableCleanup")?.()},focusRegionEl({scope:t,computed:i}){queueMicrotask(()=>{zi(t,i("placement"))?.focus()})},pauseToasts({prop:t}){t("store").pause()},resumeToasts({prop:t}){t("store").resume()},expandToasts({prop:t}){t("store").expand()},collapseToasts({prop:t}){t("store").collapse()},removeToast({prop:t,event:i}){t("store").remove(i.id)},removeHeight({event:t,context:i}){t?.id!=null&&queueMicrotask(()=>{i.set("heights",a=>a.filter(u=>u.id!==t.id))})},collapsedIfEmpty({send:t,computed:i}){!i("overlap")||i("count")>1||t({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:t,event:i}){t.get("isFocusWithin")||!i.target||(t.set("isFocusWithin",!0),t.set("lastFocusedEl",i.target))},restoreFocusIfPointerOut({refs:t}){!t.get("lastFocusedEl")||t.get("isPointerWithin")||(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null),t.set("isFocusWithin",!1))},setPointerWithin({refs:t}){t.set("isPointerWithin",!0)},clearPointerWithin({refs:t}){t.set("isPointerWithin",!1),t.get("lastFocusedEl")&&!t.get("isFocusWithin")&&(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null))},clearFocusWithin({refs:t}){t.set("isFocusWithin",!1)},clearLastFocusedEl({refs:t}){t.get("lastFocusedEl")&&(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null),t.set("isFocusWithin",!1))},ignoreMouseEventsTemporarily({refs:t}){t.get("ignoreMouseTimer").request()},clearMouseEventTimer({refs:t}){t.get("ignoreMouseTimer").cancel()}}}});function ku(t,i){const{state:a,send:u,prop:l,scope:p,context:S,computed:m}=t,B=a.hasTag("visible"),P=a.hasTag("paused"),b=S.get("mounted"),O=m("frontmost"),A=l("parent").computed("placement"),D=l("type"),H=l("stacked"),$=l("title"),J=l("description"),ie=l("action"),[de,ne="center"]=A.split("-");return{type:D,title:$,description:J,placement:A,visible:B,paused:P,closable:!!l("closable"),pause(){u({type:"PAUSE"})},resume(){u({type:"RESUME"})},dismiss(){u({type:"DISMISS",src:"programmatic"})},getRootProps(){return i.element({...kt.root.attrs,dir:l("dir"),id:bo(p),"data-state":B?"open":"closed","data-type":D,"data-placement":A,"data-align":ne,"data-side":de,"data-mounted":wt(b),"data-paused":wt(P),"data-first":wt(O),"data-sibling":wt(!O),"data-stack":wt(H),"data-overlap":wt(!H),role:"status","aria-atomic":"true","aria-describedby":J?Ui(p):void 0,"aria-labelledby":$?Wi(p):void 0,tabIndex:0,style:Bs(t,B),onKeyDown(Z){Z.defaultPrevented||Z.key=="Escape"&&(u({type:"DISMISS",src:"keyboard"}),Z.preventDefault())}})},getGhostBeforeProps(){return i.element({"data-ghost":"before",style:js(t,B)})},getGhostAfterProps(){return i.element({"data-ghost":"after",style:Ks()})},getTitleProps(){return i.element({...kt.title.attrs,id:Wi(p)})},getDescriptionProps(){return i.element({...kt.description.attrs,id:Ui(p)})},getActionTriggerProps(){return i.button({...kt.actionTrigger.attrs,type:"button",onClick(Z){Z.defaultPrevented||(ie?.onClick?.(),u({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return i.button({id:Cs(p),...kt.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(Z){Z.defaultPrevented||u({type:"DISMISS",src:"user"})}})}}}var{not:zs}=go(),Ou={props({props:t}){return ka(t,["id","type","parent","removeDelay"],"toast"),{closable:!0,...t,duration:Ir(t.duration,t.type)}},initialState({prop:t}){return t("type")==="loading"||t("duration")===1/0?"visible:persist":"visible"},context({prop:t,bindable:i}){return{remainingTime:i(()=>({defaultValue:Ir(t("duration"),t("type"))})),createdAt:i(()=>({defaultValue:Date.now()})),mounted:i(()=>({defaultValue:!1})),initialHeight:i(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:t})=>{const i=t("parent").context.get("toasts"),a=i.findIndex(u=>u.id===t("id"));return i.length-a},height:({prop:t})=>t("parent").context.get("heights").find(u=>u.id===t("id"))?.height??0,heightIndex:({prop:t})=>t("parent").context.get("heights").findIndex(a=>a.id===t("id")),frontmost:({prop:t})=>t("index")===0,heightBefore:({prop:t})=>{const i=t("parent").context.get("heights"),a=i.findIndex(u=>u.id===t("id"));return i.reduce((u,l,p)=>p>=a?u:u+l.height,0)},shouldPersist:({prop:t})=>t("type")==="loading"||t("duration")===1/0},watch({track:t,prop:i,send:a}){t([()=>i("message")],()=>{const u=i("message");u&&a({type:u,src:"programmatic"})}),t([()=>i("type"),()=>i("duration")],()=>{a({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:zs("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:t,send:i}){return Tr(()=>{i({type:"REMOVE",src:"timer"})},t("removeDelay"))},waitForDuration({send:t,context:i,computed:a}){if(!a("shouldPersist"))return Tr(()=>{t({type:"DISMISS",src:"timer"})},i.get("remainingTime"))},waitForNextTick({send:t}){return Tr(()=>{t({type:"SHOW",src:"timer"})},0)},trackHeight({scope:t,prop:i}){let a;return ut(()=>{const u=$i(t);if(!u)return;const l=()=>{const m=u.style.height;u.style.height="auto";const B=u.getBoundingClientRect().height;u.style.height=m;const P={id:i("id"),height:B};Hi(i("parent"),P)},p=t.getWin(),S=new p.MutationObserver(l);S.observe(u,{childList:!0,subtree:!0,characterData:!0}),a=()=>S.disconnect()}),()=>a?.()}},guards:{isLoadingType:({prop:t})=>t("type")==="loading",shouldPersist:({computed:t})=>t("shouldPersist")},actions:{setMounted({context:t}){ut(()=>{t.set("mounted",!0)})},measureHeight({scope:t,prop:i,context:a}){queueMicrotask(()=>{const u=$i(t);if(!u)return;const l=u.style.height;u.style.height="auto";const p=u.getBoundingClientRect().height;u.style.height=l,a.set("initialHeight",p);const S={id:i("id"),height:p};Hi(i("parent"),S)})},setCloseTimer({refs:t}){t.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:t,refs:i,prop:a}){i.set("closeTimerStartTime",Date.now()),t.set("remainingTime",Ir(a("duration"),a("type")))},syncRemainingTime({context:t,refs:i}){t.set("remainingTime",a=>{const u=i.get("closeTimerStartTime"),l=Date.now()-u;return i.set("lastCloseStartTimerStartTime",Date.now()),a-l})},notifyParentToRemove({prop:t}){t("parent").send({type:"TOAST.REMOVE",id:t("id")})},invokeOnDismiss({prop:t,event:i}){t("onStatusChange")?.({status:"dismissing",src:i.src})},invokeOnUnmount({prop:t}){t("onStatusChange")?.({status:"unmounted"})},invokeOnVisible({prop:t}){t("onStatusChange")?.({status:"visible"})}}}};function Hi(t,i){const{id:a,height:u}=i;t.context.set("heights",l=>l.find(S=>S.id===a)?l.map(S=>S.id===a?{...S,height:u}:S):[{id:a,height:u},...l])}var $s=(t,i)=>({...i,...io(t)});function Ws(t={}){const i=$s(t,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let a=[],u=[],l=new Set,p=[];const S=W=>(a.push(W),()=>{const V=a.indexOf(W);a.splice(V,1)}),m=W=>(a.forEach(V=>V(W)),W),B=W=>{if(u.length>=i.max){p.push(W);return}m(W),u.unshift(W)},P=()=>{for(;p.length>0&&u.length<i.max;){const W=p.shift();W&&(m(W),u.unshift(W))}},b=W=>{const V=W.id??`toast:${ro()}`,Ie=u.find(xe=>xe.id===V);return l.has(V)&&l.delete(V),Ie?u=u.map(xe=>xe.id===V?m({...xe,...W,id:V}):xe):B({id:V,duration:i.duration,removeDelay:i.removeDelay,type:"info",...W,stacked:!i.overlap,gap:i.gap}),V},O=W=>(l.add(W),W?(a.forEach(V=>V({id:W,dismiss:!0})),u=u.filter(V=>V.id!==W),P()):(u.forEach(V=>{a.forEach(Ie=>Ie({id:V.id,dismiss:!0}))}),u=[],p=[]),W);return{attrs:i,subscribe:S,create:b,update:(W,V)=>b({id:W,...V}),remove:O,dismiss:W=>{W!=null?u=u.map(V=>V.id===W?m({...V,message:"DISMISS"}):V):u=u.map(V=>m({...V,message:"DISMISS"}))},error:W=>b({...W,type:"error"}),success:W=>b({...W,type:"success"}),info:W=>b({...W,type:"info"}),warning:W=>b({...W,type:"warning"}),loading:W=>b({...W,type:"loading"}),getVisibleToasts:()=>u.filter(W=>!l.has(W.id)),getCount:()=>u.length,promise:(W,V,Ie={})=>{if(!V||!V.loading){jr("[zag-js > toast] toaster.promise() requires at least a 'loading' option to be specified");return}const xe=b({...Ie,...V.loading,promise:W,type:"loading"});let Me=!0,Ye;const Be=Pn(W).then(async fe=>{if(Ye=["resolve",fe],Us(fe)&&!fe.ok){Me=!1;const Se=Pn(V.error,`HTTP Error! status: ${fe.status}`);b({...Ie,...Se,id:xe,type:"error"})}else if(V.success!==void 0){Me=!1;const Se=Pn(V.success,fe);b({...Ie,...Se,id:xe,type:"success"})}}).catch(async fe=>{if(Ye=["reject",fe],V.error!==void 0){Me=!1;const Se=Pn(V.error,fe);b({...Ie,...Se,id:xe,type:"error"})}}).finally(()=>{Me&&O(xe),V.finally?.()});return{id:xe,unwrap:()=>new Promise((fe,Se)=>Be.then(()=>Ye[0]==="reject"?Se(Ye[1]):fe(Ye[1])).catch(Se))}},pause:W=>{W!=null?u=u.map(V=>V.id===W?m({...V,message:"PAUSE"}):V):u=u.map(V=>m({...V,message:"PAUSE"}))},resume:W=>{W!=null?u=u.map(V=>V.id===W?m({...V,message:"RESUME"}):V):u=u.map(V=>m({...V,message:"RESUME"}))},isVisible:W=>!l.has(W)&&!!u.find(V=>V.id===W),isDismissed:W=>l.has(W),expand:()=>{u=u.map(W=>m({...W,stacked:!0}))},collapse:()=>{u=u.map(W=>m({...W,stacked:!1}))}}}var Us=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Tu={connect:Fs,machine:Ls};const Vs=Ws({placement:"top-end"}),In=Gt({toaster:Vs}),Gi=Gt({lang_index:""}),Yi=Gt({app_uid:""}),Hs=function(t,i={},a=20){let u=0,l="",p={};return new Promise(async S=>{const m=new AbortController,B=(a<=0?20:a)*1e3,P=setTimeout(()=>{m.abort(),console.warn(`FetchPOSTËØ∑Ê±ÇË∂ÖÊó∂: ${t}, Ë∂ÖÊó∂Êó∂Èó¥: ${a}Áßí`)},B);try{let b;typeof i=="string"||i instanceof FormData?b=i:b=JSON.stringify(i);const O={};i instanceof FormData||(O["Content-Type"]="application/json"),O.Accept="application/json, text/plain, */*";const A=await fetch(t,{method:"POST",headers:O,body:b,mode:"cors",cache:"no-cache",credentials:"omit",signal:m.signal});if(clearTimeout(P),!A.ok)console.warn("response.ok=",A,A.ok),u=0,l="POST Status Error.",p={api_url:t,status:A.status,statusText:A.statusText,error:"POSTÊé•Âè£ËÆøÈóÆÊàêÂäüÔºå‰ΩÜÊé•Âè£ËøîÂõûÁä∂ÊÄÅÈîôËØØ"},S({state:u,msg:l,content:p});else{const D=A.headers.get("content-type")||"";let H;try{D.includes("application/json")?H=await A.json():D.includes("text/")?H=await A.text():D.includes("form-data")?H=await A.formData():D.includes("image/")||D.includes("application/octet-stream")?H=await A.blob():H=await A.text()}catch($){S({state:0,msg:"POST Parse Error.",content:{api_url:t,error:"ÂìçÂ∫îËß£ÊûêÂ§±Ë¥•",parseError:$.message}});return}S(H)}}catch(b){clearTimeout(P),b.name==="AbortError"?(u=404,l="POST Timeout.",p={api_url:t,error:`ËØ∑Ê±ÇË∂ÖÊó∂Ôºà${a}ÁßíÔºâ`,error_type:"AbortError"}):(u=404,l="POST Broken.",p={api_url:t,error:b.message||"Êú™Áü•ÈîôËØØ",error_type:b.name||"UnknownError"}),S({state:u,msg:l,content:p})}})};let Cr=Ht(0),Xi=Ht(0),Et=Ht("size_init");const Qi={test(t){console.log("test=",t)},console_log(...t){},console_error(...t){},url_path(t){return""+t},redirect_pathname(t){const i=t.url_pathname,a=t.url_params;(function(){Ei(i+a,{replaceState:!0,invalidateAll:!0}).then(l=>{})})()},get_agent(){return navigator.userAgent},get_href(){return On.url.href},get_host(){return On.url.host},get_route(){let t=this;{let i=On.route;return typeof i=="string"?i:typeof i=="object"?i.id:t.json_to_string(i)}},get_params(){return On.url.search},search_param(t){let i=this;return i.search_href_param(i.get_params(),t)},search_href_param(t,i){let a=this,u="";t?u=t:u=a.get_href();let l=new RegExp("([?]|&|#)"+i+"=([^&|^#]*)(&|$|#)"),p=u.match(l);return p?decodeURIComponent(p[2]):""},js_rand(t,i){return Math.floor(Math.random()*(i-t+1)+t)},set_local_data(t,i){return t=this.url_encode(t),localStorage.setItem(t,i),localStorage.getItem(t)},get_local_data(t){t=this.url_encode(t);{let a=localStorage.getItem(t);return a||""}},del_local_data(t){return t=this.url_encode(t),localStorage.removeItem(t)},clear_local_data(){return localStorage.clear()},get_time_s(){return Math.floor(new Date().getTime()/1e3)},get_time_ms(){return new Date().getTime()},get_time_date(t){return this.get_time_s_date(t,"")},get_time_s_date(t,i){let a;i?a=new Date(i*1):a=new Date;let u=a.getSeconds();u<10&&(u="0"+u);let l=a.getMinutes();l<10&&(l="0"+l);let p=a.getHours();p<10&&(p="0"+p);let S=a.getDate();S<10&&(S="0"+S);let m=a.getMonth()+1;m<10&&(m="0"+m);let B=a.getFullYear(),P=["week1","week2","week3","week4","week5","week6","week7"][a.getDay()];return t=t.replaceAll("Y",B),t=t.replaceAll("m",m),t=t.replaceAll("d",S),t=t.replaceAll("H",p),t=t.replaceAll("i",l),t=t.replaceAll("s",u),t=t.replaceAll("W",P),t},get_time_ms_format(t,i){return i?i=i*1:i=this.get_time_ms(),this.get_time_s_date(t,i)},format_date(t,i){i=i+"";let a=i.slice(0,4),u=i.slice(4,6),l=i.slice(6,8),p=i.slice(8,10),S=i.slice(10,12),m=i.slice(12,14),B=t;return B=B.replaceAll("Y",a),B=B.replaceAll("m",u),B=B.replaceAll("d",l),B=B.replaceAll("H",p),B=B.replaceAll("i",S),B=B.replaceAll("s",m),B},is_weixin(){return window.navigator.userAgent.toLowerCase().match(/micromessenger/i)==="micromessenger"},is_qq(){let t=window.navigator.userAgent.toLowerCase();return t.indexOf("qq")!==-1&&t.indexOf("qqbrowser")===-1},is_dingding(){return window.navigator.userAgent.toLowerCase().indexOf("dingtalk")!==-1},is_work_weixin(){return window.navigator.userAgent.toLowerCase().indexOf("wxwork")!==-1},is_feishu(){return window.navigator.userAgent.toLowerCase().indexOf("lark")!==-1},make_uid(t=""){let i=this,a=i.js_rand(1e10,999999999999),u=window.navigator.userAgent.toLowerCase(),l=(navigator.language?navigator.language:"-").toLowerCase(),p=i.get_time_date("YmdHisW"),S="";return S=window.location.href.toLowerCase(),i.md5(t+"@"+u+"@"+p+"@"+S+"@"+window.innerWidth+"@"+a+"@"+l)},get_theme_model(){return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"},md5(t){return t?ra(t):""},base64_encode(t){try{return btoa(t)}catch{return""}},base64_decode(t){try{return atob(t)}catch{return""}},url_encode(t){return encodeURIComponent(t)},url_decode(t){return decodeURIComponent(t)},text_encode(t){return this.string_to_unicode(t)},text_decode(t){return this.unicode_to_string(t)},string_to_unicode(t){let i="";for(let a=0;a<t.length;a++)i?i+=","+t.charCodeAt(a):i=t.charCodeAt(a);return i},unicode_to_string(t){const i=t.split(",");let a="";for(let u=0;u<i.length;u++)a+=String.fromCharCode(i[u]);return a},hex16_to_string(t){return decodeURIComponent(t)},string_to_hex16(t){let i="";for(let a=0;a<t.length;a++)i?i+="&#x"+t.charCodeAt(a).toString(16)+";":i="&#x"+t.charCodeAt(a).toString(16)+";";return i},string_to_json(t){let i,a=t;return typeof a=="string"?i=JSON.parse(a):i=a,i},json_to_string(t){let i,a=t;return typeof a=="object"?i=JSON.stringify(a):i=a,i},string_star(t,i,a){let u=t.length-i-a,l="";for(let p=0;p<u;p++)l+="*";return t.substring(0,i)+l+t.substring(t.length-a)},get_file_ext(t){let i=t.split("/");return i.length?i[i.length-1]:""},is_video(t){try{let i=t.substring(t.lastIndexOf("."));return i=i.toLowerCase(),[".mp4",".mkv",".avi",".flv",".mov",".m4v",".rmvb",".rm",".webm",".asf",".wmv"].includes(i)}catch{return!1}},is_audio(t){try{let i=t.substring(t.lastIndexOf("."));return i=i.toLowerCase(),[".mp3",".wav",".m3u",".m4a",".flac"].includes(i)}catch{return!1}},is_img(t){try{let i=t.substring(t.lastIndexOf("."));return i=i.toLowerCase(),[".gif",".png",".jpg",".jpeg",".webp",".ico",".jpg2",".tiff",".tif",".bmp",".svg"].includes(i)}catch{return!1}},is_mobile_screen(){let t=window.screen.width,i=window.screen.height,a=1280,u=280,l=40;return t<u||i<u||Math.abs(t-i)<l?-1:t>a||i>a?0:1},is_mobile_pwa(){return window.navigator?.standalone||document.referrer.includes("android-app://")},is_pc_pwa(){return["fullscreen","standalone","minimal-ui"].some(i=>window.matchMedia("(display-mode: "+i+")").matches)},html_to_plain_text(t){function i(u,l={img:" [üèûÔ∏è] ",audio:" [üéµ] ",video:" [üé¨] "}){return u.replace(/<img[^>]*alt="([^"]*)"[^>]*>/gi,(p,S)=>" [üèûÔ∏è "+S+"] "||l.img).replace(/<audio[^>]*title="([^"]*)"[^>]*>.*?<\/audio>/gi,(p,S)=>" [üéµ "+S+"] "||l.audio).replace(/<video[^>]*title="([^"]*)"[^>]*>.*?<\/video>/gi,(p,S)=>" [üé¨ "+S+"] "||l.video)}t=i(t);let a=document.createElement("div");return a.innerHTML=t,a.innerText||a.textContent},js_call_py_or_go(t,i){let a=this;const u=function(l,p){return new Promise(S=>{try{Hs(l+"?cache="+a.get_time_ms(),p).then(m=>{S(m)})}catch(m){a.notice("Fetch Error 2"),console.error("Fetch error 2:",m),S({state:0,msg:"ËØ∑Ê±ÇÂ§±Ë¥•3",content:{body_dict:p,error:m}})}})};return new Promise(l=>{const p=$t.app.app_class,S=$t.app.app_version;let m="",B="";{const b=a.get_local_data("js_call_py_api"),O=a.get_local_data("js_call_py_auth");if(b&&O)m=b+"/"+O;else try{m=$t.api.js_call_py_url}catch{m="null-js_call_py_url"}B=a.get_local_data("window_token")}let P={window_token:B,key:t,data_dict:i,app_class:p,app_version:S};try{u(m,P).then(b=>{l(b)})}catch{l({state:0,msg:"JSCallXÊó†Ê≠§ÊñπÊ≥ï",content:{key:t,body_dict:P}})}})},js_watch_window_display(){let t=this;document.addEventListener("visibilitychange",()=>{let i="hiding";document.hidden?i="hiding":i="showing";try{t.js_call_py_or_go("window_display",{display:i}).then(a=>{console.log("[ËßÜÁ™óJS-Log]","js_call_py.pyËøîÂõûÂÄºÔºö",a)})}catch{}})},is_wails(){return this.get_agent().toLowerCase().indexOf("wails")!==-1},is_gthon(){return this.get_agent().toLowerCase().indexOf("gthon")!==-1},get_lang_index(t){function i(u){return u.indexOf("zh")>=0?"zh":u.indexOf("en")>=0?"en":u.indexOf("jp")>=0?"jp":u.indexOf("fr")>=0?"fr":u.indexOf("de")>=0?"de":u.indexOf("ru")>=0?"ru":u.indexOf("es")>=0?"es":u.indexOf("ko")>=0?"ko":u.indexOf("vi")>=0?"vi":"en"}function a(u=""){return u.length>=2?u.toLowerCase():navigator.language.toLowerCase()}return i(a(t))},get_lang(){let t=this,i="",a=Gi.lang_index;return a.length>=2&&(i=a),t.get_lang_index(i)},get_translate(t="",i=""){let a=this;if(!(i.length>=2)){let l=Gi.lang_index;l.length>=2&&(i=l)}let u=a.get_lang_index(i);return Fe[t]&&Fe[t][u]?Fe[t][u]:Fe._null[u]?Fe._null[u]:Fe._null.en},open_url(t="",i="_self"){t.length>=1&&(i==="_self"?Ei(t,{replaceState:!0,invalidateAll:!0,noScroll:!0}).then(a=>{}):window.open(t,i))},open_url_no_cache(t="./?reload=no-cache",i="_self"){t.length>=1&&(i==="_self"?(history.replaceState(null,"",t),window.location.replace(t)):(history.replaceState(null,"",t),window.open(t,i)))},open_url_with_default_browser(t=""){let i=this,a="_blank";i.is_gthon()||i.is_wails()?i.js_call_py_or_go("open_url_with_default_browser",{lang:i.get_lang(),url:t,target:a}).then(u=>{}):i.open_url(t,a)},fresh_page(t=500){t<=0&&(t=0),setTimeout(function(){window.location.reload()},t)},get_app_uid(){let t=this,i=$t.app.app_class+"app_uid";return new Promise(a=>{Qi.js_call_py_or_go("get_data",{data_key:i}).then(u=>{let l=u.content.data;l?(Yi.app_uid=l,a(l)):(l=t.md5(t.make_uid($t.app.app_class)),Qi.js_call_py_or_go("set_data",{data_key:i,data_value:l,data_timeout_s:10*365*24*3600}).then(p=>{Yi.app_uid=p.content.data,a(p.content.data)}))})})},ping(t){return new Promise((i,a)=>{ia(t,{},5).then(u=>{let l=0,p="";u.state!==404?(l=1,p="Êé•Âè£ËÆøÈóÆÊàêÂäüÔºå‰ΩÜstatusÁä∂ÊÄÅÂèØËÉΩÊòØ200„ÄÅ30X„ÄÇ"):(l=404,p="Ë∂ÖÊó∂ÊàñËÄÖÊé•Âè£Êó†Êïà„ÄÇ"),i({state:l,msg:p,result:u})}).catch(u=>{i({state:404,msg:"",result:{}})})})},set_db_data(t,i){let a=this;t=a.url_encode(t).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-");let u=[{only_key:t,any_type_value:i,update_time:a.get_time_s_date("YmdHis")*1,remark:"func-set"}];return new Promise(l=>{kr.update_db_data(u).then(p=>{p.length>=1?a.get_db_data(t).then(S=>{l(S)}):l("")})})},get_db_data(t){return t=this.url_encode(t).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-"),new Promise(a=>{kr.get_db_data(t).then(u=>{a(u?u.any_type_value:"")})})},del_db_data(t){return t=this.url_encode(t).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-"),new Promise(a=>{kr.del_db_data(t).then(u=>{a(u)})})},converted_path(t=""){return t=t.replaceAll("\\","/"),t=t.replaceAll("//","/"),t.endsWith("/")&&(t=t.slice(0,-1)),t},filepath_to_filename(t=""){t=this.converted_path(t);let a=t.split("/");return t.length>0&&t?a[a.length-1]:""},replaceLast(t,i,a){const u=t.lastIndexOf(i);return u===-1?t:t.substring(0,u)+a+t.substring(u+i.length)},loading_show(t="",i="long"){let a=this;clearTimeout(ge(Cr)),i==="long"||(i<=1e3&&(i=5e3),Ne(Cr,setTimeout(function(){a.loading_hide()},i),!0)),Sn.loading_show="show",Sn.loading_msg=t},loading_hide(){clearTimeout(ge(Cr)),Sn.loading_show="hide",Sn.loading_msg=""},alert_msg(t,i){clearTimeout(ge(Xi)),i==="long"||(i<=1e3&&(i=3e3),Ne(Xi,setTimeout(function(){Tn.alert_show="hide",Tn.alert_msg=""},i),!0)),Tn.alert_show="show",Tn.alert_msg=t},notice(t="",i="",a=5e3,u="info"){switch(a<=1e3&&(a=3e3),u){case"info":In.toaster.info({title:t,description:i,duration:a});break;case"warn":In.toaster.warning({title:t,description:i,duration:a});break;case"error":In.toaster.error({title:t,description:i,duration:a});break;default:In.toaster.info({title:t,description:i,duration:a});break}},change_window_size(){let t=this;ge(Et)==="size_init"?Ne(Et,"size_full_height"):ge(Et)==="size_full_height"?Ne(Et,"size_full_window"):Ne(Et,"size_init"),t.js_call_py_or_go("change_window_size",{size_tag:ge(Et),width:0,height:0}).then(i=>{console.log("change_window_size=",i)})}};export{Kr as A,pu as B,yu as C,Tt as D,vu as E,Hs as F,mu as G,du as H,wu as I,as as J,_u as K,Ut as L,hs as M,Eu as N,lu as O,Tu as P,Ou as Q,ku as R,Sn as S,In as T,Tn as U,Yi as V,to as a,eo as b,$t as c,Or as d,fu as e,Qi as f,jr as g,xu as h,cu as i,io as j,we as k,$a as l,bu as m,ct as n,hu as o,za as p,ns as q,ut as r,ts as s,uu as t,gu as u,Ot as v,Gi as w,so as x,Ar as y,Bn as z};
