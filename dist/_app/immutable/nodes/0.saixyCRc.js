import"../chunks/DsnmJJEf.js";import{p as E,at as G,a as R,b as x,c as N,x as e,aI as $,b1 as U,f as H,d as m,b3 as te,r as p,b2 as ae,av as je,b7 as ze,b4 as Le,s as A,ac as de,a0 as Q,t as W,e as J,as as Ee,ad as j,ae as g,ab as me,aa as Ce,b0 as $e,a8 as fe,au as be}from"../chunks/CRCNoOQn.js";import{b as X,s as Y,r as Ne,a as F}from"../chunks/HpwQPCbN.js";import{i as _e,p as Be}from"../chunks/XGvdSu4F.js";import{P as ye,Q as Ie,R as He,c as se,f as a,S as we,T as Re,U as ke,V as Oe,w as De}from"../chunks/CffhqPQt.js";import{a as ee,c as Ge}from"../chunks/d0rcpz8l.js";import{b as Ue,p as ue}from"../chunks/CBsGQ1ZC.js";import{r as ge}from"../chunks/BCCUFqgg.js";import{w as qe}from"../chunks/CGqG9FKH.js";import{i as le,r as re}from"../chunks/Boh31f8P.js";import{c as Me,m as ne,u as Te,n as Pe}from"../chunks/BYG3yQpq.js";import{e as Ve}from"../chunks/mYKxeL6_.js";import{r as ve}from"../chunks/Dl4JpaOQ.js";const Fe=!0,Je=!0,Ze=!1,Qt=Object.freeze(Object.defineProperty({__proto__:null,csr:Je,prerender:Fe,ssr:Ze},Symbol.toStringTag,{value:"Module"})),ie=Me();var We=H("<button><!></button>");function Ye(h,l){E(l,!0);const n=re(l,["$$slots","$$events","$$legacy"]),t=ie.consume(),i=$(()=>l.element),v=$(()=>l.children),f=$(()=>ae(n,["element","children"])),_=$(()=>ne(t().getActionTriggerProps(),e(f)));var d=G(),b=R(d);{var M=s=>{var c=G(),k=R(c);U(k,()=>e(i),()=>e(_)),x(s,c)},S=s=>{var c=We();X(c,()=>({...e(_)}));var k=m(c);U(k,()=>e(v)??te),p(c),x(s,c)};le(b,s=>{e(i)?s(M):s(S,!1)})}x(h,d),N()}var Qe=je('<svg><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>');function Xe(h,l){E(l,!0);const n=re(l,["$$slots","$$events","$$legacy"]),t=$(()=>ae(n,[])),i=$(()=>ne({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},e(t)));var v=Qe();X(v,()=>({...e(i)})),x(h,v),N()}const Ke=h=>{Xe(h,{})};var et=H("<button><!></button>");function tt(h,l){E(l,!0);const n=re(l,["$$slots","$$events","$$legacy"]),t=ie.consume(),i=$(()=>l.element),v=$(()=>ze(l.children,Ke)),f=$(()=>ae(n,["element","children"])),_=$(()=>ne(t().getCloseTriggerProps(),e(f)));var d=G(),b=R(d);{var M=s=>{var c=G(),k=R(c);U(k,()=>e(i),()=>e(_)),x(s,c)},S=s=>{var c=et();X(c,()=>({...e(_)}));var k=m(c);U(k,()=>e(v)??te),p(c),x(s,c)};le(b,s=>{e(i)?s(M):s(S,!1)})}x(h,d),N()}var at=H("<div><!></div>");function rt(h,l){E(l,!0);const n=re(l,["$$slots","$$events","$$legacy"]),t=ie.consume(),i=$(()=>l.element),v=$(()=>l.children),f=$(()=>ae(n,["element","children"])),_=$(()=>ne(t().getDescriptionProps(),e(f)));var d=G(),b=R(d);{var M=s=>{var c=G(),k=R(c);U(k,()=>e(i),()=>e(_)),x(s,c)},S=s=>{var c=at();X(c,()=>({...e(_)}));var k=m(c);U(k,()=>e(v)??te),p(c),x(s,c)};le(b,s=>{e(i)?s(M):s(S,!1)})}x(h,d),N()}const Ae=Me();var nt=H("<div></div>");function lt(h,l){const n=Le();E(l,!0);const t=re(l,["$$slots","$$events","$$legacy"]),i=$(()=>l.element),v=$(()=>l.children),f=$(()=>l.toaster),_=$(()=>ae(t,["element","children","toaster"])),d=Te(ye.machine,()=>({id:n,store:e(f)})),b=$(()=>ye.connect(d,Pe)),M=$(()=>ne(e(b).getGroupProps(),e(_)));Ae.provide(()=>d);var S=G(),s=R(S);{var c=o=>{var w=G(),u=R(w);U(u,()=>e(i),()=>e(M)),x(o,w)},k=o=>{var w=nt();X(w,()=>({...e(M)})),Ve(w,21,()=>e(b).getToasts(),u=>u.id,(u,P)=>{var T=G(),B=R(T);U(B,()=>e(v)??te,()=>e(P)),x(u,T)}),p(w),x(o,w)};le(s,o=>{e(i)?o(c):o(k,!1)})}x(h,S),N()}var ot=H("<div><!></div>");function st(h,l){E(l,!0);const n=re(l,["$$slots","$$events","$$legacy"]),t=$(()=>l.element),i=$(()=>l.children),v=$(()=>ae(n,["element","children"])),f=$(()=>ne({"data-scope":"toast","data-part":"message"},e(v)));var _=G(),d=R(_);{var b=S=>{var s=G(),c=R(s);U(c,()=>e(t),()=>e(f)),x(S,s)},M=S=>{var s=ot();X(s,()=>({...e(f)}));var c=m(s);U(c,()=>e(i)??te),p(s),x(S,s)};le(d,S=>{e(t)?S(b):S(M,!1)})}x(h,_),N()}function it(h,l){E(l,!0);const n=ie.consume(),t=$(()=>l.children);var i=G(),v=R(i);U(v,()=>e(t),()=>n),x(h,i),N()}var ct=H("<div><div></div> <!> <div></div></div>");function dt(h,l){E(l,!0);const n=re(l,["$$slots","$$events","$$legacy"]),t=Ae.consume(),i=$(()=>l.element),v=$(()=>l.children),f=$(()=>l.toast),_=$(()=>ae(n,["element","children","toast"])),d=Te(Ie,()=>({...e(f),parent:t()})),b=$(()=>He(d,Pe)),M=$(()=>ne(e(b).getRootProps(),e(_)));ie.provide(()=>e(b));var S=G(),s=R(S);{var c=o=>{var w=G(),u=R(w);U(u,()=>e(i),()=>e(M)),x(o,w)},k=o=>{var w=ct();X(w,()=>({...e(M)}));var u=m(w);X(u,B=>({...B}),[()=>e(b).getGhostBeforeProps()]);var P=A(u,2);U(P,()=>e(v)??te);var T=A(P,2);X(T,B=>({...B}),[()=>e(b).getGhostAfterProps()]),p(w),x(o,w)};le(s,o=>{e(i)?o(c):o(k,!1)})}x(h,S),N()}var _t=H("<div><!></div>");function ut(h,l){E(l,!0);const n=re(l,["$$slots","$$events","$$legacy"]),t=ie.consume(),i=$(()=>l.element),v=$(()=>l.children),f=$(()=>ae(n,["element","children"])),_=$(()=>ne(t().getTitleProps(),e(f)));var d=G(),b=R(d);{var M=s=>{var c=G(),k=R(c);U(k,()=>e(i),()=>e(_)),x(s,c)},S=s=>{var c=_t();X(c,()=>({...e(_)}));var k=m(c);U(k,()=>e(v)??te),p(c),x(s,c)};le(b,s=>{e(i)?s(M):s(S,!1)})}x(h,d),N()}const oe=Object.assign(dt,{Context:it,Group:lt,Message:st,Title:ut,Description:rt,ActionTrigger:Ye,CloseTrigger:tt});var vt=H('<section class="section-side_logo scroll-y-style select-none pywebview-drag-region can-drag bg-neutral-200 dark:bg-neutral-800 svelte-1v8azvk"><div class="side-logo center svelte-1v8azvk" role="button" tabindex="0"><span class="font-class hide"> </span> <span class="font-mini hide"> </span></div></section>');function gt(h,l){E(l,!0);let n=Q(se.app.app_name),t=Q(se.app.app_version);ee(()=>{});var i=vt(),v=m(i);v.__dblclick=()=>a.change_window_size();var f=m(v),_=m(f,!0);p(f);var d=A(f,2),b=m(d);p(d),p(v),p(i),W(()=>{J(_,n),J(b,`v${t??""}`)}),x(h,i),N()}de(["dblclick"]);var ht=H('<section class="section-side_search select-none bg-neutral-200 dark:bg-neutral-800 svelte-1flu2iz"><div class="side-search font-text svelte-1flu2iz"><label class="label"><input class="side-search-input input-style w-full border-radius font-text select-text" type="text" maxlength="2000"/></label></div></section>');function pt(h,l){E(l,!0);let n=j("");const t={input_enter(d){if(d.key==="Enter"){console.log("Enter pressed:",e(n));let b=e(n).trim();b?a.notice("Enter: "+b):a.notice(a.get_translate("input_null"))}}};ee(()=>{});var i=ht(),v=m(i),f=m(v),_=m(f);Ne(_),_.__keydown=d=>t.input_enter(d),p(f),p(v),p(i),W(d=>Y(_,"placeholder",d),[()=>a.get_translate("input_placeholder_search")]),Ee("mouseenter",_,d=>d.currentTarget.focus()),Ue(_,()=>e(n),d=>g(n,d)),x(h,i),N()}de(["keydown"]);var ft=H('<section class="section-side_setting select-none bg-neutral-200 dark:bg-neutral-800 svelte-87bl0b"><ul class="side_setting-ul select-none font-text svelte-87bl0b"><li class="li-group-user select-none click svelte-87bl0b"><a><svg class="li-group-user-avatar font-text svelte-87bl0b" xmlns="http://www.w3.org/2000/svg" width="256" height="256" viewBox="0 0 16 16"><path fill="#2A7DFF" d="M11 7c0 1.66-1.34 3-3 3S5 8.66 5 7s1.34-3 3-3s3 1.34 3 3"></path><path fill="#2A7DFF" fill-rule="evenodd" d="M16 8c0 4.42-3.58 8-8 8s-8-3.58-8-8s3.58-8 8-8s8 3.58 8 8M4 13.75C4.16 13.484 5.71 11 7.99 11c2.27 0 3.83 2.49 3.99 2.75A6.98 6.98 0 0 0 14.99 8c0-3.87-3.13-7-7-7s-7 3.13-7 7c0 2.38 1.19 4.49 3.01 5.75" clip-rule="evenodd"></path></svg> <div class="li-group-user-info svelte-87bl0b"><div class="li-group-user-info-item li-group-user-nickname font-text break-ellipsis svelte-87bl0b"> </div> <div class="li-group-user-info-item li-group-user-tips font-mini break-ellipsis svelte-87bl0b"> </div></div></a></li></ul></section>');function mt(h,l){E(l,!0);let n=j(Q(a.get_route())),t=j("...");ee(()=>{g(n,a.get_route(),!0),g(t,a.get_local_data(se.app.app_class+"user_nickname"),!0),e(t)||g(t,"("+a.get_translate("user_need_login")+")")});var i=ft(),v=m(i),f=m(v),_=m(f),d=A(m(_),2),b=m(d),M=m(b,!0);p(b);var S=A(b,2),s=m(S,!0);p(S),p(d),p(_),p(f),p(v),p(i),W((c,k,o)=>{F(_,1,`side_setting-menu-a border-radius break ${c??""} click`,"svelte-87bl0b"),Y(_,"href",k),J(M,e(t)),J(s,o)},[()=>e(n)==="/settings"||e(n).indexOf("/settings/")===0?" side_setting-menu-a-active ":" ",()=>ge(a.url_path("/settings")),()=>a.get_translate("user_tips")]),x(h,i),N()}var bt=H('<section class="section-director select-none bg-neutral-100 dark:bg-neutral-900"><div class="director-div font-text svelte-tshbcc"><button type="button" title="Before"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="svelte-tshbcc"><path fill="currentColor" fill-rule="evenodd" d="M15.488 4.43a.75.75 0 0 1 .081 1.058L9.988 12l5.581 6.512a.75.75 0 1 1-1.138.976l-6-7a.75.75 0 0 1 0-.976l6-7a.75.75 0 0 1 1.057-.081" clip-rule="evenodd"></path></svg></button> <button type="button" title="Next"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="svelte-tshbcc"><path fill="currentColor" fill-rule="evenodd" d="M8.512 4.43a.75.75 0 0 1 1.057.082l6 7a.75.75 0 0 1 0 .976l-6 7a.75.75 0 0 1-1.138-.976L14.012 12L8.431 5.488a.75.75 0 0 1 .08-1.057" clip-rule="evenodd"></path></svg></button></div></section>');function yt(h,l){E(l,!0);let n=j(Q(a.get_href())),t=j(Q(a.get_route())),i=j(Q(a.get_params())),v=j(Q(a.get_time_date("YmdHis"))),f=j(""),_=j("director-btn-not_click"),d=j(""),b=j("director-btn-not_click");const M={open_href(o=""){o.length>=1&&a.open_url(o,"_self")},set_direction_history(o){se.sys.home_route===e(t)&&a.del_local_data("director_urls");let w=a.get_local_data("director_urls"),u=[];return w&&(u=a.string_to_json(w)),new Promise(P=>{if(u.length>0){let V=function(){return new Promise(L=>{for(let D=0;D<u.length;D++){let r=u[D].href;if(u[D].route,u[D].params,B===r){L(u);break}if(D>500){L(u);break}D===u.length-1&&(u.push(o),L(u))}})},T=[],B=o.href,q=o.route,z=o.params;V().then(L=>{for(let D=0;D<L.length;D++){L[D].href;let r=L[D].route,C=L[D].params;q===r&&z.length===0&&C.length>0||T.push(u[D]),D===u.length-1&&(a.set_local_data("director_urls",a.json_to_string(T)),P(u))}})}else a.set_local_data("director_urls",a.json_to_string([o])),P([o])})},get_direction_history(o){let w={},u={},P=a.get_local_data("director_urls"),T=[];if(P&&(T=a.string_to_json(P)),T.length>0){let B=o.href;o.route,o.params;let q=T.length;for(let z=0;z<T.length;z++){let V=T[z].href;if(T[z].route,T[z].params,B===V){q>=2?z===0?(w=T[z],u=T[z+1]):z>=1&&z<q?(w=T[z-1],u=T[z+1]):(w={},u={}):(w={},u={});break}}}else w={},u={};return{before_director:w,next_director:u}},show_direction(){let o=this;g(n,a.get_href(),!0),g(t,a.get_route(),!0),g(i,a.get_params(),!0),g(v,a.get_time_date("YmdHis"),!0);let w={href:a.string_to_unicode(e(n)),route:e(t),params:a.string_to_unicode(e(i)),time:e(v)};o.set_direction_history(w).then(u=>{a.console_log("set_direction_history=",u);let P=o.get_direction_history(w);try{if(P.before_director.route){let T=P.before_director.href,B=P.before_director.route,q=P.before_director.params;g(f,a.unicode_to_string(T),!0)}}catch{g(f,"")}try{if(P.next_director.route){let T=P.next_director.href,B=P.next_director.route,q=P.next_director.params;g(d,a.unicode_to_string(T),!0)}}catch{g(d,"")}u.length<=1?(g(_,"director-btn-not_click"),g(b,"director-btn-not_click")):e(f)===""&&e(d)===""?(g(_,"director-btn-not_click"),g(b,"director-btn-not_click")):(e(f)===""?g(_,"director-btn-not_click"):g(_,"director-btn-click"),e(d)===""?g(b,"director-btn-not_click"):g(b,"director-btn-click"))})}};ee(()=>{M.show_direction()}),me(()=>{M.show_direction()});var S=bt(),s=m(S),c=m(s);c.__click=()=>M.open_href(e(f));var k=A(c,2);k.__click=()=>M.open_href(e(d)),p(s),p(S),W(()=>{F(c,1,`director-btn director-btn-left ${e(_)??""} border-radius font-blue`,"svelte-tshbcc"),Y(c,"data-href",e(f)),F(k,1,`director-btn director-btn-right ${e(b)??""} border-radius font-blue`,"svelte-tshbcc"),Y(k,"data-href",e(d))}),x(h,S),N()}de(["click"]);var wt=H('<section><div class="page-player-song_btns svelte-13v4e1g"><button type="button" class="player-btn font-mini font-blue click  svelte-13v4e1g" title="Before"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-13v4e1g"><path fill="currentColor" d="M14.91 6.71a.996.996 0 0 0-1.41 0L8.91 11.3a.996.996 0 0 0 0 1.41l4.59 4.59a.996.996 0 1 0 1.41-1.41L11.03 12l3.88-3.88c.38-.39.38-1.03 0-1.41"></path></svg></button> <button type="button" title="Play"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48" class="svelte-13v4e1g"><path fill="currentColor" d="m16.75 8.412l24.417 12.705a3.25 3.25 0 0 1 0 5.766L16.75 39.588A3.25 3.25 0 0 1 12 36.705v-25.41a3.25 3.25 0 0 1 4.549-2.98z"></path></svg></button> <button type="button" title="Stop"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-13v4e1g"><rect width="4" height="14" x="6" y="5" fill="currentColor" rx="1"></rect><rect width="4" height="14" x="14" y="5" fill="currentColor" rx="1"></rect></svg></button> <button type="button" class="player-btn font-mini font-blue click svelte-13v4e1g" title="Next"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48" class="svelte-13v4e1g"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="m19 12l12 12l-12 12"></path></svg></button></div> <div class="page-player-song_name break-ellipsis svelte-13v4e1g"><div> </div></div></section>');function kt(h,l){E(l,!0),Q(a.get_route());const n="play_audio_";let t,i=j(0),v=j(0),f=j(0),_=j(!1),d=j("show"),b=j("hide"),M=j("hide"),S=1e3,s=j(""),c=j(""),k=j(""),o={canplaythrough:null,loadeddata:null,timeupdate:null,ended:null,error:null};const w={play_start(){let r=this;if(r.play_clear_timer(),!("mediaSession"in navigator)){console.warn("不支持同步系统播放进度。");return}let C="";r.get_playing().then(y=>{if(y)C=y.href,g(d,"hide"),g(b,"show"),g(M,"show"),g(s,y.filename||"Null Song",!0),g(k,"bg-animation"),g(c,"text-marquee"),a.notice("["+a.get_translate("playing")+"] "+e(s)),navigator.mediaSession.metadata=new MediaMetadata({title:y.filename||"Null Song",artist:a.get_translate("playing")+"...",artwork:[{src:y.cover||"/launcher.png",sizes:"96x96",type:"image/png"}]}),navigator.mediaSession.playbackState="playing";else{console.warn("无播放资料（请先 def.fetch_play_list() ）：",y),r.set_playing({}).then(I=>{});return}t.src=C,t.autoplay=!1,t.loop=!1,t.volume=1,t.currentTime=parseFloat(r.get_current_time()),e(_)||r.player_init(),t.play().catch(I=>{console.warn("播放失败:",I)});try{navigator.mediaSession.setActionHandler("previoustrack",()=>{r.play_before()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{r.play_next()}),navigator.mediaSession.setActionHandler("play",()=>{r.play_start()}),navigator.mediaSession.setActionHandler("pause",()=>{r.play_stop()}),navigator.mediaSession.setActionHandler("seekbackward",I=>{if(t){const Z=I.seekOffset||5;t.currentTime=Math.max(0,t.currentTime-Z),r.set_current_time(t.currentTime-Z+"")}}),navigator.mediaSession.setActionHandler("seekforward",I=>{if(t){const Z=I.seekOffset||5;t.currentTime=Math.min(t.duration,t.currentTime+Z),r.set_current_time(t.currentTime+Z+"")}})}catch(I){console.warn("某些媒体操作不被支持:",I)}})},player_init(){let r=this;console.log("Player Init"),g(_,!0),ue.play_state=!1,r.cleanup_event_listeners(),o.canplaythrough=function(C){},o.loadeddata=function(){console.log("Play Start"),o.timeupdate&&t.removeEventListener("timeupdate",o.timeupdate),g(f,setInterval(function(){try{let C=t.currentTime;r.set_current_time(C+"")}catch{}},100),!0)},o.ended=function(){console.log("Play Ended"),r.play_next()},o.error=function(){console.warn("Play Error"),g(i,setTimeout(function(){r.play_next()},2e3),!0)},t.addEventListener("canplaythrough",o.canplaythrough),t.addEventListener("loadeddata",o.loadeddata),t.addEventListener("ended",o.ended),t.onerror=o.error},cleanup_event_listeners(){t&&(o.canplaythrough&&(t.removeEventListener("canplaythrough",o.canplaythrough),o.canplaythrough=null),o.loadeddata&&(t.removeEventListener("loadeddata",o.loadeddata),o.loadeddata=null),o.timeupdate&&(t.removeEventListener("timeupdate",o.timeupdate),o.timeupdate=null),o.ended&&(t.removeEventListener("ended",o.ended),o.ended=null),o.error&&(t.onerror=null,o.error=null))},play_clear_timer(){clearTimeout(e(i)),clearTimeout(e(v)),clearInterval(e(f)),g(i,0),g(v,0),g(f,0),ue.play_state=!1,g(s,""),g(k,""),g(c,"")},play_stop(){let r=this;r.get_playing().then(C=>{r.play_clear_timer(),g(d,"show"),g(b,"hide"),g(s,C.filename,!0),r.is_playing().then(y=>{t.currentTime&&y&&r.set_current_time(t.currentTime+""),t.pause(),navigator.mediaSession.metadata=new MediaMetadata({title:C.filename||"未知歌曲",artist:a.get_translate("play_paused"),artwork:[{src:C.cover||"/launcher.png",sizes:"96x96",type:"image/png"}]}),navigator.mediaSession.playbackState="paused"})})},play_next(){let r=this;r.play_clear_timer(),r.set_current_time("0"),navigator.mediaSession.playbackState="playing",r.get_playing().then(C=>{r.get_list().then(y=>{if(C&&y){let Z=function(){return new Promise(K=>{for(let O=0;O<y.length;O++){let pe=y[O].href;if(y[O].filename,y[O].cover,I===pe){O+1===y.length?r.set_playing(y[0]).then(ce=>{K(!0)}):r.set_playing(y[O+1]).then(ce=>{K(!0)});break}O+1===y.length&&r.set_playing(y[0]).then(ce=>{K(!0)})}})},I=C.href;Z().then(K=>{r.play_start()})}else console.log("参数不全，1")})})},play_before(){let r=this;r.play_clear_timer(),r.set_current_time("0"),navigator.mediaSession.playbackState="playing",r.get_playing().then(C=>{r.get_list().then(y=>{if(C&&y){let Z=function(){return new Promise(K=>{for(let O=0;O<y.length;O++){let pe=y[O].href;if(y[O].filename,y[O].cover,I===pe){O===0?r.set_playing(y[y.length-1]).then(ce=>{K(!0)}):r.set_playing(y[O-1]).then(ce=>{K(!0)});break}O+1===y.length&&r.set_playing(y[O]).then(ce=>{K(!0)})}})},I=C.href;navigator.mediaSession.playbackState="playing",Z().then(K=>{r.play_start()})}else console.log("参数不全，1")})})},is_playing(){let r=this,C=r.get_current_time()*1,y=0;return new Promise(I=>{setTimeout(function(){y=r.get_current_time()*1,I(y!=C)},200)})},set_volume(r=1){(r<0||r>1)&&(r=1),t.volume=r},set_playing_loop(r=!1){t.loop=r},get_playing_percent(){let r=t.duration,C=t.currentTime;return Math.floor(C/r*100)/100},get_playing(){return new Promise(r=>{a.js_call_py_or_go("get_data",{data_key:n+"playing"}).then(C=>{let y=C.content.data;r(y?JSON.parse(decodeURIComponent(y)):null)})})},set_playing(r={}){return new Promise(C=>{a.js_call_py_or_go("set_data",{data_key:n+"playing",data_value:encodeURIComponent(JSON.stringify(r)),data_timeout_s:4320*3600}).then(y=>{let I=y.content.data;C(I?JSON.parse(decodeURIComponent(I)):null)})})},get_list(){return new Promise(r=>{a.js_call_py_or_go("get_data",{data_key:n+"list"}).then(C=>{let y=C.content.data;r(y.length>0?JSON.parse(decodeURIComponent(y)).slice(0,S):null)})})},set_list(r=[]){let C="";return typeof r=="object"?C=JSON.stringify(r.slice(0,S)):C=r,new Promise(y=>{a.js_call_py_or_go("set_data",{data_key:n+"list",data_value:encodeURIComponent(C),data_timeout_s:2*365*24*3600}).then(I=>{let Z=I.content.data;y(Z?JSON.parse(decodeURIComponent(Z)):null)})})},get_current_time(){return a.get_local_data(n+"current_time")},set_current_time(r=""){a.set_local_data(n+"current_time",r)},play_new_list(r=[]){let C=this;r.length>0?(C.set_current_time("0"),C.set_playing(r[0]).then(y=>{}),C.set_list(r).then(y=>{}),ue.play_state=!0,a.notice(a.get_translate("updated"))):a.notice(a.get_translate("null_content"))}};Ce(()=>{ue.play_state&&w.play_start()}),ee(()=>{w.get_playing().then(r=>{r&&(g(M,"show"),g(s,r.filename,!0))})}),me(()=>{t=new Audio}),$e(()=>{w.play_clear_timer(),w.cleanup_event_listeners(),t&&(t.pause(),t.src="",t=null),g(_,!1),o={canplaythrough:null,loadeddata:null,timeupdate:null,ended:null,error:null}});var u=wt(),P=m(u),T=m(P);T.__click=()=>w.play_before();var B=A(T,2);B.__click=()=>w.play_start();var q=A(B,2);q.__click=()=>w.play_stop();var z=A(q,2);z.__click=()=>w.play_next(),p(P);var V=A(P,2),L=m(V),D=m(L,!0);p(L),p(V),p(u),W(()=>{F(u,1,`section-player-box select-none border-radius bg-neutral-200 dark:bg-neutral-800 ${e(M)??""} `,"svelte-13v4e1g"),F(B,1,`player-btn font-mini font-blue click ${e(d)??""}`,"svelte-13v4e1g"),F(q,1,`player-btn font-mini font-blue click ${e(b)??""} ${e(k)??""} `,"svelte-13v4e1g"),F(L,1,`page-player-song_name_txt select-text ${e(c)??""}`,"svelte-13v4e1g"),Y(L,"title",e(s)),J(D,e(s)?e(s):"···")}),x(h,u),N()}de(["click"]);var xt=H('<div><div class="select-none"><div class="loading-info border-radius font-text svelte-fdjvf0"><div class="alert_loading_msg break select-text svelte-fdjvf0"> </div> <svg class="loading-icon svelte-fdjvf0" xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z" opacity="0.5"></path><path fill="currentColor" d="M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"><animateTransform attributeName="transform" dur="1s" from="0 12 12" repeatCount="indefinite" to="360 12 12" type="rotate"></animateTransform></path></svg></div></div></div>');function St(h,l){E(l,!1),_e();var n=xt(),t=m(n),i=m(t),v=m(i),f=m(v,!0);p(v),fe(2),p(i),p(t),p(n),W(()=>{F(n,1,`alert_loading-div select-none not-click ${we.loading_show??""}`,"svelte-fdjvf0"),J(f,we.loading_msg)}),x(h,n),N()}var Ct=H("<!> <!>",1),$t=H("<!> <!>",1);function Mt(h,l){E(l,!1),_e();{const n=(t,i=te)=>{oe(t,{get toast(){return i()},children:(v,f)=>{var _=$t(),d=R(_);oe.Message(d,{children:(M,S)=>{var s=Ct(),c=R(s);oe.Title(c,{children:(o,w)=>{fe();var u=be();W(()=>J(u,i().title)),x(o,u)},$$slots:{default:!0}});var k=A(c,2);oe.Description(k,{children:(o,w)=>{fe();var u=be();W(()=>J(u,i().description)),x(o,u)},$$slots:{default:!0}}),x(M,s)},$$slots:{default:!0}});var b=A(d,2);oe.CloseTrigger(b,{}),x(v,_)},$$slots:{default:!0}})};oe.Group(h,{get toaster(){return Re.toaster},children:n,$$slots:{default:!0}})}N()}var Tt=H('<div><div class="select-none"><div class="loading-info  svelte-1sascuq"><div class="alert_loading_msg break border-radius font-text bg-neutral-200 dark:bg-neutral-900 select-text svelte-1sascuq"> </div></div></div></div>');function Pt(h,l){E(l,!1),_e();var n=Tt(),t=m(n),i=m(t),v=m(i),f=m(v,!0);p(v),p(i),p(t),p(n),W(()=>{F(n,1,`alert_loading-div select-none ${ke.alert_show??""}`,"svelte-1sascuq"),J(f,ke.alert_msg)}),x(h,n),N()}function At(){if(a.is_gthon())try{a.js_call_py_or_go("window_show",{lang:a.get_lang()}).then(h=>{a.console_log("[视窗JS-Log]","js_call_py.py返回值：",h)})}catch{console.error("不能导入gthon-UI相关文件")}else a.is_wails()||console.warn("Runtime：","请指明Web运行的浏览器环境，否则数据不能初始化，只能使用简易Web功能。",a.is_gthon(),a.is_wails(),a.get_agent(),a.get_href())}const he=Q({tab_value:"",tab_name:""});var jt=H('<section class="section-side_tab select-none bg-neutral-200 dark:bg-neutral-800 svelte-2hz9fi"><ul class="side_tab-menu-ul scroll-y-style select-none font-text svelte-2hz9fi"><li class="side_tab-menu-li svelte-2hz9fi"><a><svg class="svg-icon font-blue" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 20"><path fill="currentColor" fill-rule="evenodd" d="M2.52 7.823C2 8.77 2 9.915 2 12.203v1.522c0 3.9 0 5.851 1.172 7.063S6.229 22 10 22h4c3.771 0 5.657 0 6.828-1.212S22 17.626 22 13.725v-1.521c0-2.289 0-3.433-.52-4.381c-.518-.949-1.467-1.537-3.364-2.715l-2-1.241C14.111 2.622 13.108 2 12 2s-2.11.622-4.116 1.867l-2 1.241C3.987 6.286 3.038 6.874 2.519 7.823m6.927 7.575a.75.75 0 1 0-.894 1.204A5.77 5.77 0 0 0 12 17.75a5.77 5.77 0 0 0 3.447-1.148a.75.75 0 1 0-.894-1.204A4.27 4.27 0 0 1 12 16.25a4.27 4.27 0 0 1-2.553-.852" clip-rule="evenodd"></path></svg> </a></li> <li class="side_tab-menu-li svelte-2hz9fi"><a><svg class="svg-icon font-blue" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 32 32"><g fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M3 8.02a8.94 8.94 0 0 0 7.47 7l.26.04m18.6-7.04a8.94 8.94 0 0 1-7.47 7l-.26.04m7.73 9.61a8.94 8.94 0 0 0-7.47-7l-.26-.04M3 24.67a8.94 8.94 0 0 1 7.47-7l.26-.04M25.73 3c0 3.39-1.96 6.47-5.04 7.9l-1.76.82M6.6 3c0 3.39 1.96 6.47 5.04 7.9l1.76.82M6.6 29.86c0-3.39 1.96-6.47 5.04-7.9l1.76-.82m12.33 8.72c0-3.39-1.96-6.47-5.04-7.9l-1.76-.82" stroke-width="1"></path><path fill="currentColor" d="M16.71 3v2.66h1.37V4.37c0-.75-.61-1.37-1.37-1.37m-1.09 0v2.66h-1.37V4.37c0-.75.61-1.37 1.37-1.37"></path><path fill="currentColor" d="M19.31 10.9a3.8 3.8 0 0 0 .68-2.17a3.82 3.82 0 1 0-6.96 2.17a8 8 0 0 0-4.86 7.36c0 4.42 3.58 8 8 8s8-3.58 8-8c0-3.3-2.01-6.13-4.86-7.36"></path><path fill="currentColor" d="M26.23 3a.5.5 0 0 0-1 0a8.2 8.2 0 0 1-4.75 7.447l-1.069.497l-.1-.044a3.82 3.82 0 0 0-1.23-5.48V4.37A1.375 1.375 0 0 0 16.709 3v1.948a4 4 0 0 0-1.09.001V3c-.76 0-1.37.62-1.37 1.37v1.057a3.82 3.82 0 0 0-1.22 5.473l-.107.046l-1.072-.5A8.2 8.2 0 0 1 7.1 3a.5.5 0 0 0-1 0a9.2 9.2 0 0 0 5.33 8.353l.398.186a8.04 8.04 0 0 0-2.574 2.698a8.45 8.45 0 0 1-5.765-6.32a.5.5 0 0 0-.978.207a9.45 9.45 0 0 0 6.29 7.018a8 8 0 0 0-.616 2.632a9.45 9.45 0 0 0-5.674 6.792a.5.5 0 0 0 .978.208a8.46 8.46 0 0 1 4.703-5.913a7.96 7.96 0 0 0 1.321 3.84A9.2 9.2 0 0 0 6.1 29.86a.5.5 0 0 0 1 0a8.2 8.2 0 0 1 3.02-6.364a7.98 7.98 0 0 0 6.05 2.764a7.98 7.98 0 0 0 6.046-2.76a8.2 8.2 0 0 1 3.014 6.36a.5.5 0 1 0 1 0c0-2.816-1.28-5.43-3.407-7.154a7.96 7.96 0 0 0 1.325-3.84a8.46 8.46 0 0 1 4.693 5.908a.5.5 0 0 0 .978-.208a9.45 9.45 0 0 0-5.663-6.788a7.9 7.9 0 0 0-.62-2.638a9.45 9.45 0 0 0 6.283-7.016a.5.5 0 1 0-.978-.208a8.45 8.45 0 0 1-5.76 6.32a8.1 8.1 0 0 0-2.578-2.697l.398-.185A9.2 9.2 0 0 0 26.23 3"></path></g></svg> </a></li> <li class="side_tab-menu-li svelte-2hz9fi"><a><svg class="svg-icon font-blue" xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 48 48"><defs><mask id="SVGENzItdvk"><g fill="none" stroke="#fff" stroke-width="4"><path d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M26 14v14"></path><path fill="#555555" stroke-linejoin="round" d="M14 28.666C14 26.64 15.934 25 18.32 25H26v4.334C26 31.36 24.066 33 21.68 33h-3.36C15.934 33 14 31.359 14 29.334z"></path><path stroke-linecap="round" stroke-linejoin="round" d="m32 15l-6-1"></path></g></mask></defs><path fill="currentColor" d="M0 0h48v48H0z" mask="url(#SVGENzItdvk)"></path></svg> </a></li></ul></section>');function zt(h,l){E(l,!0);let n=j(Q(a.get_route())),t=j("hide"),i=j("hide");const v={get_route_name(u=""){switch(u){case"/home":return"Home";case"/_404":return"_404";case"/settings":return"Settings";case"/settings/about":return"About";case"/it_home":return"ITHome";case"/play_audio":return"PlayAudio";default:return""}}};ee(()=>{g(n,a.get_route(),!0),he.tab_value=e(n),he.tab_name=a.get_translate(v.get_route_name(e(n))),g(t,a.is_gthon()?"hide":"show",!0),g(i,a.is_wails()?"hide":"show",!0)});var f=jt(),_=m(f),d=m(_),b=m(d),M=A(m(b));p(b),p(d);var S=A(d,2),s=m(S),c=A(m(s));p(s),p(S);var k=A(S,2),o=m(k),w=A(m(o));p(o),p(k),p(_),p(f),W((u,P,T,B,q,z)=>{F(b,1,`side_tab-menu-a border-radius break ${e(n)==="/home"||e(n)==="/"?" side_tab-menu-a-active ":" "} click`,"svelte-2hz9fi"),Y(b,"href",u),J(M,` ${P??""}`),F(s,1,`side_tab-menu-a border-radius break ${e(n)==="/it_home"?" side_tab-menu-a-active ":" "} click`,"svelte-2hz9fi"),Y(s,"href",T),J(c,` ${B??""}`),F(o,1,`side_tab-menu-a border-radius break ${e(n)==="/play_audio"?" side_tab-menu-a-active ":" "} click`,"svelte-2hz9fi"),Y(o,"href",q),J(w,` ${z??""}`)},[()=>ge(a.url_path("/home")),()=>a.get_translate("Home"),()=>ge(a.url_path("/it_home")),()=>a.get_translate("ITHome"),()=>ge(a.url_path("/play_audio")),()=>a.get_translate("PlayAudio")]),x(h,f),N()}var Lt=H('<section class="section-nav select-none pywebview-drag-region can-drag bg-neutral-100 dark:bg-neutral-900"><div class="nav-title-div font-title font-bold svelte-yf87d7" role="button" tabindex="0"> </div></section>');function Et(h,l){E(l,!1),ee(()=>{}),_e();var n=Lt(),t=m(n);t.__dblclick=()=>a.change_window_size();var i=m(t,!0);p(t),p(n),W(()=>{Y(t,"data-nav_value",he.tab_value),J(i,he.tab_name)}),x(h,n),N()}de(["dblclick"]);var Nt=H('<section class="section-foot select-none pywebview-drag-region can-drag hide svelte-h2emq4"><div class="center">Foot</div></section>');function Bt(h,l){E(l,!1),ee(()=>{}),_e();var n=Nt();x(h,n),N()}const xe={browser_fn_state(){return!(navigator.webdriver||!window.localStorage||!window.indexedDB)},screen_state(){let h=window.innerWidth,l=window.innerHeight,n=window.screen.width,t=window.screen.height;return!(h<220||l<220||n<220||t<220)}},Se=function(){return xe.browser_fn_state()&&xe.screen_state()};var It=H('<div><!> <!> <!> <!> <!> <!> <main><!></main> <!> <!></div> <div class="alert select-none"><!> <!> <!></div>',1);function Xt(h,l){E(l,!0);let n=j("hide"),t=j(""),i=j("");const v={watch_404_route(){Be.status===404&&a.redirect_pathname({url_pathname:a.url_path("/_404"),url_params:"?error_url="+encodeURIComponent(a.get_href())+"&error_msg=404 Route"})},auto_set_language_index(){const z=se.app.app_class+"language_index";a.js_call_py_or_go("get_data",{data_key:z}).then(V=>{let L=V.content.data?V.content.data:a.get_lang();De.lang_index=L,g(i,L,!0)})},auto_set_theme_model(){const z=se.app.app_class+"theme_model";a.js_call_py_or_go("get_data",{data_key:z}).then(V=>{let L=V.content.data;L||(L=a.get_theme_model()),qe.theme_model=L,g(t,L,!0),document.documentElement.setAttribute("data-mode",L)})}};Ce(()=>{}),Ge(()=>{ve.state=0}),ee(()=>{if(v.auto_set_language_index(),v.auto_set_theme_model(),Se())if(a.is_weixin()||a.is_work_weixin()||a.is_qq()||a.is_feishu()||a.is_dingding()){a.alert_msg(a.get_translate("runtime_cn_chat_alert"),"long"),g(n,"hide"),ve.state=-2;return}else ve.state=1,g(n,"show"),v.watch_404_route();else{a.alert_msg(a.get_translate("runtime_error_alert"),"long"),g(n,"hide"),ve.state=-1;return}}),me(()=>{if(!Se())return;a.js_watch_window_display(),At(),a.get_app_uid().then(V=>{Oe.app_uid=V}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(V){v.auto_set_theme_model()})}),$e(()=>{});var f=It(),_=R(f),d=m(_);gt(d,{});var b=A(d,2);pt(b,{});var M=A(b,2);zt(M,{});var S=A(M,2);mt(S,{});var s=A(S,2);yt(s,{});var c=A(s,2);Et(c,{});var k=A(c,2),o=m(k);U(o,()=>l.children),p(k);var w=A(k,2);Bt(w,{});var u=A(w,2);kt(u,{}),p(_);var P=A(_,2),T=m(P);St(T,{});var B=A(T,2);Mt(B,{});var q=A(B,2);Pt(q,{}),p(P),W(()=>{F(_,1,`app ${e(n)??""} select-none`),Y(_,"data-theme_model",e(t)),Y(_,"data-language_index",e(i)),F(k,1,`main ${e(n)??""} `)}),x(h,f),N()}export{Xt as component,Qt as universal};
