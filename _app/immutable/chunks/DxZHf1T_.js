import{x as ge,ac as je,ae as Yt,ab as At}from"./D38y1ty9.js";import{g as ki}from"./CiN35S6a.js";import{p as Tn}from"./CwOBKLcU.js";var ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function to(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wr={exports:{}},xr={exports:{}},Oi;function na(){return Oi||(Oi=1,(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(a,u){return a<<u|a>>>32-u},rotr:function(a,u){return a<<32-u|a>>>u},endian:function(a){if(a.constructor==Number)return i.rotl(a,8)&16711935|i.rotl(a,24)&4278255360;for(var u=0;u<a.length;u++)a[u]=i.endian(a[u]);return a},randomBytes:function(a){for(var u=[];a>0;a--)u.push(Math.floor(Math.random()*256));return u},bytesToWords:function(a){for(var u=[],l=0,p=0;l<a.length;l++,p+=8)u[p>>>5]|=a[l]<<24-p%32;return u},wordsToBytes:function(a){for(var u=[],l=0;l<a.length*32;l+=8)u.push(a[l>>>5]>>>24-l%32&255);return u},bytesToHex:function(a){for(var u=[],l=0;l<a.length;l++)u.push((a[l]>>>4).toString(16)),u.push((a[l]&15).toString(16));return u.join("")},hexToBytes:function(a){for(var u=[],l=0;l<a.length;l+=2)u.push(parseInt(a.substr(l,2),16));return u},bytesToBase64:function(a){for(var u=[],l=0;l<a.length;l+=3)for(var p=a[l]<<16|a[l+1]<<8|a[l+2],S=0;S<4;S++)l*8+S*6<=a.length*8?u.push(t.charAt(p>>>6*(3-S)&63)):u.push("=");return u.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var u=[],l=0,p=0;l<a.length;p=++l%4)p!=0&&u.push((t.indexOf(a.charAt(l-1))&Math.pow(2,-2*p+8)-1)<<p*2|t.indexOf(a.charAt(l))>>>6-p*2);return u}};xr.exports=i})()),xr.exports}var Er,Ti;function Si(){if(Ti)return Er;Ti=1;var t={utf8:{stringToBytes:function(i){return t.bin.stringToBytes(unescape(encodeURIComponent(i)))},bytesToString:function(i){return decodeURIComponent(escape(t.bin.bytesToString(i)))}},bin:{stringToBytes:function(i){for(var a=[],u=0;u<i.length;u++)a.push(i.charCodeAt(u)&255);return a},bytesToString:function(i){for(var a=[],u=0;u<i.length;u++)a.push(String.fromCharCode(i[u]));return a.join("")}}};return Er=t,Er}var kr,Pi;function ra(){if(Pi)return kr;Pi=1,kr=function(a){return a!=null&&(t(a)||i(a)||!!a._isBuffer)};function t(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function i(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&t(a.slice(0,0))}return kr}var Ai;function ia(){return Ai||(Ai=1,(function(){var t=na(),i=Si().utf8,a=ra(),u=Si().bin,l=function(p,S){p.constructor==String?S&&S.encoding==="binary"?p=u.stringToBytes(p):p=i.stringToBytes(p):a(p)?p=Array.prototype.slice.call(p,0):!Array.isArray(p)&&p.constructor!==Uint8Array&&(p=p.toString());for(var v=t.bytesToWords(p),B=p.length*8,A=1732584193,E=-271733879,T=-1732584194,I=271733878,D=0;D<v.length;D++)v[D]=(v[D]<<8|v[D]>>>24)&16711935|(v[D]<<24|v[D]>>>8)&4278255360;v[B>>>5]|=128<<B%32,v[(B+64>>>9<<4)+14]=B;for(var G=l._ff,$=l._gg,J=l._hh,ie=l._ii,D=0;D<v.length;D+=16){var de=A,ne=E,Z=T,he=I;A=G(A,E,T,I,v[D+0],7,-680876936),I=G(I,A,E,T,v[D+1],12,-389564586),T=G(T,I,A,E,v[D+2],17,606105819),E=G(E,T,I,A,v[D+3],22,-1044525330),A=G(A,E,T,I,v[D+4],7,-176418897),I=G(I,A,E,T,v[D+5],12,1200080426),T=G(T,I,A,E,v[D+6],17,-1473231341),E=G(E,T,I,A,v[D+7],22,-45705983),A=G(A,E,T,I,v[D+8],7,1770035416),I=G(I,A,E,T,v[D+9],12,-1958414417),T=G(T,I,A,E,v[D+10],17,-42063),E=G(E,T,I,A,v[D+11],22,-1990404162),A=G(A,E,T,I,v[D+12],7,1804603682),I=G(I,A,E,T,v[D+13],12,-40341101),T=G(T,I,A,E,v[D+14],17,-1502002290),E=G(E,T,I,A,v[D+15],22,1236535329),A=$(A,E,T,I,v[D+1],5,-165796510),I=$(I,A,E,T,v[D+6],9,-1069501632),T=$(T,I,A,E,v[D+11],14,643717713),E=$(E,T,I,A,v[D+0],20,-373897302),A=$(A,E,T,I,v[D+5],5,-701558691),I=$(I,A,E,T,v[D+10],9,38016083),T=$(T,I,A,E,v[D+15],14,-660478335),E=$(E,T,I,A,v[D+4],20,-405537848),A=$(A,E,T,I,v[D+9],5,568446438),I=$(I,A,E,T,v[D+14],9,-1019803690),T=$(T,I,A,E,v[D+3],14,-187363961),E=$(E,T,I,A,v[D+8],20,1163531501),A=$(A,E,T,I,v[D+13],5,-1444681467),I=$(I,A,E,T,v[D+2],9,-51403784),T=$(T,I,A,E,v[D+7],14,1735328473),E=$(E,T,I,A,v[D+12],20,-1926607734),A=J(A,E,T,I,v[D+5],4,-378558),I=J(I,A,E,T,v[D+8],11,-2022574463),T=J(T,I,A,E,v[D+11],16,1839030562),E=J(E,T,I,A,v[D+14],23,-35309556),A=J(A,E,T,I,v[D+1],4,-1530992060),I=J(I,A,E,T,v[D+4],11,1272893353),T=J(T,I,A,E,v[D+7],16,-155497632),E=J(E,T,I,A,v[D+10],23,-1094730640),A=J(A,E,T,I,v[D+13],4,681279174),I=J(I,A,E,T,v[D+0],11,-358537222),T=J(T,I,A,E,v[D+3],16,-722521979),E=J(E,T,I,A,v[D+6],23,76029189),A=J(A,E,T,I,v[D+9],4,-640364487),I=J(I,A,E,T,v[D+12],11,-421815835),T=J(T,I,A,E,v[D+15],16,530742520),E=J(E,T,I,A,v[D+2],23,-995338651),A=ie(A,E,T,I,v[D+0],6,-198630844),I=ie(I,A,E,T,v[D+7],10,1126891415),T=ie(T,I,A,E,v[D+14],15,-1416354905),E=ie(E,T,I,A,v[D+5],21,-57434055),A=ie(A,E,T,I,v[D+12],6,1700485571),I=ie(I,A,E,T,v[D+3],10,-1894986606),T=ie(T,I,A,E,v[D+10],15,-1051523),E=ie(E,T,I,A,v[D+1],21,-2054922799),A=ie(A,E,T,I,v[D+8],6,1873313359),I=ie(I,A,E,T,v[D+15],10,-30611744),T=ie(T,I,A,E,v[D+6],15,-1560198380),E=ie(E,T,I,A,v[D+13],21,1309151649),A=ie(A,E,T,I,v[D+4],6,-145523070),I=ie(I,A,E,T,v[D+11],10,-1120210379),T=ie(T,I,A,E,v[D+2],15,718787259),E=ie(E,T,I,A,v[D+9],21,-343485551),A=A+de>>>0,E=E+ne>>>0,T=T+Z>>>0,I=I+he>>>0}return t.endian([A,E,T,I])};l._ff=function(p,S,v,B,A,E,T){var I=p+(S&v|~S&B)+(A>>>0)+T;return(I<<E|I>>>32-E)+S},l._gg=function(p,S,v,B,A,E,T){var I=p+(S&B|v&~B)+(A>>>0)+T;return(I<<E|I>>>32-E)+S},l._hh=function(p,S,v,B,A,E,T){var I=p+(S^v^B)+(A>>>0)+T;return(I<<E|I>>>32-E)+S},l._ii=function(p,S,v,B,A,E,T){var I=p+(v^(S|~B))+(A>>>0)+T;return(I<<E|I>>>32-E)+S},l._blocksize=16,l._digestsize=16,wr.exports=function(p,S){if(p==null)throw new Error("Illegal argument "+p);var v=t.wordsToBytes(l(p,S));return S&&S.asBytes?v:S&&S.asString?u.bytesToString(v):t.bytesToHex(v)}})()),wr.exports}var oa=ia();const aa=to(oa),Ii={app:{app_class:"View_dtthk_",app_version:"1.6.5"},sys:{base_route:"",home_route:"/purehome",home_route_white_word:"@purehome"}},Fe={test:{zh:"æµ‹è¯•",en:"Test",jp:"",fr:"",de:"",ru:"",es:"",ko:"",vi:""},_null:{zh:" -ç©º- ",en:" -Empty- ",jp:" -Null- ",fr:" -Null- ",de:" -Null- ",ru:" -Null- ",es:" -Null- ",ko:" -Null- ",vi:" -Null- "},show_window:{zh:"æ˜¾ç¤ºè§†çª—",en:"Show Window"},exit_app:{zh:"é€€å‡ºç¨‹åº",en:"Exit App"},about_app:{zh:"å…³äºç¨‹åº",en:"About App"},_404:{zh:"404 é¡µé¢ä¸å­˜åœ¨",en:"404 Not Found"},Example:{zh:"ä¾‹å­",en:"Example"},Home:{zh:"ä¸»é¡µ",en:"Home"},Settings:{zh:"è®¾ç½®",en:"Settings"},About:{zh:"å…³äº",en:"About"},User:{zh:"æˆ‘çš„",en:"Me"},user_tips:{zh:"è®¾ç½®",en:"Settings"},user_need_login:{zh:"è¯·ç™»å½•...",en:"Please login..."},ThemeModel:{zh:"ä¸»é¢˜",en:"Themes"},PureHome:{zh:"PureHome",en:"PureHome"},Search:{zh:"ğŸ” æœç´¢",en:"ğŸ” Search"},Bookmark:{zh:"æ”¶ è—",en:"Bookmark"},Info:{zh:"æŸ¥çœ‹ä¿¡æ¯",en:"Info"},JYP:{zh:"æ•™è‚²ç‰‡",en:"JYP"},url_timeout:{zh:"é“¾æ¥è¿‡æœŸ",en:"URL Timeout"},url_timeout_null:{zh:"é“¾æ¥å‚æ•°é”™è¯¯",en:"URL Error"},reload_window:{zh:"é‡è½½é¡µé¢",en:"Reload Page"},reload_window_btn:{zh:"é‡ è½½",en:"Reload"},btn_cancel:{zh:"å–æ¶ˆ",en:"Cancel"},btn_save:{zh:"ä¿å­˜",en:"Save"},btn_ok:{zh:"æ˜¯çš„",en:"OK"},btn_update:{zh:"æ›´æ–°",en:"Update"},a_click_tip_see_detail:{zh:"ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…",en:"See Details"},a_click_tip_back_home:{zh:"è¿”å›ä¸»é¡µ",en:"Back Home"},confirm_change_language_tip:{zh:"åˆ‡æ¢è¯­è¨€ ï¼Ÿï¼ˆé¡µé¢å°†ä¼šåˆ·æ–°.ï¼‰",en:"Change language ï¼Ÿï¼ˆThe page will refresh.ï¼‰",jp:"è¨€èªã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã‹ï¼Ÿï¼ˆãƒšãƒ¼ã‚¸ãŒæ›´æ–°ã•ã‚Œã¾ã™.ï¼‰",fr:"Changer de langue? (la page sera actualisÃ©e.)",de:"Sprache wechseln?  (Die Seite wird aktualisiert.)",ru:"ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑĞ·Ñ‹Ğº? (Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ°.)",es:"Â¿Cambiar de idioma? (la pÃ¡gina se actualizarÃ¡).",ko:"ì–¸ì–´ ì „í™˜?í˜ì´ì§€ê°€ ìƒˆë¡œ ê³ ì³ì§‘ë‹ˆë‹¤.",vi:"Äá»•i ngÃ´n ngá»¯? (Trang sáº½ Ä‘Æ°á»£c lÃ m má»›i.)"},sys_default:{zh:"è·Ÿéšç³»ç»Ÿ",en:"Same system"},app_info:{zh:"è½¯ä»¶ä¿¡æ¯",en:"App Information"},theme_model_light:{zh:"äº®",en:"Light"},theme_model_dark:{zh:"æš—",en:"Dark"},playing:{zh:"æ­£åœ¨æ’­æ”¾",en:"Playing"},play_paused:{zh:"å·²æš‚åœã€‚",en:"Paused."},play_add_new_fir:{zh:"æ·»åŠ æœ¬åœ°æ–‡ä»¶å¤¹",en:"Add a new local folder"},play_update_play_list:{zh:"æ›´æ–°æ’­æ”¾åˆ—è¡¨",en:"Update play list"},updated:{zh:"å·²æ›´æ–°",en:"Updated"},saved:{zh:"å·²ä¿å­˜",en:"Saved"},added:{zh:"å·²æ·»åŠ ",en:"Added"},input_null:{zh:"è¾“å…¥ä¸ºç©º",en:"Input is empty"},null_content:{zh:"ç©ºå†…å®¹",en:"Content is empty"},error:{zh:"å‡ºé”™",en:"Error"},find_btn:{zh:"æŸ¥ æ‰¾",en:"Find"},search_btn:{zh:"æœ ç´¢",en:"Search"},input_placeholder_find:{zh:"è¾“å…¥æŸ¥æ‰¾...",en:"Find..."},input_placeholder_search:{zh:"è¾“å…¥å…³é”®è¯...",en:"Search keywords..."},remove:{zh:"ç§»é™¤",en:"Remove"},clear:{zh:"æ¸…é™¤",en:"Clear"},remove_help_1:{zh:"ç§»é™¤è¯¥æ–‡ä»¶å¤¹ï¼ˆä¸ä¼šä»æœ¬æœºåˆ é™¤è¯¥æ–‡ä»¶å¤¹ï¼‰",en:"Remove the folder (The folder will not be deleted from the local machine)"},remove_help_2:{zh:"æ¸…é™¤æœç´¢å†å²ï¼Ÿ",en:"Clear search history?"},del:{zh:"åˆ é™¤",en:"Del"},edit:{zh:"ç¼–è¾‘",en:"Edit"},share:{zh:"åˆ†äº«",en:"Share"},qr:{zh:"äºŒç»´ç ",en:"QRCode"},input_placeholder_add_dir:{zh:"è¾“å…¥æ–‡ä»¶å¤¹è·¯å¾„",en:"Enter folder path"},runtime_error_alert:{zh:"ç³»ç»Ÿè¿è¡Œæ¡ä»¶ä¸ç¬¦åˆï¼Œå·²ç»é˜»æ­¢è®¿é—®å†…å®¹.",en:"The system operating conditions do not meet the requirements, and access to the content has been blocked."},runtime_cn_chat_alert:{zh:"è¯·ä¸è¦åœ¨ã€Œå¾®ä¿¡ã€QQã€é’‰é’‰ã€é£ä¹¦ã€ä¼ä¸šå¾®ä¿¡ã€ä¸­æ‰“å¼€æœ¬ç½‘ç«™ã€‚<br/>è¯·ä½¿ç”¨å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€ã€‚",en:'Please do not open this website within " WeChat(weixin), QQ, DingTalk(dingding), Lark(Feishu), or Enterprise WeChat." . <br/>Please open with an external browser.'},search_del_history:{zh:"æ¸…é™¤å†å²",en:"Clear"},search_clear_input:{zh:"é‡æ–°è¾“å…¥",en:"Rewrite"},search_enter_input:{zh:"ğŸ”&nbsp;æœ ç´¢",en:"Search"},bookmark_news:{zh:"æ–°é—»",en:"News"},bookmark_subscribe:{zh:"è®¢é˜…",en:"Subscribe"},bookmark_tools:{zh:"å·¥å…·",en:"Tools"},bookmark_docs:{zh:"æ–‡æ¡£",en:"Docs"},mp_so:{zh:"æœç´¢",en:"Search"},mp_chigua:{zh:"åƒç“œç½‘",en:"Rumors"},mp_fabu:{zh:"å¥½äººå‘å¸ƒ",en:"People Workstation"},mp_dongman:{zh:"åŠ¨æ¼«",en:"Cartoon"},mp_lieqi:{zh:"çŒå¥‡",en:"Special"}},sa=function(t,i={},a=10){let u=0,l="",p={};const S=new URLSearchParams(i);return S.toString()&&(t=t+"?"+S.toString()),new Promise(async v=>{const B=new AbortController,A=(a<=0?10:a)*1e3,E=setTimeout(()=>{B.abort()},A);try{const T=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"},mode:"no-cors",cache:"no-cache",signal:B.signal});if(clearTimeout(E),!T.ok)console.warn("response.ok=",T,T.ok),u=0,l="GET Status Error.",p={api_url:t,status:T.status,statusText:T.statusText,error:"GETæ¥å£è®¿é—®æˆåŠŸï¼Œä½†æ¥å£è¿”å›çŠ¶æ€é”™è¯¯"},v({state:u,msg:l,content:p});else{const I=T.headers.get("content-type");let D;I&&I.includes("application/json")?D=await T.json():I&&I.includes("text/")?D=await T.text():I&&I.includes("form-data")?D=await T.formData():I&&I.includes("blob")?D=await T.blob():D=await T.text(),v(D)}}catch(T){clearTimeout(E),T.name==="AbortError"?(u=404,l="GET Timeout Error.",p={api_url:t,error:`è¯·æ±‚è¶…æ—¶ï¼ˆ${a}ç§’ï¼‰`,error_type:"AbortError"}):(u=404,l="GET Broken.",p={api_url:t,error:T.message||T,error_type:T.name||"NetworkError"}),v({state:u,msg:l,content:p})}})};var Dn={exports:{}},ua=Dn.exports,Ci;function ca(){return Ci||(Ci=1,(function(t,i){(function(a,u){t.exports=u()})(ua,function(){var a=function(e,n){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])})(e,n)},u=function(){return(u=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++)for(var s in n=arguments[r])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e}).apply(this,arguments)};function l(e,n,r){for(var o,s=0,c=n.length;s<c;s++)!o&&s in n||((o=o||Array.prototype.slice.call(n,0,s))[s]=n[s]);return e.concat(o||Array.prototype.slice.call(n))}var p=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ta,S=Object.keys,v=Array.isArray;function B(e,n){return typeof n!="object"||S(n).forEach(function(r){e[r]=n[r]}),e}typeof Promise>"u"||p.Promise||(p.Promise=Promise);var A=Object.getPrototypeOf,E={}.hasOwnProperty;function T(e,n){return E.call(e,n)}function I(e,n){typeof n=="function"&&(n=n(A(e))),(typeof Reflect>"u"?S:Reflect.ownKeys)(n).forEach(function(r){G(e,r,n[r])})}var D=Object.defineProperty;function G(e,n,r,o){D(e,n,B(r&&T(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},o))}function $(e){return{from:function(n){return e.prototype=Object.create(n.prototype),G(e.prototype,"constructor",e),{extend:I.bind(null,e.prototype)}}}}var J=Object.getOwnPropertyDescriptor,ie=[].slice;function de(e,n,r){return ie.call(e,n,r)}function ne(e,n){return n(e)}function Z(e){if(!e)throw new Error("Assertion Failed")}function he(e){p.setImmediate?setImmediate(e):setTimeout(e,0)}function pe(e,n){if(typeof n=="string"&&T(e,n))return e[n];if(!n)return e;if(typeof n!="string"){for(var r=[],o=0,s=n.length;o<s;++o){var c=pe(e,n[o]);r.push(c)}return r}var f=n.indexOf(".");if(f!==-1){var d=e[n.substr(0,f)];return d==null?void 0:pe(d,n.substr(f+1))}}function se(e,n,r){if(e&&n!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof n!="string"&&"length"in n){Z(typeof r!="string"&&"length"in r);for(var o=0,s=n.length;o<s;++o)se(e,n[o],r[o])}else{var c,f,d=n.indexOf(".");d!==-1?(c=n.substr(0,d),(f=n.substr(d+1))===""?r===void 0?v(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=r:se(d=!(d=e[c])||!T(e,c)?e[c]={}:d,f,r)):r===void 0?v(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=r}}function ft(e){var n,r={};for(n in e)T(e,n)&&(r[n]=e[n]);return r}var Ye=[].concat;function It(e){return Ye.apply([],e)}var Ze="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(It([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(n){return n+e+"Array"})}))).filter(function(e){return p[e]}),Fn=new Set(Ze.map(function(e){return p[e]})),W=null;function V(e){return W=new WeakMap,e=(function n(r){if(!r||typeof r!="object")return r;var o=W.get(r);if(o)return o;if(v(r)){o=[],W.set(r,o);for(var s=0,c=r.length;s<c;++s)o.push(n(r[s]))}else if(Fn.has(r.constructor))o=r;else{var f,d=A(r);for(f in o=d===Object.prototype?{}:Object.create(d),W.set(r,o),r)T(r,f)&&(o[f]=n(r[f]))}return o})(e),W=null,e}var Ce={}.toString;function xe(e){return Ce.call(e).slice(8,-1)}var qe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Xe=typeof qe=="symbol"?function(e){var n;return e!=null&&(n=e[qe])&&n.apply(e)}:function(){return null};function Ke(e,n){return n=e.indexOf(n),0<=n&&e.splice(n,1),0<=n}var Qe={};function fe(e){var n,r,o,s;if(arguments.length===1){if(v(e))return e.slice();if(this===Qe&&typeof e=="string")return[e];if(s=Xe(e)){for(r=[];!(o=s.next()).done;)r.push(o.value);return r}if(e==null)return[e];if(typeof(n=e.length)!="number")return[e];for(r=new Array(n);n--;)r[n]=e[n];return r}for(n=arguments.length,r=new Array(n);n--;)r[n]=arguments[n];return r}var Se=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Rt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Pe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Rt),Eo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function dt(e,n){this.name=e,this.message=n}function Lr(e,n){return e+". Errors: "+Object.keys(n).map(function(r){return n[r].toString()}).filter(function(r,o,s){return s.indexOf(r)===o}).join(`
`)}function Qt(e,n,r,o){this.failures=n,this.failedKeys=o,this.successCount=r,this.message=Lr(e,n)}function ht(e,n){this.name="BulkError",this.failures=Object.keys(n).map(function(r){return n[r]}),this.failuresByPos=n,this.message=Lr(e,this.failures)}$(dt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),$(Qt).from(dt),$(ht).from(dt);var jn=Pe.reduce(function(e,n){return e[n]=n+"Error",e},{}),ko=dt,H=Pe.reduce(function(e,n){var r=n+"Error";function o(s,c){this.name=r,s?typeof s=="string"?(this.message="".concat(s).concat(c?`
 `+c:""),this.inner=c||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=Eo[n]||r,this.inner=null)}return $(o).from(ko),e[n]=o,e},{});H.Syntax=SyntaxError,H.Type=TypeError,H.Range=RangeError;var zr=Rt.reduce(function(e,n){return e[n+"Error"]=H[n],e},{}),Jt=Pe.reduce(function(e,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(e[n+"Error"]=H[n]),e},{});function oe(){}function Ct(e){return e}function Oo(e,n){return e==null||e===Ct?n:function(r){return n(e(r))}}function Je(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function To(e,n){return e===oe?n:function(){var r=e.apply(this,arguments);r!==void 0&&(arguments[0]=r);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var c=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Je(o,this.onsuccess):o),s&&(this.onerror=this.onerror?Je(s,this.onerror):s),c!==void 0?c:r}}function So(e,n){return e===oe?n:function(){e.apply(this,arguments);var r=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?Je(r,this.onsuccess):r),o&&(this.onerror=this.onerror?Je(o,this.onerror):o)}}function Po(e,n){return e===oe?n:function(r){var o=e.apply(this,arguments);B(r,o);var s=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,r=n.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?Je(s,this.onsuccess):s),c&&(this.onerror=this.onerror?Je(c,this.onerror):c),o===void 0?r===void 0?void 0:r:B(o,r)}}function Ao(e,n){return e===oe?n:function(){return n.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function qn(e,n){return e===oe?n:function(){var r=e.apply(this,arguments);if(r&&typeof r.then=="function"){for(var o=this,s=arguments.length,c=new Array(s);s--;)c[s]=arguments[s];return r.then(function(){return n.apply(o,c)})}return n.apply(this,arguments)}}Jt.ModifyError=Qt,Jt.DexieError=dt,Jt.BulkError=ht;var De=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Wr(e){De=e}var Dt={},$r=100,Ze=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,A(e),e];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,A(n),e]})(),Rt=Ze[0],Pe=Ze[1],Ze=Ze[2],Pe=Pe&&Pe.then,et=Rt&&Rt.constructor,Ln=!!Ze,Bt=function(e,n){Kt.push([e,n]),Zt&&(queueMicrotask(Co),Zt=!1)},zn=!0,Zt=!0,tt=[],en=[],Wn=Ct,Le={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:oe,pgp:!1,env:{},finalize:oe},U=Le,Kt=[],nt=0,tn=[];function L(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=U;if(typeof e!="function"){if(e!==Dt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Un(this,this._value))}this._state=null,this._value=null,++n.ref,(function r(o,s){try{s(function(c){if(o._state===null){if(c===o)throw new TypeError("A promise cannot be resolved with itself.");var f=o._lib&&pt();c&&typeof c.then=="function"?r(o,function(d,m){c instanceof L?c._then(d,m):c.then(d,m)}):(o._state=!0,o._value=c,Vr(o)),f&&mt()}},Un.bind(null,o))}catch(c){Un(o,c)}})(this,e)}var $n={get:function(){var e=U,n=an;function r(o,s){var c=this,f=!e.global&&(e!==U||n!==an),d=f&&!We(),m=new L(function(y,w){Vn(c,new Ur(Gr(o,e,f,d),Gr(s,e,f,d),y,w,e))});return this._consoleTask&&(m._consoleTask=this._consoleTask),m}return r.prototype=Dt,r},set:function(e){G(this,"then",e&&e.prototype===Dt?$n:{get:function(){return e},set:$n.set})}};function Ur(e,n,r,o,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof n=="function"?n:null,this.resolve=r,this.reject=o,this.psd=s}function Un(e,n){var r,o;en.push(n),e._state===null&&(r=e._lib&&pt(),n=Wn(n),e._state=!1,e._value=n,o=e,tt.some(function(s){return s._value===o._value})||tt.push(o),Vr(e),r&&mt())}function Vr(e){var n=e._listeners;e._listeners=[];for(var r=0,o=n.length;r<o;++r)Vn(e,n[r]);var s=e._PSD;--s.ref||s.finalize(),nt===0&&(++nt,Bt(function(){--nt==0&&Hn()},[]))}function Vn(e,n){if(e._state!==null){var r=e._state?n.onFulfilled:n.onRejected;if(r===null)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++nt,Bt(Io,[r,e,n])}else e._listeners.push(n)}function Io(e,n,r){try{var o,s=n._value;!n._state&&en.length&&(en=[]),o=De&&n._consoleTask?n._consoleTask.run(function(){return e(s)}):e(s),n._state||en.indexOf(s)!==-1||(function(c){for(var f=tt.length;f;)if(tt[--f]._value===c._value)return tt.splice(f,1)})(n),r.resolve(o)}catch(c){r.reject(c)}finally{--nt==0&&Hn(),--r.psd.ref||r.psd.finalize()}}function Co(){rt(Le,function(){pt()&&mt()})}function pt(){var e=zn;return Zt=zn=!1,e}function mt(){var e,n,r;do for(;0<Kt.length;)for(e=Kt,Kt=[],r=e.length,n=0;n<r;++n){var o=e[n];o[0].apply(null,o[1])}while(0<Kt.length);Zt=zn=!0}function Hn(){var e=tt;tt=[],e.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=tn.slice(0),r=n.length;r;)n[--r]()}function nn(e){return new L(Dt,!1,e)}function ue(e,n){var r=U;return function(){var o=pt(),s=U;try{return $e(r,!0),e.apply(this,arguments)}catch(c){n&&n(c)}finally{$e(s,!1),o&&mt()}}}I(L.prototype,{then:$n,_then:function(e,n){Vn(this,new Ur(null,null,e,n,U))},catch:function(e){if(arguments.length===1)return this.then(null,e);var n=e,r=arguments[1];return typeof n=="function"?this.then(null,function(o){return(o instanceof n?r:nn)(o)}):this.then(null,function(o){return(o&&o.name===n?r:nn)(o)})},finally:function(e){return this.then(function(n){return L.resolve(e()).then(function(){return n})},function(n){return L.resolve(e()).then(function(){return nn(n)})})},timeout:function(e,n){var r=this;return e<1/0?new L(function(o,s){var c=setTimeout(function(){return s(new H.Timeout(n))},e);r.then(o,s).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&G(L.prototype,Symbol.toStringTag,"Dexie.Promise"),Le.env=Hr(),I(L,{all:function(){var e=fe.apply(null,arguments).map(sn);return new L(function(n,r){e.length===0&&n([]);var o=e.length;e.forEach(function(s,c){return L.resolve(s).then(function(f){e[c]=f,--o||n(e)},r)})})},resolve:function(e){return e instanceof L?e:e&&typeof e.then=="function"?new L(function(n,r){e.then(n,r)}):new L(Dt,!0,e)},reject:nn,race:function(){var e=fe.apply(null,arguments).map(sn);return new L(function(n,r){e.map(function(o){return L.resolve(o).then(n,r)})})},PSD:{get:function(){return U},set:function(e){return U=e}},totalEchoes:{get:function(){return an}},newPSD:ze,usePSD:rt,scheduler:{get:function(){return Bt},set:function(e){Bt=e}},rejectionMapper:{get:function(){return Wn},set:function(e){Wn=e}},follow:function(e,n){return new L(function(r,o){return ze(function(s,c){var f=U;f.unhandleds=[],f.onunhandled=c,f.finalize=Je(function(){var d,m=this;d=function(){m.unhandleds.length===0?s():c(m.unhandleds[0])},tn.push(function y(){d(),tn.splice(tn.indexOf(y),1)}),++nt,Bt(function(){--nt==0&&Hn()},[])},f.finalize),e()},n,r,o)})}}),et&&(et.allSettled&&G(L,"allSettled",function(){var e=fe.apply(null,arguments).map(sn);return new L(function(n){e.length===0&&n([]);var r=e.length,o=new Array(r);e.forEach(function(s,c){return L.resolve(s).then(function(f){return o[c]={status:"fulfilled",value:f}},function(f){return o[c]={status:"rejected",reason:f}}).then(function(){return--r||n(o)})})})}),et.any&&typeof AggregateError<"u"&&G(L,"any",function(){var e=fe.apply(null,arguments).map(sn);return new L(function(n,r){e.length===0&&r(new AggregateError([]));var o=e.length,s=new Array(o);e.forEach(function(c,f){return L.resolve(c).then(function(d){return n(d)},function(d){s[f]=d,--o||r(new AggregateError(s))})})})}),et.withResolvers&&(L.withResolvers=et.withResolvers));var me={awaits:0,echoes:0,id:0},Do=0,rn=[],on=0,an=0,Ro=0;function ze(e,n,r,o){var s=U,c=Object.create(s);return c.parent=s,c.ref=0,c.global=!1,c.id=++Ro,Le.env,c.env=Ln?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject}:{},n&&B(c,n),++s.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},o=rt(c,e,r,o),c.ref===0&&c.finalize(),o}function yt(){return me.id||(me.id=++Do),++me.awaits,me.echoes+=$r,me.id}function We(){return!!me.awaits&&(--me.awaits==0&&(me.id=0),me.echoes=me.awaits*$r,!0)}function sn(e){return me.echoes&&e&&e.constructor===et?(yt(),e.then(function(n){return We(),n},function(n){return We(),ce(n)})):e}function Bo(){var e=rn[rn.length-1];rn.pop(),$e(e,!1)}function $e(e,n){var r,o=U;(n?!me.echoes||on++&&e===U:!on||--on&&e===U)||queueMicrotask(n?(function(s){++an,me.echoes&&--me.echoes!=0||(me.echoes=me.awaits=me.id=0),rn.push(U),$e(s,!0)}).bind(null,e):Bo),e!==U&&(U=e,o===Le&&(Le.env=Hr()),Ln&&(r=Le.env.Promise,n=e.env,(o.global||e.global)&&(Object.defineProperty(p,"Promise",n.PromiseProp),r.all=n.all,r.race=n.race,r.resolve=n.resolve,r.reject=n.reject,n.allSettled&&(r.allSettled=n.allSettled),n.any&&(r.any=n.any))))}function Hr(){var e=p.Promise;return Ln?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(p,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function rt(e,n,r,o,s){var c=U;try{return $e(e,!0),n(r,o,s)}finally{$e(c,!1)}}function Gr(e,n,r,o){return typeof e!="function"?e:function(){var s=U;r&&yt(),$e(n,!0);try{return e.apply(this,arguments)}finally{$e(s,!1),o&&queueMicrotask(We)}}}function Gn(e){Promise===et&&me.echoes===0?on===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Pe).indexOf("[native code]")===-1&&(yt=We=oe);var ce=L.reject,it="ï¿¿",Ne="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Yr="String expected.",gt=[],un="__dbnames",Yn="readonly",Xn="readwrite";function ot(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}var Xr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function cn(e){return typeof e!="string"||/\./.test(e)?function(n){return n}:function(n){return n[e]===void 0&&e in n&&delete(n=V(n))[e],n}}function Qr(){throw H.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function te(e,n){try{var r=Jr(e),o=Jr(n);if(r!==o)return r==="Array"?1:o==="Array"?-1:r==="binary"?1:o==="binary"?-1:r==="string"?1:o==="string"?-1:r==="Date"?1:o!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return n<e?1:e<n?-1:0;case"binary":return(function(s,c){for(var f=s.length,d=c.length,m=f<d?f:d,y=0;y<m;++y)if(s[y]!==c[y])return s[y]<c[y]?-1:1;return f===d?0:f<d?-1:1})(Zr(e),Zr(n));case"Array":return(function(s,c){for(var f=s.length,d=c.length,m=f<d?f:d,y=0;y<m;++y){var w=te(s[y],c[y]);if(w!==0)return w}return f===d?0:f<d?-1:1})(e,n)}}catch{}return NaN}function Jr(e){var n=typeof e;return n!="object"?n:ArrayBuffer.isView(e)?"binary":(e=xe(e),e==="ArrayBuffer"?"binary":e)}function Zr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ln(e,n,r){var o=e.schema.yProps;return o?(n&&0<r.numFailures&&(n=n.filter(function(s,c){return!r.failures[c]})),Promise.all(o.map(function(s){return s=s.updatesTable,n?e.db.table(s).where("k").anyOf(n).delete():e.db.table(s).clear()})).then(function(){return r})):r}var Nt=(ei.prototype.execute=function(e){var n=this["@@propmod"];if(n.add!==void 0){var r=n.add;if(v(r))return l(l([],v(e)?e:[],!0),r).sort();if(typeof r=="number")return(Number(e)||0)+r;if(typeof r=="bigint")try{return BigInt(e)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(n.remove!==void 0){var o=n.remove;if(v(o))return v(e)?e.filter(function(s){return!o.includes(s)}).sort():[];if(typeof o=="number")return Number(e)-o;if(typeof o=="bigint")try{return BigInt(e)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return r=(r=n.replacePrefix)===null||r===void 0?void 0:r[0],r&&typeof e=="string"&&e.startsWith(r)?n.replacePrefix[1]+e.substring(r.length):e},ei);function ei(e){this["@@propmod"]=e}function ti(e,n){for(var r=S(n),o=r.length,s=!1,c=0;c<o;++c){var f=r[c],d=n[f],m=pe(e,f);d instanceof Nt?(se(e,f,d.execute(m)),s=!0):m!==d&&(se(e,f,d),s=!0)}return s}var ni=(ae.prototype._trans=function(e,n,r){var o=this._tx||U.trans,s=this.name,c=De&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function f(y,w,h){if(!h.schema[s])throw new H.NotFound("Table "+s+" not part of transaction");return n(h.idbtrans,h)}var d=pt();try{var m=o&&o.db._novip===this.db._novip?o===U.trans?o._promise(e,f,r):ze(function(){return o._promise(e,f,r)},{trans:o,transless:U.transless||U}):(function y(w,h,k,g){if(w.idbdb&&(w._state.openComplete||U.letThrough||w._vip)){var b=w._createTransaction(h,k,w._dbSchema);try{b.create(),w._state.PR1398_maxLoop=3}catch(_){return _.name===jn.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return y(w,h,k,g)})):ce(_)}return b._promise(h,function(_,x){return ze(function(){return U.trans=b,g(_,x,b)})}).then(function(_){if(h==="readwrite")try{b.idbtrans.commit()}catch{}return h==="readonly"?_:b._completion.then(function(){return _})})}if(w._state.openComplete)return ce(new H.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen)return ce(new H.DatabaseClosed);w.open().catch(oe)}return w._state.dbReadyPromise.then(function(){return y(w,h,k,g)})})(this.db,e,[this.name],f);return c&&(m._consoleTask=c,m=m.catch(function(y){return console.trace(y),ce(y)})),m}finally{d&&mt()}},ae.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):e==null?ce(new H.Type("Invalid argument to Table.get()")):this._trans("readonly",function(o){return r.core.get({trans:o,key:e}).then(function(s){return r.hook.reading.fire(s)})}).then(n)},ae.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(v(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var n=S(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(d){if(d.compound&&n.every(function(y){return 0<=d.keyPath.indexOf(y)})){for(var m=0;m<n.length;++m)if(n.indexOf(d.keyPath[m])===-1)return!1;return!0}return!1}).sort(function(d,m){return d.keyPath.length-m.keyPath.length})[0];if(r&&this.db._maxKey!==it){var c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(function(m){return e[m]}))}!r&&De&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var o=this.schema.idxByName;function s(d,m){return te(d,m)===0}var f=n.reduce(function(h,m){var y=h[0],w=h[1],h=o[m],k=e[m];return[y||h,y||!h?ot(w,h&&h.multi?function(g){return g=pe(g,m),v(g)&&g.some(function(b){return s(k,b)})}:function(g){return s(k,pe(g,m))}):w]},[null,null]),c=f[0],f=f[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(f):r?this.filter(f):this.where(n).equals("")},ae.prototype.filter=function(e){return this.toCollection().and(e)},ae.prototype.count=function(e){return this.toCollection().count(e)},ae.prototype.offset=function(e){return this.toCollection().offset(e)},ae.prototype.limit=function(e){return this.toCollection().limit(e)},ae.prototype.each=function(e){return this.toCollection().each(e)},ae.prototype.toArray=function(e){return this.toCollection().toArray(e)},ae.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ae.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,v(e)?"[".concat(e.join("+"),"]"):e))},ae.prototype.reverse=function(){return this.toCollection().reverse()},ae.prototype.mapToClass=function(e){var n,r=this.db,o=this.name;function s(){return n!==null&&n.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Qr&&((function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function w(){this.constructor=m}a(m,y),m.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)})(s,n=e),Object.defineProperty(s.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),s.prototype.table=function(){return o},e=s);for(var c=new Set,f=e.prototype;f;f=A(f))Object.getOwnPropertyNames(f).forEach(function(m){return c.add(m)});function d(m){if(!m)return m;var y,w=Object.create(e.prototype);for(y in m)if(!c.has(y))try{w[y]=m[y]}catch{}return w}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=d,this.hook("reading",d),e},ae.prototype.defineClass=function(){return this.mapToClass(function(e){B(this,e)})},ae.prototype.add=function(e,n){var r=this,o=this.schema.primKey,s=o.auto,c=o.keyPath,f=e;return c&&s&&(f=cn(c)(e)),this._trans("readwrite",function(d){return r.core.mutate({trans:d,type:"add",keys:n!=null?[n]:null,values:[f]})}).then(function(d){return d.numFailures?L.reject(d.failures[0]):d.lastResult}).then(function(d){if(c)try{se(e,c,d)}catch{}return d})},ae.prototype.upsert=function(e,n){var r=this,o=this.schema.primKey.keyPath;return this._trans("readwrite",function(s){return r.core.get({trans:s,key:e}).then(function(c){var f=c??{};return ti(f,n),o&&se(f,o,e),r.core.mutate({trans:s,type:"put",values:[f],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[n]}}).then(function(d){return d.numFailures?L.reject(d.failures[0]):!!c})})})},ae.prototype.update=function(e,n){return typeof e!="object"||v(e)?this.where(":id").equals(e).modify(n):(e=pe(e,this.schema.primKey.keyPath),e===void 0?ce(new H.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(n))},ae.prototype.put=function(e,n){var r=this,o=this.schema.primKey,s=o.auto,c=o.keyPath,f=e;return c&&s&&(f=cn(c)(e)),this._trans("readwrite",function(d){return r.core.mutate({trans:d,type:"put",values:[f],keys:n!=null?[n]:null})}).then(function(d){return d.numFailures?L.reject(d.failures[0]):d.lastResult}).then(function(d){if(c)try{se(e,c,d)}catch{}return d})},ae.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(o){return ln(n,[e],o)}).then(function(o){return o.numFailures?L.reject(o.failures[0]):void 0})})},ae.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:Xr}).then(function(r){return ln(e,null,r)})}).then(function(n){return n.numFailures?L.reject(n.failures[0]):void 0})},ae.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(o){return o.map(function(s){return n.hook.reading.fire(s)})})})},ae.prototype.bulkAdd=function(e,n,r){var o=this,s=Array.isArray(n)?n:void 0,c=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",function(f){var y=o.schema.primKey,d=y.auto,y=y.keyPath;if(y&&s)throw new H.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,y=y&&d?e.map(cn(y)):e;return o.core.mutate({trans:f,type:"add",keys:s,values:y,wantResults:c}).then(function(b){var h=b.numFailures,k=b.results,g=b.lastResult,b=b.failures;if(h===0)return c?k:g;throw new ht("".concat(o.name,".bulkAdd(): ").concat(h," of ").concat(m," operations failed"),b)})})},ae.prototype.bulkPut=function(e,n,r){var o=this,s=Array.isArray(n)?n:void 0,c=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",function(f){var y=o.schema.primKey,d=y.auto,y=y.keyPath;if(y&&s)throw new H.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,y=y&&d?e.map(cn(y)):e;return o.core.mutate({trans:f,type:"put",keys:s,values:y,wantResults:c}).then(function(b){var h=b.numFailures,k=b.results,g=b.lastResult,b=b.failures;if(h===0)return c?k:g;throw new ht("".concat(o.name,".bulkPut(): ").concat(h," of ").concat(m," operations failed"),b)})})},ae.prototype.bulkUpdate=function(e){var n=this,r=this.core,o=e.map(function(f){return f.key}),s=e.map(function(f){return f.changes}),c=[];return this._trans("readwrite",function(f){return r.getMany({trans:f,keys:o,cache:"clone"}).then(function(d){var m=[],y=[];e.forEach(function(h,k){var g=h.key,b=h.changes,_=d[k];if(_){for(var x=0,O=Object.keys(b);x<O.length;x++){var P=O[x],C=b[P];if(P===n.schema.primKey.keyPath){if(te(C,g)!==0)throw new H.Constraint("Cannot update primary key in bulkUpdate()")}else se(_,P,C)}c.push(k),m.push(g),y.push(_)}});var w=m.length;return r.mutate({trans:f,type:"put",keys:m,values:y,updates:{keys:o,changeSpecs:s}}).then(function(h){var k=h.numFailures,g=h.failures;if(k===0)return w;for(var b=0,_=Object.keys(g);b<_.length;b++){var x,O=_[b],P=c[Number(O)];P!=null&&(x=g[O],delete g[O],g[P]=x)}throw new ht("".concat(n.name,".bulkUpdate(): ").concat(k," of ").concat(w," operations failed"),g)})})})},ae.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(o){return n.core.mutate({trans:o,type:"delete",keys:e}).then(function(s){return ln(n,e,s)})}).then(function(f){var s=f.numFailures,c=f.lastResult,f=f.failures;if(s===0)return c;throw new ht("".concat(n.name,".bulkDelete(): ").concat(s," of ").concat(r," operations failed"),f)})},ae);function ae(){}function Mt(e){function n(f,d){if(d){for(var m=arguments.length,y=new Array(m-1);--m;)y[m-1]=arguments[m];return r[f].subscribe.apply(null,y),e}if(typeof f=="string")return r[f]}var r={};n.addEventType=c;for(var o=1,s=arguments.length;o<s;++o)c(arguments[o]);return n;function c(f,d,m){if(typeof f!="object"){var y;d=d||Ao;var w={subscribers:[],fire:m=m||oe,subscribe:function(h){w.subscribers.indexOf(h)===-1&&(w.subscribers.push(h),w.fire=d(w.fire,h))},unsubscribe:function(h){w.subscribers=w.subscribers.filter(function(k){return k!==h}),w.fire=w.subscribers.reduce(d,m)}};return r[f]=n[f]=w}S(y=f).forEach(function(h){var k=y[h];if(v(k))c(h,y[h][0],y[h][1]);else{if(k!=="asap")throw new H.InvalidArgument("Invalid event config");var g=c(h,Ct,function(){for(var b=arguments.length,_=new Array(b);b--;)_[b]=arguments[b];g.subscribers.forEach(function(x){he(function(){x.apply(null,_)})})})}})}}function Ft(e,n){return $(n).from({prototype:e}),n}function vt(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function Qn(e,n){e.filter=ot(e.filter,n)}function Jn(e,n,r){var o=e.replayFilter;e.replayFilter=o?function(){return ot(o(),n())}:n,e.justLimit=r&&!o}function fn(e,n){if(e.isPrimKey)return n.primaryKey;var r=n.getIndexByKeyPath(e.index);if(!r)throw new H.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return r}function ri(e,n,r){var o=fn(e,n.schema);return n.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:o,range:e.range}})}function dn(e,n,r,o){var s=e.replayFilter?ot(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},f=function(d,m,y){var w,h;s&&!s(m,y,function(k){return m.stop(k)},function(k){return m.fail(k)})||((h=""+(w=m.primaryKey))=="[object ArrayBuffer]"&&(h=""+new Uint8Array(w)),T(c,h)||(c[h]=!0,n(d,m,y)))};return Promise.all([e.or._iterate(f,r),ii(ri(e,o,r),e.algorithm,f,!e.keysOnly&&e.valueMapper)])}return ii(ri(e,o,r),ot(e.algorithm,s),n,!e.keysOnly&&e.valueMapper)}function ii(e,n,r,o){var s=ue(o?function(c,f,d){return r(o(c),f,d)}:r);return e.then(function(c){if(c)return c.start(function(){var f=function(){return c.continue()};n&&!n(c,function(d){return f=d},function(d){c.stop(d),f=oe},function(d){c.fail(d),f=oe})||s(c.value,c,function(d){return f=d}),f()})})}var Ko=(re.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,ce.bind(null,r.error)):r.table._trans("readonly",e).then(n)},re.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,ce.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},re.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=ot(n.algorithm,e)},re.prototype._iterate=function(e,n){return dn(this._ctx,e,n,this._ctx.table.core)},re.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&B(r,e),n._ctx=r,n},re.prototype.raw=function(){return this._ctx.valueMapper=null,this},re.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return dn(n,e,r,n.table.core)})},re.prototype.count=function(e){var n=this;return this._read(function(r){var o=n._ctx,s=o.table.core;if(vt(o,!0))return s.count({trans:r,query:{index:fn(o,s.schema),range:o.range}}).then(function(f){return Math.min(f,o.limit)});var c=0;return dn(o,function(){return++c,!1},r,s).then(function(){return c})}).then(e)},re.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),o=r[0],s=r.length-1;function c(m,y){return y?c(m[r[y]],y-1):m[o]}var f=this._ctx.dir==="next"?1:-1;function d(m,y){return te(c(m,s),c(y,s))*f}return this.toArray(function(m){return m.sort(d)}).then(n)},re.prototype.toArray=function(e){var n=this;return this._read(function(r){var o=n._ctx;if(o.dir==="next"&&vt(o,!0)&&0<o.limit){var s=o.valueMapper,c=fn(o,o.table.core.schema);return o.table.core.query({trans:r,limit:o.limit,values:!0,query:{index:c,range:o.range}}).then(function(d){return d=d.result,s?d.map(s):d})}var f=[];return dn(o,function(d){return f.push(d)},r,o.table.core).then(function(){return f})},e)},re.prototype.offset=function(e){var n=this._ctx;return e<=0||(n.offset+=e,vt(n)?Jn(n,function(){var r=e;return function(o,s){return r===0||(r===1?--r:s(function(){o.advance(r),r=0}),!1)}}):Jn(n,function(){var r=e;return function(){return--r<0}})),this},re.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Jn(this._ctx,function(){var n=e;return function(r,o,s){return--n<=0&&o(s),0<=n}},!0),this},re.prototype.until=function(e,n){return Qn(this._ctx,function(r,o,s){return!e(r.value)||(o(s),n)}),this},re.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},re.prototype.last=function(e){return this.reverse().first(e)},re.prototype.filter=function(e){var n;return Qn(this._ctx,function(r){return e(r.value)}),(n=this._ctx).isMatch=ot(n.isMatch,e),this},re.prototype.and=function(e){return this.filter(e)},re.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},re.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},re.prototype.desc=function(){return this.reverse()},re.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.key,o)})},re.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},re.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.primaryKey,o)})},re.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,s){r.push(s.key)}).then(function(){return r}).then(e)},re.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&vt(n,!0)&&0<n.limit)return this._read(function(o){var s=fn(n,n.table.core.schema);return n.table.core.query({trans:o,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(function(o){return o.result}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)},re.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},re.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},re.prototype.lastKey=function(e){return this.reverse().firstKey(e)},re.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var n={};return Qn(this._ctx,function(s){var o=s.primaryKey.toString(),s=T(n,o);return n[o]=!0,!s}),this},re.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(o){var s=typeof e=="function"?e:function(_){return ti(_,e)},c=r.table.core,y=c.schema.primaryKey,f=y.outbound,d=y.extractKey,m=200,y=n.db._options.modifyChunkSize;y&&(m=typeof y=="object"?y[c.name]||y["*"]||200:y);function w(_,P){var O=P.failures,P=P.numFailures;k+=_-P;for(var C=0,R=S(O);C<R.length;C++){var N=R[C];h.push(O[N])}}var h=[],k=0,g=[],b=e===oi;return n.clone().primaryKeys().then(function(_){function x(P){var C=Math.min(m,_.length-P),R=_.slice(P,P+C);return(b?Promise.resolve([]):c.getMany({trans:o,keys:R,cache:"immutable"})).then(function(N){var j=[],K=[],M=f?[]:null,q=b?R:[];if(!b)for(var F=0;F<C;++F){var z=N[F],X={value:V(z),primKey:_[P+F]};s.call(X,X.value,X)!==!1&&(X.value==null?q.push(_[P+F]):f||te(d(z),d(X.value))===0?(K.push(X.value),f&&M.push(_[P+F])):(q.push(_[P+F]),j.push(X.value)))}return Promise.resolve(0<j.length&&c.mutate({trans:o,type:"add",values:j}).then(function(Q){for(var ee in Q.failures)q.splice(parseInt(ee),1);w(j.length,Q)})).then(function(){return(0<K.length||O&&typeof e=="object")&&c.mutate({trans:o,type:"put",keys:M,values:K,criteria:O,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<P}).then(function(Q){return w(K.length,Q)})}).then(function(){return(0<q.length||O&&b)&&c.mutate({trans:o,type:"delete",keys:q,criteria:O,isAdditionalChunk:0<P}).then(function(Q){return ln(r.table,q,Q)}).then(function(Q){return w(q.length,Q)})}).then(function(){return _.length>P+C&&x(P+m)})})}var O=vt(r)&&r.limit===1/0&&(typeof e!="function"||b)&&{index:r.index,range:r.range};return x(0).then(function(){if(0<h.length)throw new Qt("Error modifying one or more objects",h,k,g);return _.length})})})},re.prototype.delete=function(){var e=this._ctx,n=e.range;return!vt(e)||e.table.schema.yProps||!e.isPrimKey&&n.type!==3?this.modify(oi):this._write(function(r){var o=e.table.core.schema.primaryKey,s=n;return e.table.core.count({trans:r,query:{index:o,range:s}}).then(function(c){return e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(function(m){var d=m.failures,m=m.numFailures;if(m)throw new Qt("Could not delete some values",Object.keys(d).map(function(y){return d[y]}),c-m);return c-m})})})},re);function re(){}var oi=function(e,n){return n.value=null};function No(e,n){return e<n?-1:e===n?0:1}function Mo(e,n){return n<e?-1:e===n?0:1}function Oe(e,n,r){return e=e instanceof si?new e.Collection(e):e,e._ctx.error=new(r||TypeError)(n),e}function bt(e){return new e.Collection(e,function(){return ai("")}).limit(0)}function hn(e,n,r,o){var s,c,f,d,m,y,w,h=r.length;if(!r.every(function(b){return typeof b=="string"}))return Oe(e,Yr);function k(b){s=b==="next"?function(x){return x.toUpperCase()}:function(x){return x.toLowerCase()},c=b==="next"?function(x){return x.toLowerCase()}:function(x){return x.toUpperCase()},f=b==="next"?No:Mo;var _=r.map(function(x){return{lower:c(x),upper:s(x)}}).sort(function(x,O){return f(x.lower,O.lower)});d=_.map(function(x){return x.upper}),m=_.map(function(x){return x.lower}),w=(y=b)==="next"?"":o}k("next"),e=new e.Collection(e,function(){return Ue(d[0],m[h-1]+o)}),e._ondirectionchange=function(b){k(b)};var g=0;return e._addAlgorithm(function(b,_,x){var O=b.key;if(typeof O!="string")return!1;var P=c(O);if(n(P,m,g))return!0;for(var C=null,R=g;R<h;++R){var N=(function(j,K,M,q,F,z){for(var X=Math.min(j.length,q.length),Q=-1,ee=0;ee<X;++ee){var Te=K[ee];if(Te!==q[ee])return F(j[ee],M[ee])<0?j.substr(0,ee)+M[ee]+M.substr(ee+1):F(j[ee],q[ee])<0?j.substr(0,ee)+q[ee]+M.substr(ee+1):0<=Q?j.substr(0,Q)+K[Q]+M.substr(Q+1):null;F(j[ee],Te)<0&&(Q=ee)}return X<q.length&&z==="next"?j+M.substr(j.length):X<j.length&&z==="prev"?j.substr(0,M.length):Q<0?null:j.substr(0,Q)+q[Q]+M.substr(Q+1)})(O,P,d[R],m[R],f,y);N===null&&C===null?g=R+1:(C===null||0<f(C,N))&&(C=N)}return _(C!==null?function(){b.continue(C+w)}:x),!1}),e}function Ue(e,n,r,o){return{type:2,lower:e,upper:n,lowerOpen:r,upperOpen:o}}function ai(e){return{type:1,lower:e,upper:e}}var si=(Object.defineProperty(ye.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ye.prototype.between=function(e,n,r,o){r=r!==!1,o=o===!0;try{return 0<this._cmp(e,n)||this._cmp(e,n)===0&&(r||o)&&(!r||!o)?bt(this):new this.Collection(this,function(){return Ue(e,n,!r,!o)})}catch{return Oe(this,Ne)}},ye.prototype.equals=function(e){return e==null?Oe(this,Ne):new this.Collection(this,function(){return ai(e)})},ye.prototype.above=function(e){return e==null?Oe(this,Ne):new this.Collection(this,function(){return Ue(e,void 0,!0)})},ye.prototype.aboveOrEqual=function(e){return e==null?Oe(this,Ne):new this.Collection(this,function(){return Ue(e,void 0,!1)})},ye.prototype.below=function(e){return e==null?Oe(this,Ne):new this.Collection(this,function(){return Ue(void 0,e,!1,!0)})},ye.prototype.belowOrEqual=function(e){return e==null?Oe(this,Ne):new this.Collection(this,function(){return Ue(void 0,e)})},ye.prototype.startsWith=function(e){return typeof e!="string"?Oe(this,Yr):this.between(e,e+it,!0,!0)},ye.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):hn(this,function(n,r){return n.indexOf(r[0])===0},[e],it)},ye.prototype.equalsIgnoreCase=function(e){return hn(this,function(n,r){return n===r[0]},[e],"")},ye.prototype.anyOfIgnoreCase=function(){var e=fe.apply(Qe,arguments);return e.length===0?bt(this):hn(this,function(n,r){return r.indexOf(n)!==-1},e,"")},ye.prototype.startsWithAnyOfIgnoreCase=function(){var e=fe.apply(Qe,arguments);return e.length===0?bt(this):hn(this,function(n,r){return r.some(function(o){return n.indexOf(o)===0})},e,it)},ye.prototype.anyOf=function(){var e=this,n=fe.apply(Qe,arguments),r=this._cmp;try{n.sort(r)}catch{return Oe(this,Ne)}if(n.length===0)return bt(this);var o=new this.Collection(this,function(){return Ue(n[0],n[n.length-1])});o._ondirectionchange=function(c){r=c==="next"?e._ascending:e._descending,n.sort(r)};var s=0;return o._addAlgorithm(function(c,f,d){for(var m=c.key;0<r(m,n[s]);)if(++s===n.length)return f(d),!1;return r(m,n[s])===0||(f(function(){c.continue(n[s])}),!1)}),o},ye.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ye.prototype.noneOf=function(){var e=fe.apply(Qe,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Oe(this,Ne)}var n=e.reduce(function(r,o){return r?r.concat([[r[r.length-1][1],o]]):[[-1/0,o]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},ye.prototype.inAnyRange=function(O,n){var r=this,o=this._cmp,s=this._ascending,c=this._descending,f=this._min,d=this._max;if(O.length===0)return bt(this);if(!O.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&s(P[0],P[1])<=0}))return Oe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",H.InvalidArgument);var m=!n||n.includeLowers!==!1,y=n&&n.includeUppers===!0,w,h=s;function k(P,C){return h(P[0],C[0])}try{(w=O.reduce(function(P,C){for(var R=0,N=P.length;R<N;++R){var j=P[R];if(o(C[0],j[1])<0&&0<o(C[1],j[0])){j[0]=f(j[0],C[0]),j[1]=d(j[1],C[1]);break}}return R===N&&P.push(C),P},[])).sort(k)}catch{return Oe(this,Ne)}var g=0,b=y?function(P){return 0<s(P,w[g][1])}:function(P){return 0<=s(P,w[g][1])},_=m?function(P){return 0<c(P,w[g][0])}:function(P){return 0<=c(P,w[g][0])},x=b,O=new this.Collection(this,function(){return Ue(w[0][0],w[w.length-1][1],!m,!y)});return O._ondirectionchange=function(P){h=P==="next"?(x=b,s):(x=_,c),w.sort(k)},O._addAlgorithm(function(P,C,R){for(var N,j=P.key;x(j);)if(++g===w.length)return C(R),!1;return!b(N=j)&&!_(N)||(r._cmp(j,w[g][1])===0||r._cmp(j,w[g][0])===0||C(function(){h===s?P.continue(w[g][0]):P.continue(w[g][1])}),!1)}),O},ye.prototype.startsWithAnyOf=function(){var e=fe.apply(Qe,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?bt(this):this.inAnyRange(e.map(function(n){return[n,n+it]})):Oe(this,"startsWithAnyOf() only works with strings")},ye);function ye(){}function Re(e){return ue(function(n){return jt(n),e(n.target.error),!1})}function jt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var qt="storagemutated",Zn="x-storagemutated-1",Ve=Mt(null,qt),Fo=(Be.prototype._lock=function(){return Z(!U.global),++this._reculock,this._reculock!==1||U.global||(U.lockOwnerFor=this),this},Be.prototype._unlock=function(){if(Z(!U.global),--this._reculock==0)for(U.global||(U.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{rt(e[1],e[0])}catch{}}return this},Be.prototype._locked=function(){return this._reculock&&U.lockOwnerFor!==this},Be.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,o=this.db._state.dbOpenError;if(Z(!this.idbtrans),!e&&!r)switch(o&&o.name){case"DatabaseClosedError":throw new H.DatabaseClosed(o);case"MissingAPIError":throw new H.MissingAPI(o.message,o);default:throw new H.OpenFailed(o)}if(!this.active)throw new H.TransactionInactive;return Z(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ue(function(s){jt(s),n._reject(e.error)}),e.onabort=ue(function(s){jt(s),n.active&&n._reject(new H.Abort(e.error)),n.active=!1,n.on("abort").fire(s)}),e.oncomplete=ue(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&Ve.storagemutated.fire(e.mutatedParts)}),this},Be.prototype._promise=function(e,n,r){var o=this;if(e==="readwrite"&&this.mode!=="readwrite")return ce(new H.ReadOnly("Transaction is readonly"));if(!this.active)return ce(new H.TransactionInactive);if(this._locked())return new L(function(c,f){o._blockedFuncs.push([function(){o._promise(e,n,r).then(c,f)},U])});if(r)return ze(function(){var c=new L(function(f,d){o._lock();var m=n(f,d,o);m&&m.then&&m.then(f,d)});return c.finally(function(){return o._unlock()}),c._lib=!0,c});var s=new L(function(c,f){var d=n(c,f,o);d&&d.then&&d.then(c,f)});return s._lib=!0,s},Be.prototype._root=function(){return this.parent?this.parent._root():this},Be.prototype.waitFor=function(e){var n,r=this._root(),o=L.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return o}):(r._waitingFor=o,r._waitingQueue=[],n=r.idbtrans.objectStore(r.storeNames[0]),(function c(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(n.get(-1/0).onsuccess=c)})());var s=r._waitingFor;return new L(function(c,f){o.then(function(d){return r._waitingQueue.push(ue(c.bind(null,d)))},function(d){return r._waitingQueue.push(ue(f.bind(null,d)))}).finally(function(){r._waitingFor===s&&(r._waitingFor=null)})})},Be.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new H.Abort))},Be.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(T(n,e))return n[e];var r=this.schema[e];if(!r)throw new H.NotFound("Table "+e+" not part of transaction");return r=new this.db.Table(e,r,this),r.core=this.db.core.table(e),n[e]=r},Be);function Be(){}function er(e,n,r,o,s,c,f,d){return{name:e,keyPath:n,unique:r,multi:o,auto:s,compound:c,src:(r&&!f?"&":"")+(o?"*":"")+(s?"++":"")+ui(n),type:d}}function ui(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function tr(e,n,r){return{name:e,primKey:n,indexes:r,mappedClass:null,idxByName:(o=function(s){return[s.name,s]},r.reduce(function(s,c,f){return f=o(c,f),f&&(s[f[0]]=f[1]),s},{}))};var o}var Lt=function(e){try{return e.only([[]]),Lt=function(){return[[]]},[[]]}catch{return Lt=function(){return it},it}};function nr(e){return e==null?function(){}:typeof e=="string"?(n=e).split(".").length===1?function(r){return r[n]}:function(r){return pe(r,n)}:function(r){return pe(r,e)};var n}function ci(e){return[].slice.call(e)}var jo=0;function zt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function qo(e,n,m){function o(x){if(x.type===3)return null;if(x.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var g=x.lower,b=x.upper,_=x.lowerOpen,x=x.upperOpen;return g===void 0?b===void 0?null:n.upperBound(b,!!x):b===void 0?n.lowerBound(g,!!_):n.bound(g,b,!!_,!!x)}function s(k){var g,b=k.name;return{name:b,schema:k,mutate:function(_){var x=_.trans,O=_.type,P=_.keys,C=_.values,R=_.range;return new Promise(function(N,j){N=ue(N);var K=x.objectStore(b),M=K.keyPath==null,q=O==="put"||O==="add";if(!q&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var F,z=(P||C||{length:1}).length;if(P&&C&&P.length!==C.length)throw new Error("Given keys array must have same length as given values array.");if(z===0)return N({numFailures:0,failures:{},results:[],lastResult:void 0});function X(Ee){++Te,jt(Ee)}var Q=[],ee=[],Te=0;if(O==="deleteRange"){if(R.type===4)return N({numFailures:Te,failures:ee,results:[],lastResult:void 0});R.type===3?Q.push(F=K.clear()):Q.push(F=K.delete(o(R)))}else{var M=q?M?[C,P]:[C,null]:[P,null],Y=M[0],be=M[1];if(q)for(var _e=0;_e<z;++_e)Q.push(F=be&&be[_e]!==void 0?K[O](Y[_e],be[_e]):K[O](Y[_e])),F.onerror=X;else for(_e=0;_e<z;++_e)Q.push(F=K[O](Y[_e])),F.onerror=X}function On(Ee){Ee=Ee.target.result,Q.forEach(function(ut,_r){return ut.error!=null&&(ee[_r]=ut.error)}),N({numFailures:Te,failures:ee,results:O==="delete"?P:Q.map(function(ut){return ut.result}),lastResult:Ee})}F.onerror=function(Ee){X(Ee),On(Ee)},F.onsuccess=On})},getMany:function(_){var x=_.trans,O=_.keys;return new Promise(function(P,C){P=ue(P);for(var R,N=x.objectStore(b),j=O.length,K=new Array(j),M=0,q=0,F=function(Q){Q=Q.target,K[Q._pos]=Q.result,++q===M&&P(K)},z=Re(C),X=0;X<j;++X)O[X]!=null&&((R=N.get(O[X]))._pos=X,R.onsuccess=F,R.onerror=z,++M);M===0&&P(K)})},get:function(_){var x=_.trans,O=_.key;return new Promise(function(P,C){P=ue(P);var R=x.objectStore(b).get(O);R.onsuccess=function(N){return P(N.target.result)},R.onerror=Re(C)})},query:(g=y,function(_){return new Promise(function(x,O){x=ue(x);var P,C,R,M=_.trans,N=_.values,j=_.limit,F=_.query,K=j===1/0?void 0:j,q=F.index,F=F.range,M=M.objectStore(b),q=q.isPrimaryKey?M:M.index(q.name),F=o(F);if(j===0)return x({result:[]});g?((K=N?q.getAll(F,K):q.getAllKeys(F,K)).onsuccess=function(z){return x({result:z.target.result})},K.onerror=Re(O)):(P=0,C=!N&&"openKeyCursor"in q?q.openKeyCursor(F):q.openCursor(F),R=[],C.onsuccess=function(z){var X=C.result;return X?(R.push(N?X.value:X.primaryKey),++P===j?x({result:R}):void X.continue()):x({result:R})},C.onerror=Re(O))})}),openCursor:function(_){var x=_.trans,O=_.values,P=_.query,C=_.reverse,R=_.unique;return new Promise(function(N,j){N=ue(N);var q=P.index,K=P.range,M=x.objectStore(b),M=q.isPrimaryKey?M:M.index(q.name),q=C?R?"prevunique":"prev":R?"nextunique":"next",F=!O&&"openKeyCursor"in M?M.openKeyCursor(o(K),q):M.openCursor(o(K),q);F.onerror=Re(j),F.onsuccess=ue(function(z){var X,Q,ee,Te,Y=F.result;Y?(Y.___id=++jo,Y.done=!1,X=Y.continue.bind(Y),Q=(Q=Y.continuePrimaryKey)&&Q.bind(Y),ee=Y.advance.bind(Y),Te=function(){throw new Error("Cursor not stopped")},Y.trans=x,Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=function(){throw new Error("Cursor not started")},Y.fail=ue(j),Y.next=function(){var be=this,_e=1;return this.start(function(){return _e--?be.continue():be.stop()}).then(function(){return be})},Y.start=function(be){function _e(){if(F.result)try{be()}catch(Ee){Y.fail(Ee)}else Y.done=!0,Y.start=function(){throw new Error("Cursor behind last entry")},Y.stop()}var On=new Promise(function(Ee,ut){Ee=ue(Ee),F.onerror=Re(ut),Y.fail=ut,Y.stop=function(_r){Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=Te,Ee(_r)}});return F.onsuccess=ue(function(Ee){F.onsuccess=_e,_e()}),Y.continue=X,Y.continuePrimaryKey=Q,Y.advance=ee,_e(),On},N(Y)):N(null)},j)})},count:function(_){var x=_.query,O=_.trans,P=x.index,C=x.range;return new Promise(function(R,N){var j=O.objectStore(b),K=P.isPrimaryKey?j:j.index(P.name),j=o(C),K=j?K.count(j):K.count();K.onsuccess=ue(function(M){return R(M.target.result)}),K.onerror=Re(N)})}}}var c,f,d,w=(f=m,d=ci((c=e).objectStoreNames),{schema:{name:c.name,tables:d.map(function(k){return f.objectStore(k)}).map(function(k){var g=k.keyPath,x=k.autoIncrement,b=v(g),_={},x={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g==null,compound:b,keyPath:g,autoIncrement:x,unique:!0,extractKey:nr(g)},indexes:ci(k.indexNames).map(function(O){return k.index(O)}).map(function(R){var P=R.name,C=R.unique,N=R.multiEntry,R=R.keyPath,N={name:P,compound:v(R),keyPath:R,unique:C,multiEntry:N,extractKey:nr(R)};return _[zt(R)]=N}),getIndexByKeyPath:function(O){return _[zt(O)]}};return _[":id"]=x.primaryKey,g!=null&&(_[zt(g)]=x.primaryKey),x})},hasGetAll:0<d.length&&"getAll"in f.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),m=w.schema,y=w.hasGetAll,w=m.tables.map(s),h={};return w.forEach(function(k){return h[k.name]=k}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(k){if(!h[k])throw new Error("Table '".concat(k,"' not found"));return h[k]},MIN_KEY:-1/0,MAX_KEY:Lt(n),schema:m}}function Lo(e,n,r,o){var s=r.IDBKeyRange;return r.indexedDB,{dbcore:(o=qo(n,s,o),e.dbcore.reduce(function(c,f){return f=f.create,u(u({},c),f(c))},o))}}function pn(e,o){var r=o.db,o=Lo(e._middlewares,r,e._deps,o);e.core=o.dbcore,e.tables.forEach(function(s){var c=s.name;e.core.schema.tables.some(function(f){return f.name===c})&&(s.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=s.core))})}function mn(e,n,r,o){r.forEach(function(s){var c=o[s];n.forEach(function(f){var d=(function m(y,w){return J(y,w)||(y=A(y))&&m(y,w)})(f,s);(!d||"value"in d&&d.value===void 0)&&(f===e.Transaction.prototype||f instanceof e.Transaction?G(f,s,{get:function(){return this.table(s)},set:function(m){D(this,s,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):f[s]=new e.Table(s,c))})})}function rr(e,n){n.forEach(function(r){for(var o in r)r[o]instanceof e.Table&&delete r[o]})}function zo(e,n){return e._cfg.version-n._cfg.version}function Wo(e,n,r,o){var s=e._dbSchema;r.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=tr("$meta",fi("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,s);c.create(r),c._completion.catch(o);var f=c._reject.bind(c),d=U.transless||U;ze(function(){return U.trans=c,U.transless=d,n!==0?(pn(e,r),y=n,((m=c).storeNames.includes("$meta")?m.table("$meta").get("version").then(function(w){return w??y}):L.resolve(y)).then(function(w){return k=w,g=c,b=r,_=[],w=(h=e)._versions,x=h._dbSchema=gn(0,h.idbdb,b),(w=w.filter(function(O){return O._cfg.version>=k})).length!==0?(w.forEach(function(O){_.push(function(){var P=x,C=O._cfg.dbschema;vn(h,P,b),vn(h,C,b),x=h._dbSchema=C;var R=ir(P,C);R.add.forEach(function(q){or(b,q[0],q[1].primKey,q[1].indexes)}),R.change.forEach(function(q){if(q.recreate)throw new H.Upgrade("Not yet support for changing primary key");var F=b.objectStore(q.name);q.add.forEach(function(z){return yn(F,z)}),q.change.forEach(function(z){F.deleteIndex(z.name),yn(F,z)}),q.del.forEach(function(z){return F.deleteIndex(z)})});var N=O._cfg.contentUpgrade;if(N&&O._cfg.version>k){pn(h,b),g._memoizedTables={};var j=ft(C);R.del.forEach(function(q){j[q]=P[q]}),rr(h,[h.Transaction.prototype]),mn(h,[h.Transaction.prototype],S(j),j),g.schema=j;var K,M=Se(N);return M&&yt(),R=L.follow(function(){var q;(K=N(g))&&M&&(q=We.bind(null,null),K.then(q,q))}),K&&typeof K.then=="function"?L.resolve(K):R.then(function(){return K})}}),_.push(function(P){var C,R,N=O._cfg.dbschema;C=N,R=P,[].slice.call(R.db.objectStoreNames).forEach(function(j){return C[j]==null&&R.db.deleteObjectStore(j)}),rr(h,[h.Transaction.prototype]),mn(h,[h.Transaction.prototype],h._storeNames,h._dbSchema),g.schema=h._dbSchema}),_.push(function(P){h.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(h.idbdb.version/10)===O._cfg.version?(h.idbdb.deleteObjectStore("$meta"),delete h._dbSchema.$meta,h._storeNames=h._storeNames.filter(function(C){return C!=="$meta"})):P.objectStore("$meta").put(O._cfg.version,"version"))})}),(function O(){return _.length?L.resolve(_.shift()(g.idbtrans)).then(O):L.resolve()})().then(function(){li(x,b)})):L.resolve();var h,k,g,b,_,x}).catch(f)):(S(s).forEach(function(w){or(r,w,s[w].primKey,s[w].indexes)}),pn(e,r),void L.follow(function(){return e.on.populate.fire(c)}).catch(f));var m,y})}function $o(e,n){li(e._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains("$meta")||n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var r=gn(0,e.idbdb,n);vn(e,e._dbSchema,n);for(var o=0,s=ir(r,e._dbSchema).change;o<s.length;o++){var c=(function(f){if(f.change.length||f.recreate)return console.warn("Unable to patch indexes of table ".concat(f.name," because it has changes on the type of index or primary key.")),{value:void 0};var d=n.objectStore(f.name);f.add.forEach(function(m){De&&console.debug("Dexie upgrade patch: Creating missing index ".concat(f.name,".").concat(m.src)),yn(d,m)})})(s[o]);if(typeof c=="object")return c.value}}function ir(e,n){var r,o={del:[],add:[],change:[]};for(r in e)n[r]||o.del.push(r);for(r in n){var s=e[r],c=n[r];if(s){var f={name:r,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||s.primKey.auto!==c.primKey.auto)f.recreate=!0,o.change.push(f);else{var d=s.idxByName,m=c.idxByName,y=void 0;for(y in d)m[y]||f.del.push(y);for(y in m){var w=d[y],h=m[y];w?w.src!==h.src&&f.change.push(h):f.add.push(h)}(0<f.del.length||0<f.add.length||0<f.change.length)&&o.change.push(f)}}else o.add.push([r,c])}return o}function or(e,n,r,o){var s=e.db.createObjectStore(n,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return o.forEach(function(c){return yn(s,c)}),s}function li(e,n){S(e).forEach(function(r){n.db.objectStoreNames.contains(r)||(De&&console.debug("Dexie: Creating missing table",r),or(n,r,e[r].primKey,e[r].indexes))})}function yn(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function gn(e,n,r){var o={};return de(n.objectStoreNames,0).forEach(function(s){for(var c=r.objectStore(s),f=er(ui(y=c.keyPath),y||"",!0,!1,!!c.autoIncrement,y&&typeof y!="string",!0),d=[],m=0;m<c.indexNames.length;++m){var w=c.index(c.indexNames[m]),y=w.keyPath,w=er(w.name,y,!!w.unique,!!w.multiEntry,!1,y&&typeof y!="string",!1);d.push(w)}o[s]=tr(s,f,d)}),o}function vn(e,n,r){for(var o=r.db.objectStoreNames,s=0;s<o.length;++s){var c=o[s],f=r.objectStore(c);e._hasGetAll="getAll"in f;for(var d=0;d<f.indexNames.length;++d){var m=f.indexNames[d],y=f.index(m).keyPath,w=typeof y=="string"?y:"["+de(y).join("+")+"]";!n[c]||(y=n[c].idxByName[w])&&(y.name=m,delete n[c].idxByName[w],n[c].idxByName[m]=y)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&p.WorkerGlobalScope&&p instanceof p.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function fi(e){return e.split(",").map(function(n,r){var c=n.split(":"),o=(s=c[1])===null||s===void 0?void 0:s.trim(),s=(n=c[0].trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return er(s,c||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),v(c),r===0,o)})}var Uo=(_t.prototype._createTableSchema=tr,_t.prototype._parseIndexSyntax=fi,_t.prototype._parseStoresSpec=function(e,n){var r=this;S(e).forEach(function(o){if(e[o]!==null){var s=r._parseIndexSyntax(e[o]),c=s.shift();if(!c)throw new H.Schema("Invalid schema for table "+o+": "+e[o]);if(c.unique=!0,c.multi)throw new H.Schema("Primary key cannot be multiEntry*");s.forEach(function(f){if(f.auto)throw new H.Schema("Only primary key can be marked as autoIncrement (++)");if(!f.keyPath)throw new H.Schema("Index must have a name and cannot be an empty string")}),s=r._createTableSchema(o,c,s),n[o]=s}})},_t.prototype.stores=function(r){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?B(this._cfg.storesSource,r):r;var r=n._versions,o={},s={};return r.forEach(function(c){B(o,c._cfg.storesSource),s=c._cfg.dbschema={},c._parseStoresSpec(o,s)}),n._dbSchema=s,rr(n,[n._allTables,n,n.Transaction.prototype]),mn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],S(s),s),n._storeNames=S(s),this},_t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=qn(this._cfg.contentUpgrade||oe,e),this},_t);function _t(){}function ar(e,n){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Me(un,{addons:[],indexedDB:e,IDBKeyRange:n})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function sr(e){return e&&typeof e.databases=="function"}function ur(e){return ze(function(){return U.letThrough=!0,e()})}function cr(e){return!("from"in e)}var ve=function(e,n){if(!this){var r=new ve;return e&&"d"in e&&B(r,e),r}B(this,arguments.length?{d:1,from:e,to:1<arguments.length?n:e}:{d:0})};function Wt(e,n,r){var o=te(n,r);if(!isNaN(o)){if(0<o)throw RangeError();if(cr(e))return B(e,{from:n,to:r,d:1});var s=e.l,o=e.r;if(te(r,e.from)<0)return s?Wt(s,n,r):e.l={from:n,to:r,d:1,l:null,r:null},hi(e);if(0<te(n,e.to))return o?Wt(o,n,r):e.r={from:n,to:r,d:1,l:null,r:null},hi(e);te(n,e.from)<0&&(e.from=n,e.l=null,e.d=o?o.d+1:1),0<te(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,s&&!e.l&&$t(e,s),o&&r&&$t(e,o)}}function $t(e,n){cr(n)||(function r(o,m){var c=m.from,f=m.to,d=m.l,m=m.r;Wt(o,c,f),d&&r(o,d),m&&r(o,m)})(e,n)}function di(e,n){var r=bn(n),o=r.next();if(o.done)return!1;for(var s=o.value,c=bn(e),f=c.next(s.from),d=f.value;!o.done&&!f.done;){if(te(d.from,s.to)<=0&&0<=te(d.to,s.from))return!0;te(s.from,d.from)<0?s=(o=r.next(d.from)).value:d=(f=c.next(s.from)).value}return!1}function bn(e){var n=cr(e)?null:{s:0,n:e};return{next:function(r){for(var o=0<arguments.length;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&te(r,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||te(r,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function hi(e){var n,r,o=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0),s=1<o?"r":o<-1?"l":"";s&&(n=s=="r"?"l":"r",r=u({},e),o=e[s],e.from=o.from,e.to=o.to,e[s]=o[s],r[s]=o[n],(e[n]=r).d=pi(r)),e.d=pi(e)}function pi(r){var n=r.r,r=r.l;return(n?r?Math.max(n.d,r.d):n.d:r?r.d:0)+1}function _n(e,n){return S(n).forEach(function(r){e[r]?$t(e[r],n[r]):e[r]=(function o(s){var c,f,d={};for(c in s)T(s,c)&&(f=s[c],d[c]=!f||typeof f!="object"||Fn.has(f.constructor)?f:o(f));return d})(n[r])}),e}function lr(e,n){return e.all||n.all||Object.keys(e).some(function(r){return n[r]&&di(n[r],e[r])})}I(ve.prototype,((Pe={add:function(e){return $t(this,e),this},addKey:function(e){return Wt(this,e,e),this},addKeys:function(e){var n=this;return e.forEach(function(r){return Wt(n,r,r)}),this},hasKey:function(e){var n=bn(this).next(e).value;return n&&te(n.from,e)<=0&&0<=te(n.to,e)}})[qe]=function(){return bn(this)},Pe));var at={},fr={},dr=!1;function wn(e){_n(fr,e),dr||(dr=!0,setTimeout(function(){dr=!1,hr(fr,!(fr={}))},0))}function hr(e,n){n===void 0&&(n=!1);var r=new Set;if(e.all)for(var o=0,s=Object.values(at);o<s.length;o++)mi(f=s[o],e,r,n);else for(var c in e){var f,d=/^idb\:\/\/(.*)\/(.*)\//.exec(c);d&&(c=d[1],d=d[2],(f=at["idb://".concat(c,"/").concat(d)])&&mi(f,e,r,n))}r.forEach(function(m){return m()})}function mi(e,n,r,o){for(var s=[],c=0,f=Object.entries(e.queries.query);c<f.length;c++){for(var d=f[c],m=d[0],y=[],w=0,h=d[1];w<h.length;w++){var k=h[w];lr(n,k.obsSet)?k.subscribers.forEach(function(x){return r.add(x)}):o&&y.push(k)}o&&s.push([m,y])}if(o)for(var g=0,b=s;g<b.length;g++){var _=b[g],m=_[0],y=_[1];e.queries.query[m]=y}}function Vo(e){var n=e._state,r=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?ce(n.dbOpenError):e});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,s=Math.round(10*e.verno),c=!1;function f(){if(n.openCanceller!==o)throw new H.DatabaseClosed("db.open() was cancelled")}function d(){return new L(function(k,g){if(f(),!r)throw new H.MissingAPI;var b=e.name,_=n.autoSchema||!s?r.open(b):r.open(b,s);if(!_)throw new H.MissingAPI;_.onerror=Re(g),_.onblocked=ue(e._fireOnBlocked),_.onupgradeneeded=ue(function(x){var O;w=_.transaction,n.autoSchema&&!e._options.allowEmptyDB?(_.onerror=jt,w.abort(),_.result.close(),(O=r.deleteDatabase(b)).onsuccess=O.onerror=ue(function(){g(new H.NoSuchDatabase("Database ".concat(b," doesnt exist")))})):(w.onerror=Re(g),x=x.oldVersion>Math.pow(2,62)?0:x.oldVersion,h=x<1,e.idbdb=_.result,c&&$o(e,w),Wo(e,x/10,w,g))},g),_.onsuccess=ue(function(){w=null;var x,O,P,C,R,N=e.idbdb=_.result,j=de(N.objectStoreNames);if(0<j.length)try{var K=N.transaction((C=j).length===1?C[0]:C,"readonly");if(n.autoSchema)O=N,P=K,(x=e).verno=O.version/10,P=x._dbSchema=gn(0,O,P),x._storeNames=de(O.objectStoreNames,0),mn(x,[x._allTables],S(P),P);else if(vn(e,e._dbSchema,K),((R=ir(gn(0,(R=e).idbdb,K),R._dbSchema)).add.length||R.change.some(function(M){return M.add.length||M.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),N.close(),s=N.version+1,c=!0,k(d());pn(e,K)}catch{}gt.push(e),N.onversionchange=ue(function(M){n.vcFired=!0,e.on("versionchange").fire(M)}),N.onclose=ue(function(){e.close({disableAutoOpen:!1})}),h&&(R=e._deps,K=b,N=R.indexedDB,R=R.IDBKeyRange,sr(N)||K===un||ar(N,R).put({name:K}).catch(oe)),k()},g)}).catch(function(k){switch(k?.name){case"UnknownError":if(0<n.PR1398_maxLoop)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(0<s)return s=0,d()}return L.reject(k)})}var m,y=n.dbReadyResolve,w=null,h=!1;return L.race([o,(typeof navigator>"u"?L.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(k){function g(){return indexedDB.databases().finally(k)}m=setInterval(g,100),g()}).finally(function(){return clearInterval(m)}):Promise.resolve()).then(d)]).then(function(){return f(),n.onReadyBeingFired=[],L.resolve(ur(function(){return e.on.ready.fire(e.vip)})).then(function k(){if(0<n.onReadyBeingFired.length){var g=n.onReadyBeingFired.reduce(qn,oe);return n.onReadyBeingFired=[],L.resolve(ur(function(){return g(e.vip)})).then(k)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(k){n.dbOpenError=k;try{w&&w.abort()}catch{}return o===n.openCanceller&&e._close(),ce(k)}).finally(function(){n.openComplete=!0,y()}).then(function(){var k;return h&&(k={},e.tables.forEach(function(g){g.schema.indexes.forEach(function(b){b.name&&(k["idb://".concat(e.name,"/").concat(g.name,"/").concat(b.name)]=new ve(-1/0,[[[]]]))}),k["idb://".concat(e.name,"/").concat(g.name,"/")]=k["idb://".concat(e.name,"/").concat(g.name,"/:dels")]=new ve(-1/0,[[[]]])}),Ve(qt).fire(k),hr(k,!0)),e})}function pr(e){function n(c){return e.next(c)}var r=s(n),o=s(function(c){return e.throw(c)});function s(c){return function(m){var d=c(m),m=d.value;return d.done?m:m&&typeof m.then=="function"?m.then(r,o):v(m)?Promise.all(m).then(r,o):r(m)}}return s(n)()}function xn(e,n,r){for(var o=v(e)?e.slice():[e],s=0;s<r;++s)o.push(n);return o}var Ho={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return u(u({},e),{table:function(n){var r=e.table(n),o=r.schema,s={},c=[];function f(h,k,g){var b=zt(h),_=s[b]=s[b]||[],x=h==null?0:typeof h=="string"?1:h.length,O=0<k,O=u(u({},g),{name:O?"".concat(b,"(virtual-from:").concat(g.name,")"):g.name,lowLevelIndex:g,isVirtual:O,keyTail:k,keyLength:x,extractKey:nr(h),unique:!O&&g.unique});return _.push(O),O.isPrimaryKey||c.push(O),1<x&&f(x===2?h[0]:h.slice(0,x-1),k+1,g),_.sort(function(P,C){return P.keyTail-C.keyTail}),O}n=f(o.primaryKey.keyPath,0,o.primaryKey),s[":id"]=[n];for(var d=0,m=o.indexes;d<m.length;d++){var y=m[d];f(y.keyPath,0,y)}function w(h){var k,g=h.query.index;return g.isVirtual?u(u({},h),{query:{index:g.lowLevelIndex,range:(k=h.query.range,g=g.keyTail,{type:k.type===1?2:k.type,lower:xn(k.lower,k.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:xn(k.upper,k.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}):h}return u(u({},r),{schema:u(u({},o),{primaryKey:n,indexes:c,getIndexByKeyPath:function(h){return(h=s[zt(h)])&&h[0]}}),count:function(h){return r.count(w(h))},query:function(h){return r.query(w(h))},openCursor:function(h){var k=h.query.index,g=k.keyTail,b=k.isVirtual,_=k.keyLength;return b?r.openCursor(w(h)).then(function(O){return O&&x(O)}):r.openCursor(h);function x(O){return Object.create(O,{continue:{value:function(P){P!=null?O.continue(xn(P,h.reverse?e.MAX_KEY:e.MIN_KEY,g)):h.unique?O.continue(O.key.slice(0,_).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,g)):O.continue()}},continuePrimaryKey:{value:function(P,C){O.continuePrimaryKey(xn(P,e.MAX_KEY,g),C)}},primaryKey:{get:function(){return O.primaryKey}},key:{get:function(){var P=O.key;return _===1?P[0]:P.slice(0,_)}},value:{get:function(){return O.value}}})}}})}})}};function mr(e,n,r,o){return r=r||{},o=o||"",S(e).forEach(function(s){var c,f,d;T(n,s)?(c=e[s],f=n[s],typeof c=="object"&&typeof f=="object"&&c&&f?(d=xe(c))!==xe(f)?r[o+s]=n[s]:d==="Object"?mr(c,f,r,o+s+"."):c!==f&&(r[o+s]=n[s]):c!==f&&(r[o+s]=n[s])):r[o+s]=void 0}),S(n).forEach(function(s){T(e,s)||(r[o+s]=n[s])}),r}function yr(e,n){return n.type==="delete"?n.keys:n.keys||n.values.map(e.extractKey)}var Go={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return u(u({},e),{table:function(n){var r=e.table(n),o=r.schema.primaryKey;return u(u({},r),{mutate:function(s){var c=U.trans,f=c.table(n).hook,d=f.deleting,m=f.creating,y=f.updating;switch(s.type){case"add":if(m.fire===oe)break;return c._promise("readwrite",function(){return w(s)},!0);case"put":if(m.fire===oe&&y.fire===oe)break;return c._promise("readwrite",function(){return w(s)},!0);case"delete":if(d.fire===oe)break;return c._promise("readwrite",function(){return w(s)},!0);case"deleteRange":if(d.fire===oe)break;return c._promise("readwrite",function(){return(function h(k,g,b){return r.query({trans:k,values:!1,query:{index:o,range:g},limit:b}).then(function(_){var x=_.result;return w({type:"delete",keys:x,trans:k}).then(function(O){return 0<O.numFailures?Promise.reject(O.failures[0]):x.length<b?{failures:[],numFailures:0,lastResult:void 0}:h(k,u(u({},g),{lower:x[x.length-1],lowerOpen:!0}),b)})})})(s.trans,s.range,1e4)},!0)}return r.mutate(s);function w(h){var k,g,b,_=U.trans,x=h.keys||yr(o,h);if(!x)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?u(u({},h),{keys:x}):u({},h)).type!=="delete"&&(h.values=l([],h.values)),h.keys&&(h.keys=l([],h.keys)),k=r,b=x,((g=h).type==="add"?Promise.resolve([]):k.getMany({trans:g.trans,keys:b,cache:"immutable"})).then(function(O){var P=x.map(function(C,R){var N,j,K,M=O[R],q={onerror:null,onsuccess:null};return h.type==="delete"?d.fire.call(q,C,M,_):h.type==="add"||M===void 0?(N=m.fire.call(q,C,h.values[R],_),C==null&&N!=null&&(h.keys[R]=C=N,o.outbound||se(h.values[R],o.keyPath,C))):(N=mr(M,h.values[R]),(j=y.fire.call(q,N,C,M,_))&&(K=h.values[R],Object.keys(j).forEach(function(F){T(K,F)?K[F]=j[F]:se(K,F,j[F])}))),q});return r.mutate(h).then(function(C){for(var R=C.failures,N=C.results,j=C.numFailures,C=C.lastResult,K=0;K<x.length;++K){var M=(N||x)[K],q=P[K];M==null?q.onerror&&q.onerror(R[K]):q.onsuccess&&q.onsuccess(h.type==="put"&&O[K]?h.values[K]:M)}return{failures:R,results:N,numFailures:j,lastResult:C}}).catch(function(C){return P.forEach(function(R){return R.onerror&&R.onerror(C)}),Promise.reject(C)})})}}})}})}};function yi(e,n,r){try{if(!n||n.keys.length<e.length)return null;for(var o=[],s=0,c=0;s<n.keys.length&&c<e.length;++s)te(n.keys[s],e[c])===0&&(o.push(r?V(n.values[s]):n.values[s]),++c);return o.length===e.length?o:null}catch{return null}}var Yo={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return u(u({},r),{getMany:function(o){if(!o.cache)return r.getMany(o);var s=yi(o.keys,o.trans._cache,o.cache==="clone");return s?L.resolve(s):r.getMany(o).then(function(c){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?V(c):c},c})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),r.mutate(o)}})}}}};function gi(e,n){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function vi(e,n){switch(e){case"query":return n.values&&!n.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Xo={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new ve(e.MIN_KEY,e.MAX_KEY);return u(u({},e),{transaction:function(o,s,c){if(U.subscr&&s!=="readonly")throw new H.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(U.querier));return e.transaction(o,s,c)},table:function(o){var s=e.table(o),c=s.schema,f=c.primaryKey,h=c.indexes,d=f.extractKey,m=f.outbound,y=f.autoIncrement&&h.filter(function(g){return g.compound&&g.keyPath.includes(f.keyPath)}),w=u(u({},s),{mutate:function(g){function b(F){return F="idb://".concat(n,"/").concat(o,"/").concat(F),C[F]||(C[F]=new ve)}var _,x,O,P=g.trans,C=g.mutatedParts||(g.mutatedParts={}),R=b(""),N=b(":dels"),j=g.type,q=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[yr(f,g).filter(function(F){return F}),g.values]:[],K=q[0],M=q[1],q=g.trans._cache;return v(K)?(R.addKeys(K),(q=j==="delete"||K.length===M.length?yi(K,q):null)||N.addKeys(K),(q||M)&&(_=b,x=q,O=M,c.indexes.forEach(function(F){var z=_(F.name||"");function X(ee){return ee!=null?F.extractKey(ee):null}function Q(ee){return F.multiEntry&&v(ee)?ee.forEach(function(Te){return z.addKey(Te)}):z.addKey(ee)}(x||O).forEach(function(ee,be){var Y=x&&X(x[be]),be=O&&X(O[be]);te(Y,be)!==0&&(Y!=null&&Q(Y),be!=null&&Q(be))})}))):K?(M={from:(M=K.lower)!==null&&M!==void 0?M:e.MIN_KEY,to:(M=K.upper)!==null&&M!==void 0?M:e.MAX_KEY},N.add(M),R.add(M)):(R.add(r),N.add(r),c.indexes.forEach(function(F){return b(F.name).add(r)})),s.mutate(g).then(function(F){return!K||g.type!=="add"&&g.type!=="put"||(R.addKeys(F.results),y&&y.forEach(function(z){for(var X=g.values.map(function(Y){return z.extractKey(Y)}),Q=z.keyPath.findIndex(function(Y){return Y===f.keyPath}),ee=0,Te=F.results.length;ee<Te;++ee)X[ee][Q]=F.results[ee];b(z.name).addKeys(X)})),P.mutatedParts=_n(P.mutatedParts||{},C),F})}}),h=function(b){var _=b.query,b=_.index,_=_.range;return[b,new ve((b=_.lower)!==null&&b!==void 0?b:e.MIN_KEY,(_=_.upper)!==null&&_!==void 0?_:e.MAX_KEY)]},k={get:function(g){return[f,new ve(g.key)]},getMany:function(g){return[f,new ve().addKeys(g.keys)]},count:h,query:h,openCursor:h};return S(k).forEach(function(g){w[g]=function(b){var _=U.subscr,x=!!_,O=gi(U,s)&&vi(g,b)?b.obsSet={}:_;if(x){var P=function(M){return M="idb://".concat(n,"/").concat(o,"/").concat(M),O[M]||(O[M]=new ve)},C=P(""),R=P(":dels"),_=k[g](b),x=_[0],_=_[1];if((g==="query"&&x.isPrimaryKey&&!b.values?R:P(x.name||"")).add(_),!x.isPrimaryKey){if(g!=="count"){var N=g==="query"&&m&&b.values&&s.query(u(u({},b),{values:!1}));return s[g].apply(this,arguments).then(function(M){if(g==="query"){if(m&&b.values)return N.then(function(X){return X=X.result,C.addKeys(X),M});var q=b.values?M.result.map(d):M.result;(b.values?C:R).addKeys(q)}else if(g==="openCursor"){var F=M,z=b.values;return F&&Object.create(F,{key:{get:function(){return R.addKey(F.primaryKey),F.key}},primaryKey:{get:function(){var X=F.primaryKey;return R.addKey(X),X}},value:{get:function(){return z&&C.addKey(F.primaryKey),F.value}}})}return M})}R.add(r)}}return s[g].apply(this,arguments)}}),w}})}};function bi(e,n,r){if(r.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===o?null:(n=u({},n),v(n.keys)&&(n.keys=n.keys.filter(function(s,c){return!(c in r.failures)})),"values"in n&&v(n.values)&&(n.values=n.values.filter(function(s,c){return!(c in r.failures)})),n)}function gr(e,n){return r=e,((o=n).lower===void 0||(o.lowerOpen?0<te(r,o.lower):0<=te(r,o.lower)))&&(e=e,(n=n).upper===void 0||(n.upperOpen?te(e,n.upper)<0:te(e,n.upper)<=0));var r,o}function _i(e,n,k,o,s,c){if(!k||k.length===0)return e;var f=n.query.index,d=f.multiEntry,m=n.query.range,y=o.schema.primaryKey.extractKey,w=f.extractKey,h=(f.lowLevelIndex||f).extractKey,k=k.reduce(function(g,b){var _=g,x=[];if(b.type==="add"||b.type==="put")for(var O=new ve,P=b.values.length-1;0<=P;--P){var C,R=b.values[P],N=y(R);O.hasKey(N)||(C=w(R),(d&&v(C)?C.some(function(F){return gr(F,m)}):gr(C,m))&&(O.addKey(N),x.push(R)))}switch(b.type){case"add":var j=new ve().addKeys(n.values?g.map(function(z){return y(z)}):g),_=g.concat(n.values?x.filter(function(z){return z=y(z),!j.hasKey(z)&&(j.addKey(z),!0)}):x.map(function(z){return y(z)}).filter(function(z){return!j.hasKey(z)&&(j.addKey(z),!0)}));break;case"put":var K=new ve().addKeys(b.values.map(function(z){return y(z)}));_=g.filter(function(z){return!K.hasKey(n.values?y(z):z)}).concat(n.values?x:x.map(function(z){return y(z)}));break;case"delete":var M=new ve().addKeys(b.keys);_=g.filter(function(z){return!M.hasKey(n.values?y(z):z)});break;case"deleteRange":var q=b.range;_=g.filter(function(z){return!gr(y(z),q)})}return _},e);return k===e?e:(k.sort(function(g,b){return te(h(g),h(b))||te(y(g),y(b))}),n.limit&&n.limit<1/0&&(k.length>n.limit?k.length=n.limit:e.length===n.limit&&k.length<n.limit&&(s.dirty=!0)),c?Object.freeze(k):k)}function wi(e,n){return te(e.lower,n.lower)===0&&te(e.upper,n.upper)===0&&!!e.lowerOpen==!!n.lowerOpen&&!!e.upperOpen==!!n.upperOpen}function Qo(e,n){return(function(r,o,s,c){if(r===void 0)return o!==void 0?-1:0;if(o===void 0)return 1;if((o=te(r,o))===0){if(s&&c)return 0;if(s)return 1;if(c)return-1}return o})(e.lower,n.lower,e.lowerOpen,n.lowerOpen)<=0&&0<=(function(r,o,s,c){if(r===void 0)return o!==void 0?1:0;if(o===void 0)return-1;if((o=te(r,o))===0){if(s&&c)return 0;if(s)return-1;if(c)return 1}return o})(e.upper,n.upper,e.upperOpen,n.upperOpen)}function Jo(e,n,r,o){e.subscribers.add(r),o.addEventListener("abort",function(){var s,c;e.subscribers.delete(r),e.subscribers.size===0&&(s=e,c=n,setTimeout(function(){s.subscribers.size===0&&Ke(c,s)},3e3))})}var Zo={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return u(u({},e),{transaction:function(r,o,s){var c,f,d=e.transaction(r,o,s);return o==="readwrite"&&(f=(c=new AbortController).signal,s=function(m){return function(){if(c.abort(),o==="readwrite"){for(var y=new Set,w=0,h=r;w<h.length;w++){var k=h[w],g=at["idb://".concat(n,"/").concat(k)];if(g){var b=e.table(k),_=g.optimisticOps.filter(function(z){return z.trans===d});if(d._explicit&&m&&d.mutatedParts)for(var x=0,O=Object.values(g.queries.query);x<O.length;x++)for(var P=0,C=(j=O[x]).slice();P<C.length;P++)lr((K=C[P]).obsSet,d.mutatedParts)&&(Ke(j,K),K.subscribers.forEach(function(z){return y.add(z)}));else if(0<_.length){g.optimisticOps=g.optimisticOps.filter(function(z){return z.trans!==d});for(var R=0,N=Object.values(g.queries.query);R<N.length;R++)for(var j,K,M,q=0,F=(j=N[R]).slice();q<F.length;q++)(K=F[q]).res!=null&&d.mutatedParts&&(m&&!K.dirty?(M=Object.isFrozen(K.res),M=_i(K.res,K.req,_,b,K,M),K.dirty?(Ke(j,K),K.subscribers.forEach(function(z){return y.add(z)})):M!==K.res&&(K.res=M,K.promise=L.resolve({result:M}))):(K.dirty&&Ke(j,K),K.subscribers.forEach(function(z){return y.add(z)})))}}}y.forEach(function(z){return z()})}}},d.addEventListener("abort",s(!1),{signal:f}),d.addEventListener("error",s(!1),{signal:f}),d.addEventListener("complete",s(!0),{signal:f})),d},table:function(r){var o=e.table(r),s=o.schema.primaryKey;return u(u({},o),{mutate:function(c){var f=U.trans;if(s.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return o.mutate(c);var d=at["idb://".concat(n,"/").concat(r)];return d?(f=o.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||yr(s,c).some(function(m){return m==null}))?(d.optimisticOps.push(c),c.mutatedParts&&wn(c.mutatedParts),f.then(function(m){0<m.numFailures&&(Ke(d.optimisticOps,c),(m=bi(0,c,m))&&d.optimisticOps.push(m),c.mutatedParts&&wn(c.mutatedParts))}),f.catch(function(){Ke(d.optimisticOps,c),c.mutatedParts&&wn(c.mutatedParts)})):f.then(function(m){var y=bi(0,u(u({},c),{values:c.values.map(function(w,h){var k;return m.failures[h]?w:(w=(k=s.keyPath)!==null&&k!==void 0&&k.includes(".")?V(w):u({},w),se(w,s.keyPath,m.results[h]),w)})}),m);d.optimisticOps.push(y),queueMicrotask(function(){return c.mutatedParts&&wn(c.mutatedParts)})}),f):o.mutate(c)},query:function(c){if(!gi(U,o)||!vi("query",c))return o.query(c);var f=((y=U.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",h=U,d=h.requery,m=h.signal,y=(function(b,_,x,O){var P=at["idb://".concat(b,"/").concat(_)];if(!P)return[];if(!(_=P.queries[x]))return[null,!1,P,null];var C=_[(O.query?O.query.index.name:null)||""];if(!C)return[null,!1,P,null];switch(x){case"query":var R=C.find(function(N){return N.req.limit===O.limit&&N.req.values===O.values&&wi(N.req.query.range,O.query.range)});return R?[R,!0,P,C]:[C.find(function(N){return("limit"in N.req?N.req.limit:1/0)>=O.limit&&(!O.values||N.req.values)&&Qo(N.req.query.range,O.query.range)}),!1,P,C];case"count":return R=C.find(function(N){return wi(N.req.query.range,O.query.range)}),[R,!!R,P,C]}})(n,r,"query",c),w=y[0],h=y[1],k=y[2],g=y[3];return w&&h?w.obsSet=c.obsSet:(h=o.query(c).then(function(b){var _=b.result;if(w&&(w.res=_),f){for(var x=0,O=_.length;x<O;++x)Object.freeze(_[x]);Object.freeze(_)}else b.result=V(_);return b}).catch(function(b){return g&&w&&Ke(g,w),Promise.reject(b)}),w={obsSet:c.obsSet,promise:h,subscribers:new Set,type:"query",req:c,dirty:!1},g?g.push(w):(g=[w],(k=k||(at["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=g)),Jo(w,g,d,m),w.promise.then(function(b){return{result:_i(b.result,c,k?.optimisticOps,o,w,f)}})}})}})}};function En(e,n){return new Proxy(e,{get:function(r,o,s){return o==="db"?n:Reflect.get(r,o,s)}})}var Me=(le.prototype.version=function(e){if(isNaN(e)||e<.1)throw new H.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new H.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(o){return o._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(zo),r.stores({}),this._state.autoSchema=!1,r)},le.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||U.letThrough||this._vip)?e():new L(function(r,o){if(n._state.openComplete)return o(new H.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void o(new H.DatabaseClosed);n.open().catch(oe)}n._state.dbReadyPromise.then(r,o)}).then(e)},le.prototype.use=function(e){var n=e.stack,r=e.create,o=e.level,s=e.name;return s&&this.unuse({stack:n,name:s}),e=this._middlewares[n]||(this._middlewares[n]=[]),e.push({stack:n,create:r,level:o??10,name:s}),e.sort(function(c,f){return c.level-f.level}),this},le.prototype.unuse=function(e){var n=e.stack,r=e.name,o=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(s){return o?s.create!==o:!!r&&s.name!==r})),this},le.prototype.open=function(){var e=this;return rt(Le,function(){return Vo(e)})},le.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,n=gt.indexOf(this);if(0<=n&&gt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new L(function(r){e.dbReadyResolve=r}),e.openCanceller=new L(function(r,o){e.cancelOpen=o}))},le.prototype.close=function(r){var n=(r===void 0?{disableAutoOpen:!0}:r).disableAutoOpen,r=this._state;n?(r.isBeingOpened&&r.cancelOpen(new H.DatabaseClosed),this._close(),r.autoOpen=!1,r.dbOpenError=new H.DatabaseClosed):(this._close(),r.autoOpen=this._options.autoOpen||r.isBeingOpened,r.openComplete=!1,r.dbOpenError=null)},le.prototype.delete=function(e){var n=this;e===void 0&&(e={disableAutoOpen:!0});var r=0<arguments.length&&typeof arguments[0]!="object",o=this._state;return new L(function(s,c){function f(){n.close(e);var d=n._deps.indexedDB.deleteDatabase(n.name);d.onsuccess=ue(function(){var m,y,w;m=n._deps,y=n.name,w=m.indexedDB,m=m.IDBKeyRange,sr(w)||y===un||ar(w,m).delete(y).catch(oe),s()}),d.onerror=Re(c),d.onblocked=n._fireOnBlocked}if(r)throw new H.InvalidArgument("Invalid closeOptions argument to db.delete()");o.isBeingOpened?o.dbReadyPromise.then(f):f()})},le.prototype.backendDB=function(){return this.idbdb},le.prototype.isOpen=function(){return this.idbdb!==null},le.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},le.prototype.hasFailed=function(){return this._state.dbOpenError!==null},le.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(le.prototype,"tables",{get:function(){var e=this;return S(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),le.prototype.transaction=function(){var e=(function(n,r,o){var s=arguments.length;if(s<2)throw new H.InvalidArgument("Too few arguments");for(var c=new Array(s-1);--s;)c[s-1]=arguments[s];return o=c.pop(),[n,It(c),o]}).apply(this,arguments);return this._transaction.apply(this,e)},le.prototype._transaction=function(e,n,r){var o=this,s=U.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);var c,f,d=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(f=n.map(function(y){if(y=y instanceof o.Table?y.name:y,typeof y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y}),e=="r"||e===Yn)c=Yn;else{if(e!="rw"&&e!=Xn)throw new H.InvalidArgument("Invalid transaction mode: "+e);c=Xn}if(s){if(s.mode===Yn&&c===Xn){if(!d)throw new H.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&f.forEach(function(y){if(s&&s.storeNames.indexOf(y)===-1){if(!d)throw new H.SubTransaction("Table "+y+" not included in parent transaction.");s=null}}),d&&s&&!s.active&&(s=null)}}catch(y){return s?s._promise(null,function(w,h){h(y)}):ce(y)}var m=(function y(w,h,k,g,b){return L.resolve().then(function(){var _=U.transless||U,x=w._createTransaction(h,k,w._dbSchema,g);if(x.explicit=!0,_={trans:x,transless:_},g)x.idbtrans=g.idbtrans;else try{x.create(),x.idbtrans._explicit=!0,w._state.PR1398_maxLoop=3}catch(C){return C.name===jn.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return y(w,h,k,null,b)})):ce(C)}var O,P=Se(b);return P&&yt(),_=L.follow(function(){var C;(O=b.call(x,x))&&(P?(C=We.bind(null,null),O.then(C,C)):typeof O.next=="function"&&typeof O.throw=="function"&&(O=pr(O)))},_),(O&&typeof O.then=="function"?L.resolve(O).then(function(C){return x.active?C:ce(new H.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):_.then(function(){return O})).then(function(C){return g&&x._resolve(),x._completion.then(function(){return C})}).catch(function(C){return x._reject(C),ce(C)})})}).bind(null,this,c,f,s,r);return s?s._promise(c,m,"lock"):U.trans?rt(U.transless,function(){return o._whenReady(m)}):this._whenReady(m)},le.prototype.table=function(e){if(!T(this._allTables,e))throw new H.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},le);function le(e,n){var r=this;this._middlewares={},this.verno=0;var o=le.dependencies;this._options=n=u({addons:le.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},o=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,c,f,d,m,y={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:oe,dbReadyPromise:null,cancelOpen:oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};y.dbReadyPromise=new L(function(h){y.dbReadyResolve=h}),y.openCanceller=new L(function(h,k){y.cancelOpen=k}),this._state=y,this.name=e,this.on=Mt(this,"populate","blocked","versionchange","close",{ready:[qn,oe]}),this.once=function(h,k){var g=function(){for(var b=[],_=0;_<arguments.length;_++)b[_]=arguments[_];r.on(h).unsubscribe(g),k.apply(r,b)};return r.on(h,g)},this.on.ready.subscribe=ne(this.on.ready.subscribe,function(h){return function(k,g){le.vip(function(){var b,_=r._state;_.openComplete?(_.dbOpenError||L.resolve().then(k),g&&h(k)):_.onReadyBeingFired?(_.onReadyBeingFired.push(k),g&&h(k)):(h(k),b=r,g||h(function x(){b.on.ready.unsubscribe(k),b.on.ready.unsubscribe(x)}))})}}),this.Collection=(s=this,Ft(Ko.prototype,function(O,x){this.db=s;var g=Xr,b=null;if(x)try{g=x()}catch(P){b=P}var _=O._ctx,x=_.table,O=x.hook.reading.fire;this._ctx={table:x,index:_.index,isPrimKey:!_.index||x.schema.primKey.keyPath&&_.index===x.schema.primKey.name,range:g,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:b,or:_.or,valueMapper:O!==Ct?O:null}})),this.Table=(c=this,Ft(ni.prototype,function(h,k,g){this.db=c,this._tx=g,this.name=h,this.schema=k,this.hook=c._allTables[h]?c._allTables[h].hook:Mt(null,{creating:[To,oe],reading:[Oo,Ct],updating:[Po,oe],deleting:[So,oe]})})),this.Transaction=(f=this,Ft(Fo.prototype,function(h,k,g,b,_){var x=this;h!=="readonly"&&k.forEach(function(O){O=(O=g[O])===null||O===void 0?void 0:O.yProps,O&&(k=k.concat(O.map(function(P){return P.updatesTable})))}),this.db=f,this.mode=h,this.storeNames=k,this.schema=g,this.chromeTransactionDurability=b,this.idbtrans=null,this.on=Mt(this,"complete","error","abort"),this.parent=_||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new L(function(O,P){x._resolve=O,x._reject=P}),this._completion.then(function(){x.active=!1,x.on.complete.fire()},function(O){var P=x.active;return x.active=!1,x.on.error.fire(O),x.parent?x.parent._reject(O):P&&x.idbtrans&&x.idbtrans.abort(),ce(O)})})),this.Version=(d=this,Ft(Uo.prototype,function(h){this.db=d,this._cfg={version:h,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(m=this,Ft(si.prototype,function(h,k,g){if(this.db=m,this._ctx={table:h,index:k===":id"?null:k,or:g},this._cmp=this._ascending=te,this._descending=function(b,_){return te(_,b)},this._max=function(b,_){return 0<te(b,_)?b:_},this._min=function(b,_){return te(b,_)<0?b:_},this._IDBKeyRange=m._deps.IDBKeyRange,!this._IDBKeyRange)throw new H.MissingAPI})),this.on("versionchange",function(h){0<h.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(h){!h.newVersion||h.newVersion<h.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(h.oldVersion/10))}),this._maxKey=Lt(n.IDBKeyRange),this._createTransaction=function(h,k,g,b){return new r.Transaction(h,k,g,r._options.chromeTransactionDurability,b)},this._fireOnBlocked=function(h){r.on("blocked").fire(h),gt.filter(function(k){return k.name===r.name&&k!==r&&!k._state.vcFired}).map(function(k){return k.on("versionchange").fire(h)})},this.use(Yo),this.use(Zo),this.use(Xo),this.use(Ho),this.use(Go);var w=new Proxy(this,{get:function(h,k,g){if(k==="_vip")return!0;if(k==="table")return function(_){return En(r.table(_),w)};var b=Reflect.get(h,k,g);return b instanceof ni?En(b,w):k==="tables"?b.map(function(_){return En(_,w)}):k==="_createTransaction"?function(){return En(b.apply(this,arguments),w)}:b}});this.vip=w,o.forEach(function(h){return h(r)})}var kn,Pe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ea=(vr.prototype.subscribe=function(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})},vr.prototype[Pe]=function(){return this},vr);function vr(e){this._subscribe=e}try{kn={indexedDB:p.indexedDB||p.mozIndexedDB||p.webkitIndexedDB||p.msIndexedDB,IDBKeyRange:p.IDBKeyRange||p.webkitIDBKeyRange}}catch{kn={indexedDB:null,IDBKeyRange:null}}function xi(e){var n,r=!1,o=new ea(function(s){var c=Se(e),f,d=!1,m={},y={},w={get closed(){return d},unsubscribe:function(){d||(d=!0,f&&f.abort(),h&&Ve.storagemutated.unsubscribe(g))}};s.start&&s.start(w);var h=!1,k=function(){return Gn(b)},g=function(_){_n(m,_),lr(y,m)&&k()},b=function(){var _,x,O;!d&&kn.indexedDB&&(m={},_={},f&&f.abort(),f=new AbortController,O=(function(P){var C=pt();try{c&&yt();var R=ze(e,P);return R=c?R.finally(We):R}finally{C&&mt()}})(x={subscr:_,signal:f.signal,requery:k,querier:e,trans:null}),Promise.resolve(O).then(function(P){r=!0,n=P,d||x.signal.aborted||(m={},(function(C){for(var R in C)if(T(C,R))return;return 1})(y=_)||h||(Ve(qt,g),h=!0),Gn(function(){return!d&&s.next&&s.next(P)}))},function(P){r=!1,["DatabaseClosedError","AbortError"].includes(P?.name)||d||Gn(function(){d||s.error&&s.error(P)})}))};return setTimeout(k,0),w});return o.hasValue=function(){return r},o.getValue=function(){return n},o}var st=Me;function br(e){var n=He;try{He=!0,Ve.storagemutated.fire(e),hr(e,!0)}finally{He=n}}I(st,u(u({},Jt),{delete:function(e){return new st(e,{addons:[]}).delete()},exists:function(e){return new st(e,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=st.dependencies,r=n.indexedDB,n=n.IDBKeyRange,(sr(r)?Promise.resolve(r.databases()).then(function(o){return o.map(function(s){return s.name}).filter(function(s){return s!==un})}):ar(r,n).toCollection().primaryKeys()).then(e)}catch{return ce(new H.MissingAPI)}var n,r},defineClass:function(){return function(e){B(this,e)}},ignoreTransaction:function(e){return U.trans?rt(U.transless,e):e()},vip:ur,async:function(e){return function(){try{var n=pr(e.apply(this,arguments));return n&&typeof n.then=="function"?n:L.resolve(n)}catch(r){return ce(r)}}},spawn:function(e,n,r){try{var o=pr(e.apply(r,n||[]));return o&&typeof o.then=="function"?o:L.resolve(o)}catch(s){return ce(s)}},currentTransaction:{get:function(){return U.trans||null}},waitFor:function(e,n){return n=L.resolve(typeof e=="function"?st.ignoreTransaction(e):e).timeout(n||6e4),U.trans?U.trans.waitFor(n):n},Promise:L,debug:{get:function(){return De},set:function(e){Wr(e)}},derive:$,extend:B,props:I,override:ne,Events:Mt,on:Ve,liveQuery:xi,extendObservabilitySet:_n,getByKeyPath:pe,setByKeyPath:se,delByKeyPath:function(e,n){typeof n=="string"?se(e,n,void 0):"length"in n&&[].map.call(n,function(r){se(e,r,void 0)})},shallowClone:ft,deepClone:V,getObjectDiff:mr,cmp:te,asap:he,minKey:-1/0,addons:[],connections:gt,errnames:jn,dependencies:kn,cache:at,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,n,r){return e+n/Math.pow(10,2*r)})})),st.maxKey=Lt(st.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ve(qt,function(e){He||(e=new CustomEvent(Zn,{detail:e}),He=!0,dispatchEvent(e),He=!1)}),addEventListener(Zn,function(e){e=e.detail,He||br(e)}));var wt,He=!1,Ei=function(){};return typeof BroadcastChannel<"u"&&((Ei=function(){(wt=new BroadcastChannel(Zn)).onmessage=function(e){return e.data&&br(e.data)}})(),typeof wt.unref=="function"&&wt.unref(),Ve(qt,function(e){He||wt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Me.disableBfCache&&e.persisted){De&&console.debug("Dexie: handling persisted pagehide"),wt?.close();for(var n=0,r=gt;n<r.length;n++)r[n].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Me.disableBfCache&&e.persisted&&(De&&console.debug("Dexie: handling persisted pageshow"),Ei(),br({all:new ve(-1/0,[[]])}))})),L.rejectionMapper=function(e,n){return!e||e instanceof dt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!zr[e.name]?e:(n=new zr[e.name](n||e.message,e),"stack"in e&&G(n,"stack",{get:function(){return this.inner.stack}}),n)},Wr(De),u(Me,Object.freeze({__proto__:null,Dexie:Me,liveQuery:xi,Entity:Qr,cmp:te,PropModification:Nt,replacePrefix:function(e,n){return new Nt({replacePrefix:[e,n]})},add:function(e){return new Nt({add:e})},remove:function(e){return new Nt({remove:e})},default:Me,RangeSet:ve,mergeRanges:$t,rangesOverlap:di}),{default:Me}),Me})})(Dn)),Dn.exports}var la=ca();const Rr=to(la),Di=Symbol.for("Dexie"),Bn=globalThis[Di]||(globalThis[Di]=Rr);if(Rr.semVer!==Bn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Rr.semVer} and ${Bn.semVer}`);const{liveQuery:Zs,mergeRanges:eu,rangesOverlap:tu,RangeSet:nu,cmp:ru,Entity:iu,PropModification:ou,replacePrefix:au,add:su,remove:uu,DexieYProvider:cu}=Bn,fa="dexie_kv_db";let Ie=Yt(void 0),Ut=Yt(!1);const Or={async init_db(){if(ge(Ie)&&ge(Ut))return ge(Ie);try{return je(Ie,new Bn(fa),!0),ge(Ie).version(1).stores({items:"++id, &only_key, any_type_value, update_time, remark"}),await ge(Ie).open(),je(Ut,!0),ge(Ie)}catch(t){throw console.error("æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥:",t),t}},async ensureDB(){return!ge(Ie)||!ge(Ut)?await this.init_db():ge(Ie)},get_time_s_date(t,i=""){let a;i?a=new Date(typeof i=="number"?i:parseInt(i,10)):a=new Date,isNaN(a.getTime())&&(a=new Date);let u=a.getSeconds(),l=a.getMinutes(),p=a.getHours(),S=a.getDate(),v=a.getMonth()+1,B=a.getFullYear(),A=["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"][a.getDay()];u=u<10?"0"+u:u,l=l<10?"0"+l:l,p=p<10?"0"+p:p,S=S<10?"0"+S:S,v=v<10?"0"+v:v;let E=t;return E=E.replaceAll("Y",B),E=E.replaceAll("m",v),E=E.replaceAll("d",S),E=E.replaceAll("H",p),E=E.replaceAll("i",l),E=E.replaceAll("s",u),E=E.replaceAll("W",A),E*1},async test_db(){let t=this;try{let i=[{only_key:"test",any_type_value:{test:2025},update_time:t.get_time_s_date("YmdHis"),remark:"æµ‹è¯•"}];const a=await this.update_db_data(i);return console.log("æµ‹è¯•æ•°æ®æ’å…¥æˆåŠŸ, IDs:",a),a}catch(i){return console.error("æµ‹è¯•å¤±è´¥:",i),[]}},async update_db_data(t=[]){let i=this;if(!Array.isArray(t)||t.length===0)return console.warn("è¦å­˜å‚¨çš„æ•°æ®æ ¼å¼ä¸æ­£ç¡®æˆ–ä¸ºç©º"),[];try{const a=await this.ensureDB(),u=[];return await a.transaction("rw",a.items,async()=>{for(const l of t){if(!l.only_key||l.only_key.indexOf("%")!==-1||l.only_key.indexOf("&")!==-1||l.only_key.indexOf("^")!==-1||l.only_key.indexOf("$")!==-1||l.only_key.indexOf("!")!==-1){console.warn("only_keyç¼ºå¤±æˆ–å«æœ‰éæ³•å­—ç¬¦, è·³è¿‡:",l);continue}const p=await a.items.where("only_key").equals(l.only_key).first(),S=i.get_time_s_date("YmdHis");if(p)await a.items.update(p.id,{any_type_value:l.any_type_value,update_time:S,remark:l.remark!==void 0?l.remark:p.remark}),u.push(p.id);else{const v={only_key:l.only_key,any_type_value:l.any_type_value,update_time:l.update_time||S,remark:l.remark||""},B=await a.items.add(v);u.push(B)}}}),u}catch(a){return console.error("æ›´æ–°æ•°æ®å¤±è´¥:",a),[]}},async get_db_data(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",t),null;try{const a=await(await this.ensureDB()).items.where("only_key").equals(t).toArray();return a.length>0?a[0]:null}catch(i){return console.error("æŸ¥è¯¢æ•°æ®å¤±è´¥:",i),null}},async get_has_prefix_key_db_datas(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",t),[];try{return await(await this.ensureDB()).items.where("only_key").startsWith(t).toArray()}catch(i){return console.error("æŸ¥è¯¢å‰ç¼€æ•°æ®å¤±è´¥:",i),[]}},async get_contains_key_db_datas(t=""){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",t),[];try{return(await(await this.ensureDB()).items.toArray()).filter(u=>u.only_key&&u.only_key.includes(t))}catch(i){return console.error("æŸ¥è¯¢åŒ…å«å­—ç¬¦çš„æ•°æ®å¤±è´¥:",i),[]}},async del_db_data(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",t),!1;try{return await(await this.ensureDB()).items.where("only_key").equals(t).delete()>0}catch(i){return console.error("åˆ é™¤æ•°æ®å¤±è´¥:",i),!1}},async del_timeout_db_datas(t,i){if(!t||!i)return console.warn("è¯·æä¾›æœ‰æ•ˆçš„æ—¶é—´èŒƒå›´"),0;try{const a=await this.ensureDB(),u=Number(t),l=Number(i);return isNaN(u)||isNaN(l)?(console.warn("æ—¶é—´å‚æ•°æ— æ•ˆ"),0):await a.items.where("update_time").between(u,l).delete()}catch(a){return console.error("åˆ é™¤æ—¶é—´æ®µæ•°æ®å¤±è´¥:",a),0}},async del_has_prefix_key_db_datas(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",t),0;try{return await(await this.ensureDB()).items.where("only_key").startsWith(t).delete()}catch(i){return console.error("åˆ é™¤å‰ç¼€æ•°æ®å¤±è´¥:",i),0}},async get_all_db_data(){try{return await(await this.ensureDB()).items.toArray()}catch(t){return console.error("è·å–æ‰€æœ‰æ•°æ®å¤±è´¥:",t),[]}},async get_db_data_count(){try{return await(await this.ensureDB()).items.count()}catch(t){return console.error("ç»Ÿè®¡æ•°æ®æ•°é‡å¤±è´¥:",t),0}},async del_many_db_data(t=[]){try{const i=await this.ensureDB();let a=0;return await i.transaction("rw",i.items,async()=>{for(const u of t){if(u.indexOf("%")!==-1||u.indexOf("&")!==-1||u.indexOf("^")!==-1||u.indexOf("$")!==-1||u.indexOf("!")!==-1){console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",u);continue}const l=await i.items.where("only_key").equals(u).delete();a+=l}}),a}catch(i){return console.error("æ‰¹é‡åˆ é™¤æ•°æ®å¤±è´¥:",i),0}},async close_db(){if(ge(Ie)&&ge(Ut))try{await ge(Ie).close(),je(Ie,null),je(Ut,!1)}catch(t){console.error("å…³é—­æ•°æ®åº“å¤±è´¥:",t)}}},Sn=At({alert_show:"hide",alert_msg:""}),Pn=At({loading_show:"hide",loading_msg:""});var da=Object.defineProperty,no=t=>{throw TypeError(t)},ha=(t,i,a)=>i in t?da(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,Ge=(t,i,a)=>ha(t,typeof i!="symbol"?i+"":i,a),pa=(t,i,a)=>i.has(t)||no("Cannot "+a),Ri=(t,i,a)=>(pa(t,i,"read from private field"),i.get(t)),ma=(t,i,a)=>i.has(t)?no("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(t):i.set(t,a);function lu(t){return t==null?[]:Array.isArray(t)?t:[t]}var Bi=t=>t?.constructor.name==="Array",ya=(t,i)=>{if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(!ro(t[a],i[a]))return!1;return!0},ro=(t,i)=>{if(Object.is(t,i))return!0;if(t==null&&i!=null||t!=null&&i==null)return!1;if(typeof t?.isEqual=="function"&&typeof i?.isEqual=="function")return t.isEqual(i);if(typeof t=="function"&&typeof i=="function")return t.toString()===i.toString();if(Bi(t)&&Bi(i))return ya(Array.from(t),Array.from(i));if(typeof t!="object"||typeof i!="object")return!1;const a=Object.keys(i??Object.create(null)),u=a.length;for(let l=0;l<u;l++)if(!Reflect.has(t,a[l]))return!1;for(let l=0;l<u;l++){const p=a[l];if(!ro(t[p],i[p]))return!1}return!0},ga=t=>t!=null&&typeof t=="object",Tr=t=>typeof t=="string",io=t=>typeof t=="function",va=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),ba=t=>Object.prototype.toString.call(t),oo=Function.prototype.toString,_a=oo.call(Object),wa=t=>{if(!ga(t)||ba(t)!="[object Object]"||ka(t))return!1;const i=Object.getPrototypeOf(t);if(i===null)return!0;const a=va(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&oo.call(a)==_a},xa=t=>typeof t=="object"&&t!==null&&"$$typeof"in t&&"props"in t,Ea=t=>typeof t=="object"&&t!==null&&"__v_isVNode"in t,ka=t=>xa(t)||Ea(t),An=(t,...i)=>(typeof t=="function"?t(...i):t)??void 0,fu=t=>t(),Br=(...t)=>(...i)=>{t.forEach(function(a){a?.(...i)})},ao=(()=>{let t=0;return()=>(t++,t.toString(36))})();function so(t){if(!wa(t)||t===void 0)return t;const i=Reflect.ownKeys(t).filter(u=>typeof u=="string"),a={};for(const u of i){const l=t[u];l!==void 0&&(a[u]=so(l))}return a}function Oa(t,i){const a={},u={},l=new Set(i),p=Reflect.ownKeys(t);for(const S of p)l.has(S)?u[S]=t[S]:a[S]=t[S];return[u,a]}var du=t=>function(a){return Oa(a,t)},In=()=>performance.now(),Rn,Ta=class{constructor(t){this.onTick=t,Ge(this,"frameId",null),Ge(this,"pausedAtMs",null),Ge(this,"context"),Ge(this,"cancelFrame",()=>{this.frameId!==null&&(cancelAnimationFrame(this.frameId),this.frameId=null)}),Ge(this,"setStartMs",i=>{this.context.startMs=i}),Ge(this,"start",()=>{if(this.frameId!==null)return;const i=In();this.pausedAtMs!==null?(this.context.startMs+=i-this.pausedAtMs,this.pausedAtMs=null):this.context.startMs=i,this.frameId=requestAnimationFrame(Ri(this,Rn))}),Ge(this,"pause",()=>{this.frameId!==null&&(this.cancelFrame(),this.pausedAtMs=In())}),Ge(this,"stop",()=>{this.frameId!==null&&(this.cancelFrame(),this.pausedAtMs=null)}),ma(this,Rn,i=>{if(this.context.now=i,this.context.deltaMs=i-this.context.startMs,this.onTick(this.context)===!1){this.stop();return}this.frameId=requestAnimationFrame(Ri(this,Rn))}),this.context={now:0,startMs:In(),deltaMs:0}}get elapsedMs(){return this.pausedAtMs!==null?this.pausedAtMs-this.context.startMs:In()-this.context.startMs}};Rn=new WeakMap;function Sr(t,i){const a=new Ta(({deltaMs:u})=>{if(u>=i)return t(),!1});return a.start(),()=>a.stop()}function Nr(...t){t.length===1?t[0]:t[1],t.length===2&&t[0]}function hu(t,i){if(t==null)throw new Error(i())}function Sa(t,i,a){let u=[];for(const l of i)t[l]==null&&u.push(l);if(u.length>0)throw new Error(`[zag-js${` > ${a}`}] missing required props: ${u.join(", ")}`)}var Pa=Object.defineProperty,Aa=(t,i,a)=>i in t?Pa(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,Pr=(t,i,a)=>Aa(t,typeof i!="symbol"?i+"":i,a),uo=()=>{},Nn=t=>typeof t=="object"&&t!==null,Ia=2147483647,xt=t=>t?"":void 0,Ca=1,Da=9,Ra=11,we=t=>Nn(t)&&t.nodeType===Ca&&typeof t.nodeName=="string",Mr=t=>Nn(t)&&t.nodeType===Da,Ba=t=>Nn(t)&&t===t.window,co=t=>we(t)?t.localName||"":"#document";function Ka(t){return["html","body","#document"].includes(co(t))}var Na=t=>Nn(t)&&t.nodeType!==void 0,Pt=t=>Na(t)&&t.nodeType===Ra&&"host"in t,Ma=t=>we(t)&&t.localName==="input",Fa=t=>we(t)?t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0:!1;function ja(t){if(!t)return!1;const i=t.getRootNode();return lo(i)===t}var qa=/(textarea|select)/;function La(t){if(t==null||!we(t))return!1;try{return Ma(t)&&t.selectionStart!=null||qa.test(t.localName)||t.isContentEditable||t.getAttribute("contenteditable")==="true"||t.getAttribute("contenteditable")===""}catch{return!1}}function Gt(t,i){if(!t||!i||!we(t)||!we(i))return!1;const a=i.getRootNode?.();if(t===i||t.contains(i))return!0;if(a&&Pt(a)){let u=i;for(;u;){if(t===u)return!0;u=u.parentNode||u.host}}return!1}function lt(t){return Mr(t)?t:Ba(t)?t.document:t?.ownerDocument??document}function za(t){return lt(t).documentElement}function Xt(t){return Pt(t)?Xt(t.host):Mr(t)?t.defaultView??window:we(t)?t.ownerDocument?.defaultView??window:window}function lo(t){let i=t.activeElement;for(;i?.shadowRoot;){const a=i.shadowRoot.activeElement;if(!a||a===i)break;i=a}return i}function Wa(t){if(co(t)==="html")return t;const i=t.assignedSlot||t.parentNode||Pt(t)&&t.host||za(t);return Pt(i)?i.host:i}function Fr(t){let i;try{if(i=t.getRootNode({composed:!0}),Mr(i)||Pt(i))return i}catch{}return t.ownerDocument??document}var Ar=new WeakMap;function pu(t){return Ar.has(t)||Ar.set(t,Xt(t).getComputedStyle(t)),Ar.get(t)}var jr=new Set(["menu","listbox","dialog","grid","tree","region"]),$a=t=>jr.has(t),fo=t=>t.getAttribute("aria-controls")?.split(" ")||[];function Ua(t,i){const a=new Set,u=Fr(t),l=p=>{const S=p.querySelectorAll("[aria-controls]");for(const v of S){if(v.getAttribute("aria-expanded")!=="true")continue;const B=fo(v);for(const A of B){if(!A||a.has(A))continue;a.add(A);const E=u.getElementById(A);if(E){const T=E.getAttribute("role"),I=E.getAttribute("aria-modal")==="true";if(T&&$a(T)&&!I&&(E===i||E.contains(i)||l(E)))return!0}}}return!1};return l(t)}function Va(t,i){const a=Fr(t),u=new Set,l=p=>{const S=p.querySelectorAll("[aria-controls]");for(const v of S){if(v.getAttribute("aria-expanded")!=="true")continue;const B=fo(v);for(const A of B){if(!A||u.has(A))continue;u.add(A);const E=a.getElementById(A);if(E){const T=E.getAttribute("role"),I=E.getAttribute("aria-modal")==="true";T&&jr.has(T)&&!I&&(i(E),l(E))}}}};l(t)}function mu(t){const i=new Set;return Va(t,a=>{t.contains(a)||i.add(a)}),Array.from(i)}function Ha(t){const i=t.getAttribute("role");return!!(i&&jr.has(i))}function Ga(t){return t.hasAttribute("aria-controls")&&t.getAttribute("aria-expanded")==="true"}function yu(t){return Ga(t)?!0:!!t.querySelector?.('[aria-controls][aria-expanded="true"]')}function gu(t){if(!t.id)return!1;const i=Fr(t),a=CSS.escape(t.id),u=`[aria-controls~="${a}"][aria-expanded="true"], [aria-controls="${a}"][aria-expanded="true"]`;return!!(i.querySelector(u)&&Ha(t))}var ho=()=>typeof document<"u";function Ya(){return navigator.userAgentData?.platform??navigator.platform}var qr=t=>ho()&&t.test(Ya()),Ki=()=>ho()&&!!navigator.maxTouchPoints,Xa=()=>qr(/^iPhone/i),Qa=()=>qr(/^iPad/i)||po()&&navigator.maxTouchPoints>1,vu=()=>Xa()||Qa(),po=()=>qr(/^Mac/i);function Ja(t){return t.composedPath?.()??t.nativeEvent?.composedPath?.()}function Kn(t){return Ja(t)?.[0]??t.target}var Za=t=>t.button===2||po()&&t.ctrlKey&&t.button===0,Tt=(t,i,a,u)=>{const l=typeof t=="function"?t():t;return l?.addEventListener(i,a,u),()=>{l?.removeEventListener(i,a,u)}},mo=t=>we(t)&&t.tagName==="IFRAME",es=/^(audio|video|details)$/;function yo(t){const i=t.getAttribute("tabindex");return i?parseInt(i,10):NaN}var ts=t=>!Number.isNaN(yo(t)),ns=t=>yo(t)<0;function rs(t,i){if(!i)return null;if(i===!0)return t.shadowRoot||null;const a=i(t);return(a===!0?t.shadowRoot:a)||null}function go(t,i,a){const u=[...t],l=[...t],p=new Set,S=new Map;t.forEach((B,A)=>S.set(B,A));let v=0;for(;v<l.length;){const B=l[v++];if(!B||p.has(B))continue;p.add(B);const A=rs(B,i);if(A){const E=Array.from(A.querySelectorAll(Mn)).filter(a),T=S.get(B);if(T!==void 0){const I=T+1;u.splice(I,0,...E),E.forEach((D,G)=>{S.set(D,I+G)});for(let D=I+E.length;D<u.length;D++)S.set(u[D],D)}else{const I=u.length;u.push(...E),E.forEach((D,G)=>{S.set(D,I+G)})}l.push(...E)}}return u}var Mn="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",is=(t,i={})=>{if(!t)return[];const{includeContainer:a=!1,getShadowRoot:u}=i,l=Array.from(t.querySelectorAll(Mn));(a==!0||a=="if-empty"&&l.length===0)&&we(t)&&St(t)&&l.unshift(t);const S=[];for(const v of l)if(St(v)){if(mo(v)&&v.contentDocument){const B=v.contentDocument.body;S.push(...is(B,{getShadowRoot:u}));continue}S.push(v)}return u?go(S,u,St):S};function St(t){return!we(t)||t.closest("[inert]")?!1:t.matches(Mn)&&Fa(t)}function os(t,i={}){if(!t)return[];const{includeContainer:a,getShadowRoot:u}=i,l=Array.from(t.querySelectorAll(Mn));a&&Ir(t)&&l.unshift(t);const p=[];for(const S of l)if(Ir(S)){if(mo(S)&&S.contentDocument){const v=S.contentDocument.body;p.push(...os(v,{getShadowRoot:u}));continue}p.push(S)}if(u){const S=go(p,u,Ir);return!S.length&&a?l:S}return!p.length&&a?l:p}function Ir(t){return we(t)&&t.tabIndex>0?!0:St(t)&&!ns(t)}function bu(t){return t.tabIndex<0&&(es.test(t.localName)||La(t))&&!ts(t)?0:t.tabIndex}var vo=class bo{constructor(){Pr(this,"id",null),Pr(this,"fn_cleanup"),Pr(this,"cleanup",()=>{this.cancel()})}static create(){return new bo}request(i){this.cancel(),this.id=globalThis.requestAnimationFrame(()=>{this.id=null,this.fn_cleanup=i?.()})}cancel(){this.id!==null&&(globalThis.cancelAnimationFrame(this.id),this.id=null),this.fn_cleanup?.(),this.fn_cleanup=void 0}isActive(){return this.id!==null}};function ct(t){const i=vo.create();return i.request(t),i.cleanup}function Kr(t){const i=Wa(t);return Ka(i)?lt(i).body:we(i)&&us(i)?i:Kr(i)}var as=/auto|scroll|overlay|hidden|clip/,ss=new Set(["inline","contents"]);function us(t){const i=Xt(t),{overflow:a,overflowX:u,overflowY:l,display:p}=i.getComputedStyle(t);return as.test(a+l+u)&&!ss.has(p)}function cs(t,i){if(!t)return uo;const a=Object.keys(i).reduce((u,l)=>(u[l]=t.style.getPropertyValue(l),u),{});return Object.assign(t.style,i),()=>{Object.assign(t.style,a),t.style.length===0&&t.removeAttribute("style")}}function _u(t,i,a){if(!t)return uo;const u=t.style.getPropertyValue(i);return t.style.setProperty(i,a),()=>{t.style.setProperty(i,u),t.style.length===0&&t.removeAttribute("style")}}function ls(t,i,a){const{signal:u}=i;return[new Promise((S,v)=>{const B=setTimeout(()=>{v(new Error(`Timeout of ${a}ms exceeded`))},a);u.addEventListener("abort",()=>{clearTimeout(B),v(new Error("Promise aborted"))}),t.then(A=>{u.aborted||(clearTimeout(B),S(A))}).catch(A=>{u.aborted||(clearTimeout(B),v(A))})}),()=>i.abort()]}function fs(t,i){const{timeout:a,rootNode:u}=i,l=Xt(u),p=lt(u),S=new l.AbortController;return ls(new Promise(v=>{const B=t();if(B){v(B);return}const A=new l.MutationObserver(()=>{const E=t();E&&E.isConnected&&(A.disconnect(),v(E))});A.observe(p.body,{childList:!0,subtree:!0})}),S,a)}var ds=(...t)=>t.map(i=>i?.trim?.()).filter(Boolean).join(" "),hs=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,Ni=t=>{const i={};let a;for(;a=hs.exec(t);)i[a[1]]=a[2];return i},ps=(t,i)=>{if(Tr(t)){if(Tr(i))return`${t};${i}`;t=Ni(t)}else Tr(i)&&(i=Ni(i));return Object.assign({},t??{},i??{})};function wu(...t){let i={};for(let a of t){if(!a)continue;for(let l in i){if(l.startsWith("on")&&typeof i[l]=="function"&&typeof a[l]=="function"){i[l]=Br(a[l],i[l]);continue}if(l==="className"||l==="class"){i[l]=ds(i[l],a[l]);continue}if(l==="style"){i[l]=ps(i[l],a[l]);continue}i[l]=a[l]!==void 0?a[l]:i[l]}for(let l in a)i[l]===void 0&&(i[l]=a[l]);const u=Object.getOwnPropertySymbols(a);for(let l of u)i[l]=a[l]}return i}function _o(){return{and:(...t)=>function(a){return t.every(u=>a.guard(u))},or:(...t)=>function(a){return t.some(u=>a.guard(u))},not:t=>function(a){return!a.guard(t)}}}function xu(t){return t}function ms(){return{guards:_o(),createMachine:t=>t,choose:t=>function({choose:a}){return a(t)?.actions}}}var ys=(t=>(t.NotStarted="Not Started",t.Started="Started",t.Stopped="Stopped",t))(ys||{}),Eu="__init__";function ku(t){const i=()=>t.getRootNode?.()??document,a=()=>lt(i());return{...t,getRootNode:i,getDoc:a,getWin:()=>a().defaultView??window,getActiveElement:()=>lo(i()),isActiveElement:ja,getById:S=>i().getElementById(S)}}var Ht=(t,i=[])=>({parts:(...a)=>{if(gs(i))return Ht(t,a);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...a)=>Ht(t,[...i,...a]),omit:(...a)=>Ht(t,i.filter(u=>!a.includes(u))),rename:a=>Ht(a,i),keys:()=>i,build:()=>[...new Set(i)].reduce((a,u)=>Object.assign(a,{[u]:{selector:[`&[data-scope="${Et(t)}"][data-part="${Et(u)}"]`,`& [data-scope="${Et(t)}"][data-part="${Et(u)}"]`].join(", "),attrs:{"data-scope":Et(t),"data-part":Et(u)}}}),{})}),Et=t=>t.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),gs=t=>t.length===0;function vs(t){const i={each(a){for(let u=0;u<t.frames?.length;u+=1){const l=t.frames[u];l&&a(l)}},addEventListener(a,u,l){return i.each(p=>{try{p.document.addEventListener(a,u,l)}catch{}}),()=>{try{i.removeEventListener(a,u,l)}catch{}}},removeEventListener(a,u,l){i.each(p=>{try{p.document.removeEventListener(a,u,l)}catch{}})}};return i}function bs(t){const i=t.frameElement!=null?t.parent:null;return{addEventListener:(a,u,l)=>{try{i?.addEventListener(a,u,l)}catch{}return()=>{try{i?.removeEventListener(a,u,l)}catch{}}},removeEventListener:(a,u,l)=>{try{i?.removeEventListener(a,u,l)}catch{}}}}var Mi="pointerdown.outside",Fi="focus.outside";function _s(t){for(const i of t)if(we(i)&&St(i))return!0;return!1}var wo=t=>"clientY"in t;function ws(t,i){if(!wo(i)||!t)return!1;const a=t.getBoundingClientRect();return a.width===0||a.height===0?!1:a.top<=i.clientY&&i.clientY<=a.top+a.height&&a.left<=i.clientX&&i.clientX<=a.left+a.width}function xs(t,i){return t.y<=i.y&&i.y<=t.y+t.height&&t.x<=i.x&&i.x<=t.x+t.width}function ji(t,i){if(!i||!wo(t))return!1;const a=i.scrollHeight>i.clientHeight,u=a&&t.clientX>i.offsetLeft+i.clientWidth,l=i.scrollWidth>i.clientWidth,p=l&&t.clientY>i.offsetTop+i.clientHeight,S={x:i.offsetLeft,y:i.offsetTop,width:i.clientWidth+(a?16:0),height:i.clientHeight+(l?16:0)},v={x:t.clientX,y:t.clientY};return xs(S,v)?u||p:!1}function Es(t,i){const{exclude:a,onFocusOutside:u,onPointerDownOutside:l,onInteractOutside:p,defer:S,followControlledElements:v=!0}=i;if(!t)return;const B=lt(t),A=Xt(t),E=vs(A),T=bs(A);function I(ne,Z){if(!we(Z)||!Z.isConnected||Gt(t,Z)||ws(t,ne)||v&&Ua(t,Z))return!1;const he=B.querySelector(`[aria-controls="${t.id}"]`);if(he){const se=Kr(he);if(ji(ne,se))return!1}const pe=Kr(t);return ji(ne,pe)?!1:!a?.(Z)}const D=new Set,G=Pt(t?.getRootNode());function $(ne){function Z(he){const pe=S&&!Ki()?ct:Ye=>Ye(),se=he??ne,ft=se?.composedPath?.()??[se?.target];pe(()=>{const Ye=G?ft[0]:Kn(ne);if(!(!t||!I(ne,Ye))){if(l||p){const It=Br(l,p);t.addEventListener(Mi,It,{once:!0})}qi(t,Mi,{bubbles:!1,cancelable:!0,detail:{originalEvent:se,contextmenu:Za(se),focusable:_s(ft),target:Ye}})}})}ne.pointerType==="touch"?(D.forEach(he=>he()),D.add(Tt(B,"click",Z,{once:!0})),D.add(T.addEventListener("click",Z,{once:!0})),D.add(E.addEventListener("click",Z,{once:!0}))):Z()}const J=new Set,ie=setTimeout(()=>{J.add(Tt(B,"pointerdown",$,!0)),J.add(T.addEventListener("pointerdown",$,!0)),J.add(E.addEventListener("pointerdown",$,!0))},0);function de(ne){(S?ct:he=>he())(()=>{const he=ne?.composedPath?.()??[ne?.target],pe=G?he[0]:Kn(ne);if(!(!t||!I(ne,pe))){if(u||p){const se=Br(u,p);t.addEventListener(Fi,se,{once:!0})}qi(t,Fi,{bubbles:!1,cancelable:!0,detail:{originalEvent:ne,contextmenu:!1,focusable:St(pe),target:pe}})}})}return Ki()||(J.add(Tt(B,"focusin",de,!0)),J.add(T.addEventListener("focusin",de,!0)),J.add(E.addEventListener("focusin",de,!0))),()=>{clearTimeout(ie),D.forEach(ne=>ne()),J.forEach(ne=>ne())}}function ks(t,i){const{defer:a}=i,u=a?ct:p=>p(),l=[];return l.push(u(()=>{const p=typeof t=="function"?t():t;l.push(Es(p,i))})),()=>{l.forEach(p=>p?.())}}function qi(t,i,a){const u=t.ownerDocument.defaultView||window,l=new u.CustomEvent(i,a);return t.dispatchEvent(l)}function Os(t,i){const a=u=>{u.key==="Escape"&&(u.isComposing||i?.(u))};return Tt(lt(t),"keydown",a,{capture:!0})}var Li="layer:request-dismiss",ke={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(t=>t.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(t){const i=this.indexOf(t),a=this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1;return i<a},isTopMost(t){return this.layers[this.count()-1]?.node===t},getNestedLayers(t){return Array.from(this.layers).slice(this.indexOf(t)+1)},getLayersByType(t){return this.layers.filter(i=>i.type===t)},getNestedLayersByType(t,i){const a=this.indexOf(t);return a===-1?[]:this.layers.slice(a+1).filter(u=>u.type===i)},getParentLayerOfType(t,i){const a=this.indexOf(t);if(!(a<=0))return this.layers.slice(0,a).reverse().find(u=>u.type===i)},countNestedLayersOfType(t,i){return this.getNestedLayersByType(t,i).length},isInNestedLayer(t,i){return this.getNestedLayers(t).some(a=>Gt(a.node,i))},isInBranch(t){return Array.from(this.branches).some(i=>Gt(i,t))},add(t){this.layers.push(t),this.syncLayers()},addBranch(t){this.branches.push(t)},remove(t){const i=this.indexOf(t);i<0||(i<this.count()-1&&this.getNestedLayers(t).forEach(u=>ke.dismiss(u.node,t)),this.layers.splice(i,1),this.syncLayers())},removeBranch(t){const i=this.branches.indexOf(t);i>=0&&this.branches.splice(i,1)},syncLayers(){this.layers.forEach((t,i)=>{t.node.style.setProperty("--layer-index",`${i}`),t.node.removeAttribute("data-nested"),t.node.removeAttribute("data-has-nested"),this.getParentLayerOfType(t.node,t.type)&&t.node.setAttribute("data-nested",t.type);const u=this.countNestedLayersOfType(t.node,t.type);u>0&&t.node.setAttribute("data-has-nested",t.type),t.node.style.setProperty("--nested-layer-count",`${u}`)})},indexOf(t){return this.layers.findIndex(i=>i.node===t)},dismiss(t,i){const a=this.indexOf(t);if(a===-1)return;const u=this.layers[a];Ss(t,Li,l=>{u.requestDismiss?.(l),l.defaultPrevented||u?.dismiss()}),Ts(t,Li,{originalLayer:t,targetLayer:i,originalIndex:a,targetIndex:i?this.indexOf(i):-1}),this.syncLayers()},clear(){this.remove(this.layers[0].node)}};function Ts(t,i,a){const u=t.ownerDocument.defaultView||window,l=new u.CustomEvent(i,{cancelable:!0,bubbles:!0,detail:a});return t.dispatchEvent(l)}function Ss(t,i,a){t.addEventListener(i,a,{once:!0})}var zi;function Wi(){ke.layers.forEach(({node:t})=>{t.style.pointerEvents=ke.isBelowPointerBlockingLayer(t)?"none":"auto"})}function Ps(t){t.style.pointerEvents=""}function As(t,i){const a=lt(t),u=[];return ke.hasPointerBlockingLayer()&&!a.body.hasAttribute("data-inert")&&(zi=document.body.style.pointerEvents,queueMicrotask(()=>{a.body.style.pointerEvents="none",a.body.setAttribute("data-inert","")})),i?.forEach(l=>{const[p,S]=fs(()=>{const v=l();return we(v)?v:null},{timeout:1e3});p.then(v=>u.push(cs(v,{pointerEvents:"auto"}))),u.push(S)}),()=>{ke.hasPointerBlockingLayer()||(queueMicrotask(()=>{a.body.style.pointerEvents=zi,a.body.removeAttribute("data-inert"),a.body.style.length===0&&a.body.removeAttribute("style")}),u.forEach(l=>l()))}}function Is(t,i){const{warnOnMissingNode:a=!0}=i;if(a&&!t){Nr("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!t)return;const{onDismiss:u,onRequestDismiss:l,pointerBlocking:p,exclude:S,debug:v,type:B="dialog"}=i,A={dismiss:u,node:t,type:B,pointerBlocking:p,requestDismiss:l};ke.add(A),Wi();function E($){const J=Kn($.detail.originalEvent);ke.isBelowPointerBlockingLayer(t)||ke.isInBranch(J)||(i.onPointerDownOutside?.($),i.onInteractOutside?.($),!$.defaultPrevented&&(v&&console.log("onPointerDownOutside:",$.detail.originalEvent),u?.()))}function T($){const J=Kn($.detail.originalEvent);ke.isInBranch(J)||(i.onFocusOutside?.($),i.onInteractOutside?.($),!$.defaultPrevented&&(v&&console.log("onFocusOutside:",$.detail.originalEvent),u?.()))}function I($){ke.isTopMost(t)&&(i.onEscapeKeyDown?.($),!$.defaultPrevented&&u&&($.preventDefault(),u()))}function D($){if(!t)return!1;const J=typeof S=="function"?S():S,ie=Array.isArray(J)?J:[J],de=i.persistentElements?.map(ne=>ne()).filter(we);return de&&ie.push(...de),ie.some(ne=>Gt(ne,$))||ke.isInNestedLayer(t,$)}const G=[p?As(t,i.persistentElements):void 0,Os(t,I),ks(t,{exclude:D,onFocusOutside:T,onPointerDownOutside:E,defer:i.defer})];return()=>{ke.remove(t),Wi(),Ps(t),G.forEach($=>$?.())}}function Ou(t,i){const{defer:a}=i,u=a?ct:p=>p(),l=[];return l.push(u(()=>{const p=io(t)?t():t;l.push(Is(p,i))})),()=>{l.forEach(p=>p?.())}}function Cs(t,i={}){const{defer:a}=i,u=a?ct:p=>p(),l=[];return l.push(u(()=>{const p=io(t)?t():t;if(!p){Nr("[@zag-js/dismissable] branch node is `null` or `undefined`");return}ke.addBranch(p),l.push(()=>{ke.removeBranch(p)})})),()=>{l.forEach(p=>p?.())}}var Ds=Ht("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),Ot=Ds.build(),Rs=t=>`toast-group:${t}`,$i=(t,i)=>t.getById(`toast-group:${i}`),xo=t=>`toast:${t.id}`,Ui=t=>t.getById(xo(t)),Vi=t=>`toast:${t.id}:title`,Hi=t=>`toast:${t.id}:description`,Bs=t=>`toast${t.id}:close`,Gi={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function Cr(t,i){return t??Gi[i]??Gi.DEFAULT}var Ks=t=>typeof t=="string"?{left:t,right:t,bottom:t,top:t}:t;function Ns(t,i){const{prop:a,computed:u,context:l}=t,{offsets:p,gap:S}=a("store").attrs,v=l.get("heights"),B=Ks(p),A=a("dir")==="rtl",E=i.replace("-start",A?"-right":"-left").replace("-end",A?"-left":"-right"),T=E.includes("right"),I=E.includes("left"),D={position:"fixed",pointerEvents:u("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${S}px`,"--first-height":`${v[0]?.height||0}px`,"--viewport-offset-left":B.left,"--viewport-offset-right":B.right,"--viewport-offset-top":B.top,"--viewport-offset-bottom":B.bottom,zIndex:Ia};let G="center";if(T&&(G="flex-end"),I&&(G="flex-start"),D.alignItems=G,E.includes("top")){const $=B.top;D.top=`max(env(safe-area-inset-top, 0px), ${$})`}if(E.includes("bottom")){const $=B.bottom;D.bottom=`max(env(safe-area-inset-bottom, 0px), ${$})`}if(!E.includes("left")){const $=B.right;D.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${$})`}if(!E.includes("right")){const $=B.left;D.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${$})`}return D}function Ms(t,i){const{prop:a,context:u,computed:l}=t,p=a("parent"),S=p.computed("placement"),{gap:v}=p.prop("store").attrs,[B]=S.split("-"),A=u.get("mounted"),E=u.get("remainingTime"),T=l("height"),I=l("frontmost"),D=!I,G=!a("stacked"),$=a("stacked"),ie=a("type")==="loading"?Number.MAX_SAFE_INTEGER:E,de=l("heightIndex")*v+l("heightBefore"),ne={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${a("removeDelay")}ms`,"--duration":`${ie}ms`,"--initial-height":`${T}px`,"--offset":`${de}px`,"--index":a("index"),"--z-index":l("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},Z=he=>Object.assign(ne,he);return B==="top"?Z({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):B==="bottom"&&Z({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),A&&(Z({"--y":"0","--opacity":"1"}),$&&Z({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),i||Z({"--opacity":"0",pointerEvents:"none"}),D&&G&&(Z({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),i||Z({"--y":"calc(var(--sign) * 40%)"})),D&&$&&!i&&Z({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),I&&!i&&Z({"--y":"calc(var(--lift) * -100%)"}),ne}function Fs(t,i){const{computed:a}=t,u={position:"absolute",inset:"0",scale:"1 2",pointerEvents:i?"none":"auto"},l=p=>Object.assign(u,p);return a("frontmost")&&!i&&l({height:"calc(var(--initial-height) + 80%)"}),u}function js(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function qs(t,i){const{context:a,prop:u,send:l,refs:p,computed:S}=t;return{getCount(){return a.get("toasts").length},getToasts(){return a.get("toasts")},getGroupProps(v={}){const{label:B="Notifications"}=v,{hotkey:A}=u("store").attrs,E=A.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=S("placement"),[I,D="center"]=T.split("-");return i.element({...Ot.group.attrs,dir:u("dir"),tabIndex:-1,"aria-label":`${T} ${B} ${E}`,id:Rs(T),"data-placement":T,"data-side":I,"data-align":D,"aria-live":"polite",role:"region",style:Ns(t,T),onMouseEnter(){p.get("ignoreMouseTimer").isActive()||l({type:"REGION.POINTER_ENTER",placement:T})},onMouseMove(){p.get("ignoreMouseTimer").isActive()||l({type:"REGION.POINTER_ENTER",placement:T})},onMouseLeave(){p.get("ignoreMouseTimer").isActive()||l({type:"REGION.POINTER_LEAVE",placement:T})},onFocus(G){l({type:"REGION.FOCUS",target:G.relatedTarget})},onBlur(G){p.get("isFocusWithin")&&!Gt(G.currentTarget,G.relatedTarget)&&queueMicrotask(()=>l({type:"REGION.BLUR"}))}})},subscribe(v){return u("store").subscribe(()=>v(a.get("toasts")))}}}var{guards:Ls,createMachine:zs}=ms(),{and:Ws}=Ls,$s=zs({props({props:t}){return{dir:"ltr",id:ao(),...t,store:t.store}},initialState({prop:t}){return t("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,isPointerWithin:!1,ignoreMouseTimer:vo.create(),dismissableCleanup:void 0}},context({bindable:t}){return{toasts:t(()=>({defaultValue:[],sync:!0,hash:i=>i.map(a=>a.id).join(",")})),heights:t(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:t})=>t.get("toasts").length,overlap:({prop:t})=>t("store").attrs.overlap,placement:({prop:t})=>t("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:t,context:i,action:a}){t([()=>i.hash("toasts")],()=>{queueMicrotask(()=>{a(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl","clearMouseEventTimer"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:Ws("isOverlapping","isPointerOut"),target:"overlap",actions:["collapseToasts","resumeToasts","restoreFocusIfPointerOut"]},{guard:"isPointerOut",target:"stack",actions:["resumeToasts","restoreFocusIfPointerOut"]},{actions:["clearFocusWithin"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight","ignoreMouseEventsTemporarily"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["clearPointerWithin","resumeToasts","collapseToasts"]},{actions:["clearPointerWithin","resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["setPointerWithin","pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["setPointerWithin","pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:t})=>t("overlap"),isPointerOut:({refs:t})=>!t.get("isPointerWithin")},effects:{subscribeToStore({context:t,prop:i}){return i("store").subscribe(a=>{if(a.dismiss){t.set("toasts",u=>u.filter(l=>l.id!==a.id));return}t.set("toasts",u=>{const l=u.findIndex(p=>p.id===a.id);return l!==-1?[...u.slice(0,l),{...u[l],...a},...u.slice(l+1)]:[a,...u]})})},trackHotKeyPress({prop:t,send:i}){return Tt(document,"keydown",u=>{const{hotkey:l}=t("store").attrs;l.every(S=>u[S]||u.code===S)&&i({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:t,send:i,scope:a}){const{pauseOnPageIdle:u}=t("store").attrs;if(!u)return;const l=a.getDoc();return Tt(l,"visibilitychange",()=>{const p=l.visibilityState==="hidden";i({type:p?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:t,context:i,computed:a,scope:u}){const l=i.get("toasts"),p=a("placement"),S=l.length>0;if(!S){t.get("dismissableCleanup")?.();return}if(S&&t.get("dismissableCleanup"))return;const B=Cs(()=>$i(u,p),{defer:!0});t.set("dismissableCleanup",B)},clearDismissableBranch({refs:t}){t.get("dismissableCleanup")?.()},focusRegionEl({scope:t,computed:i}){queueMicrotask(()=>{$i(t,i("placement"))?.focus()})},pauseToasts({prop:t}){t("store").pause()},resumeToasts({prop:t}){t("store").resume()},expandToasts({prop:t}){t("store").expand()},collapseToasts({prop:t}){t("store").collapse()},removeToast({prop:t,event:i}){t("store").remove(i.id)},removeHeight({event:t,context:i}){t?.id!=null&&queueMicrotask(()=>{i.set("heights",a=>a.filter(u=>u.id!==t.id))})},collapsedIfEmpty({send:t,computed:i}){!i("overlap")||i("count")>1||t({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:t,event:i}){t.get("isFocusWithin")||!i.target||(t.set("isFocusWithin",!0),t.set("lastFocusedEl",i.target))},restoreFocusIfPointerOut({refs:t}){!t.get("lastFocusedEl")||t.get("isPointerWithin")||(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null),t.set("isFocusWithin",!1))},setPointerWithin({refs:t}){t.set("isPointerWithin",!0)},clearPointerWithin({refs:t}){t.set("isPointerWithin",!1),t.get("lastFocusedEl")&&!t.get("isFocusWithin")&&(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null))},clearFocusWithin({refs:t}){t.set("isFocusWithin",!1)},clearLastFocusedEl({refs:t}){t.get("lastFocusedEl")&&(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null),t.set("isFocusWithin",!1))},ignoreMouseEventsTemporarily({refs:t}){t.get("ignoreMouseTimer").request()},clearMouseEventTimer({refs:t}){t.get("ignoreMouseTimer").cancel()}}}});function Tu(t,i){const{state:a,send:u,prop:l,scope:p,context:S,computed:v}=t,B=a.hasTag("visible"),A=a.hasTag("paused"),E=S.get("mounted"),T=v("frontmost"),I=l("parent").computed("placement"),D=l("type"),G=l("stacked"),$=l("title"),J=l("description"),ie=l("action"),[de,ne="center"]=I.split("-");return{type:D,title:$,description:J,placement:I,visible:B,paused:A,closable:!!l("closable"),pause(){u({type:"PAUSE"})},resume(){u({type:"RESUME"})},dismiss(){u({type:"DISMISS",src:"programmatic"})},getRootProps(){return i.element({...Ot.root.attrs,dir:l("dir"),id:xo(p),"data-state":B?"open":"closed","data-type":D,"data-placement":I,"data-align":ne,"data-side":de,"data-mounted":xt(E),"data-paused":xt(A),"data-first":xt(T),"data-sibling":xt(!T),"data-stack":xt(G),"data-overlap":xt(!G),role:"status","aria-atomic":"true","aria-describedby":J?Hi(p):void 0,"aria-labelledby":$?Vi(p):void 0,tabIndex:0,style:Ms(t,B),onKeyDown(Z){Z.defaultPrevented||Z.key=="Escape"&&(u({type:"DISMISS",src:"keyboard"}),Z.preventDefault())}})},getGhostBeforeProps(){return i.element({"data-ghost":"before",style:Fs(t,B)})},getGhostAfterProps(){return i.element({"data-ghost":"after",style:js()})},getTitleProps(){return i.element({...Ot.title.attrs,id:Vi(p)})},getDescriptionProps(){return i.element({...Ot.description.attrs,id:Hi(p)})},getActionTriggerProps(){return i.button({...Ot.actionTrigger.attrs,type:"button",onClick(Z){Z.defaultPrevented||(ie?.onClick?.(),u({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return i.button({id:Bs(p),...Ot.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(Z){Z.defaultPrevented||u({type:"DISMISS",src:"user"})}})}}}var{not:Us}=_o(),Su={props({props:t}){return Sa(t,["id","type","parent","removeDelay"],"toast"),{closable:!0,...t,duration:Cr(t.duration,t.type)}},initialState({prop:t}){return t("type")==="loading"||t("duration")===1/0?"visible:persist":"visible"},context({prop:t,bindable:i}){return{remainingTime:i(()=>({defaultValue:Cr(t("duration"),t("type"))})),createdAt:i(()=>({defaultValue:Date.now()})),mounted:i(()=>({defaultValue:!1})),initialHeight:i(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:t})=>{const i=t("parent").context.get("toasts"),a=i.findIndex(u=>u.id===t("id"));return i.length-a},height:({prop:t})=>t("parent").context.get("heights").find(u=>u.id===t("id"))?.height??0,heightIndex:({prop:t})=>t("parent").context.get("heights").findIndex(a=>a.id===t("id")),frontmost:({prop:t})=>t("index")===0,heightBefore:({prop:t})=>{const i=t("parent").context.get("heights"),a=i.findIndex(u=>u.id===t("id"));return i.reduce((u,l,p)=>p>=a?u:u+l.height,0)},shouldPersist:({prop:t})=>t("type")==="loading"||t("duration")===1/0},watch({track:t,prop:i,send:a}){t([()=>i("message")],()=>{const u=i("message");u&&a({type:u,src:"programmatic"})}),t([()=>i("type"),()=>i("duration")],()=>{a({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:Us("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:t,send:i}){return Sr(()=>{i({type:"REMOVE",src:"timer"})},t("removeDelay"))},waitForDuration({send:t,context:i,computed:a}){if(!a("shouldPersist"))return Sr(()=>{t({type:"DISMISS",src:"timer"})},i.get("remainingTime"))},waitForNextTick({send:t}){return Sr(()=>{t({type:"SHOW",src:"timer"})},0)},trackHeight({scope:t,prop:i}){let a;return ct(()=>{const u=Ui(t);if(!u)return;const l=()=>{const v=u.style.height;u.style.height="auto";const B=u.getBoundingClientRect().height;u.style.height=v;const A={id:i("id"),height:B};Yi(i("parent"),A)},p=t.getWin(),S=new p.MutationObserver(l);S.observe(u,{childList:!0,subtree:!0,characterData:!0}),a=()=>S.disconnect()}),()=>a?.()}},guards:{isLoadingType:({prop:t})=>t("type")==="loading",shouldPersist:({computed:t})=>t("shouldPersist")},actions:{setMounted({context:t}){ct(()=>{t.set("mounted",!0)})},measureHeight({scope:t,prop:i,context:a}){queueMicrotask(()=>{const u=Ui(t);if(!u)return;const l=u.style.height;u.style.height="auto";const p=u.getBoundingClientRect().height;u.style.height=l,a.set("initialHeight",p);const S={id:i("id"),height:p};Yi(i("parent"),S)})},setCloseTimer({refs:t}){t.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:t,refs:i,prop:a}){i.set("closeTimerStartTime",Date.now()),t.set("remainingTime",Cr(a("duration"),a("type")))},syncRemainingTime({context:t,refs:i}){t.set("remainingTime",a=>{const u=i.get("closeTimerStartTime"),l=Date.now()-u;return i.set("lastCloseStartTimerStartTime",Date.now()),a-l})},notifyParentToRemove({prop:t}){t("parent").send({type:"TOAST.REMOVE",id:t("id")})},invokeOnDismiss({prop:t,event:i}){t("onStatusChange")?.({status:"dismissing",src:i.src})},invokeOnUnmount({prop:t}){t("onStatusChange")?.({status:"unmounted"})},invokeOnVisible({prop:t}){t("onStatusChange")?.({status:"visible"})}}}};function Yi(t,i){const{id:a,height:u}=i;t.context.set("heights",l=>l.find(S=>S.id===a)?l.map(S=>S.id===a?{...S,height:u}:S):[{id:a,height:u},...l])}var Vs=(t,i)=>({...i,...so(t)});function Hs(t={}){const i=Vs(t,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let a=[],u=[],l=new Set,p=[];const S=W=>(a.push(W),()=>{const V=a.indexOf(W);a.splice(V,1)}),v=W=>(a.forEach(V=>V(W)),W),B=W=>{if(u.length>=i.max){p.push(W);return}v(W),u.unshift(W)},A=()=>{for(;p.length>0&&u.length<i.max;){const W=p.shift();W&&(v(W),u.unshift(W))}},E=W=>{const V=W.id??`toast:${ao()}`,Ce=u.find(xe=>xe.id===V);return l.has(V)&&l.delete(V),Ce?u=u.map(xe=>xe.id===V?v({...xe,...W,id:V}):xe):B({id:V,duration:i.duration,removeDelay:i.removeDelay,type:"info",...W,stacked:!i.overlap,gap:i.gap}),V},T=W=>(l.add(W),W?(a.forEach(V=>V({id:W,dismiss:!0})),u=u.filter(V=>V.id!==W),A()):(u.forEach(V=>{a.forEach(Ce=>Ce({id:V.id,dismiss:!0}))}),u=[],p=[]),W);return{attrs:i,subscribe:S,create:E,update:(W,V)=>E({id:W,...V}),remove:T,dismiss:W=>{W!=null?u=u.map(V=>V.id===W?v({...V,message:"DISMISS"}):V):u=u.map(V=>v({...V,message:"DISMISS"}))},error:W=>E({...W,type:"error"}),success:W=>E({...W,type:"success"}),info:W=>E({...W,type:"info"}),warning:W=>E({...W,type:"warning"}),loading:W=>E({...W,type:"loading"}),getVisibleToasts:()=>u.filter(W=>!l.has(W.id)),getCount:()=>u.length,promise:(W,V,Ce={})=>{if(!V||!V.loading){Nr("[zag-js > toast] toaster.promise() requires at least a 'loading' option to be specified");return}const xe=E({...Ce,...V.loading,promise:W,type:"loading"});let qe=!0,Xe;const Ke=An(W).then(async fe=>{if(Xe=["resolve",fe],Gs(fe)&&!fe.ok){qe=!1;const Se=An(V.error,`HTTP Error! status: ${fe.status}`);E({...Ce,...Se,id:xe,type:"error"})}else if(V.success!==void 0){qe=!1;const Se=An(V.success,fe);E({...Ce,...Se,id:xe,type:"success"})}}).catch(async fe=>{if(Xe=["reject",fe],V.error!==void 0){qe=!1;const Se=An(V.error,fe);E({...Ce,...Se,id:xe,type:"error"})}}).finally(()=>{qe&&T(xe),V.finally?.()});return{id:xe,unwrap:()=>new Promise((fe,Se)=>Ke.then(()=>Xe[0]==="reject"?Se(Xe[1]):fe(Xe[1])).catch(Se))}},pause:W=>{W!=null?u=u.map(V=>V.id===W?v({...V,message:"PAUSE"}):V):u=u.map(V=>v({...V,message:"PAUSE"}))},resume:W=>{W!=null?u=u.map(V=>V.id===W?v({...V,message:"RESUME"}):V):u=u.map(V=>v({...V,message:"RESUME"}))},isVisible:W=>!l.has(W)&&!!u.find(V=>V.id===W),isDismissed:W=>l.has(W),expand:()=>{u=u.map(W=>v({...W,stacked:!0}))},collapse:()=>{u=u.map(W=>v({...W,stacked:!1}))}}}var Gs=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Pu={connect:qs,machine:$s};const Ys=Hs({placement:"top-end"}),Cn=At({toaster:Ys}),Xi=At({lang_index:""}),Qi=At({app_uid:""}),Ae=At({input_doing:1});let Dr=Yt(0),Ji=Yt(0),kt=Yt("size_init");const Zi={test(t){console.log("test=",t)},console_log(...t){},console_error(...t){},title(t="-"){document.title=t},url_path(t){return""+t},redirect_pathname(t){const i=t.url_pathname,a=t.url_params;(function(){ki(i+a,{replaceState:!0,invalidateAll:!0}).then(l=>{})})()},get_agent(){return navigator.userAgent},get_href(){return Tn.url.href},get_host(){return Tn.url.host},get_route(){let t=this;{let i=Tn.route;return typeof i=="string"?i:typeof i=="object"?i.id:t.json_to_string(i)}},get_params(){return Tn.url.search},search_param(t){let i=this;return i.search_href_param(i.get_params(),t)},search_href_param(t,i){let a=this,u="";t?u=t:u=a.get_href();let l=new RegExp("([?]|&|#)"+i+"=([^&|^#]*)(&|$|#)"),p=u.match(l);if(p)try{return decodeURIComponent(p[2])}catch{return p[2]}else return""},js_rand(t,i){return Math.floor(Math.random()*(i-t+1)+t)},set_local_data(t,i){return t=this.url_encode(t),localStorage.setItem(t,i),localStorage.getItem(t)},get_local_data(t){t=this.url_encode(t);{let a=localStorage.getItem(t);return a||""}},del_local_data(t){return t=this.url_encode(t),localStorage.removeItem(t)},clear_local_data(){return localStorage.clear()},get_time_s(){return Math.floor(new Date().getTime()/1e3)},get_time_ms(){return new Date().getTime()},get_time_date(t){return this.get_time_s_date(t,"")},get_time_s_date(t,i){let a;i?a=new Date(i*1):a=new Date;let u=a.getSeconds();u<10&&(u="0"+u);let l=a.getMinutes();l<10&&(l="0"+l);let p=a.getHours();p<10&&(p="0"+p);let S=a.getDate();S<10&&(S="0"+S);let v=a.getMonth()+1;v<10&&(v="0"+v);let B=a.getFullYear(),A=["week1","week2","week3","week4","week5","week6","week7"][a.getDay()];return t=t.replaceAll("Y",B),t=t.replaceAll("m",v),t=t.replaceAll("d",S),t=t.replaceAll("H",p),t=t.replaceAll("i",l),t=t.replaceAll("s",u),t=t.replaceAll("W",A),t},get_time_ms_format(t,i){return i?i=i*1:i=this.get_time_ms(),this.get_time_s_date(t,i)},format_date(t,i){i=i+"";let a=i.slice(0,4),u=i.slice(4,6),l=i.slice(6,8),p=i.slice(8,10),S=i.slice(10,12),v=i.slice(12,14),B=t;return B=B.replaceAll("Y",a),B=B.replaceAll("m",u),B=B.replaceAll("d",l),B=B.replaceAll("H",p),B=B.replaceAll("i",S),B=B.replaceAll("s",v),B},is_weixin(){return window.navigator.userAgent.toLowerCase().match(/micromessenger/i)==="micromessenger"},is_qq(){let t=window.navigator.userAgent.toLowerCase();return t.indexOf("qq")!==-1&&t.indexOf("qqbrowser")===-1},is_dingding(){return window.navigator.userAgent.toLowerCase().indexOf("dingtalk")!==-1},is_work_weixin(){return window.navigator.userAgent.toLowerCase().indexOf("wxwork")!==-1},is_feishu(){return window.navigator.userAgent.toLowerCase().indexOf("lark")!==-1},make_uid(t=""){let i=this,a=i.js_rand(1e10,999999999999),u=window.navigator.userAgent.toLowerCase(),l=(navigator.language?navigator.language:"-").toLowerCase(),p=i.get_time_date("YmdHisW"),S="";return S=window.location.href.toLowerCase(),i.md5(t+"@"+u+"@"+p+"@"+S+"@"+window.innerWidth+"@"+a+"@"+l)},get_theme_model(){return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"},md5(t){return t?aa(t):""},base64_encode(t){try{return btoa(t)}catch{return""}},base64_decode(t){try{return atob(t)}catch{return""}},url_encode(t){return encodeURIComponent(t)},url_decode(t){return decodeURIComponent(t)},text_encode(t){return this.string_to_unicode(t)},text_decode(t){return this.unicode_to_string(t)},string_to_unicode(t){let i="";for(let a=0;a<t.length;a++)i?i+=","+t.charCodeAt(a):i=t.charCodeAt(a);return i},unicode_to_string(t){const i=t.split(",");let a="";for(let u=0;u<i.length;u++)a+=String.fromCharCode(i[u]);return a},hex16_to_string(t){return decodeURIComponent(t)},string_to_hex16(t){let i="";for(let a=0;a<t.length;a++)i?i+="&#x"+t.charCodeAt(a).toString(16)+";":i="&#x"+t.charCodeAt(a).toString(16)+";";return i},string_to_json(t){let i,a=t;return typeof a=="string"?i=JSON.parse(a):i=a,i},json_to_string(t){let i,a=t;return typeof a=="object"?i=JSON.stringify(a):i=a,i},string_star(t,i,a){let u=t.length-i-a,l="";for(let p=0;p<u;p++)l+="*";return t.substring(0,i)+l+t.substring(t.length-a)},get_file_ext(t){let i=t.split("/");return i.length?i[i.length-1]:""},is_video(t){try{let i=t.substring(t.lastIndexOf("."));return i=i.toLowerCase(),[".mp4",".mkv",".avi",".flv",".mov",".m4v",".rmvb",".rm",".webm",".asf",".wmv"].includes(i)}catch{return!1}},is_audio(t){try{let i=t.substring(t.lastIndexOf("."));return i=i.toLowerCase(),[".mp3",".wav",".m3u",".m4a",".flac"].includes(i)}catch{return!1}},is_img(t){try{let i=t.substring(t.lastIndexOf("."));return i=i.toLowerCase(),[".gif",".png",".jpg",".jpeg",".webp",".ico",".jpg2",".tiff",".tif",".bmp",".svg"].includes(i)}catch{return!1}},is_mobile_screen(){let t=window.screen.width,i=window.screen.height,a=1280,u=280,l=40;return t<u||i<u||Math.abs(t-i)<l?-1:t>a||i>a?0:1},is_mobile_pwa(){return window.navigator?.standalone||document.referrer.includes("android-app://")},is_pc_pwa(){return["fullscreen","standalone","minimal-ui"].some(i=>window.matchMedia("(display-mode: "+i+")").matches)},html_to_plain_text(t){function i(u,l={img:" [ğŸï¸] ",audio:" [ğŸµ] ",video:" [ğŸ¬] "}){return u.replace(/<img[^>]*alt="([^"]*)"[^>]*>/gi,(p,S)=>" [ğŸï¸ "+S+"] "||l.img).replace(/<audio[^>]*title="([^"]*)"[^>]*>.*?<\/audio>/gi,(p,S)=>" [ğŸµ "+S+"] "||l.audio).replace(/<video[^>]*title="([^"]*)"[^>]*>.*?<\/video>/gi,(p,S)=>" [ğŸ¬ "+S+"] "||l.video)}t=i(t);let a=document.createElement("div");return a.innerHTML=t,a.innerText||a.textContent},js_call_py_or_go(t,i){let a=this;return new Promise(u=>{{a.notice("config Error"),u({state:0,msg:"configå‚æ•°é”™è¯¯",content:{key:t,body_dict:{}}});return}})},js_watch_window_display(){document.addEventListener("visibilitychange",()=>{})},is_wails(){return this.get_agent().toLowerCase().indexOf("wails")!==-1},is_gthon(){return this.get_agent().toLowerCase().indexOf("gthon")!==-1},get_lang_index(t){function i(u){return u.indexOf("zh")>=0?"zh":u.indexOf("en")>=0?"en":u.indexOf("jp")>=0?"jp":u.indexOf("fr")>=0?"fr":u.indexOf("de")>=0?"de":u.indexOf("ru")>=0?"ru":u.indexOf("es")>=0?"es":u.indexOf("ko")>=0?"ko":u.indexOf("vi")>=0?"vi":"en"}function a(u=""){return u.length>=2?u.toLowerCase():navigator.language.toLowerCase()}return i(a(t))},get_lang(){let t=this,i="",a=Xi.lang_index;return a.length>=2&&(i=a),t.get_lang_index(i)},get_translate(t="",i=""){let a=this;if(!(i.length>=2)){let l=Xi.lang_index;l.length>=2&&(i=l)}let u=a.get_lang_index(i);return Fe[t]&&Fe[t][u]?Fe[t][u]:Fe._null[u]?Fe._null[u]:Fe._null.en},open_url(t="",i="_self"){t.length>=1&&(i==="_self"?ki(t,{replaceState:!0,invalidateAll:!0,noScroll:!0}).then(a=>{}):window.open(t,i))},open_url_no_cache(t="./?reload=no-cache",i="_self"){t.length>=1&&(i==="_self"?(history.replaceState(null,"",t),window.location.replace(t)):(history.replaceState(null,"",t),window.open(t,i)))},open_url_with_default_browser(t=""){let i=this,a="_blank";i.is_gthon()||i.is_wails()?i.js_call_py_or_go("open_url_with_default_browser",{lang:i.get_lang(),url:t,target:a}).then(u=>{}):i.open_url(t,a)},fresh_page(t=500){t<=0&&(t=0),setTimeout(function(){window.location.reload()},t)},get_app_uid(){let t=this,i=Ii.app.app_class+"app_uid";return new Promise(a=>{Zi.js_call_py_or_go("get_data",{data_key:i}).then(u=>{let l=u.content.data;l?(Qi.app_uid=l,a(l)):(l=t.md5(t.make_uid(Ii.app.app_class)),Zi.js_call_py_or_go("set_data",{data_key:i,data_value:l,data_timeout_s:10*365*24*3600}).then(p=>{Qi.app_uid=p.content.data,a(p.content.data)}))})})},ping(t){return new Promise((i,a)=>{sa(t,{},5).then(u=>{let l=0,p="";u.state!==404?(l=1,p="æ¥å£è®¿é—®æˆåŠŸï¼Œä½†statusçŠ¶æ€å¯èƒ½æ˜¯200ã€30Xã€‚"):(l=404,p="è¶…æ—¶æˆ–è€…æ¥å£æ— æ•ˆã€‚"),i({state:l,msg:p,result:u})}).catch(u=>{i({state:404,msg:"",result:{}})})})},set_db_data(t,i){let a=this;t=a.url_encode(t).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-");let u=[{only_key:t,any_type_value:i,update_time:a.get_time_s_date("YmdHis")*1,remark:"func-set"}];return new Promise(l=>{Or.update_db_data(u).then(p=>{p.length>=1?a.get_db_data(t).then(S=>{l(S)}):l("")})})},get_db_data(t){return t=this.url_encode(t).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-"),new Promise(a=>{Or.get_db_data(t).then(u=>{a(u?u.any_type_value:"")})})},del_db_data(t){return t=this.url_encode(t).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-"),new Promise(a=>{Or.del_db_data(t).then(u=>{a(u)})})},converted_path(t=""){return t=t.replaceAll("\\","/"),t=t.replaceAll("//","/"),t.endsWith("/")&&(t=t.slice(0,-1)),t},filepath_to_filename(t=""){t=this.converted_path(t);let a=t.split("/");return t.length>0&&t?a[a.length-1]:""},replaceLast(t,i,a){const u=t.lastIndexOf(i);return u===-1?t:t.substring(0,u)+a+t.substring(u+i.length)},loading_show(t="",i="long"){let a=this;clearTimeout(ge(Dr)),i==="long"||(i<=400&&(i=400),je(Dr,setTimeout(function(){a.loading_hide()},i),!0)),Pn.loading_show="show",Pn.loading_msg=t},loading_hide(){clearTimeout(ge(Dr)),Pn.loading_show="hide",Pn.loading_msg=""},alert_msg(t,i){clearTimeout(ge(Ji)),i==="long"||(i<=400&&(i=400),je(Ji,setTimeout(function(){Sn.alert_show="hide",Sn.alert_msg=""},i),!0)),Sn.alert_show="show",Sn.alert_msg=t},notice(t="",i="",a=5e3,u="info"){switch(a<=400&&(a=400),u){case"info":Cn.toaster.info({title:t,description:i,duration:a});break;case"warn":Cn.toaster.warning({title:t,description:i,duration:a});break;case"error":Cn.toaster.error({title:t,description:i,duration:a});break;default:Cn.toaster.info({title:t,description:i,duration:a});break}},change_window_size(){let t=this;ge(kt)==="size_init"?je(kt,"size_full_height"):ge(kt)==="size_full_height"?je(kt,"size_full_window"):je(kt,"size_init"),t.js_call_py_or_go("change_window_size",{size_tag:ge(kt),width:0,height:0}).then(i=>{console.log("change_window_size=",i)})},open_url_404(t="./",i="",a=""){let u=this,l=t+"_404?error_msg="+encodeURIComponent(i)+"&error_url="+encodeURIComponent(a);u.open_url(l,"_self")},url_timeout_encode(t,i){let a=this,u=t+"#@"+a.get_time_s()+"#@"+i;return encodeURIComponent(a.string_to_unicode(u+"#@"+a.md5(u)+"#@"+a.js_rand(1e7,9999999999)))},url_timeout_decode(t,i){let a=this,u=a.get_time_s();try{let p=decodeURIComponent(a.unicode_to_string(i)).split("#@"),S=u-p[1]*1,v=p[0],B=p[2]*1,A=p[3],E=p[0]+"#@"+p[1]+"#@"+p[2];return t===v&&A===a.md5(E)?S<=B&&S>=0:!1}catch{return!1}},is_url(t=""){try{return new URL(t),!0}catch{return!1}},watch_input_enter(t){t.addEventListener("compositionstart",function(i){Ae.input_doing=-1},!1),t.addEventListener("input",function(i){Ae.input_doing===-1?Ae.input_doing=0:Ae.input_doing===1||Ae.input_doing===2?Ae.input_doing=1:Ae.input_doing=0},!1),t.addEventListener("compositionend",function(i){Ae.input_doing===0?Ae.input_doing=2:Ae.input_doing===1?Ae.input_doing=1:Ae.input_doing=0},!1)}},eo={browser_fn_state(){return!(navigator.webdriver||!window.localStorage||!window.indexedDB)},screen_state(){{let t=window.innerWidth,i=window.innerHeight,a=window.screen.width,u=window.screen.height;return!(t<220||i<220||a<220||u<220)}}},Vt={is_weixin(){return window.navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1},is_qq(){{let t=window.navigator.userAgent.toLowerCase();return t.indexOf("qq")!==-1&&t.indexOf("qqbrowser")===-1}},is_dingding(){return window.navigator.userAgent.toLowerCase().indexOf("dingtalk")!==-1},is_work_weixin(){return window.navigator.userAgent.toLowerCase().indexOf("wxwork")!==-1},is_feishu(){return window.navigator.userAgent.toLowerCase().indexOf("lark")!==-1}},Au=function(){return eo.browser_fn_state()&&eo.screen_state()},Iu=function(){return!(Vt.is_weixin()||Vt.is_work_weixin()||Vt.is_qq()||Vt.is_feishu()||Vt.is_dingding())};export{Ua as A,os as B,is as C,bu as D,Tt as E,lo as F,Ir as G,Kn as H,Eu as I,Mr as J,yu as K,gu as L,ys as M,St as N,vu as O,pu as P,_u as Q,cs as R,xu as S,Ht as T,Ou as U,du as V,Ae as W,io as a,Iu as b,Ii as c,ro as d,hu as e,Zi as f,Tr as g,ku as h,fu as i,so as j,Pu as k,Su as l,wu as m,Tu as n,Pn as o,Cn as p,Sn as q,Au as r,Xi as s,lu as t,we as u,Va as v,Nr as w,ct as x,lt as y,mu as z};
