import{m as xe,ai as Xe,aj as sn,ac as Kt}from"./Co-10cO8.js";import{g as io}from"./DGJ61_qJ.js";import{p as qn}from"./uVD79qw_.js";var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rr={exports:{}},Br={exports:{}},oo;function fs(){return oo||(oo=1,(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(o,a){return o<<a|o>>>32-a},rotr:function(o,a){return o<<32-a|o>>>a},endian:function(o){if(o.constructor==Number)return r.rotl(o,8)&16711935|r.rotl(o,24)&4278255360;for(var a=0;a<o.length;a++)o[a]=r.endian(o[a]);return o},randomBytes:function(o){for(var a=[];o>0;o--)a.push(Math.floor(Math.random()*256));return a},bytesToWords:function(o){for(var a=[],u=0,l=0;u<o.length;u++,l+=8)a[l>>>5]|=o[u]<<24-l%32;return a},wordsToBytes:function(o){for(var a=[],u=0;u<o.length*32;u+=8)a.push(o[u>>>5]>>>24-u%32&255);return a},bytesToHex:function(o){for(var a=[],u=0;u<o.length;u++)a.push((o[u]>>>4).toString(16)),a.push((o[u]&15).toString(16));return a.join("")},hexToBytes:function(o){for(var a=[],u=0;u<o.length;u+=2)a.push(parseInt(o.substr(u,2),16));return a},bytesToBase64:function(o){for(var a=[],u=0;u<o.length;u+=3)for(var l=o[u]<<16|o[u+1]<<8|o[u+2],p=0;p<4;p++)u*8+p*6<=o.length*8?a.push(e.charAt(l>>>6*(3-p)&63)):a.push("=");return a.join("")},base64ToBytes:function(o){o=o.replace(/[^A-Z0-9+\/]/ig,"");for(var a=[],u=0,l=0;u<o.length;l=++u%4)l!=0&&a.push((e.indexOf(o.charAt(u-1))&Math.pow(2,-2*l+8)-1)<<l*2|e.indexOf(o.charAt(u))>>>6-l*2);return a}};Br.exports=r})()),Br.exports}var Dr,ao;function so(){if(ao)return Dr;ao=1;var e={utf8:{stringToBytes:function(r){return e.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(e.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var o=[],a=0;a<r.length;a++)o.push(r.charCodeAt(a)&255);return o},bytesToString:function(r){for(var o=[],a=0;a<r.length;a++)o.push(String.fromCharCode(r[a]));return o.join("")}}};return Dr=e,Dr}var Nr,uo;function ds(){if(uo)return Nr;uo=1,Nr=function(o){return o!=null&&(e(o)||r(o)||!!o._isBuffer)};function e(o){return!!o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function r(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&e(o.slice(0,0))}return Nr}var co;function hs(){return co||(co=1,(function(){var e=fs(),r=so().utf8,o=ds(),a=so().bin,u=function(l,p){l.constructor==String?p&&p.encoding==="binary"?l=a.stringToBytes(l):l=r.stringToBytes(l):o(l)?l=Array.prototype.slice.call(l,0):!Array.isArray(l)&&l.constructor!==Uint8Array&&(l=l.toString());for(var d=e.bytesToWords(l),y=l.length*8,b=1732584193,m=-271733879,_=-1732584194,T=271733878,P=0;P<d.length;P++)d[P]=(d[P]<<8|d[P]>>>24)&16711935|(d[P]<<24|d[P]>>>8)&4278255360;d[y>>>5]|=128<<y%32,d[(y+64>>>9<<4)+14]=y;for(var L=u._ff,F=u._gg,ee=u._hh,J=u._ii,P=0;P<d.length;P+=16){var re=b,W=m,z=_,fe=T;b=L(b,m,_,T,d[P+0],7,-680876936),T=L(T,b,m,_,d[P+1],12,-389564586),_=L(_,T,b,m,d[P+2],17,606105819),m=L(m,_,T,b,d[P+3],22,-1044525330),b=L(b,m,_,T,d[P+4],7,-176418897),T=L(T,b,m,_,d[P+5],12,1200080426),_=L(_,T,b,m,d[P+6],17,-1473231341),m=L(m,_,T,b,d[P+7],22,-45705983),b=L(b,m,_,T,d[P+8],7,1770035416),T=L(T,b,m,_,d[P+9],12,-1958414417),_=L(_,T,b,m,d[P+10],17,-42063),m=L(m,_,T,b,d[P+11],22,-1990404162),b=L(b,m,_,T,d[P+12],7,1804603682),T=L(T,b,m,_,d[P+13],12,-40341101),_=L(_,T,b,m,d[P+14],17,-1502002290),m=L(m,_,T,b,d[P+15],22,1236535329),b=F(b,m,_,T,d[P+1],5,-165796510),T=F(T,b,m,_,d[P+6],9,-1069501632),_=F(_,T,b,m,d[P+11],14,643717713),m=F(m,_,T,b,d[P+0],20,-373897302),b=F(b,m,_,T,d[P+5],5,-701558691),T=F(T,b,m,_,d[P+10],9,38016083),_=F(_,T,b,m,d[P+15],14,-660478335),m=F(m,_,T,b,d[P+4],20,-405537848),b=F(b,m,_,T,d[P+9],5,568446438),T=F(T,b,m,_,d[P+14],9,-1019803690),_=F(_,T,b,m,d[P+3],14,-187363961),m=F(m,_,T,b,d[P+8],20,1163531501),b=F(b,m,_,T,d[P+13],5,-1444681467),T=F(T,b,m,_,d[P+2],9,-51403784),_=F(_,T,b,m,d[P+7],14,1735328473),m=F(m,_,T,b,d[P+12],20,-1926607734),b=ee(b,m,_,T,d[P+5],4,-378558),T=ee(T,b,m,_,d[P+8],11,-2022574463),_=ee(_,T,b,m,d[P+11],16,1839030562),m=ee(m,_,T,b,d[P+14],23,-35309556),b=ee(b,m,_,T,d[P+1],4,-1530992060),T=ee(T,b,m,_,d[P+4],11,1272893353),_=ee(_,T,b,m,d[P+7],16,-155497632),m=ee(m,_,T,b,d[P+10],23,-1094730640),b=ee(b,m,_,T,d[P+13],4,681279174),T=ee(T,b,m,_,d[P+0],11,-358537222),_=ee(_,T,b,m,d[P+3],16,-722521979),m=ee(m,_,T,b,d[P+6],23,76029189),b=ee(b,m,_,T,d[P+9],4,-640364487),T=ee(T,b,m,_,d[P+12],11,-421815835),_=ee(_,T,b,m,d[P+15],16,530742520),m=ee(m,_,T,b,d[P+2],23,-995338651),b=J(b,m,_,T,d[P+0],6,-198630844),T=J(T,b,m,_,d[P+7],10,1126891415),_=J(_,T,b,m,d[P+14],15,-1416354905),m=J(m,_,T,b,d[P+5],21,-57434055),b=J(b,m,_,T,d[P+12],6,1700485571),T=J(T,b,m,_,d[P+3],10,-1894986606),_=J(_,T,b,m,d[P+10],15,-1051523),m=J(m,_,T,b,d[P+1],21,-2054922799),b=J(b,m,_,T,d[P+8],6,1873313359),T=J(T,b,m,_,d[P+15],10,-30611744),_=J(_,T,b,m,d[P+6],15,-1560198380),m=J(m,_,T,b,d[P+13],21,1309151649),b=J(b,m,_,T,d[P+4],6,-145523070),T=J(T,b,m,_,d[P+11],10,-1120210379),_=J(_,T,b,m,d[P+2],15,718787259),m=J(m,_,T,b,d[P+9],21,-343485551),b=b+re>>>0,m=m+W>>>0,_=_+z>>>0,T=T+fe>>>0}return e.endian([b,m,_,T])};u._ff=function(l,p,d,y,b,m,_){var T=l+(p&d|~p&y)+(b>>>0)+_;return(T<<m|T>>>32-m)+p},u._gg=function(l,p,d,y,b,m,_){var T=l+(p&y|d&~y)+(b>>>0)+_;return(T<<m|T>>>32-m)+p},u._hh=function(l,p,d,y,b,m,_){var T=l+(p^d^y)+(b>>>0)+_;return(T<<m|T>>>32-m)+p},u._ii=function(l,p,d,y,b,m,_){var T=l+(d^(p|~y))+(b>>>0)+_;return(T<<m|T>>>32-m)+p},u._blocksize=16,u._digestsize=16,Rr.exports=function(l,p){if(l==null)throw new Error("Illegal argument "+l);var d=e.wordsToBytes(u(l,p));return p&&p.asBytes?d:p&&p.asString?a.bytesToString(d):e.bytesToHex(d)}})()),Rr.exports}var ps=hs();const gs=mi(ps),lo={app:{app_class:"View_dtthk_",app_version:"1.7.1"},sys:{base_route:"",home_route:"/purehome",home_route_white_word:"@purehome"}},Je={test:{zh:"æµ‹è¯•",en:"Test",jp:"",fr:"",de:"",ru:"",es:"",ko:"",vi:""},_null:{zh:" -ç©º- ",en:" -Empty- ",jp:" -Null- ",fr:" -Null- ",de:" -Null- ",ru:" -Null- ",es:" -Null- ",ko:" -Null- ",vi:" -Null- "},show_window:{zh:"æ˜¾ç¤ºè§†çª—",en:"Show Window"},exit_app:{zh:"é€€å‡ºç¨‹åº",en:"Exit App"},about_app:{zh:"å…³äºç¨‹åº",en:"About App"},_404:{zh:"404 é¡µé¢ä¸å­˜åœ¨",en:"404 Not Found"},Example:{zh:"ä¾‹å­",en:"Example"},Home:{zh:"ä¸»é¡µ",en:"Home"},Settings:{zh:"è®¾ç½®",en:"Settings"},About:{zh:"å…³äº",en:"About"},User:{zh:"æˆ‘çš„",en:"Me"},user_tips:{zh:"è®¾ç½®",en:"Settings"},user_need_login:{zh:"è¯·ç™»å½•...",en:"Please login..."},ThemeModel:{zh:"ä¸»é¢˜",en:"Themes"},PureHome:{zh:"ä¸»é¡µ",en:"PureHome"},Search:{zh:"ğŸ” æœç´¢",en:"ğŸ” Search"},Link:{zh:"é“¾ç­¾",en:"Link"},Info:{zh:"æŸ¥çœ‹ä¿¡æ¯",en:"Info"},JYP:{zh:"æ•™è‚²ç‰‡",en:"JYP"},url_timeout:{zh:"é“¾æ¥è¿‡æœŸ",en:"URL Timeout"},url_timeout_null:{zh:"é“¾æ¥å‚æ•°é”™è¯¯",en:"URL Error"},reload_window:{zh:"é‡è½½é¡µé¢",en:"Reload Page"},reload_window_btn:{zh:"é‡ è½½",en:"Reload"},btn_cancel:{zh:"å–æ¶ˆ",en:"Cancel"},btn_save:{zh:"ä¿å­˜",en:"Save"},btn_ok:{zh:"æ˜¯çš„",en:"OK"},btn_update:{zh:"æ›´æ–°",en:"Update"},a_click_tip_see_detail:{zh:"ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…",en:"See Details"},a_click_tip_back_home:{zh:"è¿”å›ä¸»é¡µ",en:"Back Home"},confirm_change_language_tip:{zh:"åˆ‡æ¢è¯­è¨€ ï¼Ÿï¼ˆé¡µé¢å°†ä¼šåˆ·æ–°.ï¼‰",en:"Change language ï¼Ÿï¼ˆThe page will refresh.ï¼‰",jp:"è¨€èªã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã‹ï¼Ÿï¼ˆãƒšãƒ¼ã‚¸ãŒæ›´æ–°ã•ã‚Œã¾ã™.ï¼‰",fr:"Changer de langue? (la page sera actualisÃ©e.)",de:"Sprache wechseln?  (Die Seite wird aktualisiert.)",ru:"ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑĞ·Ñ‹Ğº? (Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ°.)",es:"Â¿Cambiar de idioma? (la pÃ¡gina se actualizarÃ¡).",ko:"ì–¸ì–´ ì „í™˜?í˜ì´ì§€ê°€ ìƒˆë¡œ ê³ ì³ì§‘ë‹ˆë‹¤.",vi:"Äá»•i ngÃ´n ngá»¯? (Trang sáº½ Ä‘Æ°á»£c lÃ m má»›i.)"},sys_default:{zh:"è·Ÿéšç³»ç»Ÿ",en:"Same system"},app_info:{zh:"è½¯ä»¶ä¿¡æ¯",en:"App Information"},theme_model_light:{zh:"äº®",en:"Light"},theme_model_dark:{zh:"æš—",en:"Dark"},playing:{zh:"æ­£åœ¨æ’­æ”¾",en:"Playing"},play_paused:{zh:"å·²æš‚åœã€‚",en:"Paused."},play_add_new_fir:{zh:"æ·»åŠ æœ¬åœ°æ–‡ä»¶å¤¹",en:"Add a new local folder"},play_update_play_list:{zh:"æ›´æ–°æ’­æ”¾åˆ—è¡¨",en:"Update play list"},updated:{zh:"å·²æ›´æ–°",en:"Updated"},saved:{zh:"å·²ä¿å­˜",en:"Saved"},added:{zh:"å·²æ·»åŠ ",en:"Added"},input_null:{zh:"è¾“å…¥ä¸ºç©º",en:"Input is empty"},null_content:{zh:"ç©ºå†…å®¹",en:"Content is empty"},error:{zh:"å‡ºé”™",en:"Error"},find_btn:{zh:"æŸ¥ æ‰¾",en:"Find"},search_btn:{zh:"æœ ç´¢",en:"Search"},input_placeholder_find:{zh:"è¾“å…¥æŸ¥æ‰¾...",en:"Find..."},input_placeholder_search:{zh:"è¾“å…¥å…³é”®è¯...",en:"Search keywords..."},remove:{zh:"ç§»é™¤",en:"Remove"},clear:{zh:"æ¸…é™¤",en:"Clear"},remove_help_1:{zh:"ç§»é™¤è¯¥æ–‡ä»¶å¤¹ï¼ˆä¸ä¼šä»æœ¬æœºåˆ é™¤è¯¥æ–‡ä»¶å¤¹ï¼‰",en:"Remove the folder (The folder will not be deleted from the local machine)"},remove_help_2:{zh:"æ¸…é™¤æœç´¢å†å²ï¼Ÿ",en:"Clear search history?"},del:{zh:"åˆ é™¤",en:"Del"},edit:{zh:"ç¼–è¾‘",en:"Edit"},share:{zh:"åˆ†äº«",en:"Share"},qr:{zh:"äºŒç»´ç ",en:"QRCode"},input_placeholder_add_dir:{zh:"è¾“å…¥æ–‡ä»¶å¤¹è·¯å¾„",en:"Enter folder path"},runtime_error_alert:{zh:"ç³»ç»Ÿè¿è¡Œæ¡ä»¶ä¸ç¬¦åˆï¼Œå·²ç»é˜»æ­¢è®¿é—®å†…å®¹ã€‚<br>ä½ å¯ä»¥å°è¯•â€œæ‰‹åŠ¨åˆ·æ–°é¡µé¢â€æˆ–â€œä½¿ç”¨äººç±»æµè§ˆå™¨æ‰“å¼€é¡µé¢â€",en:'The system operating conditions do not meet the requirements, and access to the content has been blocked.<br>You can try "manually refreshing the page" or "opening the page with a human browser."'},runtime_cn_chat_alert:{zh:"è¯·ä¸è¦åœ¨ã€Œå¾®ä¿¡ã€QQã€é’‰é’‰ã€é£ä¹¦ã€ä¼ä¸šå¾®ä¿¡ã€ä¸­æ‰“å¼€æœ¬ç½‘ç«™ã€‚<br/>è¯·ä½¿ç”¨å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€ã€‚",en:'Please do not open this website within " WeChat(weixin), QQ, DingTalk(dingding), Lark(Feishu), or Enterprise WeChat." . <br/>Please open with an external browser.'},search_del_history:{zh:"æ¸…é™¤å†å²",en:"Clear"},search_clear_input:{zh:"é‡æ–°è¾“å…¥",en:"Rewrite"},search_enter_input:{zh:"ğŸ”&nbsp;æœ ç´¢",en:"Search"},link_news:{zh:"æ–°é—»",en:"News"},link_subscribe:{zh:"è®¢é˜…",en:"Subscriptions"},link_tools:{zh:"å·¥å…·",en:"Tools"},link_docs:{zh:"æ–‡æ¡£",en:"Docs"},mp_title:{zh:"æ•™è‚²ç‰‡",en:"Educational Film"},mp_notice:{zh:"æé†’",en:"Notice"},mp_notice_txt:{zh:'<p>â—‰ å†…å®¹ä»…ä¾›æ•™è‚²å­¦ä¹ ã€‚</p><p>â—‰ è°¨é˜²ç½‘ç»œèµŒåšè¯ˆéª—ã€‚</p><p>â—‰ æ¨èâ€œè”é€šã€ç”µä¿¡â€ç­‰ç½‘ç»œã€‚</p><p>â—‰ æ¨èâ€œ<i class="select-text">Safariã€Chromeã€ç«ç‹ã€Edge</i>â€ç­‰æµè§ˆå™¨ã€‚</p>',en:'<p>â—‰ The content is for educational purposes only.</p><p>â—‰ Beware of online gambling fraud.</p><p>â—‰ Recommend networks such as China Unicom and China Telecom.</p><p>â—‰ Recommend browsers such as â€œ<i class="select-text">Safariã€Chromeã€Firefoxã€Edge</i>â€.</p>'},mp_so:{zh:"æŸ¥æ‰¾",en:"Find"},mp_chigua:{zh:"åƒç“œç½‘",en:"Rumors"},mp_fabu:{zh:"1/eçš„äººæ„Ÿè°¢ä½ ",en:"1/e People thanks you"},mp_dongman:{zh:"å½±è§†/åŠ¨æ¼«",en:"TV/Cartoon"},mp_lieqi:{zh:"çŒå¥‡",en:"Special"}},ms=function(e,r={},o=10){let a=0,u="",l={};const p=new URLSearchParams(r);return p.toString()&&(e=e+"?"+p.toString()),new Promise(async d=>{const y=new AbortController,b=(o<=0?10:o)*1e3,m=setTimeout(()=>{y.abort()},b);try{const _=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},mode:"no-cors",cache:"no-cache",signal:y.signal});if(clearTimeout(m),!_.ok)console.warn("response.ok=",_,_.ok),a=0,u="GET Status Error.",l={api_url:e,status:_.status,statusText:_.statusText,error:"GETæ¥å£è®¿é—®æˆåŠŸï¼Œä½†æ¥å£è¿”å›çŠ¶æ€é”™è¯¯"},d({state:a,msg:u,content:l});else{const T=_.headers.get("content-type");let P;T&&T.includes("application/json")?P=await _.json():T&&T.includes("text/")?P=await _.text():T&&T.includes("form-data")?P=await _.formData():T&&T.includes("blob")?P=await _.blob():P=await _.text(),d(P)}}catch(_){clearTimeout(m),_.name==="AbortError"?(a=404,u="GET Timeout Error.",l={api_url:e,error:`è¯·æ±‚è¶…æ—¶ï¼ˆ${o}ç§’ï¼‰`,error_type:"AbortError"}):(a=404,u="GET Broken.",l={api_url:e,error:_.message||_,error_type:_.name||"NetworkError"}),d({state:a,msg:u,content:l})}})};var Hn={exports:{}},ys=Hn.exports,fo;function vs(){return fo||(fo=1,(function(e,r){(function(o,a){e.exports=a()})(ys,function(){var o=function(t,n){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(i[c]=s[c])})(t,n)},a=function(){return(a=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++)for(var c in n=arguments[i])Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c]);return t}).apply(this,arguments)};function u(t,n,i){for(var s,c=0,f=n.length;c<f;c++)!s&&c in n||((s=s||Array.prototype.slice.call(n,0,c))[c]=n[c]);return t.concat(s||Array.prototype.slice.call(n))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ls,p=Object.keys,d=Array.isArray;function y(t,n){return typeof n!="object"||p(n).forEach(function(i){t[i]=n[i]}),t}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var b=Object.getPrototypeOf,m={}.hasOwnProperty;function _(t,n){return m.call(t,n)}function T(t,n){typeof n=="function"&&(n=n(b(t))),(typeof Reflect>"u"?p:Reflect.ownKeys)(n).forEach(function(i){L(t,i,n[i])})}var P=Object.defineProperty;function L(t,n,i,s){P(t,n,y(i&&_(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},s))}function F(t){return{from:function(n){return t.prototype=Object.create(n.prototype),L(t.prototype,"constructor",t),{extend:T.bind(null,t.prototype)}}}}var ee=Object.getOwnPropertyDescriptor,J=[].slice;function re(t,n,i){return J.call(t,n,i)}function W(t,n){return n(t)}function z(t){if(!t)throw new Error("Assertion Failed")}function fe(t){l.setImmediate?setImmediate(t):setTimeout(t,0)}function Y(t,n){if(typeof n=="string"&&_(t,n))return t[n];if(!n)return t;if(typeof n!="string"){for(var i=[],s=0,c=n.length;s<c;++s){var f=Y(t,n[s]);i.push(f)}return i}var h=n.indexOf(".");if(h!==-1){var g=t[n.substr(0,h)];return g==null?void 0:Y(g,n.substr(h+1))}}function Q(t,n,i){if(t&&n!==void 0&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof n!="string"&&"length"in n){z(typeof i!="string"&&"length"in i);for(var s=0,c=n.length;s<c;++s)Q(t,n[s],i[s])}else{var f,h,g=n.indexOf(".");g!==-1?(f=n.substr(0,g),(h=n.substr(g+1))===""?i===void 0?d(t)&&!isNaN(parseInt(f))?t.splice(f,1):delete t[f]:t[f]=i:Q(g=!(g=t[f])||!_(t,f)?t[f]={}:g,h,i)):i===void 0?d(t)&&!isNaN(parseInt(n))?t.splice(n,1):delete t[n]:t[n]=i}}function ne(t){var n,i={};for(n in t)_(t,n)&&(i[n]=t[n]);return i}var $=[].concat;function ae(t){return $.apply([],t)}var ct="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ae([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(n){return n+t+"Array"})}))).filter(function(t){return l[t]}),ie=new Set(ct.map(function(t){return l[t]})),N=null;function M(t){return N=new WeakMap,t=(function n(i){if(!i||typeof i!="object")return i;var s=N.get(i);if(s)return s;if(d(i)){s=[],N.set(i,s);for(var c=0,f=i.length;c<f;++c)s.push(n(i[c]))}else if(ie.has(i.constructor))s=i;else{var h,g=b(i);for(h in s=g===Object.prototype?{}:Object.create(g),N.set(i,s),i)_(i,h)&&(s[h]=n(i[h]))}return s})(t),N=null,t}var oe={}.toString;function me(t){return oe.call(t).slice(8,-1)}var Oe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",He=typeof Oe=="symbol"?function(t){var n;return t!=null&&(n=t[Oe])&&n.apply(t)}:function(){return null};function Ne(t,n){return n=t.indexOf(n),0<=n&&t.splice(n,1),0<=n}var We={};function ye(t){var n,i,s,c;if(arguments.length===1){if(d(t))return t.slice();if(this===We&&typeof t=="string")return[t];if(c=He(t)){for(i=[];!(s=c.next()).done;)i.push(s.value);return i}if(t==null)return[t];if(typeof(n=t.length)!="number")return[t];for(i=new Array(n);n--;)i[n]=t[n];return i}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var Te=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ut=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Me=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ut),cn={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ke(t,n){this.name=t,this.message=n}function ln(t,n){return t+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,s,c){return c.indexOf(i)===s}).join(`
`)}function $e(t,n,i,s){this.failures=n,this.failedKeys=s,this.successCount=i,this.message=ln(t,n)}function Ge(t,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=ln(t,this.failures)}F(Ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),F($e).from(Ke),F(Ge).from(Ke);var Re=Me.reduce(function(t,n){return t[n]=n+"Error",t},{}),qe=Ke,Z=Me.reduce(function(t,n){var i=n+"Error";function s(c,f){this.name=i,c?typeof c=="string"?(this.message="".concat(c).concat(f?`
 `+f:""),this.inner=f||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=cn[n]||i,this.inner=null)}return F(s).from(qe),t[n]=s,t},{});Z.Syntax=SyntaxError,Z.Type=TypeError,Z.Range=RangeError;var xt=Ut.reduce(function(t,n){return t[n+"Error"]=Z[n],t},{}),fn=Me.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=Z[n]),t},{});function pe(){}function jt(t){return t}function Da(t,n){return t==null||t===jt?n:function(i){return n(t(i))}}function ut(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function Na(t,n){return t===pe?n:function(){var i=t.apply(this,arguments);i!==void 0&&(arguments[0]=i);var s=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var f=n.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?ut(s,this.onsuccess):s),c&&(this.onerror=this.onerror?ut(c,this.onerror):c),f!==void 0?f:i}}function Ma(t,n){return t===pe?n:function(){t.apply(this,arguments);var i=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?ut(i,this.onsuccess):i),s&&(this.onerror=this.onerror?ut(s,this.onerror):s)}}function Fa(t,n){return t===pe?n:function(i){var s=t.apply(this,arguments);y(i,s);var c=this.onsuccess,f=this.onerror;return this.onsuccess=null,this.onerror=null,i=n.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?ut(c,this.onsuccess):c),f&&(this.onerror=this.onerror?ut(f,this.onerror):f),s===void 0?i===void 0?void 0:i:y(s,i)}}function qa(t,n){return t===pe?n:function(){return n.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Xn(t,n){return t===pe?n:function(){var i=t.apply(this,arguments);if(i&&typeof i.then=="function"){for(var s=this,c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return i.then(function(){return n.apply(s,f)})}return n.apply(this,arguments)}}fn.ModifyError=$e,fn.DexieError=Ke,fn.BulkError=Ge;var je=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xi(t){je=t}var zt={},Ti=100,ct=typeof Promise>"u"?[]:(function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,b(t),t];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,b(n),t]})(),Ut=ct[0],Me=ct[1],ct=ct[2],Me=Me&&Me.then,lt=Ut&&Ut.constructor,$n=!!ct,Vt=function(t,n){Ht.push([t,n]),dn&&(queueMicrotask(Ka),dn=!1)},Zn=!0,dn=!0,ft=[],hn=[],er=jt,Ze={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:pe,pgp:!1,env:{},finalize:pe},te=Ze,Ht=[],dt=0,pn=[];function G(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=te;if(typeof t!="function"){if(t!==zt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&nr(this,this._value))}this._state=null,this._value=null,++n.ref,(function i(s,c){try{c(function(f){if(s._state===null){if(f===s)throw new TypeError("A promise cannot be resolved with itself.");var h=s._lib&&Tt();f&&typeof f.then=="function"?i(s,function(g,w){f instanceof G?f._then(g,w):f.then(g,w)}):(s._state=!0,s._value=f,Si(s)),h&&kt()}},nr.bind(null,s))}catch(f){nr(s,f)}})(this,t)}var tr={get:function(){var t=te,n=vn;function i(s,c){var f=this,h=!t.global&&(t!==te||n!==vn),g=h&&!tt(),w=new G(function(E,C){rr(f,new ki(Pi(s,t,h,g),Pi(c,t,h,g),E,C,t))});return this._consoleTask&&(w._consoleTask=this._consoleTask),w}return i.prototype=zt,i},set:function(t){L(this,"then",t&&t.prototype===zt?tr:{get:function(){return t},set:tr.set})}};function ki(t,n,i,s,c){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=s,this.psd=c}function nr(t,n){var i,s;hn.push(n),t._state===null&&(i=t._lib&&Tt(),n=er(n),t._state=!1,t._value=n,s=t,ft.some(function(c){return c._value===s._value})||ft.push(s),Si(t),i&&kt())}function Si(t){var n=t._listeners;t._listeners=[];for(var i=0,s=n.length;i<s;++i)rr(t,n[i]);var c=t._PSD;--c.ref||c.finalize(),dt===0&&(++dt,Vt(function(){--dt==0&&ir()},[]))}function rr(t,n){if(t._state!==null){var i=t._state?n.onFulfilled:n.onRejected;if(i===null)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++dt,Vt(La,[i,t,n])}else t._listeners.push(n)}function La(t,n,i){try{var s,c=n._value;!n._state&&hn.length&&(hn=[]),s=je&&n._consoleTask?n._consoleTask.run(function(){return t(c)}):t(c),n._state||hn.indexOf(c)!==-1||(function(f){for(var h=ft.length;h;)if(ft[--h]._value===f._value)return ft.splice(h,1)})(n),i.resolve(s)}catch(f){i.reject(f)}finally{--dt==0&&ir(),--i.psd.ref||i.psd.finalize()}}function Ka(){ht(Ze,function(){Tt()&&kt()})}function Tt(){var t=Zn;return dn=Zn=!1,t}function kt(){var t,n,i;do for(;0<Ht.length;)for(t=Ht,Ht=[],i=t.length,n=0;n<i;++n){var s=t[n];s[0].apply(null,s[1])}while(0<Ht.length);dn=Zn=!0}function ir(){var t=ft;ft=[],t.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)});for(var n=pn.slice(0),i=n.length;i;)n[--i]()}function gn(t){return new G(zt,!1,t)}function ve(t,n){var i=te;return function(){var s=Tt(),c=te;try{return nt(i,!0),t.apply(this,arguments)}catch(f){n&&n(f)}finally{nt(c,!1),s&&kt()}}}T(G.prototype,{then:tr,_then:function(t,n){rr(this,new ki(null,null,t,n,te))},catch:function(t){if(arguments.length===1)return this.then(null,t);var n=t,i=arguments[1];return typeof n=="function"?this.then(null,function(s){return(s instanceof n?i:gn)(s)}):this.then(null,function(s){return(s&&s.name===n?i:gn)(s)})},finally:function(t){return this.then(function(n){return G.resolve(t()).then(function(){return n})},function(n){return G.resolve(t()).then(function(){return gn(n)})})},timeout:function(t,n){var i=this;return t<1/0?new G(function(s,c){var f=setTimeout(function(){return c(new Z.Timeout(n))},t);i.then(s,c).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(G.prototype,Symbol.toStringTag,"Dexie.Promise"),Ze.env=Ci(),T(G,{all:function(){var t=ye.apply(null,arguments).map(bn);return new G(function(n,i){t.length===0&&n([]);var s=t.length;t.forEach(function(c,f){return G.resolve(c).then(function(h){t[f]=h,--s||n(t)},i)})})},resolve:function(t){return t instanceof G?t:t&&typeof t.then=="function"?new G(function(n,i){t.then(n,i)}):new G(zt,!0,t)},reject:gn,race:function(){var t=ye.apply(null,arguments).map(bn);return new G(function(n,i){t.map(function(s){return G.resolve(s).then(n,i)})})},PSD:{get:function(){return te},set:function(t){return te=t}},totalEchoes:{get:function(){return vn}},newPSD:et,usePSD:ht,scheduler:{get:function(){return Vt},set:function(t){Vt=t}},rejectionMapper:{get:function(){return er},set:function(t){er=t}},follow:function(t,n){return new G(function(i,s){return et(function(c,f){var h=te;h.unhandleds=[],h.onunhandled=f,h.finalize=ut(function(){var g,w=this;g=function(){w.unhandleds.length===0?c():f(w.unhandleds[0])},pn.push(function E(){g(),pn.splice(pn.indexOf(E),1)}),++dt,Vt(function(){--dt==0&&ir()},[])},h.finalize),t()},n,i,s)})}}),lt&&(lt.allSettled&&L(G,"allSettled",function(){var t=ye.apply(null,arguments).map(bn);return new G(function(n){t.length===0&&n([]);var i=t.length,s=new Array(i);t.forEach(function(c,f){return G.resolve(c).then(function(h){return s[f]={status:"fulfilled",value:h}},function(h){return s[f]={status:"rejected",reason:h}}).then(function(){return--i||n(s)})})})}),lt.any&&typeof AggregateError<"u"&&L(G,"any",function(){var t=ye.apply(null,arguments).map(bn);return new G(function(n,i){t.length===0&&i(new AggregateError([]));var s=t.length,c=new Array(s);t.forEach(function(f,h){return G.resolve(f).then(function(g){return n(g)},function(g){c[h]=g,--s||i(new AggregateError(c))})})})}),lt.withResolvers&&(G.withResolvers=lt.withResolvers));var _e={awaits:0,echoes:0,id:0},ja=0,mn=[],yn=0,vn=0,za=0;function et(t,n,i,s){var c=te,f=Object.create(c);return f.parent=c,f.ref=0,f.global=!1,f.id=++za,Ze.env,f.env=$n?{Promise:G,PromiseProp:{value:G,configurable:!0,writable:!0},all:G.all,race:G.race,allSettled:G.allSettled,any:G.any,resolve:G.resolve,reject:G.reject}:{},n&&y(f,n),++c.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()},s=ht(f,t,i,s),f.ref===0&&f.finalize(),s}function St(){return _e.id||(_e.id=++ja),++_e.awaits,_e.echoes+=Ti,_e.id}function tt(){return!!_e.awaits&&(--_e.awaits==0&&(_e.id=0),_e.echoes=_e.awaits*Ti,!0)}function bn(t){return _e.echoes&&t&&t.constructor===lt?(St(),t.then(function(n){return tt(),n},function(n){return tt(),be(n)})):t}function Ua(){var t=mn[mn.length-1];mn.pop(),nt(t,!1)}function nt(t,n){var i,s=te;(n?!_e.echoes||yn++&&t===te:!yn||--yn&&t===te)||queueMicrotask(n?(function(c){++vn,_e.echoes&&--_e.echoes!=0||(_e.echoes=_e.awaits=_e.id=0),mn.push(te),nt(c,!0)}).bind(null,t):Ua),t!==te&&(te=t,s===Ze&&(Ze.env=Ci()),$n&&(i=Ze.env.Promise,n=t.env,(s.global||t.global)&&(Object.defineProperty(l,"Promise",n.PromiseProp),i.all=n.all,i.race=n.race,i.resolve=n.resolve,i.reject=n.reject,n.allSettled&&(i.allSettled=n.allSettled),n.any&&(i.any=n.any))))}function Ci(){var t=l.Promise;return $n?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function ht(t,n,i,s,c){var f=te;try{return nt(t,!0),n(i,s,c)}finally{nt(f,!1)}}function Pi(t,n,i,s){return typeof t!="function"?t:function(){var c=te;i&&St(),nt(n,!0);try{return t.apply(this,arguments)}finally{nt(c,!1),s&&queueMicrotask(tt)}}}function or(t){Promise===lt&&_e.echoes===0?yn===0?t():enqueueNativeMicroTask(t):setTimeout(t,0)}(""+Me).indexOf("[native code]")===-1&&(St=tt=pe);var be=G.reject,pt="ï¿¿",Ye="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ai="String expected.",Ct=[],wn="__dbnames",ar="readonly",sr="readwrite";function gt(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}var Oi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function _n(t){return typeof t!="string"||/\./.test(t)?function(n){return n}:function(n){return n[t]===void 0&&t in n&&delete(n=M(n))[t],n}}function Ii(){throw Z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function de(t,n){try{var i=Ri(t),s=Ri(n);if(i!==s)return i==="Array"?1:s==="Array"?-1:i==="binary"?1:s==="binary"?-1:i==="string"?1:s==="string"?-1:i==="Date"?1:s!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return n<t?1:t<n?-1:0;case"binary":return(function(c,f){for(var h=c.length,g=f.length,w=h<g?h:g,E=0;E<w;++E)if(c[E]!==f[E])return c[E]<f[E]?-1:1;return h===g?0:h<g?-1:1})(Bi(t),Bi(n));case"Array":return(function(c,f){for(var h=c.length,g=f.length,w=h<g?h:g,E=0;E<w;++E){var C=de(c[E],f[E]);if(C!==0)return C}return h===g?0:h<g?-1:1})(t,n)}}catch{}return NaN}function Ri(t){var n=typeof t;return n!="object"?n:ArrayBuffer.isView(t)?"binary":(t=me(t),t==="ArrayBuffer"?"binary":t)}function Bi(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function En(t,n,i){var s=t.schema.yProps;return s?(n&&0<i.numFailures&&(n=n.filter(function(c,f){return!i.failures[f]})),Promise.all(s.map(function(c){return c=c.updatesTable,n?t.db.table(c).where("k").anyOf(n).delete():t.db.table(c).clear()})).then(function(){return i})):i}var Wt=(Di.prototype.execute=function(t){var n=this["@@propmod"];if(n.add!==void 0){var i=n.add;if(d(i))return u(u([],d(t)?t:[],!0),i).sort();if(typeof i=="number")return(Number(t)||0)+i;if(typeof i=="bigint")try{return BigInt(t)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(n.remove!==void 0){var s=n.remove;if(d(s))return d(t)?t.filter(function(c){return!s.includes(c)}).sort():[];if(typeof s=="number")return Number(t)-s;if(typeof s=="bigint")try{return BigInt(t)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}return i=(i=n.replacePrefix)===null||i===void 0?void 0:i[0],i&&typeof t=="string"&&t.startsWith(i)?n.replacePrefix[1]+t.substring(i.length):t},Di);function Di(t){this["@@propmod"]=t}function Ni(t,n){for(var i=p(n),s=i.length,c=!1,f=0;f<s;++f){var h=i[f],g=n[h],w=Y(t,h);g instanceof Wt?(Q(t,h,g.execute(w)),c=!0):w!==g&&(Q(t,h,g),c=!0)}return c}var Mi=(ge.prototype._trans=function(t,n,i){var s=this._tx||te.trans,c=this.name,f=je&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function h(E,C,v){if(!v.schema[c])throw new Z.NotFound("Table "+c+" not part of transaction");return n(v.idbtrans,v)}var g=Tt();try{var w=s&&s.db._novip===this.db._novip?s===te.trans?s._promise(t,h,i):et(function(){return s._promise(t,h,i)},{trans:s,transless:te.transless||te}):(function E(C,v,O,x){if(C.idbdb&&(C._state.openComplete||te.letThrough||C._vip)){var k=C._createTransaction(v,O,C._dbSchema);try{k.create(),C._state.PR1398_maxLoop=3}catch(S){return S.name===Re.InvalidState&&C.isOpen()&&0<--C._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),C.close({disableAutoOpen:!1}),C.open().then(function(){return E(C,v,O,x)})):be(S)}return k._promise(v,function(S,A){return et(function(){return te.trans=k,x(S,A,k)})}).then(function(S){if(v==="readwrite")try{k.idbtrans.commit()}catch{}return v==="readonly"?S:k._completion.then(function(){return S})})}if(C._state.openComplete)return be(new Z.DatabaseClosed(C._state.dbOpenError));if(!C._state.isBeingOpened){if(!C._state.autoOpen)return be(new Z.DatabaseClosed);C.open().catch(pe)}return C._state.dbReadyPromise.then(function(){return E(C,v,O,x)})})(this.db,t,[this.name],h);return f&&(w._consoleTask=f,w=w.catch(function(E){return console.trace(E),be(E)})),w}finally{g&&kt()}},ge.prototype.get=function(t,n){var i=this;return t&&t.constructor===Object?this.where(t).first(n):t==null?be(new Z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return i.core.get({trans:s,key:t}).then(function(c){return i.hook.reading.fire(c)})}).then(n)},ge.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(d(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var n=p(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(g){if(g.compound&&n.every(function(E){return 0<=g.keyPath.indexOf(E)})){for(var w=0;w<n.length;++w)if(n.indexOf(g.keyPath[w])===-1)return!1;return!0}return!1}).sort(function(g,w){return g.keyPath.length-w.keyPath.length})[0];if(i&&this.db._maxKey!==pt){var f=i.keyPath.slice(0,n.length);return this.where(f).equals(f.map(function(w){return t[w]}))}!i&&je&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var s=this.schema.idxByName;function c(g,w){return de(g,w)===0}var h=n.reduce(function(v,w){var E=v[0],C=v[1],v=s[w],O=t[w];return[E||v,E||!v?gt(C,v&&v.multi?function(x){return x=Y(x,w),d(x)&&x.some(function(k){return c(O,k)})}:function(x){return c(O,Y(x,w))}):C]},[null,null]),f=h[0],h=h[1];return f?this.where(f.name).equals(t[f.keyPath]).filter(h):i?this.filter(h):this.where(n).equals("")},ge.prototype.filter=function(t){return this.toCollection().and(t)},ge.prototype.count=function(t){return this.toCollection().count(t)},ge.prototype.offset=function(t){return this.toCollection().offset(t)},ge.prototype.limit=function(t){return this.toCollection().limit(t)},ge.prototype.each=function(t){return this.toCollection().each(t)},ge.prototype.toArray=function(t){return this.toCollection().toArray(t)},ge.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ge.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,d(t)?"[".concat(t.join("+"),"]"):t))},ge.prototype.reverse=function(){return this.toCollection().reverse()},ge.prototype.mapToClass=function(t){var n,i=this.db,s=this.name;function c(){return n!==null&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof Ii&&((function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function C(){this.constructor=w}o(w,E),w.prototype=E===null?Object.create(E):(C.prototype=E.prototype,new C)})(c,n=t),Object.defineProperty(c.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),c.prototype.table=function(){return s},t=c);for(var f=new Set,h=t.prototype;h;h=b(h))Object.getOwnPropertyNames(h).forEach(function(w){return f.add(w)});function g(w){if(!w)return w;var E,C=Object.create(t.prototype);for(E in w)if(!f.has(E))try{C[E]=w[E]}catch{}return C}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),t},ge.prototype.defineClass=function(){return this.mapToClass(function(t){y(this,t)})},ge.prototype.add=function(t,n){var i=this,s=this.schema.primKey,c=s.auto,f=s.keyPath,h=t;return f&&c&&(h=_n(f)(t)),this._trans("readwrite",function(g){return i.core.mutate({trans:g,type:"add",keys:n!=null?[n]:null,values:[h]})}).then(function(g){return g.numFailures?G.reject(g.failures[0]):g.lastResult}).then(function(g){if(f)try{Q(t,f,g)}catch{}return g})},ge.prototype.upsert=function(t,n){var i=this,s=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return i.core.get({trans:c,key:t}).then(function(f){var h=f??{};return Ni(h,n),s&&Q(h,s,t),i.core.mutate({trans:c,type:"put",values:[h],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[n]}}).then(function(g){return g.numFailures?G.reject(g.failures[0]):!!f})})})},ge.prototype.update=function(t,n){return typeof t!="object"||d(t)?this.where(":id").equals(t).modify(n):(t=Y(t,this.schema.primKey.keyPath),t===void 0?be(new Z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(n))},ge.prototype.put=function(t,n){var i=this,s=this.schema.primKey,c=s.auto,f=s.keyPath,h=t;return f&&c&&(h=_n(f)(t)),this._trans("readwrite",function(g){return i.core.mutate({trans:g,type:"put",values:[h],keys:n!=null?[n]:null})}).then(function(g){return g.numFailures?G.reject(g.failures[0]):g.lastResult}).then(function(g){if(f)try{Q(t,f,g)}catch{}return g})},ge.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:[t]}).then(function(s){return En(n,[t],s)}).then(function(s){return s.numFailures?G.reject(s.failures[0]):void 0})})},ge.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Oi}).then(function(i){return En(t,null,i)})}).then(function(n){return n.numFailures?G.reject(n.failures[0]):void 0})},ge.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(i){return n.core.getMany({keys:t,trans:i}).then(function(s){return s.map(function(c){return n.hook.reading.fire(c)})})})},ge.prototype.bulkAdd=function(t,n,i){var s=this,c=Array.isArray(n)?n:void 0,f=(i=i||(c?void 0:n))?i.allKeys:void 0;return this._trans("readwrite",function(h){var E=s.schema.primKey,g=E.auto,E=E.keyPath;if(E&&c)throw new Z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var w=t.length,E=E&&g?t.map(_n(E)):t;return s.core.mutate({trans:h,type:"add",keys:c,values:E,wantResults:f}).then(function(k){var v=k.numFailures,O=k.results,x=k.lastResult,k=k.failures;if(v===0)return f?O:x;throw new Ge("".concat(s.name,".bulkAdd(): ").concat(v," of ").concat(w," operations failed"),k)})})},ge.prototype.bulkPut=function(t,n,i){var s=this,c=Array.isArray(n)?n:void 0,f=(i=i||(c?void 0:n))?i.allKeys:void 0;return this._trans("readwrite",function(h){var E=s.schema.primKey,g=E.auto,E=E.keyPath;if(E&&c)throw new Z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var w=t.length,E=E&&g?t.map(_n(E)):t;return s.core.mutate({trans:h,type:"put",keys:c,values:E,wantResults:f}).then(function(k){var v=k.numFailures,O=k.results,x=k.lastResult,k=k.failures;if(v===0)return f?O:x;throw new Ge("".concat(s.name,".bulkPut(): ").concat(v," of ").concat(w," operations failed"),k)})})},ge.prototype.bulkUpdate=function(t){var n=this,i=this.core,s=t.map(function(h){return h.key}),c=t.map(function(h){return h.changes}),f=[];return this._trans("readwrite",function(h){return i.getMany({trans:h,keys:s,cache:"clone"}).then(function(g){var w=[],E=[];t.forEach(function(v,O){var x=v.key,k=v.changes,S=g[O];if(S){for(var A=0,I=Object.keys(k);A<I.length;A++){var R=I[A],B=k[R];if(R===n.schema.primKey.keyPath){if(de(B,x)!==0)throw new Z.Constraint("Cannot update primary key in bulkUpdate()")}else Q(S,R,B)}f.push(O),w.push(x),E.push(S)}});var C=w.length;return i.mutate({trans:h,type:"put",keys:w,values:E,updates:{keys:s,changeSpecs:c}}).then(function(v){var O=v.numFailures,x=v.failures;if(O===0)return C;for(var k=0,S=Object.keys(x);k<S.length;k++){var A,I=S[k],R=f[Number(I)];R!=null&&(A=x[I],delete x[I],x[R]=A)}throw new Ge("".concat(n.name,".bulkUpdate(): ").concat(O," of ").concat(C," operations failed"),x)})})})},ge.prototype.bulkDelete=function(t){var n=this,i=t.length;return this._trans("readwrite",function(s){return n.core.mutate({trans:s,type:"delete",keys:t}).then(function(c){return En(n,t,c)})}).then(function(h){var c=h.numFailures,f=h.lastResult,h=h.failures;if(c===0)return f;throw new Ge("".concat(n.name,".bulkDelete(): ").concat(c," of ").concat(i," operations failed"),h)})},ge);function ge(){}function Gt(t){function n(h,g){if(g){for(var w=arguments.length,E=new Array(w-1);--w;)E[w-1]=arguments[w];return i[h].subscribe.apply(null,E),t}if(typeof h=="string")return i[h]}var i={};n.addEventType=f;for(var s=1,c=arguments.length;s<c;++s)f(arguments[s]);return n;function f(h,g,w){if(typeof h!="object"){var E;g=g||qa;var C={subscribers:[],fire:w=w||pe,subscribe:function(v){C.subscribers.indexOf(v)===-1&&(C.subscribers.push(v),C.fire=g(C.fire,v))},unsubscribe:function(v){C.subscribers=C.subscribers.filter(function(O){return O!==v}),C.fire=C.subscribers.reduce(g,w)}};return i[h]=n[h]=C}p(E=h).forEach(function(v){var O=E[v];if(d(O))f(v,E[v][0],E[v][1]);else{if(O!=="asap")throw new Z.InvalidArgument("Invalid event config");var x=f(v,jt,function(){for(var k=arguments.length,S=new Array(k);k--;)S[k]=arguments[k];x.subscribers.forEach(function(A){fe(function(){A.apply(null,S)})})})}})}}function Yt(t,n){return F(n).from({prototype:t}),n}function Pt(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function ur(t,n){t.filter=gt(t.filter,n)}function cr(t,n,i){var s=t.replayFilter;t.replayFilter=s?function(){return gt(s(),n())}:n,t.justLimit=i&&!s}function xn(t,n){if(t.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(t.index);if(!i)throw new Z.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return i}function Fi(t,n,i){var s=xn(t,n.schema);return n.openCursor({trans:i,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:s,range:t.range}})}function Tn(t,n,i,s){var c=t.replayFilter?gt(t.filter,t.replayFilter()):t.filter;if(t.or){var f={},h=function(g,w,E){var C,v;c&&!c(w,E,function(O){return w.stop(O)},function(O){return w.fail(O)})||((v=""+(C=w.primaryKey))=="[object ArrayBuffer]"&&(v=""+new Uint8Array(C)),_(f,v)||(f[v]=!0,n(g,w,E)))};return Promise.all([t.or._iterate(h,i),qi(Fi(t,s,i),t.algorithm,h,!t.keysOnly&&t.valueMapper)])}return qi(Fi(t,s,i),gt(t.algorithm,c),n,!t.keysOnly&&t.valueMapper)}function qi(t,n,i,s){var c=ve(s?function(f,h,g){return i(s(f),h,g)}:i);return t.then(function(f){if(f)return f.start(function(){var h=function(){return f.continue()};n&&!n(f,function(g){return h=g},function(g){f.stop(g),h=pe},function(g){f.fail(g),h=pe})||c(f.value,f,function(g){return h=g}),h()})})}var Va=(he.prototype._read=function(t,n){var i=this._ctx;return i.error?i.table._trans(null,be.bind(null,i.error)):i.table._trans("readonly",t).then(n)},he.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,be.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},he.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=gt(n.algorithm,t)},he.prototype._iterate=function(t,n){return Tn(this._ctx,t,n,this._ctx.table.core)},he.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return t&&y(i,t),n._ctx=i,n},he.prototype.raw=function(){return this._ctx.valueMapper=null,this},he.prototype.each=function(t){var n=this._ctx;return this._read(function(i){return Tn(n,t,i,n.table.core)})},he.prototype.count=function(t){var n=this;return this._read(function(i){var s=n._ctx,c=s.table.core;if(Pt(s,!0))return c.count({trans:i,query:{index:xn(s,c.schema),range:s.range}}).then(function(h){return Math.min(h,s.limit)});var f=0;return Tn(s,function(){return++f,!1},i,c).then(function(){return f})}).then(t)},he.prototype.sortBy=function(t,n){var i=t.split(".").reverse(),s=i[0],c=i.length-1;function f(w,E){return E?f(w[i[E]],E-1):w[s]}var h=this._ctx.dir==="next"?1:-1;function g(w,E){return de(f(w,c),f(E,c))*h}return this.toArray(function(w){return w.sort(g)}).then(n)},he.prototype.toArray=function(t){var n=this;return this._read(function(i){var s=n._ctx;if(s.dir==="next"&&Pt(s,!0)&&0<s.limit){var c=s.valueMapper,f=xn(s,s.table.core.schema);return s.table.core.query({trans:i,limit:s.limit,values:!0,query:{index:f,range:s.range}}).then(function(g){return g=g.result,c?g.map(c):g})}var h=[];return Tn(s,function(g){return h.push(g)},i,s.table.core).then(function(){return h})},t)},he.prototype.offset=function(t){var n=this._ctx;return t<=0||(n.offset+=t,Pt(n)?cr(n,function(){var i=t;return function(s,c){return i===0||(i===1?--i:c(function(){s.advance(i),i=0}),!1)}}):cr(n,function(){var i=t;return function(){return--i<0}})),this},he.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),cr(this._ctx,function(){var n=t;return function(i,s,c){return--n<=0&&s(c),0<=n}},!0),this},he.prototype.until=function(t,n){return ur(this._ctx,function(i,s,c){return!t(i.value)||(s(c),n)}),this},he.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},he.prototype.last=function(t){return this.reverse().first(t)},he.prototype.filter=function(t){var n;return ur(this._ctx,function(i){return t(i.value)}),(n=this._ctx).isMatch=gt(n.isMatch,t),this},he.prototype.and=function(t){return this.filter(t)},he.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},he.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},he.prototype.desc=function(){return this.reverse()},he.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,s){t(s.key,s)})},he.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},he.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,s){t(s.primaryKey,s)})},he.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var i=[];return this.each(function(s,c){i.push(c.key)}).then(function(){return i}).then(t)},he.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Pt(n,!0)&&0<n.limit)return this._read(function(s){var c=xn(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:c,range:n.range}})}).then(function(s){return s.result}).then(t);n.keysOnly=!n.isMatch;var i=[];return this.each(function(s,c){i.push(c.primaryKey)}).then(function(){return i}).then(t)},he.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},he.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},he.prototype.lastKey=function(t){return this.reverse().firstKey(t)},he.prototype.distinct=function(){var t=this._ctx,t=t.index&&t.table.schema.idxByName[t.index];if(!t||!t.multi)return this;var n={};return ur(this._ctx,function(c){var s=c.primaryKey.toString(),c=_(n,s);return n[s]=!0,!c}),this},he.prototype.modify=function(t){var n=this,i=this._ctx;return this._write(function(s){var c=typeof t=="function"?t:function(S){return Ni(S,t)},f=i.table.core,E=f.schema.primaryKey,h=E.outbound,g=E.extractKey,w=200,E=n.db._options.modifyChunkSize;E&&(w=typeof E=="object"?E[f.name]||E["*"]||200:E);function C(S,R){var I=R.failures,R=R.numFailures;O+=S-R;for(var B=0,D=p(I);B<D.length;B++){var K=D[B];v.push(I[K])}}var v=[],O=0,x=[],k=t===Li;return n.clone().primaryKeys().then(function(S){function A(R){var B=Math.min(w,S.length-R),D=S.slice(R,R+B);return(k?Promise.resolve([]):f.getMany({trans:s,keys:D,cache:"immutable"})).then(function(K){var V=[],q=[],j=h?[]:null,H=k?D:[];if(!k)for(var U=0;U<B;++U){var X=K[U],ue={value:M(X),primKey:S[R+U]};c.call(ue,ue.value,ue)!==!1&&(ue.value==null?H.push(S[R+U]):h||de(g(X),g(ue.value))===0?(q.push(ue.value),h&&j.push(S[R+U])):(H.push(S[R+U]),V.push(ue.value)))}return Promise.resolve(0<V.length&&f.mutate({trans:s,type:"add",values:V}).then(function(ce){for(var le in ce.failures)H.splice(parseInt(le),1);C(V.length,ce)})).then(function(){return(0<q.length||I&&typeof t=="object")&&f.mutate({trans:s,type:"put",keys:j,values:q,criteria:I,changeSpec:typeof t!="function"&&t,isAdditionalChunk:0<R}).then(function(ce){return C(q.length,ce)})}).then(function(){return(0<H.length||I&&k)&&f.mutate({trans:s,type:"delete",keys:H,criteria:I,isAdditionalChunk:0<R}).then(function(ce){return En(i.table,H,ce)}).then(function(ce){return C(H.length,ce)})}).then(function(){return S.length>R+B&&A(R+w)})})}var I=Pt(i)&&i.limit===1/0&&(typeof t!="function"||k)&&{index:i.index,range:i.range};return A(0).then(function(){if(0<v.length)throw new $e("Error modifying one or more objects",v,O,x);return S.length})})})},he.prototype.delete=function(){var t=this._ctx,n=t.range;return!Pt(t)||t.table.schema.yProps||!t.isPrimKey&&n.type!==3?this.modify(Li):this._write(function(i){var s=t.table.core.schema.primaryKey,c=n;return t.table.core.count({trans:i,query:{index:s,range:c}}).then(function(f){return t.table.core.mutate({trans:i,type:"deleteRange",range:c}).then(function(w){var g=w.failures,w=w.numFailures;if(w)throw new $e("Could not delete some values",Object.keys(g).map(function(E){return g[E]}),f-w);return f-w})})})},he);function he(){}var Li=function(t,n){return n.value=null};function Ha(t,n){return t<n?-1:t===n?0:1}function Wa(t,n){return n<t?-1:t===n?0:1}function Be(t,n,i){return t=t instanceof ji?new t.Collection(t):t,t._ctx.error=new(i||TypeError)(n),t}function At(t){return new t.Collection(t,function(){return Ki("")}).limit(0)}function kn(t,n,i,s){var c,f,h,g,w,E,C,v=i.length;if(!i.every(function(k){return typeof k=="string"}))return Be(t,Ai);function O(k){c=k==="next"?function(A){return A.toUpperCase()}:function(A){return A.toLowerCase()},f=k==="next"?function(A){return A.toLowerCase()}:function(A){return A.toUpperCase()},h=k==="next"?Ha:Wa;var S=i.map(function(A){return{lower:f(A),upper:c(A)}}).sort(function(A,I){return h(A.lower,I.lower)});g=S.map(function(A){return A.upper}),w=S.map(function(A){return A.lower}),C=(E=k)==="next"?"":s}O("next"),t=new t.Collection(t,function(){return rt(g[0],w[v-1]+s)}),t._ondirectionchange=function(k){O(k)};var x=0;return t._addAlgorithm(function(k,S,A){var I=k.key;if(typeof I!="string")return!1;var R=f(I);if(n(R,w,x))return!0;for(var B=null,D=x;D<v;++D){var K=(function(V,q,j,H,U,X){for(var ue=Math.min(V.length,H.length),ce=-1,le=0;le<ue;++le){var De=q[le];if(De!==H[le])return U(V[le],j[le])<0?V.substr(0,le)+j[le]+j.substr(le+1):U(V[le],H[le])<0?V.substr(0,le)+H[le]+j.substr(le+1):0<=ce?V.substr(0,ce)+q[ce]+j.substr(ce+1):null;U(V[le],De)<0&&(ce=le)}return ue<H.length&&X==="next"?V+j.substr(V.length):ue<V.length&&X==="prev"?V.substr(0,j.length):ce<0?null:V.substr(0,ce)+H[ce]+j.substr(ce+1)})(I,R,g[D],w[D],h,E);K===null&&B===null?x=D+1:(B===null||0<h(B,K))&&(B=K)}return S(B!==null?function(){k.continue(B+C)}:A),!1}),t}function rt(t,n,i,s){return{type:2,lower:t,upper:n,lowerOpen:i,upperOpen:s}}function Ki(t){return{type:1,lower:t,upper:t}}var ji=(Object.defineProperty(Ee.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ee.prototype.between=function(t,n,i,s){i=i!==!1,s=s===!0;try{return 0<this._cmp(t,n)||this._cmp(t,n)===0&&(i||s)&&(!i||!s)?At(this):new this.Collection(this,function(){return rt(t,n,!i,!s)})}catch{return Be(this,Ye)}},Ee.prototype.equals=function(t){return t==null?Be(this,Ye):new this.Collection(this,function(){return Ki(t)})},Ee.prototype.above=function(t){return t==null?Be(this,Ye):new this.Collection(this,function(){return rt(t,void 0,!0)})},Ee.prototype.aboveOrEqual=function(t){return t==null?Be(this,Ye):new this.Collection(this,function(){return rt(t,void 0,!1)})},Ee.prototype.below=function(t){return t==null?Be(this,Ye):new this.Collection(this,function(){return rt(void 0,t,!1,!0)})},Ee.prototype.belowOrEqual=function(t){return t==null?Be(this,Ye):new this.Collection(this,function(){return rt(void 0,t)})},Ee.prototype.startsWith=function(t){return typeof t!="string"?Be(this,Ai):this.between(t,t+pt,!0,!0)},Ee.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):kn(this,function(n,i){return n.indexOf(i[0])===0},[t],pt)},Ee.prototype.equalsIgnoreCase=function(t){return kn(this,function(n,i){return n===i[0]},[t],"")},Ee.prototype.anyOfIgnoreCase=function(){var t=ye.apply(We,arguments);return t.length===0?At(this):kn(this,function(n,i){return i.indexOf(n)!==-1},t,"")},Ee.prototype.startsWithAnyOfIgnoreCase=function(){var t=ye.apply(We,arguments);return t.length===0?At(this):kn(this,function(n,i){return i.some(function(s){return n.indexOf(s)===0})},t,pt)},Ee.prototype.anyOf=function(){var t=this,n=ye.apply(We,arguments),i=this._cmp;try{n.sort(i)}catch{return Be(this,Ye)}if(n.length===0)return At(this);var s=new this.Collection(this,function(){return rt(n[0],n[n.length-1])});s._ondirectionchange=function(f){i=f==="next"?t._ascending:t._descending,n.sort(i)};var c=0;return s._addAlgorithm(function(f,h,g){for(var w=f.key;0<i(w,n[c]);)if(++c===n.length)return h(g),!1;return i(w,n[c])===0||(h(function(){f.continue(n[c])}),!1)}),s},Ee.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ee.prototype.noneOf=function(){var t=ye.apply(We,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Be(this,Ye)}var n=t.reduce(function(i,s){return i?i.concat([[i[i.length-1][1],s]]):[[-1/0,s]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},Ee.prototype.inAnyRange=function(I,n){var i=this,s=this._cmp,c=this._ascending,f=this._descending,h=this._min,g=this._max;if(I.length===0)return At(this);if(!I.every(function(R){return R[0]!==void 0&&R[1]!==void 0&&c(R[0],R[1])<=0}))return Be(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Z.InvalidArgument);var w=!n||n.includeLowers!==!1,E=n&&n.includeUppers===!0,C,v=c;function O(R,B){return v(R[0],B[0])}try{(C=I.reduce(function(R,B){for(var D=0,K=R.length;D<K;++D){var V=R[D];if(s(B[0],V[1])<0&&0<s(B[1],V[0])){V[0]=h(V[0],B[0]),V[1]=g(V[1],B[1]);break}}return D===K&&R.push(B),R},[])).sort(O)}catch{return Be(this,Ye)}var x=0,k=E?function(R){return 0<c(R,C[x][1])}:function(R){return 0<=c(R,C[x][1])},S=w?function(R){return 0<f(R,C[x][0])}:function(R){return 0<=f(R,C[x][0])},A=k,I=new this.Collection(this,function(){return rt(C[0][0],C[C.length-1][1],!w,!E)});return I._ondirectionchange=function(R){v=R==="next"?(A=k,c):(A=S,f),C.sort(O)},I._addAlgorithm(function(R,B,D){for(var K,V=R.key;A(V);)if(++x===C.length)return B(D),!1;return!k(K=V)&&!S(K)||(i._cmp(V,C[x][1])===0||i._cmp(V,C[x][0])===0||B(function(){v===c?R.continue(C[x][0]):R.continue(C[x][1])}),!1)}),I},Ee.prototype.startsWithAnyOf=function(){var t=ye.apply(We,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?At(this):this.inAnyRange(t.map(function(n){return[n,n+pt]})):Be(this,"startsWithAnyOf() only works with strings")},Ee);function Ee(){}function ze(t){return ve(function(n){return Qt(n),t(n.target.error),!1})}function Qt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Jt="storagemutated",lr="x-storagemutated-1",it=Gt(null,Jt),Ga=(Ue.prototype._lock=function(){return z(!te.global),++this._reculock,this._reculock!==1||te.global||(te.lockOwnerFor=this),this},Ue.prototype._unlock=function(){if(z(!te.global),--this._reculock==0)for(te.global||(te.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{ht(t[1],t[0])}catch{}}return this},Ue.prototype._locked=function(){return this._reculock&&te.lockOwnerFor!==this},Ue.prototype.create=function(t){var n=this;if(!this.mode)return this;var i=this.db.idbdb,s=this.db._state.dbOpenError;if(z(!this.idbtrans),!t&&!i)switch(s&&s.name){case"DatabaseClosedError":throw new Z.DatabaseClosed(s);case"MissingAPIError":throw new Z.MissingAPI(s.message,s);default:throw new Z.OpenFailed(s)}if(!this.active)throw new Z.TransactionInactive;return z(this._completion._state===null),(t=this.idbtrans=t||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ve(function(c){Qt(c),n._reject(t.error)}),t.onabort=ve(function(c){Qt(c),n.active&&n._reject(new Z.Abort(t.error)),n.active=!1,n.on("abort").fire(c)}),t.oncomplete=ve(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&it.storagemutated.fire(t.mutatedParts)}),this},Ue.prototype._promise=function(t,n,i){var s=this;if(t==="readwrite"&&this.mode!=="readwrite")return be(new Z.ReadOnly("Transaction is readonly"));if(!this.active)return be(new Z.TransactionInactive);if(this._locked())return new G(function(f,h){s._blockedFuncs.push([function(){s._promise(t,n,i).then(f,h)},te])});if(i)return et(function(){var f=new G(function(h,g){s._lock();var w=n(h,g,s);w&&w.then&&w.then(h,g)});return f.finally(function(){return s._unlock()}),f._lib=!0,f});var c=new G(function(f,h){var g=n(f,h,s);g&&g.then&&g.then(f,h)});return c._lib=!0,c},Ue.prototype._root=function(){return this.parent?this.parent._root():this},Ue.prototype.waitFor=function(t){var n,i=this._root(),s=G.resolve(t);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return s}):(i._waitingFor=s,i._waitingQueue=[],n=i.idbtrans.objectStore(i.storeNames[0]),(function f(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(n.get(-1/0).onsuccess=f)})());var c=i._waitingFor;return new G(function(f,h){s.then(function(g){return i._waitingQueue.push(ve(f.bind(null,g)))},function(g){return i._waitingQueue.push(ve(h.bind(null,g)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},Ue.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Z.Abort))},Ue.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(_(n,t))return n[t];var i=this.schema[t];if(!i)throw new Z.NotFound("Table "+t+" not part of transaction");return i=new this.db.Table(t,i,this),i.core=this.db.core.table(t),n[t]=i},Ue);function Ue(){}function fr(t,n,i,s,c,f,h,g){return{name:t,keyPath:n,unique:i,multi:s,auto:c,compound:f,src:(i&&!h?"&":"")+(s?"*":"")+(c?"++":"")+zi(n),type:g}}function zi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function dr(t,n,i){return{name:t,primKey:n,indexes:i,mappedClass:null,idxByName:(s=function(c){return[c.name,c]},i.reduce(function(c,f,h){return h=s(f,h),h&&(c[h[0]]=h[1]),c},{}))};var s}var Xt=function(t){try{return t.only([[]]),Xt=function(){return[[]]},[[]]}catch{return Xt=function(){return pt},pt}};function hr(t){return t==null?function(){}:typeof t=="string"?(n=t).split(".").length===1?function(i){return i[n]}:function(i){return Y(i,n)}:function(i){return Y(i,t)};var n}function Ui(t){return[].slice.call(t)}var Ya=0;function $t(t){return t==null?":id":typeof t=="string"?t:"[".concat(t.join("+"),"]")}function Qa(t,n,w){function s(A){if(A.type===3)return null;if(A.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var x=A.lower,k=A.upper,S=A.lowerOpen,A=A.upperOpen;return x===void 0?k===void 0?null:n.upperBound(k,!!A):k===void 0?n.lowerBound(x,!!S):n.bound(x,k,!!S,!!A)}function c(O){var x,k=O.name;return{name:k,schema:O,mutate:function(S){var A=S.trans,I=S.type,R=S.keys,B=S.values,D=S.range;return new Promise(function(K,V){K=ve(K);var q=A.objectStore(k),j=q.keyPath==null,H=I==="put"||I==="add";if(!H&&I!=="delete"&&I!=="deleteRange")throw new Error("Invalid operation type: "+I);var U,X=(R||B||{length:1}).length;if(R&&B&&R.length!==B.length)throw new Error("Given keys array must have same length as given values array.");if(X===0)return K({numFailures:0,failures:{},results:[],lastResult:void 0});function ue(Ae){++De,Qt(Ae)}var ce=[],le=[],De=0;if(I==="deleteRange"){if(D.type===4)return K({numFailures:De,failures:le,results:[],lastResult:void 0});D.type===3?ce.push(U=q.clear()):ce.push(U=q.delete(s(D)))}else{var j=H?j?[B,R]:[B,null]:[R,null],se=j[0],Se=j[1];if(H)for(var Ce=0;Ce<X;++Ce)ce.push(U=Se&&Se[Ce]!==void 0?q[I](se[Ce],Se[Ce]):q[I](se[Ce])),U.onerror=ue;else for(Ce=0;Ce<X;++Ce)ce.push(U=q[I](se[Ce])),U.onerror=ue}function Fn(Ae){Ae=Ae.target.result,ce.forEach(function(vt,Ir){return vt.error!=null&&(le[Ir]=vt.error)}),K({numFailures:De,failures:le,results:I==="delete"?R:ce.map(function(vt){return vt.result}),lastResult:Ae})}U.onerror=function(Ae){ue(Ae),Fn(Ae)},U.onsuccess=Fn})},getMany:function(S){var A=S.trans,I=S.keys;return new Promise(function(R,B){R=ve(R);for(var D,K=A.objectStore(k),V=I.length,q=new Array(V),j=0,H=0,U=function(ce){ce=ce.target,q[ce._pos]=ce.result,++H===j&&R(q)},X=ze(B),ue=0;ue<V;++ue)I[ue]!=null&&((D=K.get(I[ue]))._pos=ue,D.onsuccess=U,D.onerror=X,++j);j===0&&R(q)})},get:function(S){var A=S.trans,I=S.key;return new Promise(function(R,B){R=ve(R);var D=A.objectStore(k).get(I);D.onsuccess=function(K){return R(K.target.result)},D.onerror=ze(B)})},query:(x=E,function(S){return new Promise(function(A,I){A=ve(A);var R,B,D,j=S.trans,K=S.values,V=S.limit,U=S.query,q=V===1/0?void 0:V,H=U.index,U=U.range,j=j.objectStore(k),H=H.isPrimaryKey?j:j.index(H.name),U=s(U);if(V===0)return A({result:[]});x?((q=K?H.getAll(U,q):H.getAllKeys(U,q)).onsuccess=function(X){return A({result:X.target.result})},q.onerror=ze(I)):(R=0,B=!K&&"openKeyCursor"in H?H.openKeyCursor(U):H.openCursor(U),D=[],B.onsuccess=function(X){var ue=B.result;return ue?(D.push(K?ue.value:ue.primaryKey),++R===V?A({result:D}):void ue.continue()):A({result:D})},B.onerror=ze(I))})}),openCursor:function(S){var A=S.trans,I=S.values,R=S.query,B=S.reverse,D=S.unique;return new Promise(function(K,V){K=ve(K);var H=R.index,q=R.range,j=A.objectStore(k),j=H.isPrimaryKey?j:j.index(H.name),H=B?D?"prevunique":"prev":D?"nextunique":"next",U=!I&&"openKeyCursor"in j?j.openKeyCursor(s(q),H):j.openCursor(s(q),H);U.onerror=ze(V),U.onsuccess=ve(function(X){var ue,ce,le,De,se=U.result;se?(se.___id=++Ya,se.done=!1,ue=se.continue.bind(se),ce=(ce=se.continuePrimaryKey)&&ce.bind(se),le=se.advance.bind(se),De=function(){throw new Error("Cursor not stopped")},se.trans=A,se.stop=se.continue=se.continuePrimaryKey=se.advance=function(){throw new Error("Cursor not started")},se.fail=ve(V),se.next=function(){var Se=this,Ce=1;return this.start(function(){return Ce--?Se.continue():Se.stop()}).then(function(){return Se})},se.start=function(Se){function Ce(){if(U.result)try{Se()}catch(Ae){se.fail(Ae)}else se.done=!0,se.start=function(){throw new Error("Cursor behind last entry")},se.stop()}var Fn=new Promise(function(Ae,vt){Ae=ve(Ae),U.onerror=ze(vt),se.fail=vt,se.stop=function(Ir){se.stop=se.continue=se.continuePrimaryKey=se.advance=De,Ae(Ir)}});return U.onsuccess=ve(function(Ae){U.onsuccess=Ce,Ce()}),se.continue=ue,se.continuePrimaryKey=ce,se.advance=le,Ce(),Fn},K(se)):K(null)},V)})},count:function(S){var A=S.query,I=S.trans,R=A.index,B=A.range;return new Promise(function(D,K){var V=I.objectStore(k),q=R.isPrimaryKey?V:V.index(R.name),V=s(B),q=V?q.count(V):q.count();q.onsuccess=ve(function(j){return D(j.target.result)}),q.onerror=ze(K)})}}}var f,h,g,C=(h=w,g=Ui((f=t).objectStoreNames),{schema:{name:f.name,tables:g.map(function(O){return h.objectStore(O)}).map(function(O){var x=O.keyPath,A=O.autoIncrement,k=d(x),S={},A={name:O.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:x==null,compound:k,keyPath:x,autoIncrement:A,unique:!0,extractKey:hr(x)},indexes:Ui(O.indexNames).map(function(I){return O.index(I)}).map(function(D){var R=D.name,B=D.unique,K=D.multiEntry,D=D.keyPath,K={name:R,compound:d(D),keyPath:D,unique:B,multiEntry:K,extractKey:hr(D)};return S[$t(D)]=K}),getIndexByKeyPath:function(I){return S[$t(I)]}};return S[":id"]=A.primaryKey,x!=null&&(S[$t(x)]=A.primaryKey),A})},hasGetAll:0<g.length&&"getAll"in h.objectStore(g[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),w=C.schema,E=C.hasGetAll,C=w.tables.map(c),v={};return C.forEach(function(O){return v[O.name]=O}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(O){if(!v[O])throw new Error("Table '".concat(O,"' not found"));return v[O]},MIN_KEY:-1/0,MAX_KEY:Xt(n),schema:w}}function Ja(t,n,i,s){var c=i.IDBKeyRange;return i.indexedDB,{dbcore:(s=Qa(n,c,s),t.dbcore.reduce(function(f,h){return h=h.create,a(a({},f),h(f))},s))}}function Sn(t,s){var i=s.db,s=Ja(t._middlewares,i,t._deps,s);t.core=s.dbcore,t.tables.forEach(function(c){var f=c.name;t.core.schema.tables.some(function(h){return h.name===f})&&(c.core=t.core.table(f),t[f]instanceof t.Table&&(t[f].core=c.core))})}function Cn(t,n,i,s){i.forEach(function(c){var f=s[c];n.forEach(function(h){var g=(function w(E,C){return ee(E,C)||(E=b(E))&&w(E,C)})(h,c);(!g||"value"in g&&g.value===void 0)&&(h===t.Transaction.prototype||h instanceof t.Transaction?L(h,c,{get:function(){return this.table(c)},set:function(w){P(this,c,{value:w,writable:!0,configurable:!0,enumerable:!0})}}):h[c]=new t.Table(c,f))})})}function pr(t,n){n.forEach(function(i){for(var s in i)i[s]instanceof t.Table&&delete i[s]})}function Xa(t,n){return t._cfg.version-n._cfg.version}function $a(t,n,i,s){var c=t._dbSchema;i.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=dr("$meta",Hi("")[0],[]),t._storeNames.push("$meta"));var f=t._createTransaction("readwrite",t._storeNames,c);f.create(i),f._completion.catch(s);var h=f._reject.bind(f),g=te.transless||te;et(function(){return te.trans=f,te.transless=g,n!==0?(Sn(t,i),E=n,((w=f).storeNames.includes("$meta")?w.table("$meta").get("version").then(function(C){return C??E}):G.resolve(E)).then(function(C){return O=C,x=f,k=i,S=[],C=(v=t)._versions,A=v._dbSchema=An(0,v.idbdb,k),(C=C.filter(function(I){return I._cfg.version>=O})).length!==0?(C.forEach(function(I){S.push(function(){var R=A,B=I._cfg.dbschema;On(v,R,k),On(v,B,k),A=v._dbSchema=B;var D=gr(R,B);D.add.forEach(function(H){mr(k,H[0],H[1].primKey,H[1].indexes)}),D.change.forEach(function(H){if(H.recreate)throw new Z.Upgrade("Not yet support for changing primary key");var U=k.objectStore(H.name);H.add.forEach(function(X){return Pn(U,X)}),H.change.forEach(function(X){U.deleteIndex(X.name),Pn(U,X)}),H.del.forEach(function(X){return U.deleteIndex(X)})});var K=I._cfg.contentUpgrade;if(K&&I._cfg.version>O){Sn(v,k),x._memoizedTables={};var V=ne(B);D.del.forEach(function(H){V[H]=R[H]}),pr(v,[v.Transaction.prototype]),Cn(v,[v.Transaction.prototype],p(V),V),x.schema=V;var q,j=Te(K);return j&&St(),D=G.follow(function(){var H;(q=K(x))&&j&&(H=tt.bind(null,null),q.then(H,H))}),q&&typeof q.then=="function"?G.resolve(q):D.then(function(){return q})}}),S.push(function(R){var B,D,K=I._cfg.dbschema;B=K,D=R,[].slice.call(D.db.objectStoreNames).forEach(function(V){return B[V]==null&&D.db.deleteObjectStore(V)}),pr(v,[v.Transaction.prototype]),Cn(v,[v.Transaction.prototype],v._storeNames,v._dbSchema),x.schema=v._dbSchema}),S.push(function(R){v.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(v.idbdb.version/10)===I._cfg.version?(v.idbdb.deleteObjectStore("$meta"),delete v._dbSchema.$meta,v._storeNames=v._storeNames.filter(function(B){return B!=="$meta"})):R.objectStore("$meta").put(I._cfg.version,"version"))})}),(function I(){return S.length?G.resolve(S.shift()(x.idbtrans)).then(I):G.resolve()})().then(function(){Vi(A,k)})):G.resolve();var v,O,x,k,S,A}).catch(h)):(p(c).forEach(function(C){mr(i,C,c[C].primKey,c[C].indexes)}),Sn(t,i),void G.follow(function(){return t.on.populate.fire(f)}).catch(h));var w,E})}function Za(t,n){Vi(t._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains("$meta")||n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=An(0,t.idbdb,n);On(t,t._dbSchema,n);for(var s=0,c=gr(i,t._dbSchema).change;s<c.length;s++){var f=(function(h){if(h.change.length||h.recreate)return console.warn("Unable to patch indexes of table ".concat(h.name," because it has changes on the type of index or primary key.")),{value:void 0};var g=n.objectStore(h.name);h.add.forEach(function(w){je&&console.debug("Dexie upgrade patch: Creating missing index ".concat(h.name,".").concat(w.src)),Pn(g,w)})})(c[s]);if(typeof f=="object")return f.value}}function gr(t,n){var i,s={del:[],add:[],change:[]};for(i in t)n[i]||s.del.push(i);for(i in n){var c=t[i],f=n[i];if(c){var h={name:i,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||c.primKey.auto!==f.primKey.auto)h.recreate=!0,s.change.push(h);else{var g=c.idxByName,w=f.idxByName,E=void 0;for(E in g)w[E]||h.del.push(E);for(E in w){var C=g[E],v=w[E];C?C.src!==v.src&&h.change.push(v):h.add.push(v)}(0<h.del.length||0<h.add.length||0<h.change.length)&&s.change.push(h)}}else s.add.push([i,f])}return s}function mr(t,n,i,s){var c=t.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return s.forEach(function(f){return Pn(c,f)}),c}function Vi(t,n){p(t).forEach(function(i){n.db.objectStoreNames.contains(i)||(je&&console.debug("Dexie: Creating missing table",i),mr(n,i,t[i].primKey,t[i].indexes))})}function Pn(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function An(t,n,i){var s={};return re(n.objectStoreNames,0).forEach(function(c){for(var f=i.objectStore(c),h=fr(zi(E=f.keyPath),E||"",!0,!1,!!f.autoIncrement,E&&typeof E!="string",!0),g=[],w=0;w<f.indexNames.length;++w){var C=f.index(f.indexNames[w]),E=C.keyPath,C=fr(C.name,E,!!C.unique,!!C.multiEntry,!1,E&&typeof E!="string",!1);g.push(C)}s[c]=dr(c,h,g)}),s}function On(t,n,i){for(var s=i.db.objectStoreNames,c=0;c<s.length;++c){var f=s[c],h=i.objectStore(f);t._hasGetAll="getAll"in h;for(var g=0;g<h.indexNames.length;++g){var w=h.indexNames[g],E=h.index(w).keyPath,C=typeof E=="string"?E:"["+re(E).join("+")+"]";!n[f]||(E=n[f].idxByName[C])&&(E.name=w,delete n[f].idxByName[C],n[f].idxByName[w]=E)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Hi(t){return t.split(",").map(function(n,i){var f=n.split(":"),s=(c=f[1])===null||c===void 0?void 0:c.trim(),c=(n=f[0].trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return fr(c,f||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),d(f),i===0,s)})}var es=(Ot.prototype._createTableSchema=dr,Ot.prototype._parseIndexSyntax=Hi,Ot.prototype._parseStoresSpec=function(t,n){var i=this;p(t).forEach(function(s){if(t[s]!==null){var c=i._parseIndexSyntax(t[s]),f=c.shift();if(!f)throw new Z.Schema("Invalid schema for table "+s+": "+t[s]);if(f.unique=!0,f.multi)throw new Z.Schema("Primary key cannot be multiEntry*");c.forEach(function(h){if(h.auto)throw new Z.Schema("Only primary key can be marked as autoIncrement (++)");if(!h.keyPath)throw new Z.Schema("Index must have a name and cannot be an empty string")}),c=i._createTableSchema(s,f,c),n[s]=c}})},Ot.prototype.stores=function(i){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,i):i;var i=n._versions,s={},c={};return i.forEach(function(f){y(s,f._cfg.storesSource),c=f._cfg.dbschema={},f._parseStoresSpec(s,c)}),n._dbSchema=c,pr(n,[n._allTables,n,n.Transaction.prototype]),Cn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],p(c),c),n._storeNames=p(c),this},Ot.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Xn(this._cfg.contentUpgrade||pe,t),this},Ot);function Ot(){}function yr(t,n){var i=t._dbNamesDB;return i||(i=t._dbNamesDB=new Qe(wn,{addons:[],indexedDB:t,IDBKeyRange:n})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function vr(t){return t&&typeof t.databases=="function"}function br(t){return et(function(){return te.letThrough=!0,t()})}function wr(t){return!("from"in t)}var ke=function(t,n){if(!this){var i=new ke;return t&&"d"in t&&y(i,t),i}y(this,arguments.length?{d:1,from:t,to:1<arguments.length?n:t}:{d:0})};function Zt(t,n,i){var s=de(n,i);if(!isNaN(s)){if(0<s)throw RangeError();if(wr(t))return y(t,{from:n,to:i,d:1});var c=t.l,s=t.r;if(de(i,t.from)<0)return c?Zt(c,n,i):t.l={from:n,to:i,d:1,l:null,r:null},Gi(t);if(0<de(n,t.to))return s?Zt(s,n,i):t.r={from:n,to:i,d:1,l:null,r:null},Gi(t);de(n,t.from)<0&&(t.from=n,t.l=null,t.d=s?s.d+1:1),0<de(i,t.to)&&(t.to=i,t.r=null,t.d=t.l?t.l.d+1:1),i=!t.r,c&&!t.l&&en(t,c),s&&i&&en(t,s)}}function en(t,n){wr(n)||(function i(s,w){var f=w.from,h=w.to,g=w.l,w=w.r;Zt(s,f,h),g&&i(s,g),w&&i(s,w)})(t,n)}function Wi(t,n){var i=In(n),s=i.next();if(s.done)return!1;for(var c=s.value,f=In(t),h=f.next(c.from),g=h.value;!s.done&&!h.done;){if(de(g.from,c.to)<=0&&0<=de(g.to,c.from))return!0;de(c.from,g.from)<0?c=(s=i.next(g.from)).value:g=(h=f.next(c.from)).value}return!1}function In(t){var n=wr(t)?null:{s:0,n:t};return{next:function(i){for(var s=0<arguments.length;n;)switch(n.s){case 0:if(n.s=1,s)for(;n.n.l&&de(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!s||de(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function Gi(t){var n,i,s=(((n=t.r)===null||n===void 0?void 0:n.d)||0)-(((i=t.l)===null||i===void 0?void 0:i.d)||0),c=1<s?"r":s<-1?"l":"";c&&(n=c=="r"?"l":"r",i=a({},t),s=t[c],t.from=s.from,t.to=s.to,t[c]=s[c],i[c]=s[n],(t[n]=i).d=Yi(i)),t.d=Yi(t)}function Yi(i){var n=i.r,i=i.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function Rn(t,n){return p(n).forEach(function(i){t[i]?en(t[i],n[i]):t[i]=(function s(c){var f,h,g={};for(f in c)_(c,f)&&(h=c[f],g[f]=!h||typeof h!="object"||ie.has(h.constructor)?h:s(h));return g})(n[i])}),t}function _r(t,n){return t.all||n.all||Object.keys(t).some(function(i){return n[i]&&Wi(n[i],t[i])})}T(ke.prototype,((Me={add:function(t){return en(this,t),this},addKey:function(t){return Zt(this,t,t),this},addKeys:function(t){var n=this;return t.forEach(function(i){return Zt(n,i,i)}),this},hasKey:function(t){var n=In(this).next(t).value;return n&&de(n.from,t)<=0&&0<=de(n.to,t)}})[Oe]=function(){return In(this)},Me));var mt={},Er={},xr=!1;function Bn(t){Rn(Er,t),xr||(xr=!0,setTimeout(function(){xr=!1,Tr(Er,!(Er={}))},0))}function Tr(t,n){n===void 0&&(n=!1);var i=new Set;if(t.all)for(var s=0,c=Object.values(mt);s<c.length;s++)Qi(h=c[s],t,i,n);else for(var f in t){var h,g=/^idb\:\/\/(.*)\/(.*)\//.exec(f);g&&(f=g[1],g=g[2],(h=mt["idb://".concat(f,"/").concat(g)])&&Qi(h,t,i,n))}i.forEach(function(w){return w()})}function Qi(t,n,i,s){for(var c=[],f=0,h=Object.entries(t.queries.query);f<h.length;f++){for(var g=h[f],w=g[0],E=[],C=0,v=g[1];C<v.length;C++){var O=v[C];_r(n,O.obsSet)?O.subscribers.forEach(function(A){return i.add(A)}):s&&E.push(O)}s&&c.push([w,E])}if(s)for(var x=0,k=c;x<k.length;x++){var S=k[x],w=S[0],E=S[1];t.queries.query[w]=E}}function ts(t){var n=t._state,i=t._deps.indexedDB;if(n.isBeingOpened||t.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?be(n.dbOpenError):t});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var s=n.openCanceller,c=Math.round(10*t.verno),f=!1;function h(){if(n.openCanceller!==s)throw new Z.DatabaseClosed("db.open() was cancelled")}function g(){return new G(function(O,x){if(h(),!i)throw new Z.MissingAPI;var k=t.name,S=n.autoSchema||!c?i.open(k):i.open(k,c);if(!S)throw new Z.MissingAPI;S.onerror=ze(x),S.onblocked=ve(t._fireOnBlocked),S.onupgradeneeded=ve(function(A){var I;C=S.transaction,n.autoSchema&&!t._options.allowEmptyDB?(S.onerror=Qt,C.abort(),S.result.close(),(I=i.deleteDatabase(k)).onsuccess=I.onerror=ve(function(){x(new Z.NoSuchDatabase("Database ".concat(k," doesnt exist")))})):(C.onerror=ze(x),A=A.oldVersion>Math.pow(2,62)?0:A.oldVersion,v=A<1,t.idbdb=S.result,f&&Za(t,C),$a(t,A/10,C,x))},x),S.onsuccess=ve(function(){C=null;var A,I,R,B,D,K=t.idbdb=S.result,V=re(K.objectStoreNames);if(0<V.length)try{var q=K.transaction((B=V).length===1?B[0]:B,"readonly");if(n.autoSchema)I=K,R=q,(A=t).verno=I.version/10,R=A._dbSchema=An(0,I,R),A._storeNames=re(I.objectStoreNames,0),Cn(A,[A._allTables],p(R),R);else if(On(t,t._dbSchema,q),((D=gr(An(0,(D=t).idbdb,q),D._dbSchema)).add.length||D.change.some(function(j){return j.add.length||j.change.length}))&&!f)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),K.close(),c=K.version+1,f=!0,O(g());Sn(t,q)}catch{}Ct.push(t),K.onversionchange=ve(function(j){n.vcFired=!0,t.on("versionchange").fire(j)}),K.onclose=ve(function(){t.close({disableAutoOpen:!1})}),v&&(D=t._deps,q=k,K=D.indexedDB,D=D.IDBKeyRange,vr(K)||q===wn||yr(K,D).put({name:q}).catch(pe)),O()},x)}).catch(function(O){switch(O?.name){case"UnknownError":if(0<n.PR1398_maxLoop)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),g();break;case"VersionError":if(0<c)return c=0,g()}return G.reject(O)})}var w,E=n.dbReadyResolve,C=null,v=!1;return G.race([s,(typeof navigator>"u"?G.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function x(){return indexedDB.databases().finally(O)}w=setInterval(x,100),x()}).finally(function(){return clearInterval(w)}):Promise.resolve()).then(g)]).then(function(){return h(),n.onReadyBeingFired=[],G.resolve(br(function(){return t.on.ready.fire(t.vip)})).then(function O(){if(0<n.onReadyBeingFired.length){var x=n.onReadyBeingFired.reduce(Xn,pe);return n.onReadyBeingFired=[],G.resolve(br(function(){return x(t.vip)})).then(O)}})}).finally(function(){n.openCanceller===s&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(O){n.dbOpenError=O;try{C&&C.abort()}catch{}return s===n.openCanceller&&t._close(),be(O)}).finally(function(){n.openComplete=!0,E()}).then(function(){var O;return v&&(O={},t.tables.forEach(function(x){x.schema.indexes.forEach(function(k){k.name&&(O["idb://".concat(t.name,"/").concat(x.name,"/").concat(k.name)]=new ke(-1/0,[[[]]]))}),O["idb://".concat(t.name,"/").concat(x.name,"/")]=O["idb://".concat(t.name,"/").concat(x.name,"/:dels")]=new ke(-1/0,[[[]]])}),it(Jt).fire(O),Tr(O,!0)),t})}function kr(t){function n(f){return t.next(f)}var i=c(n),s=c(function(f){return t.throw(f)});function c(f){return function(w){var g=f(w),w=g.value;return g.done?w:w&&typeof w.then=="function"?w.then(i,s):d(w)?Promise.all(w).then(i,s):i(w)}}return c(n)()}function Dn(t,n,i){for(var s=d(t)?t.slice():[t],c=0;c<i;++c)s.push(n);return s}var ns={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return a(a({},t),{table:function(n){var i=t.table(n),s=i.schema,c={},f=[];function h(v,O,x){var k=$t(v),S=c[k]=c[k]||[],A=v==null?0:typeof v=="string"?1:v.length,I=0<O,I=a(a({},x),{name:I?"".concat(k,"(virtual-from:").concat(x.name,")"):x.name,lowLevelIndex:x,isVirtual:I,keyTail:O,keyLength:A,extractKey:hr(v),unique:!I&&x.unique});return S.push(I),I.isPrimaryKey||f.push(I),1<A&&h(A===2?v[0]:v.slice(0,A-1),O+1,x),S.sort(function(R,B){return R.keyTail-B.keyTail}),I}n=h(s.primaryKey.keyPath,0,s.primaryKey),c[":id"]=[n];for(var g=0,w=s.indexes;g<w.length;g++){var E=w[g];h(E.keyPath,0,E)}function C(v){var O,x=v.query.index;return x.isVirtual?a(a({},v),{query:{index:x.lowLevelIndex,range:(O=v.query.range,x=x.keyTail,{type:O.type===1?2:O.type,lower:Dn(O.lower,O.lowerOpen?t.MAX_KEY:t.MIN_KEY,x),lowerOpen:!0,upper:Dn(O.upper,O.upperOpen?t.MIN_KEY:t.MAX_KEY,x),upperOpen:!0})}}):v}return a(a({},i),{schema:a(a({},s),{primaryKey:n,indexes:f,getIndexByKeyPath:function(v){return(v=c[$t(v)])&&v[0]}}),count:function(v){return i.count(C(v))},query:function(v){return i.query(C(v))},openCursor:function(v){var O=v.query.index,x=O.keyTail,k=O.isVirtual,S=O.keyLength;return k?i.openCursor(C(v)).then(function(I){return I&&A(I)}):i.openCursor(v);function A(I){return Object.create(I,{continue:{value:function(R){R!=null?I.continue(Dn(R,v.reverse?t.MAX_KEY:t.MIN_KEY,x)):v.unique?I.continue(I.key.slice(0,S).concat(v.reverse?t.MIN_KEY:t.MAX_KEY,x)):I.continue()}},continuePrimaryKey:{value:function(R,B){I.continuePrimaryKey(Dn(R,t.MAX_KEY,x),B)}},primaryKey:{get:function(){return I.primaryKey}},key:{get:function(){var R=I.key;return S===1?R[0]:R.slice(0,S)}},value:{get:function(){return I.value}}})}}})}})}};function Sr(t,n,i,s){return i=i||{},s=s||"",p(t).forEach(function(c){var f,h,g;_(n,c)?(f=t[c],h=n[c],typeof f=="object"&&typeof h=="object"&&f&&h?(g=me(f))!==me(h)?i[s+c]=n[c]:g==="Object"?Sr(f,h,i,s+c+"."):f!==h&&(i[s+c]=n[c]):f!==h&&(i[s+c]=n[c])):i[s+c]=void 0}),p(n).forEach(function(c){_(t,c)||(i[s+c]=n[c])}),i}function Cr(t,n){return n.type==="delete"?n.keys:n.keys||n.values.map(t.extractKey)}var rs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return a(a({},t),{table:function(n){var i=t.table(n),s=i.schema.primaryKey;return a(a({},i),{mutate:function(c){var f=te.trans,h=f.table(n).hook,g=h.deleting,w=h.creating,E=h.updating;switch(c.type){case"add":if(w.fire===pe)break;return f._promise("readwrite",function(){return C(c)},!0);case"put":if(w.fire===pe&&E.fire===pe)break;return f._promise("readwrite",function(){return C(c)},!0);case"delete":if(g.fire===pe)break;return f._promise("readwrite",function(){return C(c)},!0);case"deleteRange":if(g.fire===pe)break;return f._promise("readwrite",function(){return(function v(O,x,k){return i.query({trans:O,values:!1,query:{index:s,range:x},limit:k}).then(function(S){var A=S.result;return C({type:"delete",keys:A,trans:O}).then(function(I){return 0<I.numFailures?Promise.reject(I.failures[0]):A.length<k?{failures:[],numFailures:0,lastResult:void 0}:v(O,a(a({},x),{lower:A[A.length-1],lowerOpen:!0}),k)})})})(c.trans,c.range,1e4)},!0)}return i.mutate(c);function C(v){var O,x,k,S=te.trans,A=v.keys||Cr(s,v);if(!A)throw new Error("Keys missing");return(v=v.type==="add"||v.type==="put"?a(a({},v),{keys:A}):a({},v)).type!=="delete"&&(v.values=u([],v.values)),v.keys&&(v.keys=u([],v.keys)),O=i,k=A,((x=v).type==="add"?Promise.resolve([]):O.getMany({trans:x.trans,keys:k,cache:"immutable"})).then(function(I){var R=A.map(function(B,D){var K,V,q,j=I[D],H={onerror:null,onsuccess:null};return v.type==="delete"?g.fire.call(H,B,j,S):v.type==="add"||j===void 0?(K=w.fire.call(H,B,v.values[D],S),B==null&&K!=null&&(v.keys[D]=B=K,s.outbound||Q(v.values[D],s.keyPath,B))):(K=Sr(j,v.values[D]),(V=E.fire.call(H,K,B,j,S))&&(q=v.values[D],Object.keys(V).forEach(function(U){_(q,U)?q[U]=V[U]:Q(q,U,V[U])}))),H});return i.mutate(v).then(function(B){for(var D=B.failures,K=B.results,V=B.numFailures,B=B.lastResult,q=0;q<A.length;++q){var j=(K||A)[q],H=R[q];j==null?H.onerror&&H.onerror(D[q]):H.onsuccess&&H.onsuccess(v.type==="put"&&I[q]?v.values[q]:j)}return{failures:D,results:K,numFailures:V,lastResult:B}}).catch(function(B){return R.forEach(function(D){return D.onerror&&D.onerror(B)}),Promise.reject(B)})})}}})}})}};function Ji(t,n,i){try{if(!n||n.keys.length<t.length)return null;for(var s=[],c=0,f=0;c<n.keys.length&&f<t.length;++c)de(n.keys[c],t[f])===0&&(s.push(i?M(n.values[c]):n.values[c]),++f);return s.length===t.length?s:null}catch{return null}}var is={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return a(a({},i),{getMany:function(s){if(!s.cache)return i.getMany(s);var c=Ji(s.keys,s.trans._cache,s.cache==="clone");return c?G.resolve(c):i.getMany(s).then(function(f){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?M(f):f},f})},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),i.mutate(s)}})}}}};function Xi(t,n){return t.trans.mode==="readonly"&&!!t.subscr&&!t.trans.explicit&&t.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function $i(t,n){switch(t){case"query":return n.values&&!n.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var os={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new ke(t.MIN_KEY,t.MAX_KEY);return a(a({},t),{transaction:function(s,c,f){if(te.subscr&&c!=="readonly")throw new Z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(te.querier));return t.transaction(s,c,f)},table:function(s){var c=t.table(s),f=c.schema,h=f.primaryKey,v=f.indexes,g=h.extractKey,w=h.outbound,E=h.autoIncrement&&v.filter(function(x){return x.compound&&x.keyPath.includes(h.keyPath)}),C=a(a({},c),{mutate:function(x){function k(U){return U="idb://".concat(n,"/").concat(s,"/").concat(U),B[U]||(B[U]=new ke)}var S,A,I,R=x.trans,B=x.mutatedParts||(x.mutatedParts={}),D=k(""),K=k(":dels"),V=x.type,H=x.type==="deleteRange"?[x.range]:x.type==="delete"?[x.keys]:x.values.length<50?[Cr(h,x).filter(function(U){return U}),x.values]:[],q=H[0],j=H[1],H=x.trans._cache;return d(q)?(D.addKeys(q),(H=V==="delete"||q.length===j.length?Ji(q,H):null)||K.addKeys(q),(H||j)&&(S=k,A=H,I=j,f.indexes.forEach(function(U){var X=S(U.name||"");function ue(le){return le!=null?U.extractKey(le):null}function ce(le){return U.multiEntry&&d(le)?le.forEach(function(De){return X.addKey(De)}):X.addKey(le)}(A||I).forEach(function(le,Se){var se=A&&ue(A[Se]),Se=I&&ue(I[Se]);de(se,Se)!==0&&(se!=null&&ce(se),Se!=null&&ce(Se))})}))):q?(j={from:(j=q.lower)!==null&&j!==void 0?j:t.MIN_KEY,to:(j=q.upper)!==null&&j!==void 0?j:t.MAX_KEY},K.add(j),D.add(j)):(D.add(i),K.add(i),f.indexes.forEach(function(U){return k(U.name).add(i)})),c.mutate(x).then(function(U){return!q||x.type!=="add"&&x.type!=="put"||(D.addKeys(U.results),E&&E.forEach(function(X){for(var ue=x.values.map(function(se){return X.extractKey(se)}),ce=X.keyPath.findIndex(function(se){return se===h.keyPath}),le=0,De=U.results.length;le<De;++le)ue[le][ce]=U.results[le];k(X.name).addKeys(ue)})),R.mutatedParts=Rn(R.mutatedParts||{},B),U})}}),v=function(k){var S=k.query,k=S.index,S=S.range;return[k,new ke((k=S.lower)!==null&&k!==void 0?k:t.MIN_KEY,(S=S.upper)!==null&&S!==void 0?S:t.MAX_KEY)]},O={get:function(x){return[h,new ke(x.key)]},getMany:function(x){return[h,new ke().addKeys(x.keys)]},count:v,query:v,openCursor:v};return p(O).forEach(function(x){C[x]=function(k){var S=te.subscr,A=!!S,I=Xi(te,c)&&$i(x,k)?k.obsSet={}:S;if(A){var R=function(j){return j="idb://".concat(n,"/").concat(s,"/").concat(j),I[j]||(I[j]=new ke)},B=R(""),D=R(":dels"),S=O[x](k),A=S[0],S=S[1];if((x==="query"&&A.isPrimaryKey&&!k.values?D:R(A.name||"")).add(S),!A.isPrimaryKey){if(x!=="count"){var K=x==="query"&&w&&k.values&&c.query(a(a({},k),{values:!1}));return c[x].apply(this,arguments).then(function(j){if(x==="query"){if(w&&k.values)return K.then(function(ue){return ue=ue.result,B.addKeys(ue),j});var H=k.values?j.result.map(g):j.result;(k.values?B:D).addKeys(H)}else if(x==="openCursor"){var U=j,X=k.values;return U&&Object.create(U,{key:{get:function(){return D.addKey(U.primaryKey),U.key}},primaryKey:{get:function(){var ue=U.primaryKey;return D.addKey(ue),ue}},value:{get:function(){return X&&B.addKey(U.primaryKey),U.value}}})}return j})}D.add(i)}}return c[x].apply(this,arguments)}}),C}})}};function Zi(t,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var s=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return i.numFailures===s?null:(n=a({},n),d(n.keys)&&(n.keys=n.keys.filter(function(c,f){return!(f in i.failures)})),"values"in n&&d(n.values)&&(n.values=n.values.filter(function(c,f){return!(f in i.failures)})),n)}function Pr(t,n){return i=t,((s=n).lower===void 0||(s.lowerOpen?0<de(i,s.lower):0<=de(i,s.lower)))&&(t=t,(n=n).upper===void 0||(n.upperOpen?de(t,n.upper)<0:de(t,n.upper)<=0));var i,s}function eo(t,n,O,s,c,f){if(!O||O.length===0)return t;var h=n.query.index,g=h.multiEntry,w=n.query.range,E=s.schema.primaryKey.extractKey,C=h.extractKey,v=(h.lowLevelIndex||h).extractKey,O=O.reduce(function(x,k){var S=x,A=[];if(k.type==="add"||k.type==="put")for(var I=new ke,R=k.values.length-1;0<=R;--R){var B,D=k.values[R],K=E(D);I.hasKey(K)||(B=C(D),(g&&d(B)?B.some(function(U){return Pr(U,w)}):Pr(B,w))&&(I.addKey(K),A.push(D)))}switch(k.type){case"add":var V=new ke().addKeys(n.values?x.map(function(X){return E(X)}):x),S=x.concat(n.values?A.filter(function(X){return X=E(X),!V.hasKey(X)&&(V.addKey(X),!0)}):A.map(function(X){return E(X)}).filter(function(X){return!V.hasKey(X)&&(V.addKey(X),!0)}));break;case"put":var q=new ke().addKeys(k.values.map(function(X){return E(X)}));S=x.filter(function(X){return!q.hasKey(n.values?E(X):X)}).concat(n.values?A:A.map(function(X){return E(X)}));break;case"delete":var j=new ke().addKeys(k.keys);S=x.filter(function(X){return!j.hasKey(n.values?E(X):X)});break;case"deleteRange":var H=k.range;S=x.filter(function(X){return!Pr(E(X),H)})}return S},t);return O===t?t:(O.sort(function(x,k){return de(v(x),v(k))||de(E(x),E(k))}),n.limit&&n.limit<1/0&&(O.length>n.limit?O.length=n.limit:t.length===n.limit&&O.length<n.limit&&(c.dirty=!0)),f?Object.freeze(O):O)}function to(t,n){return de(t.lower,n.lower)===0&&de(t.upper,n.upper)===0&&!!t.lowerOpen==!!n.lowerOpen&&!!t.upperOpen==!!n.upperOpen}function as(t,n){return(function(i,s,c,f){if(i===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;if((s=de(i,s))===0){if(c&&f)return 0;if(c)return 1;if(f)return-1}return s})(t.lower,n.lower,t.lowerOpen,n.lowerOpen)<=0&&0<=(function(i,s,c,f){if(i===void 0)return s!==void 0?1:0;if(s===void 0)return-1;if((s=de(i,s))===0){if(c&&f)return 0;if(c)return-1;if(f)return 1}return s})(t.upper,n.upper,t.upperOpen,n.upperOpen)}function ss(t,n,i,s){t.subscribers.add(i),s.addEventListener("abort",function(){var c,f;t.subscribers.delete(i),t.subscribers.size===0&&(c=t,f=n,setTimeout(function(){c.subscribers.size===0&&Ne(f,c)},3e3))})}var us={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name;return a(a({},t),{transaction:function(i,s,c){var f,h,g=t.transaction(i,s,c);return s==="readwrite"&&(h=(f=new AbortController).signal,c=function(w){return function(){if(f.abort(),s==="readwrite"){for(var E=new Set,C=0,v=i;C<v.length;C++){var O=v[C],x=mt["idb://".concat(n,"/").concat(O)];if(x){var k=t.table(O),S=x.optimisticOps.filter(function(X){return X.trans===g});if(g._explicit&&w&&g.mutatedParts)for(var A=0,I=Object.values(x.queries.query);A<I.length;A++)for(var R=0,B=(V=I[A]).slice();R<B.length;R++)_r((q=B[R]).obsSet,g.mutatedParts)&&(Ne(V,q),q.subscribers.forEach(function(X){return E.add(X)}));else if(0<S.length){x.optimisticOps=x.optimisticOps.filter(function(X){return X.trans!==g});for(var D=0,K=Object.values(x.queries.query);D<K.length;D++)for(var V,q,j,H=0,U=(V=K[D]).slice();H<U.length;H++)(q=U[H]).res!=null&&g.mutatedParts&&(w&&!q.dirty?(j=Object.isFrozen(q.res),j=eo(q.res,q.req,S,k,q,j),q.dirty?(Ne(V,q),q.subscribers.forEach(function(X){return E.add(X)})):j!==q.res&&(q.res=j,q.promise=G.resolve({result:j}))):(q.dirty&&Ne(V,q),q.subscribers.forEach(function(X){return E.add(X)})))}}}E.forEach(function(X){return X()})}}},g.addEventListener("abort",c(!1),{signal:h}),g.addEventListener("error",c(!1),{signal:h}),g.addEventListener("complete",c(!0),{signal:h})),g},table:function(i){var s=t.table(i),c=s.schema.primaryKey;return a(a({},s),{mutate:function(f){var h=te.trans;if(c.outbound||h.db._options.cache==="disabled"||h.explicit||h.idbtrans.mode!=="readwrite")return s.mutate(f);var g=mt["idb://".concat(n,"/").concat(i)];return g?(h=s.mutate(f),f.type!=="add"&&f.type!=="put"||!(50<=f.values.length||Cr(c,f).some(function(w){return w==null}))?(g.optimisticOps.push(f),f.mutatedParts&&Bn(f.mutatedParts),h.then(function(w){0<w.numFailures&&(Ne(g.optimisticOps,f),(w=Zi(0,f,w))&&g.optimisticOps.push(w),f.mutatedParts&&Bn(f.mutatedParts))}),h.catch(function(){Ne(g.optimisticOps,f),f.mutatedParts&&Bn(f.mutatedParts)})):h.then(function(w){var E=Zi(0,a(a({},f),{values:f.values.map(function(C,v){var O;return w.failures[v]?C:(C=(O=c.keyPath)!==null&&O!==void 0&&O.includes(".")?M(C):a({},C),Q(C,c.keyPath,w.results[v]),C)})}),w);g.optimisticOps.push(E),queueMicrotask(function(){return f.mutatedParts&&Bn(f.mutatedParts)})}),h):s.mutate(f)},query:function(f){if(!Xi(te,s)||!$i("query",f))return s.query(f);var h=((E=te.trans)===null||E===void 0?void 0:E.db._options.cache)==="immutable",v=te,g=v.requery,w=v.signal,E=(function(k,S,A,I){var R=mt["idb://".concat(k,"/").concat(S)];if(!R)return[];if(!(S=R.queries[A]))return[null,!1,R,null];var B=S[(I.query?I.query.index.name:null)||""];if(!B)return[null,!1,R,null];switch(A){case"query":var D=B.find(function(K){return K.req.limit===I.limit&&K.req.values===I.values&&to(K.req.query.range,I.query.range)});return D?[D,!0,R,B]:[B.find(function(K){return("limit"in K.req?K.req.limit:1/0)>=I.limit&&(!I.values||K.req.values)&&as(K.req.query.range,I.query.range)}),!1,R,B];case"count":return D=B.find(function(K){return to(K.req.query.range,I.query.range)}),[D,!!D,R,B]}})(n,i,"query",f),C=E[0],v=E[1],O=E[2],x=E[3];return C&&v?C.obsSet=f.obsSet:(v=s.query(f).then(function(k){var S=k.result;if(C&&(C.res=S),h){for(var A=0,I=S.length;A<I;++A)Object.freeze(S[A]);Object.freeze(S)}else k.result=M(S);return k}).catch(function(k){return x&&C&&Ne(x,C),Promise.reject(k)}),C={obsSet:f.obsSet,promise:v,subscribers:new Set,type:"query",req:f,dirty:!1},x?x.push(C):(x=[C],(O=O||(mt["idb://".concat(n,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[f.query.index.name||""]=x)),ss(C,x,g,w),C.promise.then(function(k){return{result:eo(k.result,f,O?.optimisticOps,s,C,h)}})}})}})}};function Nn(t,n){return new Proxy(t,{get:function(i,s,c){return s==="db"?n:Reflect.get(i,s,c)}})}var Qe=(we.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Z.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,i=n.filter(function(s){return s._cfg.version===t})[0];return i||(i=new this.Version(t),n.push(i),n.sort(Xa),i.stores({}),this._state.autoSchema=!1,i)},we.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||te.letThrough||this._vip)?t():new G(function(i,s){if(n._state.openComplete)return s(new Z.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void s(new Z.DatabaseClosed);n.open().catch(pe)}n._state.dbReadyPromise.then(i,s)}).then(t)},we.prototype.use=function(t){var n=t.stack,i=t.create,s=t.level,c=t.name;return c&&this.unuse({stack:n,name:c}),t=this._middlewares[n]||(this._middlewares[n]=[]),t.push({stack:n,create:i,level:s??10,name:c}),t.sort(function(f,h){return f.level-h.level}),this},we.prototype.unuse=function(t){var n=t.stack,i=t.name,s=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(c){return s?c.create!==s:!!i&&c.name!==i})),this},we.prototype.open=function(){var t=this;return ht(Ze,function(){return ts(t)})},we.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,n=Ct.indexOf(this);if(0<=n&&Ct.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new G(function(i){t.dbReadyResolve=i}),t.openCanceller=new G(function(i,s){t.cancelOpen=s}))},we.prototype.close=function(i){var n=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;n?(i.isBeingOpened&&i.cancelOpen(new Z.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new Z.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},we.prototype.delete=function(t){var n=this;t===void 0&&(t={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",s=this._state;return new G(function(c,f){function h(){n.close(t);var g=n._deps.indexedDB.deleteDatabase(n.name);g.onsuccess=ve(function(){var w,E,C;w=n._deps,E=n.name,C=w.indexedDB,w=w.IDBKeyRange,vr(C)||E===wn||yr(C,w).delete(E).catch(pe),c()}),g.onerror=ze(f),g.onblocked=n._fireOnBlocked}if(i)throw new Z.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(h):h()})},we.prototype.backendDB=function(){return this.idbdb},we.prototype.isOpen=function(){return this.idbdb!==null},we.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},we.prototype.hasFailed=function(){return this._state.dbOpenError!==null},we.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(we.prototype,"tables",{get:function(){var t=this;return p(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),we.prototype.transaction=function(){var t=(function(n,i,s){var c=arguments.length;if(c<2)throw new Z.InvalidArgument("Too few arguments");for(var f=new Array(c-1);--c;)f[c-1]=arguments[c];return s=f.pop(),[n,ae(f),s]}).apply(this,arguments);return this._transaction.apply(this,t)},we.prototype._transaction=function(t,n,i){var s=this,c=te.trans;c&&c.db===this&&t.indexOf("!")===-1||(c=null);var f,h,g=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{if(h=n.map(function(E){if(E=E instanceof s.Table?E.name:E,typeof E!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return E}),t=="r"||t===ar)f=ar;else{if(t!="rw"&&t!=sr)throw new Z.InvalidArgument("Invalid transaction mode: "+t);f=sr}if(c){if(c.mode===ar&&f===sr){if(!g)throw new Z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&h.forEach(function(E){if(c&&c.storeNames.indexOf(E)===-1){if(!g)throw new Z.SubTransaction("Table "+E+" not included in parent transaction.");c=null}}),g&&c&&!c.active&&(c=null)}}catch(E){return c?c._promise(null,function(C,v){v(E)}):be(E)}var w=(function E(C,v,O,x,k){return G.resolve().then(function(){var S=te.transless||te,A=C._createTransaction(v,O,C._dbSchema,x);if(A.explicit=!0,S={trans:A,transless:S},x)A.idbtrans=x.idbtrans;else try{A.create(),A.idbtrans._explicit=!0,C._state.PR1398_maxLoop=3}catch(B){return B.name===Re.InvalidState&&C.isOpen()&&0<--C._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),C.close({disableAutoOpen:!1}),C.open().then(function(){return E(C,v,O,null,k)})):be(B)}var I,R=Te(k);return R&&St(),S=G.follow(function(){var B;(I=k.call(A,A))&&(R?(B=tt.bind(null,null),I.then(B,B)):typeof I.next=="function"&&typeof I.throw=="function"&&(I=kr(I)))},S),(I&&typeof I.then=="function"?G.resolve(I).then(function(B){return A.active?B:be(new Z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return I})).then(function(B){return x&&A._resolve(),A._completion.then(function(){return B})}).catch(function(B){return A._reject(B),be(B)})})}).bind(null,this,f,h,c,i);return c?c._promise(f,w,"lock"):te.trans?ht(te.transless,function(){return s._whenReady(w)}):this._whenReady(w)},we.prototype.table=function(t){if(!_(this._allTables,t))throw new Z.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},we);function we(t,n){var i=this;this._middlewares={},this.verno=0;var s=we.dependencies;this._options=n=a({addons:we.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},s=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,f,h,g,w,E={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:pe,dbReadyPromise:null,cancelOpen:pe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};E.dbReadyPromise=new G(function(v){E.dbReadyResolve=v}),E.openCanceller=new G(function(v,O){E.cancelOpen=O}),this._state=E,this.name=t,this.on=Gt(this,"populate","blocked","versionchange","close",{ready:[Xn,pe]}),this.once=function(v,O){var x=function(){for(var k=[],S=0;S<arguments.length;S++)k[S]=arguments[S];i.on(v).unsubscribe(x),O.apply(i,k)};return i.on(v,x)},this.on.ready.subscribe=W(this.on.ready.subscribe,function(v){return function(O,x){we.vip(function(){var k,S=i._state;S.openComplete?(S.dbOpenError||G.resolve().then(O),x&&v(O)):S.onReadyBeingFired?(S.onReadyBeingFired.push(O),x&&v(O)):(v(O),k=i,x||v(function A(){k.on.ready.unsubscribe(O),k.on.ready.unsubscribe(A)}))})}}),this.Collection=(c=this,Yt(Va.prototype,function(I,A){this.db=c;var x=Oi,k=null;if(A)try{x=A()}catch(R){k=R}var S=I._ctx,A=S.table,I=A.hook.reading.fire;this._ctx={table:A,index:S.index,isPrimKey:!S.index||A.schema.primKey.keyPath&&S.index===A.schema.primKey.name,range:x,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:k,or:S.or,valueMapper:I!==jt?I:null}})),this.Table=(f=this,Yt(Mi.prototype,function(v,O,x){this.db=f,this._tx=x,this.name=v,this.schema=O,this.hook=f._allTables[v]?f._allTables[v].hook:Gt(null,{creating:[Na,pe],reading:[Da,jt],updating:[Fa,pe],deleting:[Ma,pe]})})),this.Transaction=(h=this,Yt(Ga.prototype,function(v,O,x,k,S){var A=this;v!=="readonly"&&O.forEach(function(I){I=(I=x[I])===null||I===void 0?void 0:I.yProps,I&&(O=O.concat(I.map(function(R){return R.updatesTable})))}),this.db=h,this.mode=v,this.storeNames=O,this.schema=x,this.chromeTransactionDurability=k,this.idbtrans=null,this.on=Gt(this,"complete","error","abort"),this.parent=S||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new G(function(I,R){A._resolve=I,A._reject=R}),this._completion.then(function(){A.active=!1,A.on.complete.fire()},function(I){var R=A.active;return A.active=!1,A.on.error.fire(I),A.parent?A.parent._reject(I):R&&A.idbtrans&&A.idbtrans.abort(),be(I)})})),this.Version=(g=this,Yt(es.prototype,function(v){this.db=g,this._cfg={version:v,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(w=this,Yt(ji.prototype,function(v,O,x){if(this.db=w,this._ctx={table:v,index:O===":id"?null:O,or:x},this._cmp=this._ascending=de,this._descending=function(k,S){return de(S,k)},this._max=function(k,S){return 0<de(k,S)?k:S},this._min=function(k,S){return de(k,S)<0?k:S},this._IDBKeyRange=w._deps.IDBKeyRange,!this._IDBKeyRange)throw new Z.MissingAPI})),this.on("versionchange",function(v){0<v.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(v){!v.newVersion||v.newVersion<v.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(v.oldVersion/10))}),this._maxKey=Xt(n.IDBKeyRange),this._createTransaction=function(v,O,x,k){return new i.Transaction(v,O,x,i._options.chromeTransactionDurability,k)},this._fireOnBlocked=function(v){i.on("blocked").fire(v),Ct.filter(function(O){return O.name===i.name&&O!==i&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(v)})},this.use(is),this.use(us),this.use(os),this.use(ns),this.use(rs);var C=new Proxy(this,{get:function(v,O,x){if(O==="_vip")return!0;if(O==="table")return function(S){return Nn(i.table(S),C)};var k=Reflect.get(v,O,x);return k instanceof Mi?Nn(k,C):O==="tables"?k.map(function(S){return Nn(S,C)}):O==="_createTransaction"?function(){return Nn(k.apply(this,arguments),C)}:k}});this.vip=C,s.forEach(function(v){return v(i)})}var Mn,Me=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",cs=(Ar.prototype.subscribe=function(t,n,i){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:i})},Ar.prototype[Me]=function(){return this},Ar);function Ar(t){this._subscribe=t}try{Mn={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Mn={indexedDB:null,IDBKeyRange:null}}function no(t){var n,i=!1,s=new cs(function(c){var f=Te(t),h,g=!1,w={},E={},C={get closed(){return g},unsubscribe:function(){g||(g=!0,h&&h.abort(),v&&it.storagemutated.unsubscribe(x))}};c.start&&c.start(C);var v=!1,O=function(){return or(k)},x=function(S){Rn(w,S),_r(E,w)&&O()},k=function(){var S,A,I;!g&&Mn.indexedDB&&(w={},S={},h&&h.abort(),h=new AbortController,I=(function(R){var B=Tt();try{f&&St();var D=et(t,R);return D=f?D.finally(tt):D}finally{B&&kt()}})(A={subscr:S,signal:h.signal,requery:O,querier:t,trans:null}),Promise.resolve(I).then(function(R){i=!0,n=R,g||A.signal.aborted||(w={},(function(B){for(var D in B)if(_(B,D))return;return 1})(E=S)||v||(it(Jt,x),v=!0),or(function(){return!g&&c.next&&c.next(R)}))},function(R){i=!1,["DatabaseClosedError","AbortError"].includes(R?.name)||g||or(function(){g||c.error&&c.error(R)})}))};return setTimeout(O,0),C});return s.hasValue=function(){return i},s.getValue=function(){return n},s}var yt=Qe;function Or(t){var n=ot;try{ot=!0,it.storagemutated.fire(t),Tr(t,!0)}finally{ot=n}}T(yt,a(a({},fn),{delete:function(t){return new yt(t,{addons:[]}).delete()},exists:function(t){return new yt(t,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return n=yt.dependencies,i=n.indexedDB,n=n.IDBKeyRange,(vr(i)?Promise.resolve(i.databases()).then(function(s){return s.map(function(c){return c.name}).filter(function(c){return c!==wn})}):yr(i,n).toCollection().primaryKeys()).then(t)}catch{return be(new Z.MissingAPI)}var n,i},defineClass:function(){return function(t){y(this,t)}},ignoreTransaction:function(t){return te.trans?ht(te.transless,t):t()},vip:br,async:function(t){return function(){try{var n=kr(t.apply(this,arguments));return n&&typeof n.then=="function"?n:G.resolve(n)}catch(i){return be(i)}}},spawn:function(t,n,i){try{var s=kr(t.apply(i,n||[]));return s&&typeof s.then=="function"?s:G.resolve(s)}catch(c){return be(c)}},currentTransaction:{get:function(){return te.trans||null}},waitFor:function(t,n){return n=G.resolve(typeof t=="function"?yt.ignoreTransaction(t):t).timeout(n||6e4),te.trans?te.trans.waitFor(n):n},Promise:G,debug:{get:function(){return je},set:function(t){xi(t)}},derive:F,extend:y,props:T,override:W,Events:Gt,on:it,liveQuery:no,extendObservabilitySet:Rn,getByKeyPath:Y,setByKeyPath:Q,delByKeyPath:function(t,n){typeof n=="string"?Q(t,n,void 0):"length"in n&&[].map.call(n,function(i){Q(t,i,void 0)})},shallowClone:ne,deepClone:M,getObjectDiff:Sr,cmp:de,asap:fe,minKey:-1/0,addons:[],connections:Ct,errnames:Re,dependencies:Mn,cache:mt,semVer:"4.2.1",version:"4.2.1".split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,i){return t+n/Math.pow(10,2*i)})})),yt.maxKey=Xt(yt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(it(Jt,function(t){ot||(t=new CustomEvent(lr,{detail:t}),ot=!0,dispatchEvent(t),ot=!1)}),addEventListener(lr,function(t){t=t.detail,ot||Or(t)}));var It,ot=!1,ro=function(){};return typeof BroadcastChannel<"u"&&((ro=function(){(It=new BroadcastChannel(lr)).onmessage=function(t){return t.data&&Or(t.data)}})(),typeof It.unref=="function"&&It.unref(),it(Jt,function(t){ot||It.postMessage(t)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(t){if(!Qe.disableBfCache&&t.persisted){je&&console.debug("Dexie: handling persisted pagehide"),It?.close();for(var n=0,i=Ct;n<i.length;n++)i[n].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!Qe.disableBfCache&&t.persisted&&(je&&console.debug("Dexie: handling persisted pageshow"),ro(),Or({all:new ke(-1/0,[[]])}))})),G.rejectionMapper=function(t,n){return!t||t instanceof Ke||t instanceof TypeError||t instanceof SyntaxError||!t.name||!xt[t.name]?t:(n=new xt[t.name](n||t.message,t),"stack"in t&&L(n,"stack",{get:function(){return this.inner.stack}}),n)},xi(je),a(Qe,Object.freeze({__proto__:null,Dexie:Qe,liveQuery:no,Entity:Ii,cmp:de,PropModification:Wt,replacePrefix:function(t,n){return new Wt({replacePrefix:[t,n]})},add:function(t){return new Wt({add:t})},remove:function(t){return new Wt({remove:t})},default:Qe,RangeSet:ke,mergeRanges:en,rangesOverlap:Wi}),{default:Qe}),Qe})})(Hn)),Hn.exports}var bs=vs();const hi=mi(bs),ho=Symbol.for("Dexie"),Gn=globalThis[ho]||(globalThis[ho]=hi);if(hi.semVer!==Gn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${hi.semVer} and ${Gn.semVer}`);const{liveQuery:Ic,mergeRanges:Rc,rangesOverlap:Bc,RangeSet:Dc,cmp:Nc,Entity:Mc,PropModification:Fc,replacePrefix:qc,add:Lc,remove:Kc,DexieYProvider:jc}=Gn,ws="dexie_kv_db";let Le=sn(void 0),tn=sn(!1);const Mr={async init_db(){if(xe(Le)&&xe(tn))return xe(Le);try{return Xe(Le,new Gn(ws),!0),xe(Le).version(1).stores({items:"++id, &only_key, any_type_value, update_time, remark"}),await xe(Le).open(),Xe(tn,!0),xe(Le)}catch(e){throw console.error("æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥:",e),e}},async ensureDB(){return!xe(Le)||!xe(tn)?await this.init_db():xe(Le)},get_time_s_date(e,r=""){let o;r?o=new Date(typeof r=="number"?r:parseInt(r,10)):o=new Date,isNaN(o.getTime())&&(o=new Date);let a=o.getSeconds(),u=o.getMinutes(),l=o.getHours(),p=o.getDate(),d=o.getMonth()+1,y=o.getFullYear(),b=["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"][o.getDay()];a=a<10?"0"+a:a,u=u<10?"0"+u:u,l=l<10?"0"+l:l,p=p<10?"0"+p:p,d=d<10?"0"+d:d;let m=e;return m=m.replaceAll("Y",y),m=m.replaceAll("m",d),m=m.replaceAll("d",p),m=m.replaceAll("H",l),m=m.replaceAll("i",u),m=m.replaceAll("s",a),m=m.replaceAll("W",b),m*1},async test_db(){let e=this;try{let r=[{only_key:"test",any_type_value:{test:2025},update_time:e.get_time_s_date("YmdHis"),remark:"æµ‹è¯•"}];const o=await this.update_db_data(r);return console.log("æµ‹è¯•æ•°æ®æ’å…¥æˆåŠŸ, IDs:",o),o}catch(r){return console.error("æµ‹è¯•å¤±è´¥:",r),[]}},async update_db_data(e=[]){let r=this;if(!Array.isArray(e)||e.length===0)return console.warn("è¦å­˜å‚¨çš„æ•°æ®æ ¼å¼ä¸æ­£ç¡®æˆ–ä¸ºç©º"),[];try{const o=await this.ensureDB(),a=[];return await o.transaction("rw",o.items,async()=>{for(const u of e){if(!u.only_key||u.only_key.indexOf("%")!==-1||u.only_key.indexOf("&")!==-1||u.only_key.indexOf("^")!==-1||u.only_key.indexOf("$")!==-1||u.only_key.indexOf("!")!==-1){console.warn("only_keyç¼ºå¤±æˆ–å«æœ‰éæ³•å­—ç¬¦, è·³è¿‡:",u);continue}const l=await o.items.where("only_key").equals(u.only_key).first(),p=r.get_time_s_date("YmdHis");if(l)await o.items.update(l.id,{any_type_value:u.any_type_value,update_time:p,remark:u.remark!==void 0?u.remark:l.remark}),a.push(l.id);else{const d={only_key:u.only_key,any_type_value:u.any_type_value,update_time:u.update_time||p,remark:u.remark||""},y=await o.items.add(d);a.push(y)}}}),a}catch(o){return console.error("æ›´æ–°æ•°æ®å¤±è´¥:",o),[]}},async get_db_data(e="test"){if(e.indexOf("%")!==-1||e.indexOf("&")!==-1||e.indexOf("^")!==-1||e.indexOf("$")!==-1||e.indexOf("!")!==-1)return console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",e),null;try{const o=await(await this.ensureDB()).items.where("only_key").equals(e).toArray();return o.length>0?o[0]:null}catch(r){return console.error("æŸ¥è¯¢æ•°æ®å¤±è´¥:",r),null}},async get_has_prefix_key_db_datas(e="test"){if(e.indexOf("%")!==-1||e.indexOf("&")!==-1||e.indexOf("^")!==-1||e.indexOf("$")!==-1||e.indexOf("!")!==-1)return console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",e),[];try{return await(await this.ensureDB()).items.where("only_key").startsWith(e).toArray()}catch(r){return console.error("æŸ¥è¯¢å‰ç¼€æ•°æ®å¤±è´¥:",r),[]}},async get_contains_key_db_datas(e=""){if(e.indexOf("%")!==-1||e.indexOf("&")!==-1||e.indexOf("^")!==-1||e.indexOf("$")!==-1||e.indexOf("!")!==-1)return console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",e),[];try{return(await(await this.ensureDB()).items.toArray()).filter(a=>a.only_key&&a.only_key.includes(e))}catch(r){return console.error("æŸ¥è¯¢åŒ…å«å­—ç¬¦çš„æ•°æ®å¤±è´¥:",r),[]}},async del_db_data(e="test"){if(e.indexOf("%")!==-1||e.indexOf("&")!==-1||e.indexOf("^")!==-1||e.indexOf("$")!==-1||e.indexOf("!")!==-1)return console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",e),!1;try{return await(await this.ensureDB()).items.where("only_key").equals(e).delete()>0}catch(r){return console.error("åˆ é™¤æ•°æ®å¤±è´¥:",r),!1}},async del_timeout_db_datas(e,r){if(!e||!r)return console.warn("è¯·æä¾›æœ‰æ•ˆçš„æ—¶é—´èŒƒå›´"),0;try{const o=await this.ensureDB(),a=Number(e),u=Number(r);return isNaN(a)||isNaN(u)?(console.warn("æ—¶é—´å‚æ•°æ— æ•ˆ"),0):await o.items.where("update_time").between(a,u).delete()}catch(o){return console.error("åˆ é™¤æ—¶é—´æ®µæ•°æ®å¤±è´¥:",o),0}},async del_has_prefix_key_db_datas(e="test"){if(e.indexOf("%")!==-1||e.indexOf("&")!==-1||e.indexOf("^")!==-1||e.indexOf("$")!==-1||e.indexOf("!")!==-1)return console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",e),0;try{return await(await this.ensureDB()).items.where("only_key").startsWith(e).delete()}catch(r){return console.error("åˆ é™¤å‰ç¼€æ•°æ®å¤±è´¥:",r),0}},async get_all_db_data(){try{return await(await this.ensureDB()).items.toArray()}catch(e){return console.error("è·å–æ‰€æœ‰æ•°æ®å¤±è´¥:",e),[]}},async get_db_data_count(){try{return await(await this.ensureDB()).items.count()}catch(e){return console.error("ç»Ÿè®¡æ•°æ®æ•°é‡å¤±è´¥:",e),0}},async del_many_db_data(e=[]){try{const r=await this.ensureDB();let o=0;return await r.transaction("rw",r.items,async()=>{for(const a of e){if(a.indexOf("%")!==-1||a.indexOf("&")!==-1||a.indexOf("^")!==-1||a.indexOf("$")!==-1||a.indexOf("!")!==-1){console.warn("only_keyå«æœ‰éæ³•å­—ç¬¦:",a);continue}const u=await r.items.where("only_key").equals(a).delete();o+=u}}),o}catch(r){return console.error("æ‰¹é‡åˆ é™¤æ•°æ®å¤±è´¥:",r),0}},async close_db(){if(xe(Le)&&xe(tn))try{await xe(Le).close(),Xe(Le,null),Xe(tn,!1)}catch(e){console.error("å…³é—­æ•°æ®åº“å¤±è´¥:",e)}}},Ln=Kt({alert_show:"hide",alert_msg:""}),Kn=Kt({loading_show:"hide",loading_msg:""});var _s=Object.defineProperty,la=e=>{throw TypeError(e)},Es=(e,r,o)=>r in e?_s(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,at=(e,r,o)=>Es(e,typeof r!="symbol"?r+"":r,o),xs=(e,r,o)=>r.has(e)||la("Cannot "+o),po=(e,r,o)=>(xs(e,r,"read from private field"),r.get(e)),Ts=(e,r,o)=>r.has(e)?la("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,o);function zc(e){return e==null?[]:Array.isArray(e)?e:[e]}var go=e=>e?.constructor.name==="Array",ks=(e,r)=>{if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(!fa(e[o],r[o]))return!1;return!0},fa=(e,r)=>{if(Object.is(e,r))return!0;if(e==null&&r!=null||e!=null&&r==null)return!1;if(typeof e?.isEqual=="function"&&typeof r?.isEqual=="function")return e.isEqual(r);if(typeof e=="function"&&typeof r=="function")return e.toString()===r.toString();if(go(e)&&go(r))return ks(Array.from(e),Array.from(r));if(typeof e!="object"||typeof r!="object")return!1;const o=Object.keys(r??Object.create(null)),a=o.length;for(let u=0;u<a;u++)if(!Reflect.has(e,o[u]))return!1;for(let u=0;u<a;u++){const l=o[u];if(!fa(e[l],r[l]))return!1}return!0},Ss=e=>e!=null&&typeof e=="object",Fr=e=>typeof e=="string",da=e=>typeof e=="function",Cs=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),Ps=e=>Object.prototype.toString.call(e),ha=Function.prototype.toString,As=ha.call(Object),Os=e=>{if(!Ss(e)||Ps(e)!="[object Object]"||Bs(e))return!1;const r=Object.getPrototypeOf(e);if(r===null)return!0;const o=Cs(r,"constructor")&&r.constructor;return typeof o=="function"&&o instanceof o&&ha.call(o)==As},Is=e=>typeof e=="object"&&e!==null&&"$$typeof"in e&&"props"in e,Rs=e=>typeof e=="object"&&e!==null&&"__v_isVNode"in e,Bs=e=>Is(e)||Rs(e),jn=(e,...r)=>(typeof e=="function"?e(...r):e)??void 0,Uc=e=>e(),pi=(...e)=>(...r)=>{e.forEach(function(o){o?.(...r)})},pa=(()=>{let e=0;return()=>(e++,e.toString(36))})();function ga(e){if(!Os(e)||e===void 0)return e;const r=Reflect.ownKeys(e).filter(a=>typeof a=="string"),o={};for(const a of r){const u=e[a];u!==void 0&&(o[a]=ga(u))}return o}function Ds(e,r){const o={},a={},u=new Set(r),l=Reflect.ownKeys(e);for(const p of l)u.has(p)?a[p]=e[p]:o[p]=e[p];return[a,o]}var Vc=e=>function(o){return Ds(o,e)},zn=()=>performance.now(),Wn,Ns=class{constructor(e){this.onTick=e,at(this,"frameId",null),at(this,"pausedAtMs",null),at(this,"context"),at(this,"cancelFrame",()=>{this.frameId!==null&&(cancelAnimationFrame(this.frameId),this.frameId=null)}),at(this,"setStartMs",r=>{this.context.startMs=r}),at(this,"start",()=>{if(this.frameId!==null)return;const r=zn();this.pausedAtMs!==null?(this.context.startMs+=r-this.pausedAtMs,this.pausedAtMs=null):this.context.startMs=r,this.frameId=requestAnimationFrame(po(this,Wn))}),at(this,"pause",()=>{this.frameId!==null&&(this.cancelFrame(),this.pausedAtMs=zn())}),at(this,"stop",()=>{this.frameId!==null&&(this.cancelFrame(),this.pausedAtMs=null)}),Ts(this,Wn,r=>{if(this.context.now=r,this.context.deltaMs=r-this.context.startMs,this.onTick(this.context)===!1){this.stop();return}this.frameId=requestAnimationFrame(po(this,Wn))}),this.context={now:0,startMs:zn(),deltaMs:0}}get elapsedMs(){return this.pausedAtMs!==null?this.pausedAtMs-this.context.startMs:zn()-this.context.startMs}};Wn=new WeakMap;function qr(e,r){const o=new Ns(({deltaMs:a})=>{if(a>=r)return e(),!1});return o.start(),()=>o.stop()}function yi(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function Hc(e,r){if(e==null)throw new Error(r())}function Ms(e,r,o){let a=[];for(const u of r)e[u]==null&&a.push(u);if(a.length>0)throw new Error(`[zag-js${` > ${o}`}] missing required props: ${a.join(", ")}`)}var Fs=Object.defineProperty,qs=(e,r,o)=>r in e?Fs(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,Lr=(e,r,o)=>qs(e,typeof r!="symbol"?r+"":r,o),ma=()=>{},Qn=e=>typeof e=="object"&&e!==null,Ls=2147483647,Rt=e=>e?"":void 0,Ks=1,js=9,zs=11,Pe=e=>Qn(e)&&e.nodeType===Ks&&typeof e.nodeName=="string",vi=e=>Qn(e)&&e.nodeType===js,Us=e=>Qn(e)&&e===e.window,ya=e=>Pe(e)?e.localName||"":"#document";function Vs(e){return["html","body","#document"].includes(ya(e))}var Hs=e=>Qn(e)&&e.nodeType!==void 0,Lt=e=>Hs(e)&&e.nodeType===zs&&"host"in e,Ws=e=>Pe(e)&&e.localName==="input",Gs=e=>Pe(e)?e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0:!1;function Ys(e){if(!e)return!1;const r=e.getRootNode();return va(r)===e}var Qs=/(textarea|select)/;function Js(e){if(e==null||!Pe(e))return!1;try{return Ws(e)&&e.selectionStart!=null||Qs.test(e.localName)||e.isContentEditable||e.getAttribute("contenteditable")==="true"||e.getAttribute("contenteditable")===""}catch{return!1}}function an(e,r){if(!e||!r||!Pe(e)||!Pe(r))return!1;const o=r.getRootNode?.();if(e===r||e.contains(r))return!0;if(o&&Lt(o)){let a=r;for(;a;){if(e===a)return!0;a=a.parentNode||a.host}}return!1}function wt(e){return vi(e)?e:Us(e)?e.document:e?.ownerDocument??document}function Xs(e){return wt(e).documentElement}function un(e){return Lt(e)?un(e.host):vi(e)?e.defaultView??window:Pe(e)?e.ownerDocument?.defaultView??window:window}function va(e){let r=e.activeElement;for(;r?.shadowRoot;){const o=r.shadowRoot.activeElement;if(!o||o===r)break;r=o}return r}function $s(e){if(ya(e)==="html")return e;const r=e.assignedSlot||e.parentNode||Lt(e)&&e.host||Xs(e);return Lt(r)?r.host:r}function bi(e){let r;try{if(r=e.getRootNode({composed:!0}),vi(r)||Lt(r))return r}catch{}return e.ownerDocument??document}var Kr=new WeakMap;function Wc(e){return Kr.has(e)||Kr.set(e,un(e).getComputedStyle(e)),Kr.get(e)}var wi=new Set(["menu","listbox","dialog","grid","tree","region"]),Zs=e=>wi.has(e),ba=e=>e.getAttribute("aria-controls")?.split(" ")||[];function eu(e,r){const o=new Set,a=bi(e),u=l=>{const p=l.querySelectorAll("[aria-controls]");for(const d of p){if(d.getAttribute("aria-expanded")!=="true")continue;const y=ba(d);for(const b of y){if(!b||o.has(b))continue;o.add(b);const m=a.getElementById(b);if(m){const _=m.getAttribute("role"),T=m.getAttribute("aria-modal")==="true";if(_&&Zs(_)&&!T&&(m===r||m.contains(r)||u(m)))return!0}}}return!1};return u(e)}function tu(e,r){const o=bi(e),a=new Set,u=l=>{const p=l.querySelectorAll("[aria-controls]");for(const d of p){if(d.getAttribute("aria-expanded")!=="true")continue;const y=ba(d);for(const b of y){if(!b||a.has(b))continue;a.add(b);const m=o.getElementById(b);if(m){const _=m.getAttribute("role"),T=m.getAttribute("aria-modal")==="true";_&&wi.has(_)&&!T&&(r(m),u(m))}}}};u(e)}function Gc(e){const r=new Set;return tu(e,o=>{e.contains(o)||r.add(o)}),Array.from(r)}function nu(e){const r=e.getAttribute("role");return!!(r&&wi.has(r))}function ru(e){return e.hasAttribute("aria-controls")&&e.getAttribute("aria-expanded")==="true"}function Yc(e){return ru(e)?!0:!!e.querySelector?.('[aria-controls][aria-expanded="true"]')}function Qc(e){if(!e.id)return!1;const r=bi(e),o=CSS.escape(e.id),a=`[aria-controls~="${o}"][aria-expanded="true"], [aria-controls="${o}"][aria-expanded="true"]`;return!!(r.querySelector(a)&&nu(e))}var wa=()=>typeof document<"u";function iu(){return navigator.userAgentData?.platform??navigator.platform}var _i=e=>wa()&&e.test(iu()),mo=()=>wa()&&!!navigator.maxTouchPoints,ou=()=>_i(/^iPhone/i),au=()=>_i(/^iPad/i)||_a()&&navigator.maxTouchPoints>1,Jc=()=>ou()||au(),_a=()=>_i(/^Mac/i);function su(e){return e.composedPath?.()??e.nativeEvent?.composedPath?.()}function Yn(e){return su(e)?.[0]??e.target}var uu=e=>e.button===2||_a()&&e.ctrlKey&&e.button===0,Ft=(e,r,o,a)=>{const u=typeof e=="function"?e():e;return u?.addEventListener(r,o,a),()=>{u?.removeEventListener(r,o,a)}},Ea=e=>Pe(e)&&e.tagName==="IFRAME",cu=/^(audio|video|details)$/;function xa(e){const r=e.getAttribute("tabindex");return r?parseInt(r,10):NaN}var lu=e=>!Number.isNaN(xa(e)),fu=e=>xa(e)<0;function du(e,r){if(!r)return null;if(r===!0)return e.shadowRoot||null;const o=r(e);return(o===!0?e.shadowRoot:o)||null}function Ta(e,r,o){const a=[...e],u=[...e],l=new Set,p=new Map;e.forEach((y,b)=>p.set(y,b));let d=0;for(;d<u.length;){const y=u[d++];if(!y||l.has(y))continue;l.add(y);const b=du(y,r);if(b){const m=Array.from(b.querySelectorAll(Jn)).filter(o),_=p.get(y);if(_!==void 0){const T=_+1;a.splice(T,0,...m),m.forEach((P,L)=>{p.set(P,T+L)});for(let P=T+m.length;P<a.length;P++)p.set(a[P],P)}else{const T=a.length;a.push(...m),m.forEach((P,L)=>{p.set(P,T+L)})}u.push(...m)}}return a}var Jn="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",hu=(e,r={})=>{if(!e)return[];const{includeContainer:o=!1,getShadowRoot:a}=r,u=Array.from(e.querySelectorAll(Jn));(o==!0||o=="if-empty"&&u.length===0)&&Pe(e)&&qt(e)&&u.unshift(e);const p=[];for(const d of u)if(qt(d)){if(Ea(d)&&d.contentDocument){const y=d.contentDocument.body;p.push(...hu(y,{getShadowRoot:a}));continue}p.push(d)}return a?Ta(p,a,qt):p};function qt(e){return!Pe(e)||e.closest("[inert]")?!1:e.matches(Jn)&&Gs(e)}function pu(e,r={}){if(!e)return[];const{includeContainer:o,getShadowRoot:a}=r,u=Array.from(e.querySelectorAll(Jn));o&&jr(e)&&u.unshift(e);const l=[];for(const p of u)if(jr(p)){if(Ea(p)&&p.contentDocument){const d=p.contentDocument.body;l.push(...pu(d,{getShadowRoot:a}));continue}l.push(p)}if(a){const p=Ta(l,a,jr);return!p.length&&o?u:p}return!l.length&&o?u:l}function jr(e){return Pe(e)&&e.tabIndex>0?!0:qt(e)&&!fu(e)}function Xc(e){return e.tabIndex<0&&(cu.test(e.localName)||Js(e))&&!lu(e)?0:e.tabIndex}var ka=class Sa{constructor(){Lr(this,"id",null),Lr(this,"fn_cleanup"),Lr(this,"cleanup",()=>{this.cancel()})}static create(){return new Sa}request(r){this.cancel(),this.id=globalThis.requestAnimationFrame(()=>{this.id=null,this.fn_cleanup=r?.()})}cancel(){this.id!==null&&(globalThis.cancelAnimationFrame(this.id),this.id=null),this.fn_cleanup?.(),this.fn_cleanup=void 0}isActive(){return this.id!==null}};function bt(e){const r=ka.create();return r.request(e),r.cleanup}function gi(e){const r=$s(e);return Vs(r)?wt(r).body:Pe(r)&&yu(r)?r:gi(r)}var gu=/auto|scroll|overlay|hidden|clip/,mu=new Set(["inline","contents"]);function yu(e){const r=un(e),{overflow:o,overflowX:a,overflowY:u,display:l}=r.getComputedStyle(e);return gu.test(o+u+a)&&!mu.has(l)}function vu(e,r){if(!e)return ma;const o=Object.keys(r).reduce((a,u)=>(a[u]=e.style.getPropertyValue(u),a),{});return Object.assign(e.style,r),()=>{Object.assign(e.style,o),e.style.length===0&&e.removeAttribute("style")}}function $c(e,r,o){if(!e)return ma;const a=e.style.getPropertyValue(r);return e.style.setProperty(r,o),()=>{e.style.setProperty(r,a),e.style.length===0&&e.removeAttribute("style")}}function bu(e,r,o){const{signal:a}=r;return[new Promise((p,d)=>{const y=setTimeout(()=>{d(new Error(`Timeout of ${o}ms exceeded`))},o);a.addEventListener("abort",()=>{clearTimeout(y),d(new Error("Promise aborted"))}),e.then(b=>{a.aborted||(clearTimeout(y),p(b))}).catch(b=>{a.aborted||(clearTimeout(y),d(b))})}),()=>r.abort()]}function wu(e,r){const{timeout:o,rootNode:a}=r,u=un(a),l=wt(a),p=new u.AbortController;return bu(new Promise(d=>{const y=e();if(y){d(y);return}const b=new u.MutationObserver(()=>{const m=e();m&&m.isConnected&&(b.disconnect(),d(m))});b.observe(l.body,{childList:!0,subtree:!0})}),p,o)}var _u=(...e)=>e.map(r=>r?.trim?.()).filter(Boolean).join(" "),Eu=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,yo=e=>{const r={};let o;for(;o=Eu.exec(e);)r[o[1]]=o[2];return r},xu=(e,r)=>{if(Fr(e)){if(Fr(r))return`${e};${r}`;e=yo(e)}else Fr(r)&&(r=yo(r));return Object.assign({},e??{},r??{})};function Zc(...e){let r={};for(let o of e){if(!o)continue;for(let u in r){if(u.startsWith("on")&&typeof r[u]=="function"&&typeof o[u]=="function"){r[u]=pi(o[u],r[u]);continue}if(u==="className"||u==="class"){r[u]=_u(r[u],o[u]);continue}if(u==="style"){r[u]=xu(r[u],o[u]);continue}r[u]=o[u]!==void 0?o[u]:r[u]}for(let u in o)r[u]===void 0&&(r[u]=o[u]);const a=Object.getOwnPropertySymbols(o);for(let u of a)r[u]=o[u]}return r}function Ca(){return{and:(...e)=>function(o){return e.every(a=>o.guard(a))},or:(...e)=>function(o){return e.some(a=>o.guard(a))},not:e=>function(o){return!o.guard(e)}}}function el(e){return e}function Tu(){return{guards:Ca(),createMachine:e=>e,choose:e=>function({choose:o}){return o(e)?.actions}}}var ku=(e=>(e.NotStarted="Not Started",e.Started="Started",e.Stopped="Stopped",e))(ku||{}),tl="__init__";function nl(e){const r=()=>e.getRootNode?.()??document,o=()=>wt(r());return{...e,getRootNode:r,getDoc:o,getWin:()=>o().defaultView??window,getActiveElement:()=>va(r()),isActiveElement:Ys,getById:p=>r().getElementById(p)}}var on=(e,r=[])=>({parts:(...o)=>{if(Su(r))return on(e,o);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...o)=>on(e,[...r,...o]),omit:(...o)=>on(e,r.filter(a=>!o.includes(a))),rename:o=>on(o,r),keys:()=>r,build:()=>[...new Set(r)].reduce((o,a)=>Object.assign(o,{[a]:{selector:[`&[data-scope="${Bt(e)}"][data-part="${Bt(a)}"]`,`& [data-scope="${Bt(e)}"][data-part="${Bt(a)}"]`].join(", "),attrs:{"data-scope":Bt(e),"data-part":Bt(a)}}}),{})}),Bt=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),Su=e=>e.length===0;function Cu(e){const r={each(o){for(let a=0;a<e.frames?.length;a+=1){const u=e.frames[a];u&&o(u)}},addEventListener(o,a,u){return r.each(l=>{try{l.document.addEventListener(o,a,u)}catch{}}),()=>{try{r.removeEventListener(o,a,u)}catch{}}},removeEventListener(o,a,u){r.each(l=>{try{l.document.removeEventListener(o,a,u)}catch{}})}};return r}function Pu(e){const r=e.frameElement!=null?e.parent:null;return{addEventListener:(o,a,u)=>{try{r?.addEventListener(o,a,u)}catch{}return()=>{try{r?.removeEventListener(o,a,u)}catch{}}},removeEventListener:(o,a,u)=>{try{r?.removeEventListener(o,a,u)}catch{}}}}var vo="pointerdown.outside",bo="focus.outside";function Au(e){for(const r of e)if(Pe(r)&&qt(r))return!0;return!1}var Pa=e=>"clientY"in e;function Ou(e,r){if(!Pa(r)||!e)return!1;const o=e.getBoundingClientRect();return o.width===0||o.height===0?!1:o.top<=r.clientY&&r.clientY<=o.top+o.height&&o.left<=r.clientX&&r.clientX<=o.left+o.width}function Iu(e,r){return e.y<=r.y&&r.y<=e.y+e.height&&e.x<=r.x&&r.x<=e.x+e.width}function wo(e,r){if(!r||!Pa(e))return!1;const o=r.scrollHeight>r.clientHeight,a=o&&e.clientX>r.offsetLeft+r.clientWidth,u=r.scrollWidth>r.clientWidth,l=u&&e.clientY>r.offsetTop+r.clientHeight,p={x:r.offsetLeft,y:r.offsetTop,width:r.clientWidth+(o?16:0),height:r.clientHeight+(u?16:0)},d={x:e.clientX,y:e.clientY};return Iu(p,d)?a||l:!1}function Ru(e,r){const{exclude:o,onFocusOutside:a,onPointerDownOutside:u,onInteractOutside:l,defer:p,followControlledElements:d=!0}=r;if(!e)return;const y=wt(e),b=un(e),m=Cu(b),_=Pu(b);function T(W,z){if(!Pe(z)||!z.isConnected||an(e,z)||Ou(e,W)||d&&eu(e,z))return!1;const fe=y.querySelector(`[aria-controls="${e.id}"]`);if(fe){const Q=gi(fe);if(wo(W,Q))return!1}const Y=gi(e);return wo(W,Y)?!1:!o?.(z)}const P=new Set,L=Lt(e?.getRootNode());function F(W){function z(fe){const Y=p&&!mo()?bt:$=>$(),Q=fe??W,ne=Q?.composedPath?.()??[Q?.target];Y(()=>{const $=L?ne[0]:Yn(W);if(!(!e||!T(W,$))){if(u||l){const ae=pi(u,l);e.addEventListener(vo,ae,{once:!0})}_o(e,vo,{bubbles:!1,cancelable:!0,detail:{originalEvent:Q,contextmenu:uu(Q),focusable:Au(ne),target:$}})}})}W.pointerType==="touch"?(P.forEach(fe=>fe()),P.add(Ft(y,"click",z,{once:!0})),P.add(_.addEventListener("click",z,{once:!0})),P.add(m.addEventListener("click",z,{once:!0}))):z()}const ee=new Set,J=setTimeout(()=>{ee.add(Ft(y,"pointerdown",F,!0)),ee.add(_.addEventListener("pointerdown",F,!0)),ee.add(m.addEventListener("pointerdown",F,!0))},0);function re(W){(p?bt:fe=>fe())(()=>{const fe=W?.composedPath?.()??[W?.target],Y=L?fe[0]:Yn(W);if(!(!e||!T(W,Y))){if(a||l){const Q=pi(a,l);e.addEventListener(bo,Q,{once:!0})}_o(e,bo,{bubbles:!1,cancelable:!0,detail:{originalEvent:W,contextmenu:!1,focusable:qt(Y),target:Y}})}})}return mo()||(ee.add(Ft(y,"focusin",re,!0)),ee.add(_.addEventListener("focusin",re,!0)),ee.add(m.addEventListener("focusin",re,!0))),()=>{clearTimeout(J),P.forEach(W=>W()),ee.forEach(W=>W())}}function Bu(e,r){const{defer:o}=r,a=o?bt:l=>l(),u=[];return u.push(a(()=>{const l=typeof e=="function"?e():e;u.push(Ru(l,r))})),()=>{u.forEach(l=>l?.())}}function _o(e,r,o){const a=e.ownerDocument.defaultView||window,u=new a.CustomEvent(r,o);return e.dispatchEvent(u)}function Du(e,r){const o=a=>{a.key==="Escape"&&(a.isComposing||r?.(a))};return Ft(wt(e),"keydown",o,{capture:!0})}var Eo="layer:request-dismiss",Ie={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){const r=this.indexOf(e),o=this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1;return r<o},isTopMost(e){return this.layers[this.count()-1]?.node===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},getLayersByType(e){return this.layers.filter(r=>r.type===e)},getNestedLayersByType(e,r){const o=this.indexOf(e);return o===-1?[]:this.layers.slice(o+1).filter(a=>a.type===r)},getParentLayerOfType(e,r){const o=this.indexOf(e);if(!(o<=0))return this.layers.slice(0,o).reverse().find(a=>a.type===r)},countNestedLayersOfType(e,r){return this.getNestedLayersByType(e,r).length},isInNestedLayer(e,r){return this.getNestedLayers(e).some(o=>an(o.node,r))},isInBranch(e){return Array.from(this.branches).some(r=>an(r,e))},add(e){this.layers.push(e),this.syncLayers()},addBranch(e){this.branches.push(e)},remove(e){const r=this.indexOf(e);r<0||(r<this.count()-1&&this.getNestedLayers(e).forEach(a=>Ie.dismiss(a.node,e)),this.layers.splice(r,1),this.syncLayers())},removeBranch(e){const r=this.branches.indexOf(e);r>=0&&this.branches.splice(r,1)},syncLayers(){this.layers.forEach((e,r)=>{e.node.style.setProperty("--layer-index",`${r}`),e.node.removeAttribute("data-nested"),e.node.removeAttribute("data-has-nested"),this.getParentLayerOfType(e.node,e.type)&&e.node.setAttribute("data-nested",e.type);const a=this.countNestedLayersOfType(e.node,e.type);a>0&&e.node.setAttribute("data-has-nested",e.type),e.node.style.setProperty("--nested-layer-count",`${a}`)})},indexOf(e){return this.layers.findIndex(r=>r.node===e)},dismiss(e,r){const o=this.indexOf(e);if(o===-1)return;const a=this.layers[o];Mu(e,Eo,u=>{a.requestDismiss?.(u),u.defaultPrevented||a?.dismiss()}),Nu(e,Eo,{originalLayer:e,targetLayer:r,originalIndex:o,targetIndex:r?this.indexOf(r):-1}),this.syncLayers()},clear(){this.remove(this.layers[0].node)}};function Nu(e,r,o){const a=e.ownerDocument.defaultView||window,u=new a.CustomEvent(r,{cancelable:!0,bubbles:!0,detail:o});return e.dispatchEvent(u)}function Mu(e,r,o){e.addEventListener(r,o,{once:!0})}var xo;function To(){Ie.layers.forEach(({node:e})=>{e.style.pointerEvents=Ie.isBelowPointerBlockingLayer(e)?"none":"auto"})}function Fu(e){e.style.pointerEvents=""}function qu(e,r){const o=wt(e),a=[];return Ie.hasPointerBlockingLayer()&&!o.body.hasAttribute("data-inert")&&(xo=document.body.style.pointerEvents,queueMicrotask(()=>{o.body.style.pointerEvents="none",o.body.setAttribute("data-inert","")})),r?.forEach(u=>{const[l,p]=wu(()=>{const d=u();return Pe(d)?d:null},{timeout:1e3});l.then(d=>a.push(vu(d,{pointerEvents:"auto"}))),a.push(p)}),()=>{Ie.hasPointerBlockingLayer()||(queueMicrotask(()=>{o.body.style.pointerEvents=xo,o.body.removeAttribute("data-inert"),o.body.style.length===0&&o.body.removeAttribute("style")}),a.forEach(u=>u()))}}function Lu(e,r){const{warnOnMissingNode:o=!0}=r;if(o&&!e){yi("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!e)return;const{onDismiss:a,onRequestDismiss:u,pointerBlocking:l,exclude:p,debug:d,type:y="dialog"}=r,b={dismiss:a,node:e,type:y,pointerBlocking:l,requestDismiss:u};Ie.add(b),To();function m(F){const ee=Yn(F.detail.originalEvent);Ie.isBelowPointerBlockingLayer(e)||Ie.isInBranch(ee)||(r.onPointerDownOutside?.(F),r.onInteractOutside?.(F),!F.defaultPrevented&&(d&&console.log("onPointerDownOutside:",F.detail.originalEvent),a?.()))}function _(F){const ee=Yn(F.detail.originalEvent);Ie.isInBranch(ee)||(r.onFocusOutside?.(F),r.onInteractOutside?.(F),!F.defaultPrevented&&(d&&console.log("onFocusOutside:",F.detail.originalEvent),a?.()))}function T(F){Ie.isTopMost(e)&&(r.onEscapeKeyDown?.(F),!F.defaultPrevented&&a&&(F.preventDefault(),a()))}function P(F){if(!e)return!1;const ee=typeof p=="function"?p():p,J=Array.isArray(ee)?ee:[ee],re=r.persistentElements?.map(W=>W()).filter(Pe);return re&&J.push(...re),J.some(W=>an(W,F))||Ie.isInNestedLayer(e,F)}const L=[l?qu(e,r.persistentElements):void 0,Du(e,T),Bu(e,{exclude:P,onFocusOutside:_,onPointerDownOutside:m,defer:r.defer})];return()=>{Ie.remove(e),To(),Fu(e),L.forEach(F=>F?.())}}function rl(e,r){const{defer:o}=r,a=o?bt:l=>l(),u=[];return u.push(a(()=>{const l=da(e)?e():e;u.push(Lu(l,r))})),()=>{u.forEach(l=>l?.())}}function Ku(e,r={}){const{defer:o}=r,a=o?bt:l=>l(),u=[];return u.push(a(()=>{const l=da(e)?e():e;if(!l){yi("[@zag-js/dismissable] branch node is `null` or `undefined`");return}Ie.addBranch(l),u.push(()=>{Ie.removeBranch(l)})})),()=>{u.forEach(l=>l?.())}}var ju=on("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),Mt=ju.build(),zu=e=>`toast-group:${e}`,ko=(e,r)=>e.getById(`toast-group:${r}`),Aa=e=>`toast:${e.id}`,So=e=>e.getById(Aa(e)),Co=e=>`toast:${e.id}:title`,Po=e=>`toast:${e.id}:description`,Uu=e=>`toast${e.id}:close`,Ao={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function zr(e,r){return e??Ao[r]??Ao.DEFAULT}var Vu=e=>typeof e=="string"?{left:e,right:e,bottom:e,top:e}:e;function Hu(e,r){const{prop:o,computed:a,context:u}=e,{offsets:l,gap:p}=o("store").attrs,d=u.get("heights"),y=Vu(l),b=o("dir")==="rtl",m=r.replace("-start",b?"-right":"-left").replace("-end",b?"-left":"-right"),_=m.includes("right"),T=m.includes("left"),P={position:"fixed",pointerEvents:a("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${p}px`,"--first-height":`${d[0]?.height||0}px`,"--viewport-offset-left":y.left,"--viewport-offset-right":y.right,"--viewport-offset-top":y.top,"--viewport-offset-bottom":y.bottom,zIndex:Ls};let L="center";if(_&&(L="flex-end"),T&&(L="flex-start"),P.alignItems=L,m.includes("top")){const F=y.top;P.top=`max(env(safe-area-inset-top, 0px), ${F})`}if(m.includes("bottom")){const F=y.bottom;P.bottom=`max(env(safe-area-inset-bottom, 0px), ${F})`}if(!m.includes("left")){const F=y.right;P.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${F})`}if(!m.includes("right")){const F=y.left;P.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${F})`}return P}function Wu(e,r){const{prop:o,context:a,computed:u}=e,l=o("parent"),p=l.computed("placement"),{gap:d}=l.prop("store").attrs,[y]=p.split("-"),b=a.get("mounted"),m=a.get("remainingTime"),_=u("height"),T=u("frontmost"),P=!T,L=!o("stacked"),F=o("stacked"),J=o("type")==="loading"?Number.MAX_SAFE_INTEGER:m,re=u("heightIndex")*d+u("heightBefore"),W={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${o("removeDelay")}ms`,"--duration":`${J}ms`,"--initial-height":`${_}px`,"--offset":`${re}px`,"--index":o("index"),"--z-index":u("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},z=fe=>Object.assign(W,fe);return y==="top"?z({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):y==="bottom"&&z({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),b&&(z({"--y":"0","--opacity":"1"}),F&&z({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),r||z({"--opacity":"0",pointerEvents:"none"}),P&&L&&(z({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),r||z({"--y":"calc(var(--sign) * 40%)"})),P&&F&&!r&&z({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),T&&!r&&z({"--y":"calc(var(--lift) * -100%)"}),W}function Gu(e,r){const{computed:o}=e,a={position:"absolute",inset:"0",scale:"1 2",pointerEvents:r?"none":"auto"},u=l=>Object.assign(a,l);return o("frontmost")&&!r&&u({height:"calc(var(--initial-height) + 80%)"}),a}function Yu(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function Qu(e,r){const{context:o,prop:a,send:u,refs:l,computed:p}=e;return{getCount(){return o.get("toasts").length},getToasts(){return o.get("toasts")},getGroupProps(d={}){const{label:y="Notifications"}=d,{hotkey:b}=a("store").attrs,m=b.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=p("placement"),[T,P="center"]=_.split("-");return r.element({...Mt.group.attrs,dir:a("dir"),tabIndex:-1,"aria-label":`${_} ${y} ${m}`,id:zu(_),"data-placement":_,"data-side":T,"data-align":P,"aria-live":"polite",role:"region",style:Hu(e,_),onMouseEnter(){l.get("ignoreMouseTimer").isActive()||u({type:"REGION.POINTER_ENTER",placement:_})},onMouseMove(){l.get("ignoreMouseTimer").isActive()||u({type:"REGION.POINTER_ENTER",placement:_})},onMouseLeave(){l.get("ignoreMouseTimer").isActive()||u({type:"REGION.POINTER_LEAVE",placement:_})},onFocus(L){u({type:"REGION.FOCUS",target:L.relatedTarget})},onBlur(L){l.get("isFocusWithin")&&!an(L.currentTarget,L.relatedTarget)&&queueMicrotask(()=>u({type:"REGION.BLUR"}))}})},subscribe(d){return a("store").subscribe(()=>d(o.get("toasts")))}}}var{guards:Ju,createMachine:Xu}=Tu(),{and:$u}=Ju,Zu=Xu({props({props:e}){return{dir:"ltr",id:pa(),...e,store:e.store}},initialState({prop:e}){return e("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,isPointerWithin:!1,ignoreMouseTimer:ka.create(),dismissableCleanup:void 0}},context({bindable:e}){return{toasts:e(()=>({defaultValue:[],sync:!0,hash:r=>r.map(o=>o.id).join(",")})),heights:e(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:e})=>e.get("toasts").length,overlap:({prop:e})=>e("store").attrs.overlap,placement:({prop:e})=>e("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:e,context:r,action:o}){e([()=>r.hash("toasts")],()=>{queueMicrotask(()=>{o(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl","clearMouseEventTimer"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:$u("isOverlapping","isPointerOut"),target:"overlap",actions:["collapseToasts","resumeToasts","restoreFocusIfPointerOut"]},{guard:"isPointerOut",target:"stack",actions:["resumeToasts","restoreFocusIfPointerOut"]},{actions:["clearFocusWithin"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight","ignoreMouseEventsTemporarily"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["clearPointerWithin","resumeToasts","collapseToasts"]},{actions:["clearPointerWithin","resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["setPointerWithin","pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["setPointerWithin","pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:e})=>e("overlap"),isPointerOut:({refs:e})=>!e.get("isPointerWithin")},effects:{subscribeToStore({context:e,prop:r}){return r("store").subscribe(o=>{if(o.dismiss){e.set("toasts",a=>a.filter(u=>u.id!==o.id));return}e.set("toasts",a=>{const u=a.findIndex(l=>l.id===o.id);return u!==-1?[...a.slice(0,u),{...a[u],...o},...a.slice(u+1)]:[o,...a]})})},trackHotKeyPress({prop:e,send:r}){return Ft(document,"keydown",a=>{const{hotkey:u}=e("store").attrs;u.every(p=>a[p]||a.code===p)&&r({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:e,send:r,scope:o}){const{pauseOnPageIdle:a}=e("store").attrs;if(!a)return;const u=o.getDoc();return Ft(u,"visibilitychange",()=>{const l=u.visibilityState==="hidden";r({type:l?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:e,context:r,computed:o,scope:a}){const u=r.get("toasts"),l=o("placement"),p=u.length>0;if(!p){e.get("dismissableCleanup")?.();return}if(p&&e.get("dismissableCleanup"))return;const y=Ku(()=>ko(a,l),{defer:!0});e.set("dismissableCleanup",y)},clearDismissableBranch({refs:e}){e.get("dismissableCleanup")?.()},focusRegionEl({scope:e,computed:r}){queueMicrotask(()=>{ko(e,r("placement"))?.focus()})},pauseToasts({prop:e}){e("store").pause()},resumeToasts({prop:e}){e("store").resume()},expandToasts({prop:e}){e("store").expand()},collapseToasts({prop:e}){e("store").collapse()},removeToast({prop:e,event:r}){e("store").remove(r.id)},removeHeight({event:e,context:r}){e?.id!=null&&queueMicrotask(()=>{r.set("heights",o=>o.filter(a=>a.id!==e.id))})},collapsedIfEmpty({send:e,computed:r}){!r("overlap")||r("count")>1||e({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:e,event:r}){e.get("isFocusWithin")||!r.target||(e.set("isFocusWithin",!0),e.set("lastFocusedEl",r.target))},restoreFocusIfPointerOut({refs:e}){!e.get("lastFocusedEl")||e.get("isPointerWithin")||(e.get("lastFocusedEl")?.focus({preventScroll:!0}),e.set("lastFocusedEl",null),e.set("isFocusWithin",!1))},setPointerWithin({refs:e}){e.set("isPointerWithin",!0)},clearPointerWithin({refs:e}){e.set("isPointerWithin",!1),e.get("lastFocusedEl")&&!e.get("isFocusWithin")&&(e.get("lastFocusedEl")?.focus({preventScroll:!0}),e.set("lastFocusedEl",null))},clearFocusWithin({refs:e}){e.set("isFocusWithin",!1)},clearLastFocusedEl({refs:e}){e.get("lastFocusedEl")&&(e.get("lastFocusedEl")?.focus({preventScroll:!0}),e.set("lastFocusedEl",null),e.set("isFocusWithin",!1))},ignoreMouseEventsTemporarily({refs:e}){e.get("ignoreMouseTimer").request()},clearMouseEventTimer({refs:e}){e.get("ignoreMouseTimer").cancel()}}}});function il(e,r){const{state:o,send:a,prop:u,scope:l,context:p,computed:d}=e,y=o.hasTag("visible"),b=o.hasTag("paused"),m=p.get("mounted"),_=d("frontmost"),T=u("parent").computed("placement"),P=u("type"),L=u("stacked"),F=u("title"),ee=u("description"),J=u("action"),[re,W="center"]=T.split("-");return{type:P,title:F,description:ee,placement:T,visible:y,paused:b,closable:!!u("closable"),pause(){a({type:"PAUSE"})},resume(){a({type:"RESUME"})},dismiss(){a({type:"DISMISS",src:"programmatic"})},getRootProps(){return r.element({...Mt.root.attrs,dir:u("dir"),id:Aa(l),"data-state":y?"open":"closed","data-type":P,"data-placement":T,"data-align":W,"data-side":re,"data-mounted":Rt(m),"data-paused":Rt(b),"data-first":Rt(_),"data-sibling":Rt(!_),"data-stack":Rt(L),"data-overlap":Rt(!L),role:"status","aria-atomic":"true","aria-describedby":ee?Po(l):void 0,"aria-labelledby":F?Co(l):void 0,tabIndex:0,style:Wu(e,y),onKeyDown(z){z.defaultPrevented||z.key=="Escape"&&(a({type:"DISMISS",src:"keyboard"}),z.preventDefault())}})},getGhostBeforeProps(){return r.element({"data-ghost":"before",style:Gu(e,y)})},getGhostAfterProps(){return r.element({"data-ghost":"after",style:Yu()})},getTitleProps(){return r.element({...Mt.title.attrs,id:Co(l)})},getDescriptionProps(){return r.element({...Mt.description.attrs,id:Po(l)})},getActionTriggerProps(){return r.button({...Mt.actionTrigger.attrs,type:"button",onClick(z){z.defaultPrevented||(J?.onClick?.(),a({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return r.button({id:Uu(l),...Mt.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(z){z.defaultPrevented||a({type:"DISMISS",src:"user"})}})}}}var{not:ec}=Ca(),ol={props({props:e}){return Ms(e,["id","type","parent","removeDelay"],"toast"),{closable:!0,...e,duration:zr(e.duration,e.type)}},initialState({prop:e}){return e("type")==="loading"||e("duration")===1/0?"visible:persist":"visible"},context({prop:e,bindable:r}){return{remainingTime:r(()=>({defaultValue:zr(e("duration"),e("type"))})),createdAt:r(()=>({defaultValue:Date.now()})),mounted:r(()=>({defaultValue:!1})),initialHeight:r(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:e})=>{const r=e("parent").context.get("toasts"),o=r.findIndex(a=>a.id===e("id"));return r.length-o},height:({prop:e})=>e("parent").context.get("heights").find(a=>a.id===e("id"))?.height??0,heightIndex:({prop:e})=>e("parent").context.get("heights").findIndex(o=>o.id===e("id")),frontmost:({prop:e})=>e("index")===0,heightBefore:({prop:e})=>{const r=e("parent").context.get("heights"),o=r.findIndex(a=>a.id===e("id"));return r.reduce((a,u,l)=>l>=o?a:a+u.height,0)},shouldPersist:({prop:e})=>e("type")==="loading"||e("duration")===1/0},watch({track:e,prop:r,send:o}){e([()=>r("message")],()=>{const a=r("message");a&&o({type:a,src:"programmatic"})}),e([()=>r("type"),()=>r("duration")],()=>{o({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:ec("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:e,send:r}){return qr(()=>{r({type:"REMOVE",src:"timer"})},e("removeDelay"))},waitForDuration({send:e,context:r,computed:o}){if(!o("shouldPersist"))return qr(()=>{e({type:"DISMISS",src:"timer"})},r.get("remainingTime"))},waitForNextTick({send:e}){return qr(()=>{e({type:"SHOW",src:"timer"})},0)},trackHeight({scope:e,prop:r}){let o;return bt(()=>{const a=So(e);if(!a)return;const u=()=>{const d=a.style.height;a.style.height="auto";const y=a.getBoundingClientRect().height;a.style.height=d;const b={id:r("id"),height:y};Oo(r("parent"),b)},l=e.getWin(),p=new l.MutationObserver(u);p.observe(a,{childList:!0,subtree:!0,characterData:!0}),o=()=>p.disconnect()}),()=>o?.()}},guards:{isLoadingType:({prop:e})=>e("type")==="loading",shouldPersist:({computed:e})=>e("shouldPersist")},actions:{setMounted({context:e}){bt(()=>{e.set("mounted",!0)})},measureHeight({scope:e,prop:r,context:o}){queueMicrotask(()=>{const a=So(e);if(!a)return;const u=a.style.height;a.style.height="auto";const l=a.getBoundingClientRect().height;a.style.height=u,o.set("initialHeight",l);const p={id:r("id"),height:l};Oo(r("parent"),p)})},setCloseTimer({refs:e}){e.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:e,refs:r,prop:o}){r.set("closeTimerStartTime",Date.now()),e.set("remainingTime",zr(o("duration"),o("type")))},syncRemainingTime({context:e,refs:r}){e.set("remainingTime",o=>{const a=r.get("closeTimerStartTime"),u=Date.now()-a;return r.set("lastCloseStartTimerStartTime",Date.now()),o-u})},notifyParentToRemove({prop:e}){e("parent").send({type:"TOAST.REMOVE",id:e("id")})},invokeOnDismiss({prop:e,event:r}){e("onStatusChange")?.({status:"dismissing",src:r.src})},invokeOnUnmount({prop:e}){e("onStatusChange")?.({status:"unmounted"})},invokeOnVisible({prop:e}){e("onStatusChange")?.({status:"visible"})}}}};function Oo(e,r){const{id:o,height:a}=r;e.context.set("heights",u=>u.find(p=>p.id===o)?u.map(p=>p.id===o?{...p,height:a}:p):[{id:o,height:a},...u])}var tc=(e,r)=>({...r,...ga(e)});function nc(e={}){const r=tc(e,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let o=[],a=[],u=new Set,l=[];const p=N=>(o.push(N),()=>{const M=o.indexOf(N);o.splice(M,1)}),d=N=>(o.forEach(M=>M(N)),N),y=N=>{if(a.length>=r.max){l.push(N);return}d(N),a.unshift(N)},b=()=>{for(;l.length>0&&a.length<r.max;){const N=l.shift();N&&(d(N),a.unshift(N))}},m=N=>{const M=N.id??`toast:${pa()}`,oe=a.find(me=>me.id===M);return u.has(M)&&u.delete(M),oe?a=a.map(me=>me.id===M?d({...me,...N,id:M}):me):y({id:M,duration:r.duration,removeDelay:r.removeDelay,type:"info",...N,stacked:!r.overlap,gap:r.gap}),M},_=N=>(u.add(N),N?(o.forEach(M=>M({id:N,dismiss:!0})),a=a.filter(M=>M.id!==N),b()):(a.forEach(M=>{o.forEach(oe=>oe({id:M.id,dismiss:!0}))}),a=[],l=[]),N);return{attrs:r,subscribe:p,create:m,update:(N,M)=>m({id:N,...M}),remove:_,dismiss:N=>{N!=null?a=a.map(M=>M.id===N?d({...M,message:"DISMISS"}):M):a=a.map(M=>d({...M,message:"DISMISS"}))},error:N=>m({...N,type:"error"}),success:N=>m({...N,type:"success"}),info:N=>m({...N,type:"info"}),warning:N=>m({...N,type:"warning"}),loading:N=>m({...N,type:"loading"}),getVisibleToasts:()=>a.filter(N=>!u.has(N.id)),getCount:()=>a.length,promise:(N,M,oe={})=>{if(!M||!M.loading){yi("[zag-js > toast] toaster.promise() requires at least a 'loading' option to be specified");return}const me=m({...oe,...M.loading,promise:N,type:"loading"});let Oe=!0,He;const Ne=jn(N).then(async ye=>{if(He=["resolve",ye],rc(ye)&&!ye.ok){Oe=!1;const Te=jn(M.error,`HTTP Error! status: ${ye.status}`);m({...oe,...Te,id:me,type:"error"})}else if(M.success!==void 0){Oe=!1;const Te=jn(M.success,ye);m({...oe,...Te,id:me,type:"success"})}}).catch(async ye=>{if(He=["reject",ye],M.error!==void 0){Oe=!1;const Te=jn(M.error,ye);m({...oe,...Te,id:me,type:"error"})}}).finally(()=>{Oe&&_(me),M.finally?.()});return{id:me,unwrap:()=>new Promise((ye,Te)=>Ne.then(()=>He[0]==="reject"?Te(He[1]):ye(He[1])).catch(Te))}},pause:N=>{N!=null?a=a.map(M=>M.id===N?d({...M,message:"PAUSE"}):M):a=a.map(M=>d({...M,message:"PAUSE"}))},resume:N=>{N!=null?a=a.map(M=>M.id===N?d({...M,message:"RESUME"}):M):a=a.map(M=>d({...M,message:"RESUME"}))},isVisible:N=>!u.has(N)&&!!a.find(M=>M.id===N),isDismissed:N=>u.has(N),expand:()=>{a=a.map(N=>d({...N,stacked:!0}))},collapse:()=>{a=a.map(N=>d({...N,stacked:!1}))}}}var rc=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",al={connect:Qu,machine:Zu};const ic=nc({placement:"top-end"}),Un=Kt({toaster:ic}),Io=Kt({lang_index:""}),Ro=Kt({app_uid:""}),Fe=Kt({input_doing:1});var Dt={},Ur,Bo;function oc(){return Bo||(Bo=1,Ur=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Ur}var Vr={},st={},Do;function _t(){if(Do)return st;Do=1;let e;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return st.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17},st.getSymbolTotalCodewords=function(a){return r[a]},st.getBCHDigit=function(o){let a=0;for(;o!==0;)a++,o>>>=1;return a},st.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');e=a},st.isKanjiModeEnabled=function(){return typeof e<"u"},st.toSJIS=function(a){return e(a)},st}var Hr={},No;function Ei(){return No||(No=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+o)}}e.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},e.from=function(a,u){if(e.isValid(a))return a;try{return r(a)}catch{return u}}})(Hr)),Hr}var Wr,Mo;function ac(){if(Mo)return Wr;Mo=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(r){const o=Math.floor(r/8);return(this.buffer[o]>>>7-r%8&1)===1},put:function(r,o){for(let a=0;a<o;a++)this.putBit((r>>>o-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),r&&(this.buffer[o]|=128>>>this.length%8),this.length++}},Wr=e,Wr}var Gr,Fo;function sc(){if(Fo)return Gr;Fo=1;function e(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return e.prototype.set=function(r,o,a,u){const l=r*this.size+o;this.data[l]=a,u&&(this.reservedBit[l]=!0)},e.prototype.get=function(r,o){return this.data[r*this.size+o]},e.prototype.xor=function(r,o,a){this.data[r*this.size+o]^=a},e.prototype.isReserved=function(r,o){return this.reservedBit[r*this.size+o]},Gr=e,Gr}var Yr={},qo;function uc(){return qo||(qo=1,(function(e){const r=_t().getSymbolSize;e.getRowColCoords=function(a){if(a===1)return[];const u=Math.floor(a/7)+2,l=r(a),p=l===145?26:Math.ceil((l-13)/(2*u-2))*2,d=[l-7];for(let y=1;y<u-1;y++)d[y]=d[y-1]-p;return d.push(6),d.reverse()},e.getPositions=function(a){const u=[],l=e.getRowColCoords(a),p=l.length;for(let d=0;d<p;d++)for(let y=0;y<p;y++)d===0&&y===0||d===0&&y===p-1||d===p-1&&y===0||u.push([l[d],l[y]]);return u}})(Yr)),Yr}var Qr={},Lo;function cc(){if(Lo)return Qr;Lo=1;const e=_t().getSymbolSize,r=7;return Qr.getPositions=function(a){const u=e(a);return[[0,0],[u-r,0],[0,u-r]]},Qr}var Jr={},Ko;function lc(){return Ko||(Ko=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};e.isValid=function(u){return u!=null&&u!==""&&!isNaN(u)&&u>=0&&u<=7},e.from=function(u){return e.isValid(u)?parseInt(u,10):void 0},e.getPenaltyN1=function(u){const l=u.size;let p=0,d=0,y=0,b=null,m=null;for(let _=0;_<l;_++){d=y=0,b=m=null;for(let T=0;T<l;T++){let P=u.get(_,T);P===b?d++:(d>=5&&(p+=r.N1+(d-5)),b=P,d=1),P=u.get(T,_),P===m?y++:(y>=5&&(p+=r.N1+(y-5)),m=P,y=1)}d>=5&&(p+=r.N1+(d-5)),y>=5&&(p+=r.N1+(y-5))}return p},e.getPenaltyN2=function(u){const l=u.size;let p=0;for(let d=0;d<l-1;d++)for(let y=0;y<l-1;y++){const b=u.get(d,y)+u.get(d,y+1)+u.get(d+1,y)+u.get(d+1,y+1);(b===4||b===0)&&p++}return p*r.N2},e.getPenaltyN3=function(u){const l=u.size;let p=0,d=0,y=0;for(let b=0;b<l;b++){d=y=0;for(let m=0;m<l;m++)d=d<<1&2047|u.get(b,m),m>=10&&(d===1488||d===93)&&p++,y=y<<1&2047|u.get(m,b),m>=10&&(y===1488||y===93)&&p++}return p*r.N3},e.getPenaltyN4=function(u){let l=0;const p=u.data.length;for(let y=0;y<p;y++)l+=u.data[y];return Math.abs(Math.ceil(l*100/p/5)-10)*r.N4};function o(a,u,l){switch(a){case e.Patterns.PATTERN000:return(u+l)%2===0;case e.Patterns.PATTERN001:return u%2===0;case e.Patterns.PATTERN010:return l%3===0;case e.Patterns.PATTERN011:return(u+l)%3===0;case e.Patterns.PATTERN100:return(Math.floor(u/2)+Math.floor(l/3))%2===0;case e.Patterns.PATTERN101:return u*l%2+u*l%3===0;case e.Patterns.PATTERN110:return(u*l%2+u*l%3)%2===0;case e.Patterns.PATTERN111:return(u*l%3+(u+l)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}e.applyMask=function(u,l){const p=l.size;for(let d=0;d<p;d++)for(let y=0;y<p;y++)l.isReserved(y,d)||l.xor(y,d,o(u,y,d))},e.getBestMask=function(u,l){const p=Object.keys(e.Patterns).length;let d=0,y=1/0;for(let b=0;b<p;b++){l(b),e.applyMask(b,u);const m=e.getPenaltyN1(u)+e.getPenaltyN2(u)+e.getPenaltyN3(u)+e.getPenaltyN4(u);e.applyMask(b,u),m<y&&(y=m,d=b)}return d}})(Jr)),Jr}var Vn={},jo;function Oa(){if(jo)return Vn;jo=1;const e=Ei(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Vn.getBlocksCount=function(u,l){switch(l){case e.L:return r[(u-1)*4+0];case e.M:return r[(u-1)*4+1];case e.Q:return r[(u-1)*4+2];case e.H:return r[(u-1)*4+3];default:return}},Vn.getTotalCodewordsCount=function(u,l){switch(l){case e.L:return o[(u-1)*4+0];case e.M:return o[(u-1)*4+1];case e.Q:return o[(u-1)*4+2];case e.H:return o[(u-1)*4+3];default:return}},Vn}var Xr={},nn={},zo;function fc(){if(zo)return nn;zo=1;const e=new Uint8Array(512),r=new Uint8Array(256);return(function(){let a=1;for(let u=0;u<255;u++)e[u]=a,r[a]=u,a<<=1,a&256&&(a^=285);for(let u=255;u<512;u++)e[u]=e[u-255]})(),nn.log=function(a){if(a<1)throw new Error("log("+a+")");return r[a]},nn.exp=function(a){return e[a]},nn.mul=function(a,u){return a===0||u===0?0:e[r[a]+r[u]]},nn}var Uo;function dc(){return Uo||(Uo=1,(function(e){const r=fc();e.mul=function(a,u){const l=new Uint8Array(a.length+u.length-1);for(let p=0;p<a.length;p++)for(let d=0;d<u.length;d++)l[p+d]^=r.mul(a[p],u[d]);return l},e.mod=function(a,u){let l=new Uint8Array(a);for(;l.length-u.length>=0;){const p=l[0];for(let y=0;y<u.length;y++)l[y]^=r.mul(u[y],p);let d=0;for(;d<l.length&&l[d]===0;)d++;l=l.slice(d)}return l},e.generateECPolynomial=function(a){let u=new Uint8Array([1]);for(let l=0;l<a;l++)u=e.mul(u,new Uint8Array([1,r.exp(l)]));return u}})(Xr)),Xr}var $r,Vo;function hc(){if(Vo)return $r;Vo=1;const e=dc();function r(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(a){this.degree=a,this.genPoly=e.generateECPolynomial(this.degree)},r.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const u=new Uint8Array(a.length+this.degree);u.set(a);const l=e.mod(u,this.genPoly),p=this.degree-l.length;if(p>0){const d=new Uint8Array(this.degree);return d.set(l,p),d}return l},$r=r,$r}var Zr={},ei={},ti={},Ho;function Ia(){return Ho||(Ho=1,ti.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),ti}var Ve={},Wo;function Ra(){if(Wo)return Ve;Wo=1;const e="[0-9]+",r="[A-Z $%*+\\-./:]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const a="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+`)(?:.|[\r
]))+`;Ve.KANJI=new RegExp(o,"g"),Ve.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ve.BYTE=new RegExp(a,"g"),Ve.NUMERIC=new RegExp(e,"g"),Ve.ALPHANUMERIC=new RegExp(r,"g");const u=new RegExp("^"+o+"$"),l=new RegExp("^"+e+"$"),p=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ve.testKanji=function(y){return u.test(y)},Ve.testNumeric=function(y){return l.test(y)},Ve.testAlphanumeric=function(y){return p.test(y)},Ve}var Go;function Et(){return Go||(Go=1,(function(e){const r=Ia(),o=Ra();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(l,p){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!r.isValid(p))throw new Error("Invalid version: "+p);return p>=1&&p<10?l.ccBits[0]:p<27?l.ccBits[1]:l.ccBits[2]},e.getBestModeForData=function(l){return o.testNumeric(l)?e.NUMERIC:o.testAlphanumeric(l)?e.ALPHANUMERIC:o.testKanji(l)?e.KANJI:e.BYTE},e.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},e.isValid=function(l){return l&&l.bit&&l.ccBits};function a(u){if(typeof u!="string")throw new Error("Param is not a string");switch(u.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+u)}}e.from=function(l,p){if(e.isValid(l))return l;try{return a(l)}catch{return p}}})(ei)),ei}var Yo;function pc(){return Yo||(Yo=1,(function(e){const r=_t(),o=Oa(),a=Ei(),u=Et(),l=Ia(),p=7973,d=r.getBCHDigit(p);function y(T,P,L){for(let F=1;F<=40;F++)if(P<=e.getCapacity(F,L,T))return F}function b(T,P){return u.getCharCountIndicator(T,P)+4}function m(T,P){let L=0;return T.forEach(function(F){const ee=b(F.mode,P);L+=ee+F.getBitsLength()}),L}function _(T,P){for(let L=1;L<=40;L++)if(m(T,L)<=e.getCapacity(L,P,u.MIXED))return L}e.from=function(P,L){return l.isValid(P)?parseInt(P,10):L},e.getCapacity=function(P,L,F){if(!l.isValid(P))throw new Error("Invalid QR Code version");typeof F>"u"&&(F=u.BYTE);const ee=r.getSymbolTotalCodewords(P),J=o.getTotalCodewordsCount(P,L),re=(ee-J)*8;if(F===u.MIXED)return re;const W=re-b(F,P);switch(F){case u.NUMERIC:return Math.floor(W/10*3);case u.ALPHANUMERIC:return Math.floor(W/11*2);case u.KANJI:return Math.floor(W/13);case u.BYTE:default:return Math.floor(W/8)}},e.getBestVersionForData=function(P,L){let F;const ee=a.from(L,a.M);if(Array.isArray(P)){if(P.length>1)return _(P,ee);if(P.length===0)return 1;F=P[0]}else F=P;return y(F.mode,F.getLength(),ee)},e.getEncodedBits=function(P){if(!l.isValid(P)||P<7)throw new Error("Invalid QR Code version");let L=P<<12;for(;r.getBCHDigit(L)-d>=0;)L^=p<<r.getBCHDigit(L)-d;return P<<12|L}})(Zr)),Zr}var ni={},Qo;function gc(){if(Qo)return ni;Qo=1;const e=_t(),r=1335,o=21522,a=e.getBCHDigit(r);return ni.getEncodedBits=function(l,p){const d=l.bit<<3|p;let y=d<<10;for(;e.getBCHDigit(y)-a>=0;)y^=r<<e.getBCHDigit(y)-a;return(d<<10|y)^o},ni}var ri={},ii,Jo;function mc(){if(Jo)return ii;Jo=1;const e=Et();function r(o){this.mode=e.NUMERIC,this.data=o.toString()}return r.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(a){let u,l,p;for(u=0;u+3<=this.data.length;u+=3)l=this.data.substr(u,3),p=parseInt(l,10),a.put(p,10);const d=this.data.length-u;d>0&&(l=this.data.substr(u),p=parseInt(l,10),a.put(p,d*3+1))},ii=r,ii}var oi,Xo;function yc(){if(Xo)return oi;Xo=1;const e=Et(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(a){this.mode=e.ALPHANUMERIC,this.data=a}return o.getBitsLength=function(u){return 11*Math.floor(u/2)+6*(u%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(u){let l;for(l=0;l+2<=this.data.length;l+=2){let p=r.indexOf(this.data[l])*45;p+=r.indexOf(this.data[l+1]),u.put(p,11)}this.data.length%2&&u.put(r.indexOf(this.data[l]),6)},oi=o,oi}var ai,$o;function vc(){if($o)return ai;$o=1;const e=Et();function r(o){this.mode=e.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}return r.getBitsLength=function(a){return a*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(o){for(let a=0,u=this.data.length;a<u;a++)o.put(this.data[a],8)},ai=r,ai}var si,Zo;function bc(){if(Zo)return si;Zo=1;const e=Et(),r=_t();function o(a){this.mode=e.KANJI,this.data=a}return o.getBitsLength=function(u){return u*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(a){let u;for(u=0;u<this.data.length;u++){let l=r.toSJIS(this.data[u]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[u]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),a.put(l,13)}},si=o,si}var ui={exports:{}},ea;function wc(){return ea||(ea=1,(function(e){var r={single_source_shortest_paths:function(o,a,u){var l={},p={};p[a]=0;var d=r.PriorityQueue.make();d.push(a,0);for(var y,b,m,_,T,P,L,F,ee;!d.empty();){y=d.pop(),b=y.value,_=y.cost,T=o[b]||{};for(m in T)T.hasOwnProperty(m)&&(P=T[m],L=_+P,F=p[m],ee=typeof p[m]>"u",(ee||F>L)&&(p[m]=L,d.push(m,L),l[m]=b))}if(typeof u<"u"&&typeof p[u]>"u"){var J=["Could not find a path from ",a," to ",u,"."].join("");throw new Error(J)}return l},extract_shortest_path_from_predecessor_list:function(o,a){for(var u=[],l=a;l;)u.push(l),o[l],l=o[l];return u.reverse(),u},find_path:function(o,a,u){var l=r.single_source_shortest_paths(o,a,u);return r.extract_shortest_path_from_predecessor_list(l,u)},PriorityQueue:{make:function(o){var a=r.PriorityQueue,u={},l;o=o||{};for(l in a)a.hasOwnProperty(l)&&(u[l]=a[l]);return u.queue=[],u.sorter=o.sorter||a.default_sorter,u},default_sorter:function(o,a){return o.cost-a.cost},push:function(o,a){var u={value:o,cost:a};this.queue.push(u),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=r})(ui)),ui.exports}var ta;function _c(){return ta||(ta=1,(function(e){const r=Et(),o=mc(),a=yc(),u=vc(),l=bc(),p=Ra(),d=_t(),y=wc();function b(J){return unescape(encodeURIComponent(J)).length}function m(J,re,W){const z=[];let fe;for(;(fe=J.exec(W))!==null;)z.push({data:fe[0],index:fe.index,mode:re,length:fe[0].length});return z}function _(J){const re=m(p.NUMERIC,r.NUMERIC,J),W=m(p.ALPHANUMERIC,r.ALPHANUMERIC,J);let z,fe;return d.isKanjiModeEnabled()?(z=m(p.BYTE,r.BYTE,J),fe=m(p.KANJI,r.KANJI,J)):(z=m(p.BYTE_KANJI,r.BYTE,J),fe=[]),re.concat(W,z,fe).sort(function(Q,ne){return Q.index-ne.index}).map(function(Q){return{data:Q.data,mode:Q.mode,length:Q.length}})}function T(J,re){switch(re){case r.NUMERIC:return o.getBitsLength(J);case r.ALPHANUMERIC:return a.getBitsLength(J);case r.KANJI:return l.getBitsLength(J);case r.BYTE:return u.getBitsLength(J)}}function P(J){return J.reduce(function(re,W){const z=re.length-1>=0?re[re.length-1]:null;return z&&z.mode===W.mode?(re[re.length-1].data+=W.data,re):(re.push(W),re)},[])}function L(J){const re=[];for(let W=0;W<J.length;W++){const z=J[W];switch(z.mode){case r.NUMERIC:re.push([z,{data:z.data,mode:r.ALPHANUMERIC,length:z.length},{data:z.data,mode:r.BYTE,length:z.length}]);break;case r.ALPHANUMERIC:re.push([z,{data:z.data,mode:r.BYTE,length:z.length}]);break;case r.KANJI:re.push([z,{data:z.data,mode:r.BYTE,length:b(z.data)}]);break;case r.BYTE:re.push([{data:z.data,mode:r.BYTE,length:b(z.data)}])}}return re}function F(J,re){const W={},z={start:{}};let fe=["start"];for(let Y=0;Y<J.length;Y++){const Q=J[Y],ne=[];for(let $=0;$<Q.length;$++){const ae=Q[$],ie=""+Y+$;ne.push(ie),W[ie]={node:ae,lastCount:0},z[ie]={};for(let N=0;N<fe.length;N++){const M=fe[N];W[M]&&W[M].node.mode===ae.mode?(z[M][ie]=T(W[M].lastCount+ae.length,ae.mode)-T(W[M].lastCount,ae.mode),W[M].lastCount+=ae.length):(W[M]&&(W[M].lastCount=ae.length),z[M][ie]=T(ae.length,ae.mode)+4+r.getCharCountIndicator(ae.mode,re))}}fe=ne}for(let Y=0;Y<fe.length;Y++)z[fe[Y]].end=0;return{map:z,table:W}}function ee(J,re){let W;const z=r.getBestModeForData(J);if(W=r.from(re,z),W!==r.BYTE&&W.bit<z.bit)throw new Error('"'+J+'" cannot be encoded with mode '+r.toString(W)+`.
 Suggested mode is: `+r.toString(z));switch(W===r.KANJI&&!d.isKanjiModeEnabled()&&(W=r.BYTE),W){case r.NUMERIC:return new o(J);case r.ALPHANUMERIC:return new a(J);case r.KANJI:return new l(J);case r.BYTE:return new u(J)}}e.fromArray=function(re){return re.reduce(function(W,z){return typeof z=="string"?W.push(ee(z,null)):z.data&&W.push(ee(z.data,z.mode)),W},[])},e.fromString=function(re,W){const z=_(re,d.isKanjiModeEnabled()),fe=L(z),Y=F(fe,W),Q=y.find_path(Y.map,"start","end"),ne=[];for(let $=1;$<Q.length-1;$++)ne.push(Y.table[Q[$]].node);return e.fromArray(P(ne))},e.rawSplit=function(re){return e.fromArray(_(re,d.isKanjiModeEnabled()))}})(ri)),ri}var na;function Ec(){if(na)return Vr;na=1;const e=_t(),r=Ei(),o=ac(),a=sc(),u=uc(),l=cc(),p=lc(),d=Oa(),y=hc(),b=pc(),m=gc(),_=Et(),T=_c();function P(Y,Q){const ne=Y.size,$=l.getPositions(Q);for(let ae=0;ae<$.length;ae++){const ie=$[ae][0],N=$[ae][1];for(let M=-1;M<=7;M++)if(!(ie+M<=-1||ne<=ie+M))for(let oe=-1;oe<=7;oe++)N+oe<=-1||ne<=N+oe||(M>=0&&M<=6&&(oe===0||oe===6)||oe>=0&&oe<=6&&(M===0||M===6)||M>=2&&M<=4&&oe>=2&&oe<=4?Y.set(ie+M,N+oe,!0,!0):Y.set(ie+M,N+oe,!1,!0))}}function L(Y){const Q=Y.size;for(let ne=8;ne<Q-8;ne++){const $=ne%2===0;Y.set(ne,6,$,!0),Y.set(6,ne,$,!0)}}function F(Y,Q){const ne=u.getPositions(Q);for(let $=0;$<ne.length;$++){const ae=ne[$][0],ie=ne[$][1];for(let N=-2;N<=2;N++)for(let M=-2;M<=2;M++)N===-2||N===2||M===-2||M===2||N===0&&M===0?Y.set(ae+N,ie+M,!0,!0):Y.set(ae+N,ie+M,!1,!0)}}function ee(Y,Q){const ne=Y.size,$=b.getEncodedBits(Q);let ae,ie,N;for(let M=0;M<18;M++)ae=Math.floor(M/3),ie=M%3+ne-8-3,N=($>>M&1)===1,Y.set(ae,ie,N,!0),Y.set(ie,ae,N,!0)}function J(Y,Q,ne){const $=Y.size,ae=m.getEncodedBits(Q,ne);let ie,N;for(ie=0;ie<15;ie++)N=(ae>>ie&1)===1,ie<6?Y.set(ie,8,N,!0):ie<8?Y.set(ie+1,8,N,!0):Y.set($-15+ie,8,N,!0),ie<8?Y.set(8,$-ie-1,N,!0):ie<9?Y.set(8,15-ie-1+1,N,!0):Y.set(8,15-ie-1,N,!0);Y.set($-8,8,1,!0)}function re(Y,Q){const ne=Y.size;let $=-1,ae=ne-1,ie=7,N=0;for(let M=ne-1;M>0;M-=2)for(M===6&&M--;;){for(let oe=0;oe<2;oe++)if(!Y.isReserved(ae,M-oe)){let me=!1;N<Q.length&&(me=(Q[N]>>>ie&1)===1),Y.set(ae,M-oe,me),ie--,ie===-1&&(N++,ie=7)}if(ae+=$,ae<0||ne<=ae){ae-=$,$=-$;break}}}function W(Y,Q,ne){const $=new o;ne.forEach(function(oe){$.put(oe.mode.bit,4),$.put(oe.getLength(),_.getCharCountIndicator(oe.mode,Y)),oe.write($)});const ae=e.getSymbolTotalCodewords(Y),ie=d.getTotalCodewordsCount(Y,Q),N=(ae-ie)*8;for($.getLengthInBits()+4<=N&&$.put(0,4);$.getLengthInBits()%8!==0;)$.putBit(0);const M=(N-$.getLengthInBits())/8;for(let oe=0;oe<M;oe++)$.put(oe%2?17:236,8);return z($,Y,Q)}function z(Y,Q,ne){const $=e.getSymbolTotalCodewords(Q),ae=d.getTotalCodewordsCount(Q,ne),ie=$-ae,N=d.getBlocksCount(Q,ne),M=$%N,oe=N-M,me=Math.floor($/N),Oe=Math.floor(ie/N),He=Oe+1,Ne=me-Oe,We=new y(Ne);let ye=0;const Te=new Array(N),cn=new Array(N);let Ke=0;const ln=new Uint8Array(Y.buffer);for(let Z=0;Z<N;Z++){const xt=Z<oe?Oe:He;Te[Z]=ln.slice(ye,ye+xt),cn[Z]=We.encode(Te[Z]),ye+=xt,Ke=Math.max(Ke,xt)}const $e=new Uint8Array($);let Ge=0,Re,qe;for(Re=0;Re<Ke;Re++)for(qe=0;qe<N;qe++)Re<Te[qe].length&&($e[Ge++]=Te[qe][Re]);for(Re=0;Re<Ne;Re++)for(qe=0;qe<N;qe++)$e[Ge++]=cn[qe][Re];return $e}function fe(Y,Q,ne,$){let ae;if(Array.isArray(Y))ae=T.fromArray(Y);else if(typeof Y=="string"){let me=Q;if(!me){const Oe=T.rawSplit(Y);me=b.getBestVersionForData(Oe,ne)}ae=T.fromString(Y,me||40)}else throw new Error("Invalid data");const ie=b.getBestVersionForData(ae,ne);if(!ie)throw new Error("The amount of data is too big to be stored in a QR Code");if(!Q)Q=ie;else if(Q<ie)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ie+`.
`);const N=W(Q,ne,ae),M=e.getSymbolSize(Q),oe=new a(M);return P(oe,Q),L(oe),F(oe,Q),J(oe,ne,0),Q>=7&&ee(oe,Q),re(oe,N),isNaN($)&&($=p.getBestMask(oe,J.bind(null,oe,ne))),p.applyMask($,oe),J(oe,ne,$),{modules:oe,version:Q,errorCorrectionLevel:ne,maskPattern:$,segments:ae}}return Vr.create=function(Q,ne){if(typeof Q>"u"||Q==="")throw new Error("No input text");let $=r.M,ae,ie;return typeof ne<"u"&&($=r.from(ne.errorCorrectionLevel,r.M),ae=b.from(ne.version),ie=p.from(ne.maskPattern),ne.toSJISFunc&&e.setToSJISFunction(ne.toSJISFunc)),fe(Q,ae,$,ie)},Vr}var ci={},li={},ra;function Ba(){return ra||(ra=1,(function(e){function r(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let a=o.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+o);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(l){return[l,l]}))),a.length===6&&a.push("F","F");const u=parseInt(a.join(""),16);return{r:u>>24&255,g:u>>16&255,b:u>>8&255,a:u&255,hex:"#"+a.slice(0,6).join("")}}e.getOptions=function(a){a||(a={}),a.color||(a.color={});const u=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,l=a.width&&a.width>=21?a.width:void 0,p=a.scale||4;return{width:l,scale:l?4:p,margin:u,color:{dark:r(a.color.dark||"#000000ff"),light:r(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},e.getScale=function(a,u){return u.width&&u.width>=a+u.margin*2?u.width/(a+u.margin*2):u.scale},e.getImageWidth=function(a,u){const l=e.getScale(a,u);return Math.floor((a+u.margin*2)*l)},e.qrToImageData=function(a,u,l){const p=u.modules.size,d=u.modules.data,y=e.getScale(p,l),b=Math.floor((p+l.margin*2)*y),m=l.margin*y,_=[l.color.light,l.color.dark];for(let T=0;T<b;T++)for(let P=0;P<b;P++){let L=(T*b+P)*4,F=l.color.light;if(T>=m&&P>=m&&T<b-m&&P<b-m){const ee=Math.floor((T-m)/y),J=Math.floor((P-m)/y);F=_[d[ee*p+J]?1:0]}a[L++]=F.r,a[L++]=F.g,a[L++]=F.b,a[L]=F.a}}})(li)),li}var ia;function xc(){return ia||(ia=1,(function(e){const r=Ba();function o(u,l,p){u.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=p,l.width=p,l.style.height=p+"px",l.style.width=p+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(l,p,d){let y=d,b=p;typeof y>"u"&&(!p||!p.getContext)&&(y=p,p=void 0),p||(b=a()),y=r.getOptions(y);const m=r.getImageWidth(l.modules.size,y),_=b.getContext("2d"),T=_.createImageData(m,m);return r.qrToImageData(T.data,l,y),o(_,b,m),_.putImageData(T,0,0),b},e.renderToDataURL=function(l,p,d){let y=d;typeof y>"u"&&(!p||!p.getContext)&&(y=p,p=void 0),y||(y={});const b=e.render(l,p,y),m=y.type||"image/png",_=y.rendererOpts||{};return b.toDataURL(m,_.quality)}})(ci)),ci}var fi={},oa;function Tc(){if(oa)return fi;oa=1;const e=Ba();function r(u,l){const p=u.a/255,d=l+'="'+u.hex+'"';return p<1?d+" "+l+'-opacity="'+p.toFixed(2).slice(1)+'"':d}function o(u,l,p){let d=u+l;return typeof p<"u"&&(d+=" "+p),d}function a(u,l,p){let d="",y=0,b=!1,m=0;for(let _=0;_<u.length;_++){const T=Math.floor(_%l),P=Math.floor(_/l);!T&&!b&&(b=!0),u[_]?(m++,_>0&&T>0&&u[_-1]||(d+=b?o("M",T+p,.5+P+p):o("m",y,0),y=0,b=!1),T+1<l&&u[_+1]||(d+=o("h",m),m=0)):y++}return d}return fi.render=function(l,p,d){const y=e.getOptions(p),b=l.modules.size,m=l.modules.data,_=b+y.margin*2,T=y.color.light.a?"<path "+r(y.color.light,"fill")+' d="M0 0h'+_+"v"+_+'H0z"/>':"",P="<path "+r(y.color.dark,"stroke")+' d="'+a(m,b,y.margin)+'"/>',L='viewBox="0 0 '+_+" "+_+'"',ee='<svg xmlns="http://www.w3.org/2000/svg" '+(y.width?'width="'+y.width+'" height="'+y.width+'" ':"")+L+' shape-rendering="crispEdges">'+T+P+`</svg>
`;return typeof d=="function"&&d(null,ee),ee},fi}var aa;function kc(){if(aa)return Dt;aa=1;const e=oc(),r=Ec(),o=xc(),a=Tc();function u(l,p,d,y,b){const m=[].slice.call(arguments,1),_=m.length,T=typeof m[_-1]=="function";if(!T&&!e())throw new Error("Callback required as last argument");if(T){if(_<2)throw new Error("Too few arguments provided");_===2?(b=d,d=p,p=y=void 0):_===3&&(p.getContext&&typeof b>"u"?(b=y,y=void 0):(b=y,y=d,d=p,p=void 0))}else{if(_<1)throw new Error("Too few arguments provided");return _===1?(d=p,p=y=void 0):_===2&&!p.getContext&&(y=d,d=p,p=void 0),new Promise(function(P,L){try{const F=r.create(d,y);P(l(F,p,y))}catch(F){L(F)}})}try{const P=r.create(d,y);b(null,l(P,p,y))}catch(P){b(P)}}return Dt.create=r.create,Dt.toCanvas=u.bind(null,o.render),Dt.toDataURL=u.bind(null,o.renderToDataURL),Dt.toString=u.bind(null,function(l,p,d){return a.render(l,d)}),Dt}var Sc=kc();const Cc=mi(Sc);let di=sn(0),sa=sn(0),Nt=sn("size_init");const ua={test(e){console.log("test=",e)},console_log(...e){},console_error(...e){},title(e="-"){document.title=e},url_path(e){return""+e},redirect_pathname(e){const r=e.url_pathname,o=e.url_params;(function(){io(r+o,{replaceState:!0,invalidateAll:!0}).then(u=>{})})()},get_agent(){return navigator.userAgent},get_href(){return qn.url.href},get_host(){return qn.url.host},get_route(){let e=this;{let r=qn.route;return typeof r=="string"?r:typeof r=="object"?r.id:e.json_to_string(r)}},get_params(){return qn.url.search},search_param(e){let r=this;return r.search_href_param(r.get_params(),e)},search_href_param(e,r){let o=this,a="";e?a=e:a=o.get_href();let u=new RegExp("([?]|&|#)"+r+"=([^&|^#]*)(&|$|#)"),l=a.match(u);if(l)try{return decodeURIComponent(l[2])}catch{return l[2]}else return""},js_rand(e,r){return Math.floor(Math.random()*(r-e+1)+e)},set_local_data(e,r){return e=this.url_encode(e),localStorage.setItem(e,r),localStorage.getItem(e)},get_local_data(e){e=this.url_encode(e);{let o=localStorage.getItem(e);return o||""}},del_local_data(e){return e=this.url_encode(e),localStorage.removeItem(e)},clear_local_data(){return localStorage.clear()},get_time_s(){return Math.floor(new Date().getTime()/1e3)},get_time_ms(){return new Date().getTime()},get_time_date(e){return this.get_time_s_date(e,"")},get_time_s_date(e,r){let o;r?o=new Date(r*1):o=new Date;let a=o.getSeconds();a<10&&(a="0"+a);let u=o.getMinutes();u<10&&(u="0"+u);let l=o.getHours();l<10&&(l="0"+l);let p=o.getDate();p<10&&(p="0"+p);let d=o.getMonth()+1;d<10&&(d="0"+d);let y=o.getFullYear(),b=["week1","week2","week3","week4","week5","week6","week7"][o.getDay()];return e=e.replaceAll("Y",y),e=e.replaceAll("m",d),e=e.replaceAll("d",p),e=e.replaceAll("H",l),e=e.replaceAll("i",u),e=e.replaceAll("s",a),e=e.replaceAll("W",b),e},get_time_ms_format(e,r){return r?r=r*1:r=this.get_time_ms(),this.get_time_s_date(e,r)},format_date(e,r){r=r+"";let o=r.slice(0,4),a=r.slice(4,6),u=r.slice(6,8),l=r.slice(8,10),p=r.slice(10,12),d=r.slice(12,14),y=e;return y=y.replaceAll("Y",o),y=y.replaceAll("m",a),y=y.replaceAll("d",u),y=y.replaceAll("H",l),y=y.replaceAll("i",p),y=y.replaceAll("s",d),y},is_weixin(){return window.navigator.userAgent.toLowerCase().match(/micromessenger/i)==="micromessenger"},is_qq(){let e=window.navigator.userAgent.toLowerCase();return e.indexOf("qq")!==-1&&e.indexOf("qqbrowser")===-1},is_dingding(){return window.navigator.userAgent.toLowerCase().indexOf("dingtalk")!==-1},is_work_weixin(){return window.navigator.userAgent.toLowerCase().indexOf("wxwork")!==-1},is_feishu(){return window.navigator.userAgent.toLowerCase().indexOf("lark")!==-1},make_uid(e=""){let r=this,o=r.js_rand(1e10,999999999999),a=window.navigator.userAgent.toLowerCase(),u=(navigator.language?navigator.language:"-").toLowerCase(),l=r.get_time_date("YmdHisW"),p="";return p=window.location.href.toLowerCase(),r.md5(e+"@"+a+"@"+l+"@"+p+"@"+window.innerWidth+"@"+o+"@"+u)},get_theme_model(){return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"},md5(e){return e?gs(e):""},base64_encode(e){try{return btoa(e)}catch{return""}},base64_decode(e){try{return atob(e)}catch{return""}},url_encode(e){return encodeURIComponent(e)},url_decode(e){return decodeURIComponent(e)},text_encode(e){return this.string_to_unicode(e)},text_decode(e){return this.unicode_to_string(e)},string_to_unicode(e){let r="";for(let o=0;o<e.length;o++)r?r+=","+e.charCodeAt(o):r=e.charCodeAt(o);return r},unicode_to_string(e){try{if(e.indexOf(",")!==-1){const r=e.split(",");let o="";for(let a=0;a<r.length;a++)o+=String.fromCharCode(r[a]);return o}else return e}catch{return e}},hex16_to_string(e){return decodeURIComponent(e)},string_to_hex16(e){let r="";try{for(let o=0;o<e.length;o++)r?r+="&#x"+e.charCodeAt(o).toString(16)+";":r="&#x"+e.charCodeAt(o).toString(16)+";";return r}catch{return r}},string_to_json(e){let r,o=e;return typeof o=="string"?r=JSON.parse(o):r=o,r},json_to_string(e){let r,o=e;return typeof o=="object"?r=JSON.stringify(o):r=o,r},string_star(e,r,o){let a=e.length-r-o,u="";for(let l=0;l<a;l++)u+="*";return e.substring(0,r)+u+e.substring(e.length-o)},get_file_ext(e){let r=e.split("/");return r.length?r[r.length-1]:""},is_video(e){try{let r=e.substring(e.lastIndexOf("."));return r=r.toLowerCase(),[".mp4",".mkv",".avi",".flv",".mov",".m4v",".rmvb",".rm",".webm",".asf",".wmv"].includes(r)}catch{return!1}},is_audio(e){try{let r=e.substring(e.lastIndexOf("."));return r=r.toLowerCase(),[".mp3",".wav",".m3u",".m4a",".flac"].includes(r)}catch{return!1}},is_img(e){try{let r=e.substring(e.lastIndexOf("."));return r=r.toLowerCase(),[".gif",".png",".jpg",".jpeg",".webp",".ico",".jpg2",".tiff",".tif",".bmp",".svg"].includes(r)}catch{return!1}},is_mobile_screen(){let e=window.screen.width,r=window.screen.height,o=1280,a=280,u=40;return e<a||r<a||Math.abs(e-r)<u?-1:e>o||r>o?0:1},is_mobile_pwa(){return window.navigator?.standalone||document.referrer.includes("android-app://")},is_pc_pwa(){return["fullscreen","standalone","minimal-ui"].some(r=>window.matchMedia("(display-mode: "+r+")").matches)},html_to_plain_text(e){function r(a,u={img:" [ğŸï¸] ",audio:" [ğŸµ] ",video:" [ğŸ¬] "}){return a.replace(/<img[^>]*alt="([^"]*)"[^>]*>/gi,(l,p)=>" [ğŸï¸ "+p+"] "||u.img).replace(/<audio[^>]*title="([^"]*)"[^>]*>.*?<\/audio>/gi,(l,p)=>" [ğŸµ "+p+"] "||u.audio).replace(/<video[^>]*title="([^"]*)"[^>]*>.*?<\/video>/gi,(l,p)=>" [ğŸ¬ "+p+"] "||u.video)}e=r(e);let o=document.createElement("div");return o.innerHTML=e,o.innerText||o.textContent},js_call_py_or_go(e,r){let o=this;return new Promise(a=>{{o.notice("config Error"),a({state:0,msg:"configå‚æ•°é”™è¯¯",content:{key:e,body_dict:{}}});return}})},js_watch_window_display(){document.addEventListener("visibilitychange",()=>{})},is_wails(){return this.get_agent().toLowerCase().indexOf("wails")!==-1},is_gthon(){return this.get_agent().toLowerCase().indexOf("gthon")!==-1},get_lang_index(e){function r(a){return a.indexOf("zh")>=0?"zh":a.indexOf("en")>=0?"en":a.indexOf("jp")>=0?"jp":a.indexOf("fr")>=0?"fr":a.indexOf("de")>=0?"de":a.indexOf("ru")>=0?"ru":a.indexOf("es")>=0?"es":a.indexOf("ko")>=0?"ko":a.indexOf("vi")>=0?"vi":"en"}function o(a=""){return a.length>=2?a.toLowerCase():navigator.language.toLowerCase()}return r(o(e))},get_lang(){let e=this,r="",o=Io.lang_index;return o.length>=2&&(r=o),e.get_lang_index(r)},get_translate(e="",r=""){let o=this;if(!(r.length>=2)){let u=Io.lang_index;u.length>=2&&(r=u)}let a=o.get_lang_index(r);return Je[e]&&Je[e][a]?Je[e][a]:Je._null[a]?Je._null[a]:Je._null.en},open_url(e="",r="_self"){e.length>=1&&(r==="_self"?io(e,{replaceState:!0,invalidateAll:!0,noScroll:!0}).then(o=>{}):window.open(e,r))},open_url_no_cache(e="./?reload=no-cache",r="_self"){e.length>=1&&(r==="_self"?(history.replaceState(null,"",e),window.location.replace(e)):(history.replaceState(null,"",e),window.open(e,r)))},open_url_with_default_browser(e=""){let r=this,o="_blank";r.is_gthon()||r.is_wails()?r.js_call_py_or_go("open_url_with_default_browser",{lang:r.get_lang(),url:e,target:o}).then(a=>{}):r.open_url(e,o)},fresh_page(e=500){e<=0&&(e=0),setTimeout(function(){window.location.reload()},e)},get_app_uid(){let e=this,r=lo.app.app_class+"app_uid";return new Promise(o=>{ua.js_call_py_or_go("get_data",{data_key:r}).then(a=>{let u=a.content.data;u?(Ro.app_uid=u,o(u)):(u=e.md5(e.make_uid(lo.app.app_class)),ua.js_call_py_or_go("set_data",{data_key:r,data_value:u,data_timeout_s:10*365*24*3600}).then(l=>{Ro.app_uid=l.content.data,o(l.content.data)}))})})},ping(e){return new Promise((r,o)=>{ms(e,{},5).then(a=>{let u=0,l="";a.state!==404?(u=1,l="æ¥å£è®¿é—®æˆåŠŸï¼Œä½†statusçŠ¶æ€å¯èƒ½æ˜¯200ã€30Xã€‚"):(u=404,l="è¶…æ—¶æˆ–è€…æ¥å£æ— æ•ˆã€‚"),r({state:u,msg:l,result:a})}).catch(a=>{r({state:404,msg:"",result:{}})})})},set_db_data(e,r){let o=this;e=o.url_encode(e).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-");let a=[{only_key:e,any_type_value:r,update_time:o.get_time_s_date("YmdHis")*1,remark:"func-set"}];return new Promise(u=>{Mr.update_db_data(a).then(l=>{l.length>=1?o.get_db_data(e).then(p=>{u(p)}):u("")})})},get_db_data(e){return e=this.url_encode(e).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-"),new Promise(o=>{Mr.get_db_data(e).then(a=>{o(a?a.any_type_value:"")})})},del_db_data(e){return e=this.url_encode(e).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-"),new Promise(o=>{Mr.del_db_data(e).then(a=>{o(a)})})},converted_path(e=""){return e=e.replaceAll("\\","/"),e=e.replaceAll("//","/"),e.endsWith("/")&&(e=e.slice(0,-1)),e},filepath_to_filename(e=""){e=this.converted_path(e);let o=e.split("/");return e.length>0&&e?o[o.length-1]:""},replaceLast(e,r,o){const a=e.lastIndexOf(r);return a===-1?e:e.substring(0,a)+o+e.substring(a+r.length)},loading_show(e="",r="long"){let o=this;clearTimeout(xe(di)),r==="long"||(r<=400&&(r=400),Xe(di,setTimeout(function(){o.loading_hide()},r),!0)),Kn.loading_show="show",Kn.loading_msg=e},loading_hide(){clearTimeout(xe(di)),Kn.loading_show="hide",Kn.loading_msg=""},alert_msg(e,r){clearTimeout(xe(sa)),r==="long"||(r<=400&&(r=400),Xe(sa,setTimeout(function(){Ln.alert_show="hide",Ln.alert_msg=""},r),!0)),Ln.alert_show="show",Ln.alert_msg=e},notice(e="",r="",o=5e3,a="info"){switch(o<=400&&(o=400),a){case"info":Un.toaster.info({title:e,description:r,duration:o});break;case"warn":Un.toaster.warning({title:e,description:r,duration:o});break;case"error":Un.toaster.error({title:e,description:r,duration:o});break;default:Un.toaster.info({title:e,description:r,duration:o});break}},change_window_size(){let e=this;xe(Nt)==="size_init"?Xe(Nt,"size_full_height"):xe(Nt)==="size_full_height"?Xe(Nt,"size_full_window"):Xe(Nt,"size_init"),e.js_call_py_or_go("change_window_size",{size_tag:xe(Nt),width:0,height:0}).then(r=>{console.log("change_window_size=",r)})},open_url_404(e="./",r="",o=""){let a=this,u=e+"_404?error_msg="+encodeURIComponent(r)+"&error_url="+encodeURIComponent(o);a.open_url(u,"_self")},url_timeout_encode(e,r){let o=this,a=e+"#@"+o.get_time_s()+"#@"+r;return encodeURIComponent(o.string_to_unicode(a+"#@"+o.md5(a)+"#@"+o.js_rand(1e7,9999999999)))},url_timeout_decode(e,r){let o=this,a=o.get_time_s();try{let l=decodeURIComponent(o.unicode_to_string(r)).split("#@"),p=a-l[1]*1,d=l[0],y=l[2]*1,b=l[3],m=l[0]+"#@"+l[1]+"#@"+l[2];return e===d&&b===o.md5(m)?p<=y&&p>=0:!1}catch{return!1}},is_url(e=""){try{return new URL(e),!0}catch{return!1}},watch_input_enter(e){e.addEventListener("compositionstart",function(r){Fe.input_doing=-1},!1),e.addEventListener("input",function(r){Fe.input_doing===-1?Fe.input_doing=0:Fe.input_doing===1||Fe.input_doing===2?Fe.input_doing=1:Fe.input_doing=0},!1),e.addEventListener("compositionend",function(r){Fe.input_doing===0?Fe.input_doing=2:Fe.input_doing===1?Fe.input_doing=1:Fe.input_doing=0},!1)},make_qr_base64(e="",r=200,o=200){return new Promise(a=>{Cc.toDataURL(e.trim(),{width:r,height:o,margin:3,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"H",version:5,maskPattern:2,type:"image/png",quality:.92,rendererOpts:{quality:1}}).then(u=>{a(u)})})}},ca={browser_fn_state(){return!(navigator.webdriver||!window.localStorage||!window.indexedDB)},screen_state(){{let e=window.innerWidth,r=window.innerHeight,o=window.screen.width,a=window.screen.height;return!(e<220||r<220||o<220||a<220)}}},rn={is_weixin(){return window.navigator.userAgent.toLowerCase().indexOf("micromessenger")!==-1},is_qq(){{let e=window.navigator.userAgent.toLowerCase();return e.indexOf("qq")!==-1&&e.indexOf("qqbrowser")===-1}},is_dingding(){return window.navigator.userAgent.toLowerCase().indexOf("dingtalk")!==-1},is_work_weixin(){return window.navigator.userAgent.toLowerCase().indexOf("wxwork")!==-1},is_feishu(){return window.navigator.userAgent.toLowerCase().indexOf("lark")!==-1}},sl=function(){return ca.browser_fn_state()&&ca.screen_state()},ul=function(){return!(rn.is_weixin()||rn.is_work_weixin()||rn.is_qq()||rn.is_feishu()||rn.is_dingding())};export{eu as A,pu as B,hu as C,Xc as D,Ft as E,va as F,jr as G,Yn as H,tl as I,vi as J,Yc as K,Qc as L,ku as M,qt as N,Jc as O,Wc as P,$c as Q,vu as R,el as S,on as T,rl as U,Vc as V,Fe as W,da as a,ul as b,lo as c,fa as d,Hc as e,ua as f,Fr as g,nl as h,Uc as i,ga as j,al as k,ol as l,Zc as m,il as n,Kn as o,Un as p,Ln as q,sl as r,Io as s,zc as t,Pe as u,tu as v,yi as w,bt as x,wt as y,Gc as z};
