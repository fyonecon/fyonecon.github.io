import{o as z,q as ee,I as J,v as w,y as k,A as D,B as Y,l as x,J as re,K as ae,L as B,x as L,z as b,C as K,M as fe,N as U,O as ne,P as m,Q as q,R as ie,T as le,U as se,V as $,W as ue,X as oe,Y as te,Z as X,_ as de,$ as P,a0 as Q,a1 as F,G as ve,a2 as ce,a3 as pe,a4 as _e,w as W,t as he,a5 as ge,a6 as Ee,a7 as me,a8 as Te,a9 as y,aa as we}from"./DDM-VYuv.js";function Re(r,n){return n}function Ae(r,n,i){for(var t=[],g=n.length,u,s=n.length,d=0;d<g;d++){let v=n[d];Q(v,()=>{if(u){if(u.pending.delete(v),u.done.add(v),u.pending.size===0){var c=r.outrogroups;V($(u.done)),c.delete(u),c.size===0&&(r.outrogroups=null)}}else s-=1},!1)}if(s===0){var a=t.length===0&&i!==null;if(a){var o=i,f=o.parentNode;pe(f),f.append(o),r.items.clear()}V(n,!a)}else u={pending:new Set(n),done:new Set},(r.outrogroups??=new Set).add(u)}function V(r,n=!0){for(var i=0;i<r.length;i++)_e(r[i],n)}var G;function Se(r,n,i,t,g,u=null){var s=r,d=new Map,a=(n&J)!==0;if(a){var o=r;s=w?k(D(o)):o.appendChild(z())}w&&Y();var f=null,v=le(()=>{var l=i();return se(l)?l:l==null?[]:$(l)}),c,_=!0;function A(){e.fallback=f,Ce(e,c,s,n,t),f!==null&&(c.length===0?(f.f&m)===0?P(f):(f.f^=m,H(f,null,s)):Q(f,()=>{f=null}))}var N=ee(()=>{c=x(v);var l=c.length;let R=!1;if(w){var S=re(s)===ae;S!==(l===0)&&(s=B(),k(s),L(!1),R=!0)}for(var E=new Set,C=ne,O=ie(),h=0;h<l;h+=1){w&&b.nodeType===K&&b.data===fe&&(s=b,R=!0,L(!1));var I=c[h],M=t(I,h),p=_?null:d.get(M);p?(p.v&&U(p.v,I),p.i&&U(p.i,h),O&&C.skipped_effects.delete(p.e)):(p=Ie(d,_?s:G??=z(),I,M,h,g,n,i),_||(p.e.f|=m),d.set(M,p)),E.add(M)}if(l===0&&u&&!f&&(_?f=q(()=>u(s)):(f=q(()=>u(G??=z())),f.f|=m)),w&&l>0&&k(B()),!_)if(O){for(const[Z,j]of d)E.has(Z)||C.skipped_effects.add(j.e);C.oncommit(A),C.ondiscard(()=>{})}else A();R&&L(!0),x(v)}),e={effect:N,items:d,outrogroups:null,fallback:f};_=!1,w&&(s=b)}function Ce(r,n,i,t,g){var u=(t&ce)!==0,s=n.length,d=r.items,a=r.effect.first,o,f=null,v,c=[],_=[],A,N,e,l;if(u)for(l=0;l<s;l+=1)A=n[l],N=g(A,l),e=d.get(N).e,(e.f&m)===0&&(e.nodes?.a?.measure(),(v??=new Set).add(e));for(l=0;l<s;l+=1){if(A=n[l],N=g(A,l),e=d.get(N).e,r.outrogroups!==null)for(const p of r.outrogroups)p.pending.delete(e),p.done.delete(e);if((e.f&m)!==0)if(e.f^=m,e===a)H(e,null,i);else{var R=f?f.next:a;e===r.effect.last&&(r.effect.last=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),T(r,f,e),T(r,e,R),H(e,R,i),f=e,c=[],_=[],a=f.next;continue}if((e.f&F)!==0&&(P(e),u&&(e.nodes?.a?.unfix(),(v??=new Set).delete(e))),e!==a){if(o!==void 0&&o.has(e)){if(c.length<_.length){var S=_[0],E;f=S.prev;var C=c[0],O=c[c.length-1];for(E=0;E<c.length;E+=1)H(c[E],S,i);for(E=0;E<_.length;E+=1)o.delete(_[E]);T(r,C.prev,O.next),T(r,f,C),T(r,O,S),a=S,f=O,l-=1,c=[],_=[]}else o.delete(e),H(e,a,i),T(r,e.prev,e.next),T(r,e,f===null?r.effect.first:f.next),T(r,f,e),f=e;continue}for(c=[],_=[];a!==null&&a!==e;)(o??=new Set).add(a),_.push(a),a=a.next;if(a===null)continue}(e.f&m)===0&&c.push(e),f=e,a=e.next}if(r.outrogroups!==null){for(const p of r.outrogroups)p.pending.size===0&&(V($(p.done)),r.outrogroups?.delete(p));r.outrogroups.size===0&&(r.outrogroups=null)}if(a!==null||o!==void 0){var h=[];if(o!==void 0)for(e of o)(e.f&F)===0&&h.push(e);for(;a!==null;)(a.f&F)===0&&a!==r.fallback&&h.push(a),a=a.next;var I=h.length;if(I>0){var M=(t&J)!==0&&s===0?i:null;if(u){for(l=0;l<I;l+=1)h[l].nodes?.a?.measure();for(l=0;l<I;l+=1)h[l].nodes?.a?.fix()}Ae(r,h,M)}}u&&ve(()=>{if(v!==void 0)for(e of v)e.nodes?.a?.apply()})}function Ie(r,n,i,t,g,u,s,d){var a=(s&ue)!==0?(s&oe)===0?te(i,!1,!1):X(i):null,o=(s&de)!==0?X(g):null;return{v:a,i:o,e:q(()=>(u(n,a??i,o??g,d),()=>{r.delete(t)}))}}function H(r,n,i){if(r.nodes)for(var t=r.nodes.start,g=r.nodes.end,u=n&&(n.f&m)===0?n.nodes.start:i;t!==null;){var s=W(t);if(u.before(t),t===g)return;t=s}}function T(r,n,i){n===null?r.effect.first=i:n.next=i,i===null?r.effect.last=n:i.prev=n}function Oe(r,n,i=!1,t=!1,g=!1){var u=r,s="";he(()=>{var d=ge;if(s===(s=n()??"")){w&&Y();return}if(d.nodes!==null&&(Ee(d.nodes.start,d.nodes.end),d.nodes=null),s!==""){if(w){b.data;for(var a=Y(),o=a;a!==null&&(a.nodeType!==K||a.data!=="");)o=a,a=W(a);if(a===null)throw me(),Te;y(b,o),u=k(a);return}var f=s+"";i?f=`<svg>${f}</svg>`:t&&(f=`<math>${f}</math>`);var v=we(f);if((i||t)&&(v=D(v)),y(D(v),v.lastChild),i||t)for(;D(v);)u.before(D(v));else u.before(v)}})}export{Se as e,Oe as h,Re as i};
